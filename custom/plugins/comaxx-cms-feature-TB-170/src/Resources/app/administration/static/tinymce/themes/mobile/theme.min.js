!function(){"use strict";var n=function(){return(n=Object.assign||function(n){for(var e,t=1,o=arguments.length;t<o;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}).apply(this,arguments)};function e(n,e){var t={};for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&0>e.indexOf(r)&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)0>e.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t}function t(n,e,t){if(t||2==arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||((o=o||Array.prototype.slice.call(e,0,r))[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}function o(n){return function(e){var t;return t=typeof e,(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n}}function r(n){return function(e){return typeof e===n}}function i(n){return function(e){return n===e}}function u(n){return!(null==n)}function c(){}function a(n,e){return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return n(e.apply(null,t))}}function s(n){return function(){return n}}function f(n){return n}function l(n,e){return n===e}var d=o("string"),m=o("object"),g=o("array"),p=i(null),h=r("boolean"),v=i(void 0),b=r("function"),y=r("number");function x(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var r=e.concat(t);return n.apply(null,r)}}function S(n){return function(e){return!n(e)}}function O(n){return function(){throw Error(n)}}function w(n){return n()}function k(){return E}var T=s(!1),C=s(!0),E={fold:function(n,e){return n()},isSome:T,isNone:C,getOr:f,getOrThunk:D,getOrDie:function(n){throw Error(n||"error: getOrDie called on none.")},getOrNull:s(null),getOrUndefined:s(void 0),or:f,orThunk:D,map:k,each:c,bind:k,exists:T,forall:C,filter:function(){return E},toArray:function(){return[]},toString:s("none()")};function D(n){return n()}function M(n){var e,t=!1;return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];return t||(t=!0,e=n.apply(null,o)),e}}function _(n,e){return -1<nm.call(n,e)}function R(n,e){for(var t=0,o=n.length;t<o;t++)if(e(n[t],t))return 1}function F(n,e){for(var t=n.length,o=Array(t),r=0;r<t;r++){var i=n[r];o[r]=e(i,r)}return o}function I(n,e){for(var t=0,o=n.length;t<o;t++)e(n[t],t)}function V(n,e){for(var t=[],o=0,r=n.length;o<r;o++){var i=n[o];e(i,o)&&t.push(i)}return t}function B(n,e,t){return function(n){for(var o,r=n.length-1;0<=r;r--)o=n[r],t=e(t,o,r)}(n),t}function A(n,e,t){return I(n,function(n,o){t=e(t,n,o)}),t}function N(n,e){return function(n,e,t){for(var o=0,r=n.length;o<r;o++){var i=n[o];if(e(i,o))return nl.some(i);if(t(i,o))break}return nl.none()}(n,e,T)}function H(n,e){for(var t=0,o=n.length;t<o;t++)if(e(n[t],t))return nl.some(t);return nl.none()}function P(n){for(var e=[],t=0,o=n.length;t<o;++t){if(!g(n[t]))throw Error("Arr.flatten item "+t+" was not an array, input: "+n);ng.apply(e,n[t])}return e}function z(n,e){return P(F(n,e))}function j(n,e){for(var t=0,o=n.length;t<o;++t)if(!0!==e(n[t],t))return!1;return!0}function L(n){var e=nd.call(n,0);return e.reverse(),e}function $(n,e){return V(n,function(n){return!_(e,n)})}function G(n){return[n]}function U(n,e){for(var t=0;t<n.length;t++){var o=e(n[t],t);if(o.isSome())return o}return nl.none()}function W(n,e){var t=String(e).toLowerCase();return N(n,function(n){return n.search(t)})}function X(n,e){return -1!==n.indexOf(e)}function q(n){return function(e){return X(e,n)}}function Y(n){return window.matchMedia(n).matches}function K(n){return s("alloy."+n)}function J(n,e){n3(n,n.element,e,{})}function Q(n,e,t){n3(n,n.element,e,t)}function Z(n){J(n,nq())}function nn(n,e){var t=n.dom;if(1!==t.nodeType)return!1;if(void 0!==t.matches)return t.matches(e);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(e);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(e);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(e);throw Error("Browser lacks native selectors")}function ne(n){return 1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount}function nt(n,e){var t=void 0===e?document:e.dom;return ne(t)?[]:F(t.querySelectorAll(n),n5.fromDom)}function no(n,e){var t=void 0===e?document:e.dom;return ne(t)?nl.none():nl.from(t.querySelector(n)).map(n5.fromDom)}function nr(n,e){return n.dom===e.dom}function ni(){return np(0,0)}function nu(n){function e(n){return function(){return t===n}}var t=n.current;return{current:t,version:n.version,isEdge:e("Edge"),isChrome:e("Chrome"),isIE:e("IE"),isOpera:e("Opera"),isFirefox:e(nx),isSafari:e("Safari")}}function nc(n){function e(n){return function(){return t===n}}var t=n.current;return{current:t,version:n.version,isWindows:e(nO),isiOS:e("iOS"),isAndroid:e(nw),isOSX:e("OSX"),isLinux:e("Linux"),isSolaris:e(nk),isFreeBSD:e(nT),isChromeOS:e(nC)}}function na(n){if(null==n)throw Error("Node cannot be null or undefined");return{dom:n}}var ns,nf=function(n){function e(){return r}function t(e){return e(n)}var o=s(n),r={fold:function(e,t){return t(n)},isSome:C,isNone:T,getOr:o,getOrThunk:o,getOrDie:o,getOrNull:o,getOrUndefined:o,or:e,orThunk:e,map:function(e){return nf(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?r:E},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return r},nl={some:nf,none:k,from:function(n){return null==n?E:nf(n)}},nd=Array.prototype.slice,nm=Array.prototype.indexOf,ng=Array.prototype.push,np=function(n,e){return{major:n,minor:e}},nh={nu:np,detect:function(n,e){var t,o,r=String(e).toLowerCase();return 0===n.length?ni():(o=function(n,e){for(var t=0;t<n.length;t++){var o=n[t];if(o.test(e))return o}}(n,t=r))?np(i(1),i(2)):{major:0,minor:0};function i(n){return Number(t.replace(o,"$"+n))}},unknown:ni},nv=(ns=/^\s+|\s+$/g,function(n){return n.replace(ns,"")}),nb=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ny={browsers:s([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return X(n,"edge/")&&X(n,"chrome")&&X(n,"safari")&&X(n,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,nb],search:function(n){return X(n,"chrome")&&!X(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return X(n,"msie")||X(n,"trident")}},{name:"Opera",versionRegexes:[nb,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:q("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:q("firefox")},{name:"Safari",versionRegexes:[nb,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(X(n,"safari")||X(n,"mobile/"))&&X(n,"applewebkit")}}]),oses:s([{name:"Windows",search:q("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return X(n,"iphone")||X(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:q("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:q("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:q("linux"),versionRegexes:[]},{name:"Solaris",search:q("sunos"),versionRegexes:[]},{name:"FreeBSD",search:q("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:q("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},nx="Firefox",nS=function(){return nu({current:void 0,version:nh.unknown()})},nO=(s("Edge"),s("Chrome"),s("IE"),s("Opera"),s(nx),s("Safari"),"Windows"),nw="Android",nk="Solaris",nT="FreeBSD",nC="ChromeOS",nE=function(){return nc({current:void 0,version:nh.unknown()})},nD=(s(nO),s("iOS"),s(nw),s("Linux"),s("OSX"),s(nk),s(nT),s(nC),M(function(){var n,e,t,o,r,i,u,c,a,f,l,d,m;return n=navigator.userAgent,e=nl.from(navigator.userAgentData),f=ny.browsers(),l=ny.oses(),{browser:d=e.bind(function(n){return U(n.brands,function(n){var e=n.brand.toLowerCase();return N(f,function(n){var t;return e===(null===(t=n.brand)||void 0===t?void 0:t.toLowerCase())}).map(function(e){return{current:e.name,version:nh.nu(parseInt(n.version,10),0)}})})}).orThunk(function(){return W(f,n).map(function(e){var t=nh.detect(e.versionRegexes,n);return{current:e.name,version:t}})}).fold(nS,nu),os:m=W(l,n).map(function(e){var t=nh.detect(e.versionRegexes,n);return{current:e.name,version:t}}).fold(nE,nc),deviceType:(t=m.isiOS()&&!0===/ipad/i.test(n),o=m.isiOS()&&!t,i=(r=m.isiOS()||m.isAndroid())||Y("(pointer:coarse)"),u=t||!o&&r&&Y("(min-device-width:768px)"),c=o||r&&!u,a=d.isSafari()&&m.isiOS()&&!1===/safari/i.test(n),{isiPad:s(t),isiPhone:s(o),isTablet:s(u),isPhone:s(c),isTouch:s(i),isAndroid:m.isAndroid,isiOS:m.isiOS,isWebView:s(a),isDesktop:s(!c&&!u&&!a)})}})),nM=s("touchstart"),n_=s("touchmove"),nR=s("touchend"),nF=s("mousedown"),nI=s("mousemove"),nV=s("mouseup"),nB=s("mouseover"),nA=s("keydown"),nN=s("keyup"),nH=s("input"),nP=s("change"),nz=s("click"),nj=s("transitionend"),nL=s("selectstart"),n$={tap:K("tap")},nG=K("focus"),nU=K("blur.post"),nW=K("paste.post"),nX=K("receive"),nq=K("execute"),nY=K("focus.item"),nK=n$.tap,nJ=K("longpress"),nQ=K("system.init"),nZ=K("system.attached"),n0=K("system.detached"),n1=K("focusmanager.shifted"),n2=K("highlight"),n9=K("dehighlight"),n3=function(e,t,o,r){var i=n({target:t},r);e.getSystem().triggerEvent(o,t,i)},n5={fromHtml:function(n,e){var t=(e||document).createElement("div");if(t.innerHTML=n,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",n),Error("HTML must have a single root node");return na(t.childNodes[0])},fromTag:function(n,e){return na((e||document).createElement(n))},fromText:function(n,e){return na((e||document).createTextNode(n))},fromDom:na,fromPoint:function(n,e,t){return nl.from(n.dom.elementFromPoint(e,t)).map(na)}};function n4(n){return n.dom.nodeName.toLowerCase()}function n6(n){return function(e){return e.dom.nodeType===n}}function n8(n){return n5.fromDom(n.dom.ownerDocument)}function n7(n){return eR(n)?n:n8(n)}function en(n){return nl.from(n.dom.parentNode).map(n5.fromDom)}function ee(n,e){var t=n.dom.childNodes;return nl.from(t[e]).map(n5.fromDom)}function et(n,e){en(n).each(function(t){t.dom.insertBefore(e.dom,n.dom)})}function eo(n,e){ee(n,0).fold(function(){eV(n,e)},function(t){n.dom.insertBefore(e.dom,t.dom)})}function er(n,e){I(e,function(e){eV(n,e)})}function ei(n){n.dom.textContent="",I(eI(n),function(n){eB(n)})}function eu(n){return eF(n)&&u(n.dom.host)}function ec(){return ez(n5.fromDom(document))}function ea(n,e){eV(n.element,e.element)}function es(n){var e=en(n.element).bind(function(e){return n.getSystem().getByDom(e).toOptional()});ej(n),eB(n.element),n.getSystem().removeFromWorld(n),e.each(function(n){n.syncComponents()})}function ef(n,e){for(var t=eG(n),o=0,r=t.length;o<r;o++){var i=t[o];e(n[i],i)}}function el(n,e){return eW(n,function(n,t){return{k:t,v:e(n,t)}})}function ed(n,e){var t=[];return ef(n,function(n,o){t.push(e(n,o))}),t}function em(n,e){return eX(n,e)?nl.from(n[e]):nl.none()}function eg(n,e){return eX(n,e)&&void 0!==n[e]&&null!==n[e]}function ep(n,e,t){if(!(d(t)||h(t)||y(t)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",t,":: Element ",n),Error("Attribute value was not simple");n.setAttribute(e,t+"")}function eh(n,e,t){ep(n.dom,e,t)}function ev(n,e){var t=n.dom;ef(e,function(n,e){ep(t,e,n)})}function eb(n,e){var t=n.dom.getAttribute(e);return null===t?void 0:t}function ey(n,e){return nl.from(eb(n,e))}function ex(n,e){var t=n.dom;return!(!t||!t.hasAttribute)&&t.hasAttribute(e)}function eS(n,e){n.dom.removeAttribute(e)}function eO(n,e){var t=eb(n,e);return void 0===t||""===t?[]:t.split(" ")}function ew(n){return void 0!==n.dom.classList}function ek(n,e){var t;ew(n)?n.dom.classList.add(e):(t=eO(n,"class").concat([e]),eh(n,"class",t.join(" ")))}function eT(n,e){var t;ew(n)?n.dom.classList.remove(e):0<(t=V(eO(n,"class"),function(n){return n!==e})).length?eh(n,"class",t.join(" ")):eS(n,"class"),0===(ew(n)?n.dom.classList:eO(n,"class")).length&&eS(n,"class")}function eC(n,e){return ew(n)&&n.dom.classList.contains(e)}"undefined"!=typeof window||Function("return this;")();var eE,eD,eM=n6(1),e_=n6(3),eR=n6(9),eF=n6(11),eI=function(n){return F(n.dom.childNodes,n5.fromDom)},eV=function(n,e){n.dom.appendChild(e.dom)},eB=function(n){var e=n.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},eA=b(Element.prototype.attachShadow)&&b(Node.prototype.getRootNode),eN=s(eA),eH=eA?function(n){return n5.fromDom(n.dom.getRootNode())}:n7,eP=function(n){var e=e_(n)?n.dom.parentNode:n.dom;if(null==e||null===e.ownerDocument)return!1;var t=e.ownerDocument,o=eH(n5.fromDom(e));return(eu(o)?nl.some(o):nl.none()).fold(function(){return t.body.contains(e)},function(n){return eP(n5.fromDom(n.dom.host))})},ez=function(n){var e=n.dom.body;if(null==e)throw Error("Body is not available yet");return n5.fromDom(e)},ej=function(n){J(n,n0()),I(n.components(),ej)},eL=function(n){I(n.components(),eL),J(n,nZ())},e$=function(n,e,t){n.getSystem().addToWorld(e),t(n.element,e.element),eP(n.element)&&eL(e),n.syncComponents()},eG=Object.keys,eU=Object.hasOwnProperty,eW=function(n,e){var t={};return ef(n,function(n,o){var r=e(n,o);t[r.k]=r.v}),t},eX=function(n,e){return eU.call(n,e)},eq=Object.freeze({__proto__:null,toAlpha:function(n,e,t){var o,r;o=n.element,r=e.alpha,eT(o,e.omega),ek(o,r)},toOmega:function(n,e,t){var o,r;o=n.element,r=e.omega,eT(o,e.alpha),ek(o,r)},isAlpha:function(n,e,t){return eC(n.element,e.alpha)},isOmega:function(n,e,t){return eC(n.element,e.omega)},clear:function(n,e,t){eT(n.element,e.alpha),eT(n.element,e.omega)}}),eY=function(n){return{isValue:C,isError:T,getOr:s(n),getOrThunk:s(n),getOrDie:s(n),or:function(e){return eY(n)},orThunk:function(e){return eY(n)},fold:function(e,t){return t(n)},map:function(e){return eY(e(n))},mapError:function(e){return eY(n)},each:function(e){e(n)},bind:function(e){return e(n)},exists:function(e){return e(n)},forall:function(e){return e(n)},toOptional:function(){return nl.some(n)}}},eK=function(n){return{isValue:T,isError:C,getOr:f,getOrThunk:function(n){return n()},getOrDie:function(){return O(String(n))()},or:f,orThunk:function(n){return n()},fold:function(e,t){return e(n)},map:function(e){return eK(n)},mapError:function(e){return eK(e(n))},each:c,bind:function(e){return eK(n)},exists:T,forall:C,toOptional:nl.none}},eJ={value:eY,error:eK,fromOption:function(n,e){return n.fold(function(){return eK(e)},eY)}};function eQ(n,e,t){return n.stype===eE.Error?e(n.serror):t(n.svalue)}function eZ(n){return{stype:eE.Value,svalue:n}}function e0(n){return{stype:eE.Error,serror:n}}function e1(n,e,t,o){return{tag:"field",key:n,newKey:e,presence:t,prop:o}}function e2(n,e,t){switch(n.tag){case"field":return e(n.key,n.newKey,n.presence,n.prop);case"custom":return t(n.newKey,n.instantiator)}}function e9(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw Error("Can't merge zero objects");for(var o={},r=0;r<e.length;r++){var i,u=e[r];for(i in u)eX(u,i)&&(o[i]=n(o[i],u[i]))}return o}}function e3(){return{tag:"required",process:{}}}function e5(n){return{tag:"defaultedThunk",process:n}}function e4(){return{tag:"option",process:{}}}function e6(n){return{tag:"mergeWithThunk",process:n}}function e8(n){return m(n)&&100<eG(n).length?" removed due to size":JSON.stringify(n,null,2)}function e7(n,e){return ty([{path:n,getErrorInfo:e}])}function tn(n){return{extract:function(e,t){return tS(n(t),function(n){return e7(e,s(n))})},toString:s("val")}}function te(n,e,t,o){return o(em(n,e).getOrThunk(function(){return t(n)}))}function tt(n){var e=tE(n),t=B(n,function(n,e){return e2(e,function(e){var t;return tw(n,((t={})[e]=!0,t))},s(n))},{});return{extract:function(n,o){var r,i,a,s=V(h(o)?[]:eG((i=r={},a=function(n,e){i[e]=n},ef(o,function(n,e){(u(n,e)?a:c)(n,e)}),r)),function(n){return!eg(t,n)});return 0===s.length?e.extract(n,o):e7(n,function(){return"There are unsupported fields: ["+s.join(", ")+"] specified"})},toString:e.toString}}function to(n){return tn(function(e){return n(e).fold(ty,tb)})}function tr(n,e){var t;return t=function(e){return n(e).fold(e0,eZ)},{extract:function(n,o){var r;return tx((r=tn(t),tT(F(eG(o),function(e,t){return r.extract(n.concat(["["+t+"]"]),e)}))),function(t){return tE(F(t,function(n){return e1(n,n,e3(),e)})).extract(n,o)})},toString:function(){return"setOf("+e.toString()+")"}}}function ti(n,e,t){return tv(tO(e.extract([n],t),function(n){return{input:t,errors:n}}))}function tu(n){return n.fold(function(n){throw Error(t_(n))},f)}function tc(n,e,t){return tu(ti(n,e,t))}function ta(n,e){var t;return t=el(e,tE),{extract:function(e,o){return em(o,n).fold(function(){return e7(e,function(){return'Choice schema did not contain choice key: "'+n+'"'})},function(n){return em(t,n).fold(function(){return e7(e,function(){return'The chosen schema: "'+n+'" did not exist in branches: '+e8(t)})},function(t){return t.extract(e.concat(["branch: "+n]),o)})})},toString:function(){return"chooseOn("+n+"). Possible values: "+eG(t)}}}function ts(n){return tR(n,n,e3(),tD())}function tf(n,e){return tR(n,n,e3(),e)}function tl(n,e){return tR(n,n,e3(),tE(e))}function td(n){return tR(n,n,e4(),tD())}function tm(n,e){return tR(n,n,e4(),e)}function tg(n,e){return tR(n,n,e5(s(e)),tD())}function tp(n,e,t){return tR(n,n,e5(s(e)),t)}function th(n){if(!g(n))throw Error("cases must be an array");if(0===n.length)throw Error("there must be at least one case");var e=[],t={};return I(n,function(o,r){var i=eG(o);if(1!==i.length)throw Error("one and only one name per case");var u=i[0],c=o[u];if(void 0!==t[u])throw Error("duplicate key detected:"+u);if("cata"===u)throw Error("cannot have a case named cata (sorry)");if(!g(c))throw Error("case arguments must be an array");e.push(u),t[u]=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var i=t.length;if(i!==c.length)throw Error("Wrong number of arguments to case "+u+". Expected "+c.length+" ("+c+"), got "+i);return{fold:function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];if(e.length!==n.length)throw Error("Wrong number of arguments to fold. Expected "+n.length+", got "+e.length);return e[r].apply(null,t)},match:function(n){var o=eG(n);if(e.length!==o.length)throw Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+o.join(","));if(!j(e,function(n){return _(o,n)}))throw Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+e.join(", "));return n[u].apply(null,t)},log:function(n){console.log(n,{constructors:e,constructor:u,params:t})}}}}),t}(eD=eE={})[eD.Error=0]="Error",eD[eD.Value=1]="Value";var tv=function(n){return eQ(n,eJ.error,eJ.value)},tb=eZ,ty=e0,tx=function(n,e){return n.stype===eE.Value?e(n.svalue):n},tS=function(n,e){return n.stype===eE.Error?e(n.serror):n},tO=function(n,e){return n.stype===eE.Error?{stype:eE.Error,serror:e(n.serror)}:n},tw=e9(function(n,e){return m(n)&&m(e)?tw(n,e):e}),tk=e9(function(n,e){return e}),tT=function(n){var e,t,o=(e=[],t=[],I(n,function(n){eQ(n,function(n){return t.push(n)},function(n){return e.push(n)})}),{values:e,errors:t});return 0<o.errors.length?a(ty,P)(o.errors):tb(o.values)},tC=tn(tb),tE=function(n){return{extract:function(e,t){for(var o={},r=[],i=0;i<n.length;i++)e2(n[i],function(n,i,u,c){eQ(function(n,e,t,o,r){var i;function u(n){return r.extract(e.concat([o]),n)}function c(n){return n.fold(function(){return tb(nl.none())},function(n){var t,i;return t=r.extract(e.concat([o]),n),i=nl.some,t.stype===eE.Value?{stype:eE.Value,svalue:i(t.svalue)}:t})}switch(n.tag){case"required":return em(t,o).fold(function(){return e7(e,function(){return'Could not find valid *required* value for "'+o+'" in '+e8(t)})},u);case"defaultedThunk":return te(t,o,n.process,u);case"option":return c(em(t,o));case"defaultedOptionThunk":return i=n.process,c(em(t,o).map(function(n){return!0===n?i(t):n}));case"mergeWithThunk":return te(t,o,s({}),function(e){return u(tw(n.process(t),e))})}}(u,e,t,n,c),function(n){r.push.apply(r,n)},function(n){o[i]=n})},function(n,e){o[n]=e(t)});return 0<r.length?ty(r):tb(o)},toString:function(){return"obj{\n"+F(n,function(n){return e2(n,function(n,e,t,o){return n+" -> "+o.toString()},function(n,e){return"state("+n+")"})}).join("\n")+"}"}}},tD=s(tC),tM=tn(function(n){var e=typeof n;return b(n)?tb(n):ty("Expected type: function but got: "+e)}),t_=function(n){var e;return"Errors: \n"+F(10<(e=n.errors).length?e.slice(0,10).concat([{path:[],getErrorInfo:s("... (only showing first ten failures)")}]):e,function(n){return"Failed path: ("+n.path.join(" > ")+")\n"+n.getErrorInfo()}).join("\n")+"\n\nInput object: "+e8(n.input)},tR=e1,tF=function(n,e){return{tag:"custom",newKey:n,instantiator:e}},tI=[ts("alpha"),ts("omega")];function tV(n,e){var t;return(t={})[n]=e,t}function tB(n){var e;return e={},I(n,function(n){e[n.key]=n.value}),e}function tA(n,e,t){return void 0===t&&(t=l),n.exists(function(n){return t(n,e)})}function tN(n){for(var e=[],t=function(n){e.push(n)},o=0;o<n.length;o++)n[o].each(t);return e}function tH(n,e){return nr(n.element,e.event.target)}function tP(e){if(!eg(e,"can")&&!eg(e,"abort")&&!eg(e,"run"))throw Error("EventHandler defined by: "+JSON.stringify(e,null,2)+" does not have can, abort, or run!");return n(n({},t6),e)}function tz(n,e){return{key:n,value:tP({abort:e})}}function tj(n,e){return{key:n,value:tP({run:e})}}function tL(n,e,t){return{key:n,value:tP({run:function(n,o){e.apply(void 0,[n,o].concat(t))}})}}function t$(n){return function(e){return{key:n,value:tP({run:function(n,t){tH(n,t)&&e(n,t)}})}}}function tG(n,e,t){var o=e.partUids[t];return tj(n,function(e,t){e.getSystem().getByUid(o).each(function(e){var o=e.element;e.getSystem().triggerEvent(n,o,t.event)})})}function tU(n){return tj(n,function(n,e){e.cut()})}function tW(n,e){var t=n.toString(),o=t.indexOf(")")+1,r=t.indexOf("("),i=t.substring(r+1,o-1).split(/,\s*/);return n.toFunctionAnnotation=function(){return{name:e,parameters:ot(i)}},n}function tX(n){return{classes:v(n.classes)?[]:n.classes,attributes:v(n.attributes)?{}:n.attributes,styles:v(n.styles)?{}:n.styles}}function tq(n,e,t){return on(function(o,r){t(o,n,e)})}function tY(n){return{key:n,value:void 0}}function tK(n){var e,t=tc("Creating behaviour: "+n.name,ou,n),o=t.fields,r=t.name,i=t.active,u=t.apis,c=t.extra,a=t.state;return oo(tt(o),(e=[tm("config",tt(o))],tm(r,tE(e))),r,i,u,c,a)}function tJ(n){var e=n;return{get:function(){return e},set:function(n){e=n}}}function tQ(n){return n.dom.focus()}function tZ(n){return n.dom.blur()}function t0(n){return void 0===n&&(n=n5.fromDom(document)),nl.from(n.dom.activeElement).map(n5.fromDom)}function t1(n){return t0(eH(n)).filter(function(e){return n.dom.contains(e.dom)})}function t2(n){return n.dom.innerHTML}function t9(n){if(eu(n))return"#shadow-root";var e=n5.fromDom(n.dom.cloneNode(!1)),t=n5.fromTag("div");return eV(t,n5.fromDom(e.dom.cloneNode(!0))),t2(t)}th([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var t3,t5,t4,t6={can:C,abort:T,run:c},t8=t$(nZ()),t7=t$(n0()),on=t$(nQ()),oe=(t3=nq(),function(n){return tj(t3,n)}),ot=function(n){return F(n,function(n){var e;return e=n.length-2,n.length>=2&&"/*"===n.substr(e,e+2)?n.substring(0,n.length-2):n})},oo=function(e,t,o,r,i,u,c){function a(n){return eg(n,o)?n[o]():nl.none()}var f=el(i,function(n,e){var t,r,i,u,c,a,f,l;return i=function(n){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var u=[n].concat(e);return n.config({name:s(o)}).fold(function(){throw Error("We could not find any behaviour configuration for: "+o+". Using API: "+r)},function(e){var o=Array.prototype.slice.call(u,1);return t.apply(void 0,[n,e.config,e.state].concat(o))})},u=r=e,a=(c=(t=n).toString()).indexOf(")")+1,f=c.indexOf("("),l=c.substring(f+1,a-1).split(/,\s*/),i.toFunctionAnnotation=function(){return{name:u,parameters:ot(l.slice(0,1).concat(l.slice(3)))}},i}),l=el(u,tW),d=n(n(n({},l),f),{revoke:x(tY,o),config:function(n){var t=tc(o+"-config",e,n);return{key:o,value:{config:t,me:d,configAsRaw:M(function(){return tc(o+"-config",e,n)}),initialConfig:n,state:c}}},schema:s(t),exhibit:function(n,e){var t,o,i;return t=a(n),o=em(r,"exhibit"),(t.isSome()&&o.isSome()?nl.some((i=t.getOrDie(),o.getOrDie()(e,i.config,i.state))):nl.none()).getOrThunk(function(){return tX({})})},name:s(o),handlers:function(n){return a(n).map(function(n){return em(r,"events").getOr(function(){return{}})(n.config,n.state)}).getOr({})}});return d},or={init:function(){return oi({readState:s("No State required")})}},oi=function(n){return n},ou=tt([ts("fields"),ts("name"),tg("active",{}),tg("apis",{}),tg("state",or),tg("extra",{})]),oc=tt([ts("branchKey"),ts("branches"),ts("name"),tg("active",{}),tg("apis",{}),tg("state",or),tg("extra",{})]),oa=s(void 0),os=tK({fields:tI,name:"swapping",apis:eq}),of=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ol=tinymce.util.Tools.resolve("tinymce.ThemeManager"),od=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],om=["undo","bold","italic","link","image","bullist","styleselect"],og="formatChanged",op="orientationChanged",oh="dropupDismissed",ov=Object.freeze({__proto__:null,events:function(n){return tB([tj(nX(),function(e,t){var o=n.channels,r=eG(o);I(t.universal?r:V(r,function(n){return _(t.channels,n)}),function(n){var r=o[n],i=r.schema,u=tc("channel["+n+"] data\nReceiver: "+t9(e.element),i,t.data);r.onReceive(e,u)})})])}});function ob(n,e,t){var o,r;switch(em(oy.get(),n).orThunk(function(){return U(eG(oy.get()),function(e){return -1<n.indexOf(e)?nl.some(oy.get()[e]):nl.none()})}).getOr(t5.NORMAL)){case t5.NORMAL:return t(oS());case t5.LOGGING:var i=(o=[],r=(new Date).getTime(),{logEventCut:function(n,e,t){o.push({outcome:"cut",target:e,purpose:t})},logEventStopped:function(n,e,t){o.push({outcome:"stopped",target:e,purpose:t})},logNoParent:function(n,e,t){o.push({outcome:"no-parent",target:e,purpose:t})},logEventNoHandlers:function(n,e){o.push({outcome:"no-handlers-left",target:e})},logEventResponse:function(n,e,t){o.push({outcome:"response",purpose:t,target:e})},write:function(){var t=(new Date).getTime();_(["mousemove","mouseover","mouseout",nQ()],n)||console.log(n,{event:n,time:t-r,target:e.dom,sequence:F(o,function(n){return _(["cut","stopped","response"],n.outcome)?"{"+n.purpose+"} "+n.outcome+" at ("+t9(n.target)+")":n.outcome})})}}),u=t(i);return i.write(),u;case t5.STOP:return!0}}(t4=t5={})[t4.STOP=0]="STOP",t4[t4.NORMAL=1]="NORMAL",t4[t4.LOGGING=2]="LOGGING";var oy=tJ({}),ox=["alloy/data/Fields","alloy/debugging/Debugging"],oS=s({logEventCut:c,logEventStopped:c,logNoParent:c,logEventNoHandlers:c,logEventResponse:c,write:c}),oO=s([ts("menu"),ts("selectedMenu")]),ow=s([ts("item"),ts("selectedItem")]);function ok(n,e,t){var o;return void 0!==(o=Error()).stack&&N(o.stack.split("\n"),function(n){return 0<n.indexOf("alloy")&&!R(ox,function(e){return -1<n.indexOf(e)})}).getOr("unknown"),tR(e,e,t,to(function(n){return eJ.value(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.apply(void 0,e)})}))}function oT(n){return ok(0,n,e5(s(c)))}function oC(n){return ok(0,n,e5(s(nl.none)))}function oE(n){return ok(0,n,e3())}function oD(n,e){return tF(n,s(e))}function oM(n,e,t){var o=e.aria;o.update(n,o,t.get())}function o_(n,e,t){e.toggleClass.each(function(e){(t.get()?ek:eT)(n.element,e)})}function oR(n,e,t){oK(n,e,t,!t.get())}function oF(n,e,t){t.set(!0),o_(n,e,t),oM(n,e,t)}function oI(n,e,t){t.set(!1),o_(n,e,t),oM(n,e,t)}function oV(n,e,t){oK(n,e,t,e.selected)}function oB(n,e){return o0.config({channels:tV(og,{onReceive:function(t,o){o.command===n&&e(t,o.state)}})})}function oA(n){return o0.config({channels:tV(op,{onReceive:n})})}function oN(n,e){return{key:n,value:{onReceive:e}}}function oH(){function n(n,e){e.stop(),Z(n)}return[tj(nz(),n),tj(nK(),n),tU(nM()),tU(nF())]}function oP(n,e){e.ignore||(tQ(n.element),e.onFocus(n))}function oz(n){return void 0!==n.style&&b(n.style.getPropertyValue)}function oj(n,e,t){if(!d(t))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",t,":: Element ",n),Error("CSS value must be a string: "+t);oz(n)&&n.style.setProperty(e,t)}function oL(n,e,t){oj(n.dom,e,t)}function o$(n,e){var t=n.dom;ef(e,function(n,e){oj(t,e,n)})}function oG(n,e){var t=n.dom,o=window.getComputedStyle(t).getPropertyValue(e);return""!==o||eP(n)?o:o7(t,e)}function oU(n,e){var t=o7(n.dom,e);return nl.from(t).filter(function(n){return 0<n.length})}function oW(n,e){var t;oz(t=n.dom)&&t.style.removeProperty(e),tA(ey(n,"style").map(nv),"")&&eS(n,"style")}function oX(n){return n.dom.offsetWidth}function oq(n,e){function t(t){var o=e(t);return o<=0||null===o?parseFloat(oG(t,n))||0:o}function o(n,e){return A(e,function(e,t){var o=oG(n,t),r=void 0===o?0:parseInt(o,10);return isNaN(r)?e:e+r},0)}return{set:function(e,t){if(!y(t)&&!t.match(/^[0-9]+$/))throw Error(n+".set accepts only positive integer values. Value was "+t);var o=e.dom;oz(o)&&(o.style[n]=t+"px")},get:t,getOuter:t,aggregate:o,max:function(n,e,t){var r=o(n,t);return r<e?e-r:0}}}function oY(n){return rn.get(n)}function oK(n,e,t,o){(o?oF:oI)(n,e,t)}function oJ(n,e,t){eh(n.element,"aria-expanded",t)}s(tE(ow().concat(oO())));var oQ=s(tE(ow())),oZ=s(tl("initSize",[ts("numColumns"),ts("numRows")])),o0=tK({fields:[tf("channels",tr(eJ.value,tt([oE("onReceive"),tg("schema",tD())])))],name:"receiving",active:ov}),o1=Object.freeze({__proto__:null,onLoad:oV,toggle:oR,isOn:function(n,e,t){return t.get()},on:oF,off:oI,set:oK}),o2=Object.freeze({__proto__:null,exhibit:function(){return tX({})},events:function(n,e){var t=oe(function(t){oR(t,n,e)}),o=tq(n,e,oV);return tB(P([n.toggleOnExecute?[t]:[],[o]]))}}),o9=tK({fields:[tg("selected",!1),td("toggleClass"),tg("toggleOnExecute",!0),tp("aria",{mode:"none"},ta("mode",{pressed:[tg("syncWithExpanded",!1),oD("update",function(n,e,t){eh(n.element,"aria-pressed",t),e.syncWithExpanded&&oJ(n,0,t)})],checked:[oD("update",function(n,e,t){eh(n.element,"aria-checked",t)})],expanded:[oD("update",oJ)],selected:[oD("update",function(n,e,t){eh(n.element,"aria-selected",t)})],none:[oD("update",c)]}))],name:"toggling",active:o2,apis:o1,state:{init:function(){var n=tJ(!1);return{get:function(){return n.get()},set:function(e){return n.set(e)},clear:function(){return n.set(!1)},readState:function(){return n.get()}}}}}),o3="tinymce-mobile",o5=function(n){return o3+"-"+n},o4=Object.freeze({__proto__:null,focus:oP,blur:function(n,e){e.ignore||tZ(n.element)},isFocused:function(n){var e,t;return t=eH(e=n.element).dom,e.dom===t.activeElement}}),o6=Object.freeze({__proto__:null,exhibit:function(n,e){return tX(e.ignore?{}:{attributes:{tabindex:"-1"}})},events:function(n){return tB([tj(nG(),function(e,t){oP(e,n),t.stop()})].concat(n.stopMousedown?[tj(nF(),function(n,e){e.event.prevent()})]:[]))}}),o8=tK({fields:[oT("onFocus"),tg("stopMousedown",!1),tg("ignore",!1)],name:"focusing",active:o6,apis:o4}),o7=function(n,e){return oz(n)?n.style.getPropertyValue(e):""},rn=oq("height",function(n){var e=n.dom;return eP(n)?e.getBoundingClientRect().height:e.offsetHeight});function re(n,e,t,o,r){return n(t,o)?nl.some(t):b(r)&&r(t)?nl.none():e(t,o,r)}function rt(n,e,t){for(var o=n.dom,r=b(t)?t:T;o.parentNode;){var o=o.parentNode,i=n5.fromDom(o);if(e(i))return nl.some(i);if(r(i))break}return nl.none()}function ro(n,e,t){return rt(n,function(n){return nn(n,e)},t)}function rr(n,e,t){return re(nn,ro,n,e,t)}function ri(n,e,t){var o=L(n.slice(0,e)),r=L(n.slice(e+1));return N(o.concat(r),t)}function ru(n,e,t){return N(L(n.slice(0,e)),t)}function rc(n,e,t){var o=n.slice(0,e);return N(n.slice(e+1).concat(o),t)}function ra(n,e,t){return N(n.slice(e+1),t)}function rs(n){return function(e){return _(n,e.raw.which)}}function rf(n){return function(e){return j(n,function(n){return n(e)})}}function rl(n){return!0===n.raw.shiftKey}function rd(n){return!0===n.raw.ctrlKey}function rm(n,e){return{matches:n,classification:e}}function rg(n,e,t,o){var r=n+e;return o<r?t:r<t?o:r}function rp(n,e,t){return Math.min(Math.max(n,e),t)}function rh(n,e,t,o){var r;I((r=n.element,nt("."+e.highlightClass,r)),function(t){R(o,function(n){return n.element===t})||(eT(t,e.highlightClass),n.getSystem().getByDom(t).each(function(t){e.onDehighlight(n,t),J(t,n9())}))})}function rv(n,e,t,o){rh(n,e,0,[o]),rO(0,e,0,o)||(ek(o.element,e.highlightClass),e.onHighlight(n,o),J(o,n2()))}function rb(n,e,t,o){var r,i=(r=n.element,nt("."+e.itemClass,r));return H(i,function(n){return eC(n,e.highlightClass)}).bind(function(e){var t=rg(e,o,0,i.length-1);return n.getSystem().getByDom(i[t]).toOptional()})}function ry(n,e,t){e.exists(function(n){return t.exists(function(e){return nr(e,n)})})||Q(n,n1(),{prevFocus:e,newFocus:t})}function rx(){function n(n){return t1(n.element)}return{get:n,set:function(e,t){var o=n(e);e.getSystem().triggerFocus(t,e.element),ry(e,o,n(e))}}}function rS(){function n(n){return rH.getHighlighted(n).map(function(n){return n.element})}return{get:n,set:function(e,t){var o=n(e);e.getSystem().getByDom(t).fold(c,function(n){rH.highlight(e,n)});var r=n(e);ry(e,o,r)}}}function rO(n,e,t,o){return eC(o.element,e.highlightClass)}function rw(n,e,t){var o;return(o=n.element,no("."+e.itemClass,o)).bind(function(e){return n.getSystem().getByDom(e).toOptional()})}function rk(n,e,t){var o,r=(o=n.element,nt("."+e.itemClass,o));return(0<r.length?nl.some(r[r.length-1]):nl.none()).bind(function(e){return n.getSystem().getByDom(e).toOptional()})}function rT(n,e,t){var o;return tN(F((o=n.element,nt("."+e.itemClass,o)),function(e){return n.getSystem().getByDom(e).toOptional()}))}var rC,rE,rD=[9],rM=[13],r_=[27],rR=[32],rF=[37],rI=[38],rV=[39],rB=[40],rA=S(rl),rN=Object.freeze({__proto__:null,dehighlightAll:function(n,e,t){return rh(n,e,0,[])},dehighlight:function(n,e,t,o){rO(0,e,0,o)&&(eT(o.element,e.highlightClass),e.onDehighlight(n,o),J(o,n9()))},highlight:rv,highlightFirst:function(n,e,t){rw(n,e).each(function(t){rv(n,e,0,t)})},highlightLast:function(n,e,t){rk(n,e).each(function(t){rv(n,e,0,t)})},highlightAt:function(n,e,t,o){var r,i;i=n.element,r=nt("."+e.itemClass,i),nl.from(r[o]).fold(function(){return eJ.error(Error("No element found with index "+o))},n.getSystem().getByDom).fold(function(n){throw n},function(t){rv(n,e,0,t)})},highlightBy:function(n,e,t,o){N(rT(n,e),o).each(function(t){rv(n,e,0,t)})},isHighlighted:rO,getHighlighted:function(n,e,t){var o;return(o=n.element,no("."+e.highlightClass,o)).bind(function(e){return n.getSystem().getByDom(e).toOptional()})},getFirst:rw,getLast:rk,getPrevious:function(n,e,t){return rb(n,e,0,-1)},getNext:function(n,e,t){return rb(n,e,0,1)},getCandidates:rT}),rH=tK({fields:[ts("highlightClass"),ts("itemClass"),oT("onHighlight"),oT("onDehighlight")],name:"highlighting",apis:rN});function rP(n,e,t,o,r){function i(n,e,t,o,r){var i=t(n,e,o,r),u=e.event;return N(i,function(n){return n.matches(u)}).map(function(n){return n.classification}).bind(function(t){return t(n,e,o,r)})}var u={schema:function(){return n.concat([tg("focusManager",rx()),tp("focusInside","onFocus",to(function(n){return _(["onFocus","onEnterOrSpace","onApi"],n)?eJ.value(n):eJ.error("Invalid value for focusInside")})),oD("handler",u),oD("state",e),oD("sendFocusIn",r)])},processKey:i,toEvents:function(n,e){var u=n.focusInside!==rC.OnFocusMode?nl.none():r(n).map(function(t){return tj(nG(),function(o,r){t(o,n,e),r.stop()})}),c=[tj(nA(),function(o,u){i(o,u,t,n,e).fold(function(){var t=rs(rR.concat(rM))(u.event);n.focusInside===rC.OnEnterOrSpaceMode&&t&&tH(o,u)&&r(n).each(function(t){t(o,n,e),u.stop()})},function(n){u.stop()})}),tj(nN(),function(t,r){i(t,r,o,n,e).each(function(n){r.stop()})})];return tB(u.toArray().concat(c))}};return u}function rz(n){function e(n,e){return 0<oY(n.visibilitySelector.bind(function(n){return rr(e,n)}).getOr(e))}function t(n,t,o){var r,i=V((r=n.element,nt(t.selector,r)),function(n){return e(t,n)});nl.from(i[t.firstTabstop]).each(function(e){t.focusManager.set(n,e)})}function o(n,t,o,r){var i,u=(i=n.element,nt(o.selector,i));return o.focusManager.get(n).bind(function(n){return rr(n,o.selector)}).bind(function(t){return H(u,x(nr,t)).bind(function(t){return r(u,t,function(n){return e(o,n)&&o.useTabstopAt(n)}).fold(function(){return o.cyclic?nl.some(!0):nl.none()},function(e){return o.focusManager.set(n,e),nl.some(!0)})})})}var r=[td("onEscape"),td("onEnter"),tg("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),tg("firstTabstop",0),tg("useTabstopAt",C),td("visibilitySelector")].concat([n]),i=s([rm(rf([rl,rs(rD)]),function(n,e,t){return o(n,0,t,t.cyclic?ri:ru)}),rm(rs(rD),function(n,e,t){return o(n,0,t,t.cyclic?rc:ra)}),rm(rs(r_),function(n,e,t){return t.onEscape.bind(function(t){return t(n,e)})}),rm(rf([rA,rs(rM)]),function(n,e,t){return t.onEnter.bind(function(t){return t(n,e)})})]),u=s([]);return rP(r,or.init,i,u,function(){return nl.some(t)})}function rj(n){return"input"===n4(n)&&"radio"!==eb(n,"type")||"textarea"===n4(n)}function rL(n,e,t){return rj(t)&&rs(rR)(e.event)?nl.none():(n3(n,t,nq(),{}),nl.some(!0))}function r$(n,e){return nl.some(!0)}function rG(n,e,t){return t.execute(n,e,n.element)}function rU(n){function e(){return t.get().each(n)}var t=tJ(nl.none());return{clear:function(){e(),t.set(nl.none())},isSet:function(){return t.get().isSome()},get:function(){return t.get()},set:function(n){e(),t.set(nl.some(n))}}}function rW(){var e=rU(function(n){return n.destroy()});return n(n({},e),{run:function(n){return e.get().each(n)}})}function rX(){var e=rU(c);return n(n({},e),{on:function(n){return e.get().each(n)}})}function rq(){var n=rX();return oi({readState:function(){return n.get().map(function(n){return{numRows:String(n.numRows),numColumns:String(n.numColumns)}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(e,t){n.set({numRows:e,numColumns:t})},getNumRows:function(){return n.get().map(function(n){return n.numRows})},getNumColumns:function(){return n.get().map(function(n){return n.numColumns})}})}function rY(n,e){return function(t){return"rtl"===iA(t)?e:n}}function rK(n){return function(e,t,o,r){return iN(n(e.element),e,t,o,r)}}function rJ(n){return function(e,t,o,r){return iN(n,e,t,o,r)}}function rQ(n){var e;return!((e=n.dom).offsetWidth<=0&&e.offsetHeight<=0)}function rZ(n,e,t){var o=V(nt(t,n),rQ);return H(o,function(n){return nr(n,e)}).map(function(n){return{index:n,candidates:o}})}function r0(n,e){return H(n,function(n){return nr(e,n)})}function r1(n,e,t,o){return o(Math.floor(e/t),e%t).bind(function(e){var o=e.row*t+e.column;return 0<=o&&o<n.length?nl.some(n[o]):nl.none()})}function r2(n,e,t,o,r){return r1(n,e,o,function(e,i){var u=rg(i,r,0,(e===t-1?n.length-e*o:o)-1);return nl.some({row:e,column:u})})}function r9(n,e,t,o,r){return r1(n,e,o,function(e,i){var u=rg(e,r,0,t-1),c=rp(i,0,(u===t-1?n.length-u*o:o)-1);return nl.some({row:u,column:c})})}function r3(n,e,t){var o;(o=n.element,no(e.selector,o)).each(function(t){e.focusManager.set(n,t)})}function r5(n){return function(e,t,o,r){return rZ(e,t,o.selector).bind(function(e){return n(e.candidates,e.index,r.getNumRows().getOr(o.initSize.numRows),r.getNumColumns().getOr(o.initSize.numColumns))})}}function r4(n,e,t){return t.captureTab?nl.some(!0):nl.none()}function r6(n,e,t,o){var r=function(n,e,t){var i,u=rg(e,o,0,t.length-1);return u===n?nl.none():"button"===n4(i=t[u])&&"disabled"===eb(i,"disabled")?r(n,u,t):nl.from(t[u])};return rZ(n,t,e).bind(function(n){var e=n.index;return r(e,e,n.candidates)})}function r8(n,e,t){return t.focusManager.get(n).bind(function(n){return rr(n,t.selector)}).bind(function(o){return t.execute(n,e,o)})}function r7(n,e,t){e.getInitial(n).orThunk(function(){var t;return t=n.element,no(e.selector,t)}).each(function(t){e.focusManager.set(n,t)})}function ie(n,e,t){return r6(n,t.selector,e,-1)}function it(n,e,t){return r6(n,t.selector,e,1)}function io(n){return function(e,t,o,r){return n(e,t,o,r).bind(function(){return o.executeOnMove?r8(e,t,o):nl.some(!0)})}}function ir(n,e,t){return t.onEscape(n,e)}function ii(n,e,t){return nl.from(n[e]).bind(function(n){return nl.from(n[t]).map(function(n){return{rowIndex:e,columnIndex:t,cell:n}})})}function iu(n,e,t,o){return ii(n,e,rg(t,o,0,n[e].length-1))}function ic(n,e,t,o){var r=rg(t,o,0,n.length-1);return ii(n,r,rp(e,0,n[r].length-1))}function ia(n,e,t,o){return ii(n,e,rp(t+o,0,n[e].length-1))}function is(n,e,t,o){var r=rp(t+o,0,n.length-1);return ii(n,r,rp(e,0,n[r].length-1))}function il(n,e,t){e.previousSelector(n).orThunk(function(){var t,o=e.selectors;return t=n.element,no(o.cell,t)}).each(function(t){e.focusManager.set(n,t)})}function id(n,e){return function(t,o,r){var i=r.cycles?n:e;return rr(o,r.selectors.row).bind(function(n){return r0(nt(r.selectors.cell,n),o).bind(function(e){var o=nt(r.selectors.row,t);return r0(o,n).bind(function(n){return i(F(o,function(n){return nt(r.selectors.cell,n)}),n,e).map(function(n){return n.cell})})})})}}function im(n,e,t){return t.focusManager.get(n).bind(function(o){return t.execute(n,e,o)})}function ig(n,e,t){var o;(o=n.element,no(e.selector,o)).each(function(t){e.focusManager.set(n,t)})}function ip(n,e,t){return r6(n,t.selector,e,-1)}function ih(n,e,t){return r6(n,t.selector,e,1)}function iv(n,e){var t;return t=F(e,function(e){var t,o;return t=e.name(),o="Cannot configure "+e.name()+" for "+n,tR(t,t,e4(),tn(function(n){return ty("The field: "+t+" is forbidden. "+o)}))}).concat([tF("dump",f)]),tp(n,{},tE(t))}function ib(e,t){return n(n({},tB(t)),e.dump)}function iy(n){return eX(n,"uiType")}function ix(n){var e=(new Date).getTime();return n+"_"+Math.floor(1e9*Math.random())+ ++i2+String(e)}function iS(n){function e(n){return n.name}return n.fold(e,e,e,e)}function iO(n,e){return function(t){return n(tc("Converting part type",e,t))}}(rE=rC=rC||{}).OnFocusMode="onFocus",rE.OnEnterOrSpaceMode="onEnterOrSpace",rE.OnApiMode="onApi";var iw,ik,iT,iC,iE,iD,iM,i_,iR,iF=rz(tF("cyclic",T)),iI=rz(tF("cyclic",C)),iV=rP([tg("execute",rL),tg("useSpace",!1),tg("useEnter",!0),tg("useControlEnter",!1),tg("useDown",!1)],or.init,function(n,e,t,o){var r=t.useSpace&&!rj(n.element)?rR:[],i=t.useEnter?rM:[],u=t.useDown?rB:[];return[rm(rs(r.concat(i).concat(u)),rG)].concat(t.useControlEnter?[rm(rf([rd,rs(rM)]),rG)]:[])},function(n,e,t,o){return t.useSpace&&!rj(n.element)?[rm(rs(rR),r$)]:[]},function(){return nl.none()}),iB=Object.freeze({__proto__:null,flatgrid:rq,init:function(n){return n.state(n)}}),iA=function(n){return"rtl"===oG(n,"direction")?"rtl":"ltr"},iN=function(n,e,t,o,r){return o.focusManager.get(e).bind(function(t){return n(e.element,t,o,r)}).map(function(n){return o.focusManager.set(e,n),!0})},iH=r5(function(n,e,t,o){return r2(n,e,t,o,-1)}),iP=r5(function(n,e,t,o){return r2(n,e,t,o,1)}),iz=r5(function(n,e,t,o){return r9(n,e,t,o,-1)}),ij=r5(function(n,e,t,o){return r9(n,e,t,o,1)}),iL=rP([ts("selector"),tg("execute",rL),oC("onEscape"),tg("captureTab",!1),oZ()],rq,s([rm(rs(rF),rK(rY(iH,iP))),rm(rs(rV),rK(rY(iP,iH))),rm(rs(rI),rJ(iz)),rm(rs(rB),rJ(ij)),rm(rf([rl,rs(rD)]),r4),rm(rf([rA,rs(rD)]),r4),rm(rs(r_),function(n,e,t){return t.onEscape(n,e)}),rm(rs(rR.concat(rM)),function(n,e,t,o){return t.focusManager.get(n).bind(function(n){return rr(n,t.selector)}).bind(function(o){return t.execute(n,e,o)})})]),s([rm(rs(rR),r$)]),function(){return nl.some(r3)}),i$=[ts("selector"),tg("getInitial",nl.none),tg("execute",rL),oC("onEscape"),tg("executeOnMove",!1),tg("allowVertical",!0)],iG=s([rm(rs(rR),r$)]),iU=rP(i$,or.init,function(n,e,t,o){var r=rF.concat(t.allowVertical?rI:[]),i=rV.concat(t.allowVertical?rB:[]);return[rm(rs(r),io(rK(rY(ie,it)))),rm(rs(i),io(rK(rY(it,ie)))),rm(rs(rM),r8),rm(rs(rR),r8),rm(rs(r_),ir)]},iG,function(){return nl.some(r7)}),iW=[tl("selectors",[ts("row"),ts("cell")]),tg("cycles",!0),tg("previousSelector",nl.none),tg("execute",rL)],iX=id(function(n,e,t){return iu(n,e,t,-1)},function(n,e,t){return ia(n,e,t,-1)}),iq=id(function(n,e,t){return iu(n,e,t,1)},function(n,e,t){return ia(n,e,t,1)}),iY=(iT=ta((iR=tc("Creating behaviour: "+(ik={branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:iF.schema(),cyclic:iI.schema(),flow:iU.schema(),flatgrid:iL.schema(),matrix:rP(iW,or.init,s([rm(rs(rF),rK(rY(iX,iq))),rm(rs(rV),rK(rY(iq,iX))),rm(rs(rI),rJ(id(function(n,e,t){return ic(n,t,e,-1)},function(n,e,t){return is(n,t,e,-1)}))),rm(rs(rB),rJ(id(function(n,e,t){return ic(n,t,e,1)},function(n,e,t){return is(n,t,e,1)}))),rm(rs(rR.concat(rM)),function(n,e,t){return t1(n.element).bind(function(o){return t.execute(n,e,o)})})]),s([rm(rs(rR),r$)]),function(){return nl.some(il)}).schema(),execution:iV.schema(),menu:rP([ts("selector"),tg("execute",rL),tg("moveOnTab",!1)],or.init,s([rm(rs(rI),rJ(ip)),rm(rs(rB),rJ(ih)),rm(rf([rl,rs(rD)]),function(n,e,t,o){return t.moveOnTab?rJ(ip)(n,e,t,o):nl.none()}),rm(rf([rA,rs(rD)]),function(n,e,t,o){return t.moveOnTab?rJ(ih)(n,e,t,o):nl.none()}),rm(rs(rM),im),rm(rs(rR),im)]),s([rm(rs(rR),r$)]),function(){return nl.some(ig)}).schema(),special:rP([oC("onSpace"),oC("onEnter"),oC("onShiftEnter"),oC("onLeft"),oC("onRight"),oC("onTab"),oC("onShiftTab"),oC("onUp"),oC("onDown"),oC("onEscape"),tg("stopSpaceKeyup",!1),td("focusIn")],or.init,function(n,e,t){return[rm(rs(rR),t.onSpace),rm(rf([rA,rs(rM)]),t.onEnter),rm(rf([rl,rs(rM)]),t.onShiftEnter),rm(rf([rl,rs(rD)]),t.onShiftTab),rm(rf([rA,rs(rD)]),t.onTab),rm(rs(rI),t.onUp),rm(rs(rB),t.onDown),rm(rs(rF),t.onLeft),rm(rs(rV),t.onRight),rm(rs(rR),t.onSpace),rm(rs(r_),t.onEscape)]},function(n,e,t){return t.stopSpaceKeyup?[rm(rs(rR),r$)]:[]},function(n){return n.focusIn}).schema()}),name:"keying",active:{events:function(n,e){return n.handler.toEvents(n,e)}},apis:{focusIn:function(n,e,t){e.sendFocusIn(e).fold(function(){n.getSystem().triggerFocus(n.element,n.element)},function(o){o(n,e,t)})},setGridSize:function(n,e,t,o,r){eg(t,"setGridSize")?t.setGridSize(o,r):console.error("Layout does not support setGridSize")}},state:iB}).name,oc,ik)).branchKey,iR.branches),iC=iR.name,iE=iR.active,iD=iR.apis,iM=iR.extra,i_=iR.state,iw=[tm("config",iT)],oo(iT,tm(iC,tE(iw)),iC,iE,iD,iM,i_)),iK="placeholder",iJ=th([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),iQ=function(e,t,o,r){return(iy(o)&&o.uiType===iK?e.exists(function(n){return n!==o.owner})?iJ.single(!0,s(o)):em(r,o.name).fold(function(){throw Error("Unknown placeholder component: "+o.name+"\nKnown: ["+eG(r)+"]\nNamespace: "+e.getOr("none")+"\nSpec: "+JSON.stringify(o,null,2))},function(n){return n.replace()}):iJ.single(!1,s(o))).fold(function(i,u){var c=iy(o)?u(t,o.config,o.validated):u(t),a=z(em(c,"components").getOr([]),function(n){return iQ(e,t,n,r)});return[n(n({},c),{components:a})]},function(n,e){if(iy(o)){var r=e(t,o.config,o.validated);return o.validated.preprocess.getOr(f)(r)}return e(t)})},iZ=iJ.single,i0=iJ.multiple,i1=s(iK),i2=0,i9=th([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),i3=tg("factory",{sketch:f}),i5=tg("schema",[]),i4=ts("name"),i6=tR("pname","pname",e5(function(n){return"<alloy."+ix(n.name)+">"}),tD()),i8=tF("schema",function(){return[td("preprocess")]}),i7=tg("defaults",s({})),un=tg("overrides",s({})),ue=tE([i3,i5,i4,i6,i7,un]),ut=tE([i3,i5,i4,i7,un]),uo=tE([i3,i5,i4,i6,i7,un]),ur=tE([i3,i8,i4,ts("unit"),i6,i7,un]),ui=iO(i9.required,ue);function uu(n,e,t,o){return tw(e.defaults(n,t,o),t,{uid:n.partUids[e.name]},e.overrides(n,t,o))}function uc(n,e,t){var o,r;return o={},r={},I(t,function(n){n.fold(function(n){o[n.pname]=iZ(!0,function(e,t,o){return n.factory.sketch(uu(e,n,t,o))})},function(n){var t=e.parts[n.name];r[n.name]=s(n.factory.sketch(uu(e,n,t[ca()]),t))},function(n){o[n.pname]=iZ(!1,function(e,t,o){return n.factory.sketch(uu(e,n,t,o))})},function(n){o[n.pname]=i0(!0,function(e,t,o){return F(e[n.name],function(t){return n.factory.sketch(tw(n.defaults(e,t,o),t,n.overrides(e,t)))})})})}),{internals:s(o),externals:s(r)}}function ua(n,e,t){var o,r,i,u;return o=nl.some(n),r=e.components,i=el(t,function(n,e){var t;return t=!1,{name:s(e),required:function(){return n.fold(function(n,e){return n},function(n,e){return n})},used:function(){return t},replace:function(){if(t)throw Error("Trying to use the same placeholder more than once: "+e);return t=!0,n}}}),u=z(r,function(n){return iQ(o,e,n,i)}),ef(i,function(n){if(!1===n.used()&&n.required())throw Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+o.getOr("none")+"\nComponents: "+JSON.stringify(e.components,null,2))}),u}function us(n,e,t){var o=e.partUids[t];return n.getSystem().getByUid(o).toOptional()}function uf(n,e,t){return us(n,e,t).getOrDie("Could not find part: "+t)}function ul(n){return tR("partUids","partUids",e6(function(e){var t,o;return t=e.uid,o=F(n,iS),tB(F(o,function(n){return{key:n,value:t+"-"+n}}))}),tD())}function ud(n){var e,o,r,i,u;return e=function(e){for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];return n.apply(void 0,t([e.getApis(),e],o,!1))},r=(o=n.toString()).indexOf(")")+1,i=o.indexOf("("),u=o.substring(i+1,r-1).split(/,\s*/),e.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:ot(u.slice(1))}},e}function um(n){var e=eM(n)?n.dom[cg]:null;return nl.from(e)}function ug(n,e,t,o,r){return tc(n+" [SpecSchema]",tt((0<o.length?[tl("parts",o)]:[]).concat([ts("uid"),tg("dom",{}),tg("components",[]),tF("originalSpec",f),tg("debug.sketcher",{})]).concat(r).concat(e)),t)}function up(n,e,t,o,r){var i=cv(r),u=ug(n,e,i,z(t,function(n){return n.fold(nl.none,nl.some,nl.none,nl.none).map(function(n){return tl(n.name,n.schema.concat([tF(ca(),f)]))}).toArray()}),[ul(t)]),c=uc(0,u,t);return o(u,ua(n,u,c.internals()),i,c.externals())}function uh(e){var t=tc("Sketcher for "+e.name,cb,e),o=el(t.apis,ud),r=el(t.extraApis,tW);return n(n({name:t.name,configFields:t.configFields,sketch:function(n){var e,o,r;return e=t.name,o=t.configFields,(0,t.factory)(ug(e,o,r=cv(n),[],[]),r)}},o),r)}function uv(e){var t,o,r,i=tc("Sketcher for "+e.name,cy,e),u=(t=i.name,o=i.partFields,r={},I(o,function(e){e.fold(nl.some,nl.none,nl.some,nl.some).each(function(e){var o=cs(t,e.pname);r[e.name]=function(r){var i=tc("Part: "+e.name+" in "+t,tE(e.schema),r);return n(n({},o),{config:r,validated:i})}})}),r),c=el(i.apis,ud),a=el(i.extraApis,tW);return n(n({name:i.name,partFields:i.partFields,configFields:i.configFields,sketch:function(n){return up(i.name,i.configFields,i.partFields,i.factory,n)},parts:u},c),a)}function ub(e){var t,o,r,i,u,c,a=(t={prefix:o3},e.replace(/\$\{([^{}]*)\}/g,function(n,e){var o,r=t[e];return"string"==(o=typeof r)||"number"==o?r.toString():n}));return r=eI(o=n5.fromHtml(a)),i=A(void 0!==o.dom.attributes?o.dom.attributes:[],function(e,t){var o;return"class"===t.name?e:n(n({},e),((o={})[t.name]=t.value,o))},{}),u=Array.prototype.slice.call(o.dom.classList,0),c=0===r.length?{}:{innerHtml:t2(o)},n({tag:n4(o),classes:u,attributes:i},c)}function uy(n){return{dom:ub(n)}}function ux(n){return tB([o9.config({toggleClass:o5("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),oB(n,function(n,e){(e?o9.on:o9.off)(n)})])}function uS(n,e){var t=e.ui.registry.getAll().icons;return nl.from(t[n]).fold(function(){return ub('<span class="${prefix}-toolbar-button ${prefix}-toolbar-group-item ${prefix}-icon-'+n+' ${prefix}-icon"></span>')},function(n){return ub('<span class="${prefix}-toolbar-button ${prefix}-toolbar-group-item">'+n+"</span>")})}function uO(n){return cu({name:n+"-edge",overrides:function(e){return e.model.manager.edgeActions[n].fold(function(){return{}},function(n){return{events:tB([tL(nM(),function(e,t,o){return n(e,o)},[e]),tL(nF(),function(e,t,o){return n(e,o)},[e]),tL(nI(),function(e,t,o){o.mouseIsDown.get()&&n(e,o)},[e])])}})}})}function uw(n,e,t){e.store.manager.onLoad(n,e,t)}function uk(n,e,t){e.store.manager.onUnload(n,e,t)}function uT(){var n=tJ(null);return oi({set:n.set,get:n.get,isNotSet:function(){return null===n.get()},clear:function(){n.set(null)},readState:function(){return{mode:"memory",value:n.get()}}})}function uC(){var e=tJ({}),t=tJ({});return oi({readState:function(){return{mode:"dataset",dataByValue:e.get(),dataByText:t.get()}},lookup:function(n){return em(e.get(),n).orThunk(function(){return em(t.get(),n)})},update:function(o){var r=e.get(),i=t.get(),u={},c={};I(o,function(n){em(u[n.value]=n,"meta").each(function(e){em(e,"text").each(function(e){c[e]=n})})}),e.set(n(n({},r),u)),t.set(n(n({},i),c))},clear:function(){e.set({}),t.set({})}})}function uE(n,e,t,o){var r=e.store;t.update([o]),r.setValue(n,o),e.onSetValue(n,o)}function uD(n){return cH.get(n)}function uM(n){var e=n.event.raw;return -1===e.type.indexOf("touch")?void 0!==e.clientX?nl.some(e).map(function(n){return cz(n.clientX,n.clientY)}):nl.none():void 0!==e.touches&&1===e.touches.length?nl.some(e.touches[0]).map(function(n){return cz(n.clientX,n.clientY)}):nl.none()}function u_(n){return n.model.minX}function uR(n){return n.model.minY}function uF(n){return n.model.minX-1}function uI(n){return n.model.minY-1}function uV(n){return n.model.maxX}function uB(n){return n.model.maxY}function uA(n){return n.model.maxX+1}function uN(n){return n.model.maxY+1}function uH(n){return uV(n)-u_(n)}function uP(n){return uB(n)-uR(n)}function uz(n){return n.stepSize}function uj(n){return n.snapToGrid}function uL(n,e){return void 0!==n[e+"-edge"]}function u$(n){return uL(n,"right")}function uG(n){return uL(n,"bottom")}function uU(n){return n.model.value.get()}function uW(n,e){return{x:n,y:e}}function uX(n,e){Q(n,cj(),{value:e})}function uq(n,e,t,o){return n<e?n:t<n?t:n===e?e-1:Math.max(e,n-o)}function uY(n,e,t,o){return t<n?n:n<e?e:n===t?t+1:Math.min(t,n+o)}function uK(n,e,t){return Math.max(e,Math.min(t,n))}function uJ(n){var e=n.min,t=n.max,o=n.range,r=n.value,i=n.step,u=n.snap,c=n.snapStart,a=n.rounded,s=n.hasMinEdge,f=n.hasMaxEdge,l=n.minBound,d=n.maxBound,m=n.screenRange,g=s?e-1:e,p=f?t+1:t;if(r<l)return g;if(d<r)return p;var h=uK((Math.min(d,Math.max(r,l))-l)/m*o+e,g,p);return u&&e<=h&&h<=t?c.fold(function(){var n=Math.round((h-e)/i)*i;return uK(e+n,e-1,t+1)},function(n){var e=Math.floor((t-n)/i);return Math.max(n,n+Math.min(e,Math.floor((h-n)/i)+Math.round((h-n)%i/i))*i)}):a?Math.round(h):h}function uQ(n){var e=n.min,t=n.max,o=n.range,r=n.value,i=n.hasMinEdge,u=n.hasMaxEdge,c=n.maxBound,a=n.maxOffset,s=n.centerMinEdge,f=n.centerMaxEdge;return r<e?i?0:s:t<r?u?c:f:(r-e)/o*a}function uZ(n){return n.element.dom.getBoundingClientRect()}function u0(n){return uZ(n).top}function u1(n,e){var t=uZ(n),o=uZ(e);return(t[cL]+t.right)/2-o[cL]}function u2(n,e){var t=uZ(n),o=uZ(e);return(t.top+t.bottom)/2-o.top}function u9(n,e){Q(n,cj(),{value:e})}function u3(n,e,t){return uJ({min:u_(e),max:uV(e),range:uH(e),value:t,step:uz(e),snap:uj(e),snapStart:e.snapStart,rounded:e.rounded,hasMinEdge:uL(e,"left"),hasMaxEdge:u$(e),minBound:uZ(n)[cL],maxBound:uZ(n).right,screenRange:uZ(n).width})}function u5(n){return function(e,t){var o;return u9(e,{x:o=(0<n?uY:uq)(uU(t).x,u_(t),uV(t),uz(t))}),nl.some(o).map(C)}}function u4(n,e,t,o,r,i){var u,c,a,s=(u=uZ(e).width,c=o.bind(function(n){return nl.some(u1(n,e))}).getOr(0),a=r.bind(function(n){return nl.some(u1(n,e))}).getOr(u),uQ({min:u_(i),max:uV(i),range:uH(i),value:t,hasMinEdge:uL(i,"left"),hasMaxEdge:u$(i),minBound:uZ(e)[cL],minOffset:0,maxBound:uZ(e).right,maxOffset:u,centerMinEdge:c,centerMaxEdge:a}));return uZ(e)[cL]-uZ(n)[cL]+s}function u6(n,e){Q(n,cj(),{value:e})}function u8(n,e,t){return uJ({min:uR(e),max:uB(e),range:uP(e),value:t,step:uz(e),snap:uj(e),snapStart:e.snapStart,rounded:e.rounded,hasMinEdge:uL(e,"top"),hasMaxEdge:uG(e),minBound:u0(n),maxBound:uZ(n).bottom,screenRange:uZ(n).height})}function u7(n){return function(e,t){var o;return u6(e,{y:o=(0<n?uY:uq)(uU(t).y,uR(t),uB(t),uz(t))}),nl.some(o).map(C)}}function cn(n,e,t,o,r,i){var u,c,a,s=(u=uZ(e).height,c=o.bind(function(n){return nl.some(u2(n,e))}).getOr(0),a=r.bind(function(n){return nl.some(u2(n,e))}).getOr(u),uQ({min:uR(i),max:uB(i),range:uP(i),value:t,hasMinEdge:uL(i,"top"),hasMaxEdge:uG(i),minBound:u0(e),minOffset:0,maxBound:uZ(e).bottom,maxOffset:u,centerMinEdge:c,centerMaxEdge:a}));return u0(e)-u0(n)+s}function ce(n,e){Q(n,cj(),{value:e})}function ct(n,e){return function(t,o){var r,i;return r=0<n?uY:uq,ce(t,{x:i=e?uU(o).x:r(uU(o).x,u_(o),uV(o),uz(o)),y:e?r(uU(o).y,uR(o),uB(o),uz(o)):uU(o).y}),nl.some(i).map(C)}}function co(n,e,t,o){return cO(e,function(){var o=t();n.setContextToolbar([{label:e+" group",items:o}])},{},o)}function cr(n){var e,t=n.selection.getStart(),o=n5.fromDom(t),r=n5.fromDom(n.getBody()),i=(e=function(n){return nr(r,n)},(eM(o)?nl.some(o):en(o).filter(eM)).map(function(n){return re(function(n,e){return e(n)},rt,n,function(n){return oU(n,"font-size").isSome()},e).bind(function(n){return oU(n,"font-size")}).getOrThunk(function(){return oG(n,"font-size")})}).getOr(""));return N(cY,function(n){return i===n}).getOr("medium")}function ci(e){var t=void 0!==e.uid&&eg(e,"uid")?e.uid:ch("memento");return{get:function(n){return n.getSystem().getByUid(t).getOrDie()},getOpt:function(n){return n.getSystem().getByUid(t).toOptional()},asSpec:function(){return n(n({},e),{uid:t})}}}iO(i9.external,ut);var cu=iO(i9.optional,uo),cc=iO(i9.group,ur),ca=s("entirety"),cs=function(n,e){return{uiType:i1(),owner:n,name:e}},cf=ix("alloy-premade"),cl=s("alloy-id-"),cd=s("data-alloy-id"),cm=cl(),cg=cd(),cp=function(n,e){Object.defineProperty(n.dom,cg,{value:e,writable:!0})},ch=ix,cv=function(e){return eX(e,"uid")?e:n(n({},e),{uid:ch("uid")})},cb=tt([ts("name"),ts("factory"),ts("configFields"),tg("apis",{}),tg("extraApis",{})]),cy=tt([ts("name"),ts("factory"),ts("configFields"),ts("partFields"),tg("apis",{}),tg("extraApis",{})]),cx=uh({name:"Button",factory:function(e){function t(n){return em(e.dom,"attributes").bind(function(e){return em(e,n)})}var o=tB(P([e.action.map(function(n){return oe(function(e,t){n(e),t.stop()})}).toArray(),oH()])),r=e.dom.tag;return{uid:e.uid,dom:e.dom,components:e.components,events:o,behaviours:ib(e.buttonBehaviours,[o8.config({}),iY.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"!==r)return{role:t("role").getOr("button")};var e=t("type").getOr("button"),o=t("role").map(function(n){return{role:n}}).getOr({});return n({type:e},o)}()},eventOrder:e.eventOrder}},configFields:[tg("uid",void 0),ts("dom"),tg("components",[]),iv("buttonBehaviours",[o8,iY]),td("action"),td("role"),tg("eventOrder",{})]}),cS=tK({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:function(){return tB([tz(nL(),C)])},exhibit:function(){return tX({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),cO=function(n,e,t,o){return cx.sketch({dom:uS(n,o),action:e,buttonBehaviours:tw(tB([cS.config({})]),t)})},cw=cu({schema:[ts("dom")],name:"label"}),ck=uO("top-left"),cT=uO("top"),cC=uO("top-right"),cE=uO("right"),cD=uO("bottom-right"),cM=uO("bottom"),c_=uO("bottom-left"),cR=[cw,uO("left"),cE,cT,cM,ck,cC,c_,cD,ui({name:"thumb",defaults:s({dom:{styles:{position:"absolute"}}}),overrides:function(n){return{events:tB([tG(nM(),n,"spectrum"),tG(n_(),n,"spectrum"),tG(nR(),n,"spectrum"),tG(nF(),n,"spectrum"),tG(nI(),n,"spectrum"),tG(nV(),n,"spectrum")])}}}),ui({schema:[tF("mouseIsDown",function(){return tJ(!1)})],name:"spectrum",overrides:function(n){function e(e,o){return t.getValueFromEvent(o).map(function(o){return t.setValueFrom(e,n,o)})}var t=n.model.manager;return{behaviours:tB([iY.config({mode:"special",onLeft:function(e){return t.onLeft(e,n)},onRight:function(e){return t.onRight(e,n)},onUp:function(e){return t.onUp(e,n)},onDown:function(e){return t.onDown(e,n)}}),o8.config({})]),events:tB([tj(nM(),e),tj(n_(),e),tj(nF(),e),tj(nI(),function(t,o){n.mouseIsDown.get()&&e(t,o)})])}}})],cF=Object.freeze({__proto__:null,onLoad:uw,onUnload:uk,setValue:function(n,e,t,o){e.store.manager.setValue(n,e,t,o)},getValue:function(n,e,t){return e.store.manager.getValue(n,e,t)},getState:function(n,e,t){return t}}),cI=Object.freeze({__proto__:null,events:function(n,e){return tB(n.resetOnDom?[t8(function(t,o){uw(t,n,e)}),t7(function(t,o){uk(t,n,e)})]:[tq(n,e,uw)])}}),cV=Object.freeze({__proto__:null,memory:uT,dataset:uC,manual:function(){return oi({readState:c})},init:function(n){return n.store.manager.state(n)}}),cB=[td("initialValue"),ts("getFallbackEntry"),ts("getDataKey"),ts("setValue"),oD("manager",{setValue:uE,getValue:function(n,e,t){var o=e.store,r=o.getDataKey(n);return t.lookup(r).getOrThunk(function(){return o.getFallbackEntry(r)})},onLoad:function(n,e,t){e.store.initialValue.each(function(o){uE(n,e,t,o)})},onUnload:function(n,e,t){t.clear()},state:uC})],cA=[ts("getValue"),tg("setValue",c),td("initialValue"),oD("manager",{setValue:function(n,e,t,o){e.store.setValue(n,o),e.onSetValue(n,o)},getValue:function(n,e,t){return e.store.getValue(n)},onLoad:function(n,e,t){e.store.initialValue.each(function(t){e.store.setValue(n,t)})},onUnload:c,state:or.init})],cN=tK({fields:[tp("store",{mode:"memory"},ta("mode",{memory:[td("initialValue"),oD("manager",{setValue:function(n,e,t,o){t.set(o),e.onSetValue(n,o)},getValue:function(n,e,t){return t.get()},onLoad:function(n,e,t){e.store.initialValue.each(function(n){t.isNotSet()&&t.set(n)})},onUnload:function(n,e,t){t.clear()},state:uT})],manual:cA,dataset:cB})),oT("onSetValue"),tg("resetOnDom",!1)],name:"representing",active:cI,apis:cF,extra:{setValueFrom:function(n,e){var t=cN.getValue(e);cN.setValue(n,t)}},state:cV}),cH=oq("width",function(n){return n.dom.offsetWidth}),cP=function(n,e){return{left:n,top:e,translate:function(t,o){return cP(n+t,e+o)}}},cz=cP,cj=s("slider.change.value"),cL="left",c$=Object.freeze({__proto__:null,setValueFrom:function(n,e,t){var o=u3(n,e,t);return u9(n,{x:o}),o},setToMin:function(n,e){u9(n,{x:u_(e)})},setToMax:function(n,e){u9(n,{x:uV(e)})},findValueOfOffset:u3,getValueFromEvent:function(n){return uM(n).map(function(n){return n.left})},findPositionOfValue:u4,setPositionFromValue:function(n,e,t,o){var r=uU(t),i=u4(n,o.getSpectrum(n),r.x,o.getLeftEdge(n),o.getRightEdge(n),t),u=uD(e.element)/2;oL(e.element,"left",i-u+"px")},onLeft:u5(-1),onRight:u5(1),onUp:nl.none,onDown:nl.none,edgeActions:{"top-left":nl.none(),top:nl.none(),"top-right":nl.none(),right:nl.some(function(n,e){uX(n,{x:uA(e)})}),"bottom-right":nl.none(),bottom:nl.none(),"bottom-left":nl.none(),left:nl.some(function(n,e){uX(n,{x:uF(e)})})}}),cG=Object.freeze({__proto__:null,setValueFrom:function(n,e,t){var o=u8(n,e,t);return u6(n,{y:o}),o},setToMin:function(n,e){u6(n,{y:uR(e)})},setToMax:function(n,e){u6(n,{y:uB(e)})},findValueOfOffset:u8,getValueFromEvent:function(n){return uM(n).map(function(n){return n.top})},findPositionOfValue:cn,setPositionFromValue:function(n,e,t,o){var r=uU(t),i=cn(n,o.getSpectrum(n),r.y,o.getTopEdge(n),o.getBottomEdge(n),t),u=oY(e.element)/2;oL(e.element,"top",i-u+"px")},onLeft:nl.none,onRight:nl.none,onUp:u7(-1),onDown:u7(1),edgeActions:{"top-left":nl.none(),top:nl.some(function(n,e){uX(n,{y:uI(e)})}),"top-right":nl.none(),right:nl.none(),"bottom-right":nl.none(),bottom:nl.some(function(n,e){uX(n,{y:uN(e)})}),"bottom-left":nl.none(),left:nl.none()}}),cU=Object.freeze({__proto__:null,setValueFrom:function(n,e,t){var o={x:u3(n,e,t.left),y:u8(n,e,t.top)};return ce(n,o),o},setToMin:function(n,e){ce(n,{x:u_(e),y:uR(e)})},setToMax:function(n,e){ce(n,{x:uV(e),y:uB(e)})},getValueFromEvent:uM,setPositionFromValue:function(n,e,t,o){var r=uU(t),i=u4(n,o.getSpectrum(n),r.x,o.getLeftEdge(n),o.getRightEdge(n),t),u=cn(n,o.getSpectrum(n),r.y,o.getTopEdge(n),o.getBottomEdge(n),t),c=uD(e.element)/2,a=oY(e.element)/2;oL(e.element,"left",i-c+"px"),oL(e.element,"top",u-a+"px")},onLeft:ct(-1,!1),onRight:ct(1,!1),onUp:ct(-1,!0),onDown:ct(1,!0),edgeActions:{"top-left":nl.some(function(n,e){uX(n,uW(uF(e),uI(e)))}),top:nl.some(function(n,e){uX(n,uW(uH(e)/2,uI(e)))}),"top-right":nl.some(function(n,e){uX(n,uW(uA(e),uI(e)))}),right:nl.some(function(n,e){uX(n,uW(uA(e),uP(e)/2))}),"bottom-right":nl.some(function(n,e){uX(n,uW(uA(e),uN(e)))}),bottom:nl.some(function(n,e){uX(n,uW(uH(e)/2,uN(e)))}),"bottom-left":nl.some(function(n,e){uX(n,uW(uF(e),uN(e)))}),left:nl.some(function(n,e){uX(n,uW(uF(e),uP(e)/2))})}}),cW=[tg("stepSize",1),tg("onChange",c),tg("onChoose",c),tg("onInit",c),tg("onDragStart",c),tg("onDragEnd",c),tg("snapToGrid",!1),tg("rounded",!0),td("snapStart"),tf("model",ta("mode",{x:[tg("minX",0),tg("maxX",100),tF("value",function(n){return tJ(n.mode.minX)}),ts("getInitialValue"),oD("manager",c$)],y:[tg("minY",0),tg("maxY",100),tF("value",function(n){return tJ(n.mode.minY)}),ts("getInitialValue"),oD("manager",cG)],xy:[tg("minX",0),tg("maxX",100),tg("minY",0),tg("maxY",100),tF("value",function(n){return tJ({x:n.mode.minX,y:n.mode.minY})}),ts("getInitialValue"),oD("manager",cU)]})),iv("sliderBehaviours",[iY,cN]),tF("mouseIsDown",function(){return tJ(!1)})],cX=s("mouse.released"),cq=uv({name:"Slider",configFields:cW,partFields:cR,factory:function(n,e,t,o){function r(e){return uf(e,n,"thumb")}function i(e){return uf(e,n,"spectrum")}function u(e){return us(e,n,"left-edge")}function c(e){return us(e,n,"right-edge")}function a(e){return us(e,n,"top-edge")}function s(e){return us(e,n,"bottom-edge")}function f(e,t){v.setPositionFromValue(e,t,n,{getLeftEdge:u,getRightEdge:c,getTopEdge:a,getBottomEdge:s,getSpectrum:i})}function l(n,e){h.value.set(e),f(n,r(n))}function d(e){var t=n.mouseIsDown.get();n.mouseIsDown.set(!1),t&&us(e,n,"thumb").each(function(t){var o=h.value.get();n.onChoose(e,t,o)})}function m(e,t){t.stop(),n.mouseIsDown.set(!0),n.onDragStart(e,r(e))}function g(e,t){t.stop(),n.onDragEnd(e,r(e)),d(e)}var p,h=n.model,v=h.manager;return{uid:n.uid,dom:n.dom,components:e,behaviours:ib(n.sliderBehaviours,[iY.config({mode:"special",focusIn:function(e){return us(e,n,"spectrum").map(iY.focusIn).map(C)}}),cN.config({store:{mode:"manual",getValue:function(n){return h.value.get()}}}),o0.config({channels:((p={})[cX()]={onReceive:d},p)})]),events:tB([tj(cj(),function(e,t){var o,i;l(e,o=t.event.value),i=r(e),n.onChange(e,i,o),nl.some(!0)}),t8(function(e,t){var o=h.getInitialValue();h.value.set(o);var u=r(e);f(e,u);var c=i(e);n.onInit(e,u,c,h.value.get())}),tj(nM(),m),tj(nR(),g),tj(nF(),m),tj(nV(),g)]),apis:{resetToMin:function(e){v.setToMin(e,n)},resetToMax:function(e){v.setToMax(e,n)},setValue:l,refresh:f},domModification:{styles:{position:"relative"}}}},apis:{setValue:function(n,e,t){n.setValue(e,t)},resetToMin:function(n,e){n.resetToMin(e)},resetToMax:function(n,e){n.resetToMax(e)},refresh:function(n,e){n.refresh(e)}}}),cY=["9px","10px","11px","12px","14px","16px","18px","20px","24px","32px","36px"],cK=s(cY),cJ=tt([ts("getInitialValue"),ts("onChange"),ts("category"),ts("sizes")]),cQ=cK(),cZ={},c0={exports:cZ};function c1(n){return n.dom.textContent}function c2(n){return 0<n.length}function c9(n){return null==n?"":n}function c3(n,e){var t;return{key:n,value:{config:{},me:(t=tB(e),tK({fields:[ts("enabled")],name:n,active:{events:s(t)}})),configAsRaw:s({}),initialConfig:{},state:or}}}function c5(n){return n.dom.value}function c4(n,e){if(void 0===e)throw Error("Value.set was undefined");n.dom.value=e}function c6(n,e){var t=ci(aP.sketch({inputAttributes:{placeholder:aL.translate(e)},onSetValue:function(n,e){J(n,nH())},inputBehaviours:tB([aA.config({find:nl.some}),aj.config({}),iY.config({mode:"execution"})]),selectOnFocus:!1})),o=ci(cx.sketch({dom:ub('<button class="${prefix}-input-container-x ${prefix}-icon-cancel-circle ${prefix}-icon"></button>'),action:function(n){var e=t.get(n);cN.setValue(e,"")}}));return{name:n,spec:aN.sketch({dom:ub('<div class="${prefix}-input-container"></div>'),components:[t.asSpec(),o.asSpec()],containerBehaviours:tB([o9.config({toggleClass:o5("input-container-empty")}),aA.config({find:function(n){return nl.some(t.get(n))}}),c3("input-clearing",[tj(nH(),function(n){(0<cN.getValue(t.get(n)).length?o9.off:o9.on)(n)})])])})}}function c8(n,e,t){(e.disabled()?aG:aU)(n,e)}function c7(n,e){return!0===e.useNative&&_(a$,n4(n.element))}function an(n,e){return c7(n,e)?ex(n.element,"disabled"):"true"===eb(n.element,"aria-disabled")}function ae(n){return"<alloy.field."+n+">"}function at(n){function e(e){return"The component must be in a context to execute: "+e+(n?"\n"+t9(n().element)+" is not in context.":"")}function t(n){return function(){throw Error(e(n))}}function o(n){return function(){console.warn(e(n))}}return{debugInfo:s("fake"),triggerEvent:o("triggerEvent"),triggerFocus:o("triggerFocus"),triggerEscape:o("triggerEscape"),broadcast:o("broadcast"),broadcastOn:o("broadcastOn"),broadcastEvent:o("broadcastEvent"),build:t("build"),addToWorld:t("addToWorld"),removeFromWorld:t("removeFromWorld"),addToGui:t("addToGui"),removeFromGui:t("removeFromGui"),getByUid:t("getByUid"),getByDom:t("getByDom"),isConnected:T}}function ao(n,e){var t={};return ef(n,function(n,o){ef(n,function(n,r){var i=em(t,r).getOr([]);t[r]=i.concat([e(o,n)])})}),t}function ar(n){return n.cHandler}function ai(n,e){return{name:n,handler:e}}function au(n,e){I(e,function(e){ek(n,e)})}function ac(n,e){I(e,function(e){eT(n,e)})}function aa(n){var e,t,o,r,i;return e={element:n5.fromText(n)},t=tc("external.component",tt([ts("element"),td("uid")]),e),o=tJ(at()),r=t.uid.getOrThunk(function(){return ch("external")}),cp(t.element,r),tV(cf,i={uid:r,getSystem:o.get,config:nl.none,hasConfigured:T,connect:function(n){o.set(n)},disconnect:function(){o.set(at(function(){return i}))},getApis:function(){return{}},element:t.element,spec:e,readState:s("No state"),syncComponents:c,components:s([]),events:{}})}function as(n){(t1(n.element).isNone()||o8.isFocused(n))&&(o8.isFocused(n)||o8.focus(n),Q(n,a3,{item:n}))}function af(n){Q(n,a5,{item:n})}function al(n,e,t,o){var r=n.getSystem().build(o);e$(n,r,t)}function ad(n,e,t,o){N(sc(n),function(n){return nr(o.element,n.element)}).each(es)}function am(n,e,t,o,r){var i=sc(n);return nl.from(i[o]).map(function(e){return ad(n,0,0,e),r.each(function(e){al(n,0,function(n,e){ee(n,o).fold(function(){eV(n,e)},function(n){et(n,e)})},e)}),e})}function ag(n,e,t,o){return em(e.routes,o.start).bind(function(n){return em(n,o.destination)})}function ap(n,e,t){sg(n,e).bind(function(o){return sm(n,e,t,o)}).each(function(t){var o=t.transition;eT(n.element,o.transitionClass),eS(n.element,e.destinationAttr)})}function ah(n,e,t,o){ap(n,e,t),ex(n.element,e.stateAttr)&&eb(n.element,e.stateAttr)!==o&&e.onFinish(n,o),eh(n.element,e.stateAttr,o)}function av(n){return em(n,"format").getOr(n.title)}function ab(n){var e=n.replace(/\|/g," ").trim();return 0<e.length?e.split(/\s+/):[]}function ay(n,e,t,o,r){var i=function(n){t(n)&&o(function(n){function e(){return n.stopPropagation()}function t(){return n.preventDefault()}var o=a(t,e);return{target:n5.fromDom((function(n){if(eN()&&u(n.target)){var e=n5.fromDom(n.target);if(eM(e)&&u(e.dom.shadowRoot)&&n.composed&&n.composedPath){var t=n.composedPath();if(t)return 0<t.length?nl.some(t[0]):nl.none()}}return nl.from(n.target)})(n).getOr(n.target)),x:n.clientX,y:n.clientY,stop:e,prevent:t,kill:o,raw:n}}(n))};return n.dom.addEventListener(e,i,r),{unbind:x(sw,n,e,i,r)}}function ax(n,e,t){return ay(n,e,sk,t,!1)}function aS(n,e,t){return ay(n,e,sk,t,!0)}function aO(n){return{isPortrait:s(n.matchMedia("(orientation: portrait)").matches)}}function aw(n,e){var t=n5.fromDom(n),o=null,r=ax(t,"orientationchange",function(){sT.clearInterval(o);var t=aO(n);e.onChange(t),i(function(){e.onReady(t)})}),i=function(e){sT.clearInterval(o);var t=n.innerHeight,r=0;o=sT.setInterval(function(){t!==n.innerHeight?(sT.clearInterval(o),e(nl.some(n.innerHeight))):20<r&&(sT.clearInterval(o),e(nl.none())),r++},50)};return{onAdjustment:i,destroy:function(){r.unbind()}}}function ak(n,e,t){var o=n.document.createRange();return e.fold(function(n){o.setStartBefore(n.dom)},function(n,e){o.setStart(n.dom,e)},function(n){o.setStartAfter(n.dom)}),t.fold(function(n){o.setEndBefore(n.dom)},function(n,e){o.setEnd(n.dom,e)},function(n){o.setEndAfter(n.dom)}),o}function aT(n,e,t,o,r){var i=n.document.createRange();return i.setStart(e.dom,t),i.setEnd(o.dom,r),i}function aC(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}}function aE(n,e,t){return e(n5.fromDom(t.startContainer),t.startOffset,n5.fromDom(t.endContainer),t.endOffset)}function aD(n,e){var t,o=e.match({domRange:function(n){return{ltr:s(n),rtl:nl.none}},relative:function(e,t){return{ltr:M(function(){return ak(n,e,t)}),rtl:M(function(){return nl.some(ak(n,t,e))})}},exact:function(e,t,o,r){return{ltr:M(function(){return aT(n,e,t,o,r)}),rtl:M(function(){return nl.some(aT(n,o,r,e,t))})}}});return(t=o.ltr()).collapsed?o.rtl().filter(function(n){return!1===n.collapsed}).map(function(n){return sC.rtl(n5.fromDom(n.endContainer),n.endOffset,n5.fromDom(n.startContainer),n.startOffset)}).getOrThunk(function(){return aE(0,sC.ltr,t)}):aE(0,sC.ltr,t)}function aM(n,e){return{uid:n.uid,dom:n.dom,components:e,behaviours:ib(n.formBehaviours,[cN.config({store:{mode:"manual",getValue:function(e){var t,o=(t=e.getSystem(),el(n.partUids,function(n,e){return s(t.getByUid(n))}));return el(o,function(n,e){return n().bind(function(n){var t=aA.getCurrent(n),o=Error("Cannot find a current component to extract the value from for form part '"+e+"': "+t9(n.element));return t.fold(function(){return eJ.error(o)},eJ.value)}).map(cN.getValue)})},setValue:function(e,t){ef(t,function(t,o){us(e,n,o).each(function(n){aA.getCurrent(n).each(function(n){cN.setValue(n,t)})})})}}})]),apis:{getField:function(e,t){return us(e,n,t).bind(aA.getCurrent)}}}}function a_(n){return"prepared"===n.type?nl.some(n.menu):nl.none()}!function(){var n=this,e=function(){var n,e,t={exports:{}};function o(){}function r(n){if("object"!=typeof this)throw TypeError("Promises must be constructed via new");if("function"!=typeof n)throw TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(n,this)}function i(n,e){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,r._immediateFn(function(){var t,o=1===n._state?e.onFulfilled:e.onRejected;if(null!==o){try{t=o(n._value)}catch(n){return void c(e.promise,n)}u(e.promise,t)}else(1===n._state?u:c)(e.promise,n._value)})):n._deferreds.push(e)}function u(n,e){try{if(e===n)throw TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if(e instanceof r)return n._state=3,n._value=e,void a(n);if("function"==typeof t)return void f(function(){t.apply(e,arguments)},n)}n._state=1,n._value=e,a(n)}catch(e){c(n,e)}}function c(n,e){n._state=2,n._value=e,a(n)}function a(n){2===n._state&&0===n._deferreds.length&&r._immediateFn(function(){n._handled||r._unhandledRejectionFn(n._value)});for(var e=0,t=n._deferreds.length;e<t;e++)i(n,n._deferreds[e]);n._deferreds=null}function s(n,e,t){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof e?e:null,this.promise=t}function f(n,e){var t=!1;try{n(function(n){t||(t=!0,u(e,n))},function(n){t||(t=!0,c(e,n))})}catch(n){if(t)return;t=!0,c(e,n)}}n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=setTimeout,r.prototype.catch=function(n){return this.then(null,n)},r.prototype.then=function(n,e){var t=new this.constructor(o);return i(this,new s(n,e,t)),t},r.all=function(n){var e=Array.prototype.slice.call(n);return new r(function(n,t){if(0===e.length)return n([]);for(var o=e.length,r=0;r<e.length;r++)!function r(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var c=u.then;if("function"==typeof c)return c.call(u,function(n){r(i,n)},t),0}e[i]=u,0==--o&&n(e)}catch(n){t(n)}}(r,e[r])})},r.resolve=function(n){return n&&"object"==typeof n&&n.constructor===r?n:new r(function(e){e(n)})},r.reject=function(n){return new r(function(e,t){t(n)})},r.race=function(n){return new r(function(e,t){for(var o=0,r=n.length;o<r;o++)n[o].then(e,t)})},r._immediateFn="function"==typeof setImmediate?function(n){setImmediate(n)}:function(n){e(n,0)},r._unhandledRejectionFn=function(n){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",n)},r._setImmediateFn=function(n){r._immediateFn=n},r._setUnhandledRejectionFn=function(n){r._unhandledRejectionFn=n},t.exports?t.exports=r:n.Promise||(n.Promise=r);var l=t.exports;return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||l}};"object"==typeof cZ&&void 0!==c0?c0.exports=e():(n="undefined"!=typeof globalThis?globalThis:n||self).EphoxContactWrapper=e()}();var aR,aF=c0.exports.boltExport,aI=function(n){return rr(n5.fromDom(n.selection.getStart()),"a")},aV=nD(),aB=Object.freeze({__proto__:null,getCurrent:function(n,e,t){return e.find(n)}}),aA=tK({fields:[ts("find")],name:"composing",apis:aB}),aN=uh({name:"Container",factory:function(t){var o=t.dom,r=o.attributes,i=e(o,["attributes"]);return{uid:t.uid,dom:n({tag:"div",attributes:n({role:"presentation"},r)},i),components:t.components,behaviours:t.containerBehaviours.dump,events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[tg("components",[]),iv("containerBehaviours",[]),tg("events",{}),tg("domModification",{}),tg("eventOrder",{})]}),aH=uh({name:"DataField",factory:function(n){return{uid:n.uid,dom:n.dom,behaviours:ib(n.dataBehaviours,[cN.config({store:{mode:"memory",initialValue:n.getInitialValue()}}),aA.config({find:nl.some})]),events:tB([t8(function(e,t){cN.setValue(e,n.getInitialValue())})])}},configFields:[ts("uid"),ts("dom"),ts("getInitialValue"),iv("dataBehaviours",[cN,aA])]}),aP=uh({name:"Input",configFields:s([td("data"),tg("inputAttributes",{}),tg("inputStyles",{}),tg("tag","input"),tg("inputClasses",[]),oT("onSetValue"),tg("styles",{}),tg("eventOrder",{}),iv("inputBehaviours",[cN,o8]),tg("selectOnFocus",!0)])(),factory:function(e,t){return{uid:e.uid,dom:{tag:e.tag,attributes:n({type:"text"},e.inputAttributes),styles:e.inputStyles,classes:e.inputClasses},components:[],behaviours:n(n({},tB([o8.config({onFocus:e.selectOnFocus?function(n){var e=n.element,t=c5(e);e.dom.setSelectionRange(0,t.length)}:c})])),ib(e.inputBehaviours,[cN.config({store:n(n({mode:"manual"},e.data.map(function(n){return{initialValue:n}}).getOr({})),{getValue:function(n){return c5(n.element)},setValue:function(n,e){c5(n.element)!==e&&c4(n.element,e)}}),onSetValue:e.onSetValue})])),eventOrder:e.eventOrder}}}),az=Object.freeze({__proto__:null,exhibit:function(n,e){return tX({attributes:tB([{key:e.tabAttr,value:"true"}])})}}),aj=tK({fields:[tg("tabAttr","data-alloy-tabstop")],name:"tabstopping",active:az}),aL=tinymce.util.Tools.resolve("tinymce.util.I18n"),a$=["input","button","textarea","select"],aG=function(n,e,t){e.disableClass.each(function(e){ek(n.element,e)}),(c7(n,e)?function(n){eh(n.element,"disabled","disabled")}:function(n){eh(n.element,"aria-disabled","true")})(n),e.onDisabled(n)},aU=function(n,e,t){e.disableClass.each(function(e){eT(n.element,e)}),(c7(n,e)?function(n){eS(n.element,"disabled")}:function(n){eh(n.element,"aria-disabled","false")})(n),e.onEnabled(n)},aW=Object.freeze({__proto__:null,enable:aU,disable:aG,isDisabled:an,onLoad:c8,set:function(n,e,t,o){(o?aG:aU)(n,e)}}),aX=Object.freeze({__proto__:null,exhibit:function(n,e){return tX({classes:e.disabled()?e.disableClass.toArray():[]})},events:function(n,e){return tB([tz(nq(),function(e,t){return an(e,n)}),tq(n,e,c8)])}}),aq=tK({fields:[tp("disabled",T,tM),tg("useNative",!0),td("disableClass"),oT("onDisabled"),oT("onEnabled")],name:"disabling",active:aX,apis:aW}),aY=[iv("formBehaviours",[cN])],aK=(ud(function(n,e,t){return n.getField(e,t)}),function(n){var e,t={field:function(n,t){var o;return e.push(n),o=ae(n),{uiType:i1(),owner:"form",name:o,config:t,validated:{}}},record:s(e=[])},o=n(t);return up("form",aY,F(t.record(),function(n){return ui({name:n,pname:ae(n)})}),aM,o)}),aJ=M(function(n,e){var t,o,r,i,u;return[{label:"the link group",items:[(t={fields:[c6("url","Type or paste URL"),c6("text","Link text"),c6("title","Link title"),c6("target","Link target"),{name:"link",spec:aH.sketch({dom:{tag:"span",styles:{display:"none"}},getInitialValue:function(){return nl.none()}})}],maxFieldIndex:3,getInitialValue:function(){return nl.some(aI(e).fold(function(){return{url:"",text:e.selection.getContent({format:"text"}),title:"",target:"",link:nl.none()}},function(n){var e,t,o,r;return e=c1(n),t=eb(n,"href"),o=eb(n,"title"),r=eb(n,"target"),{url:c9(t),text:e!==t?c9(e):"",title:c9(o),target:c9(r),link:nl.some(n)}}))},onExecute:function(t,o){(function(n,e){e.url.toOptional().filter(c2).fold(function(){e.link.bind(f).each(function(e){n.execCommand("unlink")})},function(t){var o,r=((o={}).href=t,e.title.toOptional().filter(c2).each(function(n){o.title=n}),e.target.toOptional().filter(c2).each(function(n){o.target=n}),o);e.link.bind(f).fold(function(){var o=e.text.toOptional().filter(c2).getOr(t);n.insertContent(n.dom.createHTML("a",r,n.dom.encode(o)))},function(n){var o=e.text.toOptional().filter(c2).fold(function(){return eb(n,"href")===c1(n)?nl.some(t):nl.none()},nl.some);ev(n,r),o.each(function(e){n.dom.textContent=e})})})})(e,cN.getValue(t)),n.restoreToolbar(),e.focus()}},o="navigateEvent",r=tc("SerialisedDialog",tE([ts("fields"),tg("maxFieldIndex",t.fields.length-1),ts("onExecute"),ts("getInitialValue"),tF("state",function(){return{dialogSwipeState:rX(),currentScreen:tJ(0)}})]),t),i=ci(aK(function(n){return{dom:ub('<div class="${prefix}-serialised-dialog"></div>'),components:[aN.sketch({dom:ub('<div class="${prefix}-serialised-dialog-chain" style="left: 0px; position: absolute;"></div>'),components:F(r.fields,function(e,t){return t<=r.maxFieldIndex?aN.sketch({dom:ub('<div class="${prefix}-serialised-dialog-screen"></div>'),components:[c(-1,"previous",0<t),n.field(e.name,e.spec),c(1,"next",t<r.maxFieldIndex)]}):n.field(e.name,e.spec)})})],formBehaviours:tB([oA(function(n,e){var t;(t=n.element,no("."+o5("serialised-dialog-chain"),t)).each(function(n){oL(n,"left",-r.state.currentScreen.get()*e.width+"px")})}),iY.config({mode:"special",focusIn:function(n,e){s(n)},onTab:function(n,e){return a(n,1),nl.some(!0)},onShiftTab:function(n,e){return a(n,-1),nl.some(!0)}}),c3("form-events",[t8(function(n,e){r.state.currentScreen.set(0),r.state.dialogSwipeState.clear();var t=u.get(n);rH.highlightFirst(t),r.getInitialValue(n).each(function(e){cN.setValue(n,e)})}),oe(r.onExecute),tj(nj(),function(n,e){"left"===e.event.raw.propertyName&&s(n)}),tj(o,function(n,e){a(n,e.event.direction)})])])}})),u=ci({dom:ub('<div class="${prefix}-dot-container"></div>'),behaviours:tB([rH.config({highlightClass:o5("dot-active"),itemClass:o5("dot-item")})]),components:z(r.fields,function(n,e){return e<=r.maxFieldIndex?[uy('<div class="${prefix}-dot-item ${prefix}-icon-full-dot ${prefix}-icon"></div>')]:[]})}),{dom:ub('<div class="${prefix}-serializer-wrapper"></div>'),components:[i.asSpec(),u.asSpec()],behaviours:tB([iY.config({mode:"special",focusIn:function(n){var e=i.get(n);iY.focusIn(e)}}),c3("serializer-wrapper-events",[tj(nM(),function(n,e){var t=e.event;r.state.dialogSwipeState.set({xValue:t.raw.touches[0].clientX,points:[]})}),tj(n_(),function(n,e){var t=e.event;r.state.dialogSwipeState.on(function(n){e.event.prevent(),r.state.dialogSwipeState.set(function(n,e){if(e===n.xValue)return n;var t=0<e-n.xValue?1:-1;return{xValue:e,points:(0===n.points.length?[]:n.points[n.points.length-1].direction===t?n.points.slice(0,n.points.length-1):n.points).concat([{direction:t,xValue:e}])}}(n,t.raw.touches[0].clientX))})}),tj(nR(),function(n,e){r.state.dialogSwipeState.on(function(e){a(i.get(n),-1*function(){if(0===e.points.length)return 0;var n=e.points[0].direction,t=e.points[e.points.length-1].direction;return -1===n&&-1===t?-1:1===n&&1===t?1:0}())})})])])})]}];function c(n,e,t){return cx.sketch({dom:ub('<span class="${prefix}-icon-'+e+' ${prefix}-icon"></span>'),action:function(e){Q(e,o,{direction:n})},buttonBehaviours:tB([aq.config({disableClass:o5("toolbar-navigation-disabled"),disabled:function(){return!t}})])})}function a(n,e){var t,o,i=(t=n.element,nt("."+o5("serialised-dialog-screen"),t));(o=n.element,no("."+o5("serialised-dialog-chain"),o)).each(function(n){0<=r.state.currentScreen.get()+e&&r.state.currentScreen.get()+e<i.length&&(oU(n,"left").each(function(t){oL(n,"left",parseInt(t,10)-e*uD(i[0])+"px")}),r.state.currentScreen.set(r.state.currentScreen.get()+e))})}function s(n){var e=nt("input",n.element);nl.from(e[r.state.currentScreen.get()]).each(function(e){n.getSystem().getByDom(e).each(function(e){var t=e.element;n.getSystem().triggerFocus(t,n.element)})});var t=u.get(n);rH.highlightAt(t,r.state.currentScreen.get())}}),aQ=Object.freeze({__proto__:null,events:tB([{key:nG(),value:tP({can:function(n,e){var t=e.event,o=t.originator,r=t.target;return!(nr(o,n.element)&&!nr(o,r)&&(console.warn(nG()+" did not get interpreted by the desired target. \nOriginator: "+t9(o)+"\nTarget: "+t9(r)+"\nCheck the "+nG()+" event handlers"),1))}})}])}),aZ=at(),a0=function(n,e){var t,o,r,i,u,c=ed(n,function(n,t){var o;return(1===n.length?eJ.value(n[0].handler):(o=e[t])?(function(n,e,t,o){try{var r,i=((r=nd.call(t,0)).sort(function(t,r){var i=t[e],u=r[e],c=o.indexOf(i),a=o.indexOf(u);if(-1===c)throw Error("The ordering for "+n+" does not have an entry for "+i+".\nOrder specified: "+JSON.stringify(o,null,2));if(-1===a)throw Error("The ordering for "+n+" does not have an entry for "+u+".\nOrder specified: "+JSON.stringify(o,null,2));return c<a?-1:a<c?1:0}),r);return eJ.value(i)}catch(n){return eJ.error([n])}})("Event: "+t,"name",n,o).map(function(n){var e,t,o=F(n,function(n){return n.handler});return{can:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return A(e,function(e,t){return e&&t.can.apply(void 0,n)},!0)},abort:(t=e=o,function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return A(t,function(e,t){return e||t.abort.apply(void 0,n)},!1)}),run:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];I(o,function(e){e.run.apply(void 0,n)})}}}):eJ.error(["The event ("+t+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(F(n,function(n){return n.name}),null,2)])).map(function(o){var r,i=(r=b(o)?{can:C,abort:T,run:o}:o,function(n,e){for(var t=[],o=2;o<arguments.length;o++)t[o-2]=arguments[o];var i=[n,e].concat(t);r.abort.apply(void 0,i)?e.stop():r.can.apply(void 0,i)&&r.run.apply(void 0,i)}),u=1<n.length?V(e[t],function(e){return R(n,function(n){return n.name===e})}).join(" > "):n[0].name;return tV(t,{handler:i,purpose:u})})});return t=[],o=[],I(c,function(n){n.fold(function(n){t.push(n)},function(n){o.push(n)})}),0<(u={errors:t,values:o}).errors.length?eJ.error(P(u.errors)):(i={},0===(r=u.values).length?eJ.value(i):eJ.value(tw(i,tk.apply(void 0,r))))},a1="alloy.base.behaviour",a2=tE([tR("dom","dom",e3(),tE([ts("tag"),tg("styles",{}),tg("classes",[]),tg("attributes",{}),td("value"),td("innerHtml")])),ts("components"),ts("uid"),tg("events",{}),tg("apis",{}),tR("eventOrder","eventOrder",((aR={})[nq()]=["disabling",a1,"toggling","typeaheadevents"],aR[nG()]=[a1,"focusing","keying"],aR[nQ()]=[a1,"disabling","toggling","representing"],aR[nH()]=[a1,"representing","streaming","invalidating"],aR[n0()]=[a1,"representing","item-events","tooltipping"],aR[nF()]=["focusing",a1,"item-type-events"],aR[nM()]=["focusing",a1,"item-type-events"],aR[nB()]=["item-type-events","tooltipping"],aR[nX()]=["receiving","reflecting","tooltipping"],e6(s(aR))),tD()),td("domModification")]),a9=function(t){return em(t,cf).getOrThunk(function(){var o,r,i,c,a;return r=(o=f(eX(t,"uid")?t:n({uid:ch("")},t))).events,c=F(em(i=e(o,["events"]),"components").getOr([]),a9),a=n(n({},i),{events:n(n({},aQ),r),components:c}),eJ.value(function(e){function t(){return C}var o,r,i,c,a,l,d,m,g,p,h,v=tJ(aZ),y=tu(ti("custom.definition",a2,e)),x=(r=F(i=z(eG(o=em(e,"behaviours").getOr({})),function(n){var e=o[n];return u(e)?[e.me]:[]}),function(n){return tm(n.name(),tE([ts("config"),tg("state",or)]))}),{list:i,data:el(ti("component.behaviours",tE(r),e.behaviours).fold(function(n){throw Error(t_(n)+"\nComplete spec:\n"+JSON.stringify(e,null,2))},f),function(n){return s(n.map(function(n){return{config:n.config,state:n.state.init(n.config)}}))})}),S=x.list,O=x.data,w=(c=n(n({},y.dom),{uid:y.uid,domChildren:F(y.components,function(n){return n.element})}),a=y.domModification.fold(function(){return tX({})},tX),l=0<S.length?function(e,t,o,r){var i=n({},t);function u(e){return B(e,function(e,t){return n(n({},t.modification),e)},{})}I(o,function(n){i[n.name()]=n.exhibit(e,r)});var c=ao(i,function(n,e){return{name:n,modification:e}});return tX({classes:B(c.classes,function(n,e){return e.modification.concat(n)},[]),attributes:u(c.attributes),styles:u(c.styles)})}(O,{"alloy.base.modification":a},S,c):a,d=n(n({},c),{attributes:n(n({},c.attributes),l.attributes),styles:n(n({},c.styles),l.styles),classes:c.classes.concat(l.classes)}),ev(m=n5.fromTag(d.tag),d.attributes),au(m,d.classes),o$(m,d.styles),d.innerHtml.each(function(n){var e,t,o;return t=n8(m).dom,er(o=n5.fromDom(t.createDocumentFragment()),((e=(t||document).createElement("div")).innerHTML=n,eI(n5.fromDom(e)))),ei(m),void eV(m,o)}),er(m,d.domChildren),d.value.each(function(n){c4(m,n)}),d.uid,cp(m,d.uid),m),k=(p={"alloy.base.behaviour":y.events},h=y.eventOrder,a0(ao(n(n({},p),(g={},I(S,function(n){g[n.name()]=n.handlers(O)}),g)),ai),h).getOrDie()),T=tJ(y.components),C={uid:e.uid,getSystem:v.get,config:function(n){return(b(O[n.name()])?O[n.name()]:function(){throw Error("Could not find "+n.name()+" in "+JSON.stringify(e,null,2))})()},hasConfigured:function(n){return b(O[n.name()])},spec:e,readState:function(n){return O[n]().map(function(n){return n.state.readState()}).getOr("not enabled")},getApis:function(){return y.apis},connect:function(n){v.set(n)},disconnect:function(){v.set(at(t))},element:w,syncComponents:function(){var n=z(eI(w),function(n){return v.get().getByDom(n).fold(function(){return[]},G)});T.set(n)},components:T.get,events:k};return C}(a)).getOrDie()})},a3="alloy.item-hover",a5="alloy.item-focus",a4=s(a3),a6=s(a5),a8=[ts("data"),ts("components"),ts("dom"),tg("hasSubmenu",!1),td("toggling"),iv("itemBehaviours",[o9,o8,iY,cN]),tg("ignoreFocus",!1),tg("domModification",{}),oD("builder",function(e){return{dom:e.dom,domModification:n(n({},e.domModification),{attributes:n(n(n({role:e.toggling.isSome()?"menuitemcheckbox":"menuitem"},e.domModification.attributes),{"aria-haspopup":e.hasSubmenu}),e.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:ib(e.itemBehaviours,[e.toggling.fold(o9.revoke,function(e){return o9.config(n({aria:{mode:"checked"}},e))}),o8.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:function(n){af(n)}}),iY.config({mode:"execution"}),cN.config({store:{mode:"memory",initialValue:e.data}}),c3("item-type-events",t(t([],oH(),!0),[tj(nB(),as),tj(nY(),o8.focus)],!1))]),components:e.components,eventOrder:e.eventOrder}}),tg("eventOrder",{})],a7=[ts("dom"),ts("components"),oD("builder",function(n){return{dom:n.dom,components:n.components,events:tB([tj(nY(),function(n,e){e.stop()})])}})],sn=s("item-widget"),se=s([ui({name:"widget",overrides:function(n){return{behaviours:tB([cN.config({store:{mode:"manual",getValue:function(e){return n.data},setValue:c}})])}}})]),st=ta("type",{widget:[ts("uid"),ts("data"),ts("components"),ts("dom"),tg("autofocus",!1),tg("ignoreFocus",!1),iv("widgetBehaviours",[cN,o8,iY]),tg("domModification",{}),ul(se()),oD("builder",function(n){function e(e){return us(e,n,"widget").map(function(n){return iY.focusIn(n),n})}function t(e,t){return rj(t.event.target)||n.autofocus&&t.setSource(e.element),nl.none()}var o=uc(sn(),n,se()),r=ua(sn(),n,o.internals());return{dom:n.dom,components:r,domModification:n.domModification,events:tB([oe(function(n,t){e(n).each(function(n){t.stop()})}),tj(nB(),as),tj(nY(),function(t,o){n.autofocus?e(t):o8.focus(t)})]),behaviours:ib(n.widgetBehaviours,[cN.config({store:{mode:"memory",initialValue:n.data}}),o8.config({ignore:n.ignoreFocus,onFocus:function(n){af(n)}}),iY.config({mode:"special",focusIn:n.autofocus?function(n){e(n)}:oa(),onLeft:t,onRight:t,onEscape:function(e,t){return o8.isFocused(e)||n.autofocus?(n.autofocus&&t.setSource(e.element),nl.none()):(o8.focus(e),nl.some(!0))}})])}})],item:a8,separator:a7}),so=s([cc({factory:{sketch:function(n){var e=tc("menu.spec item",st,n);return e.builder(e)}},name:"items",unit:"item",defaults:function(e,t){return eX(t,"uid")?t:n(n({},t),{uid:ch("item")})},overrides:function(n,e){return{type:e.type,ignoreFocus:n.fakeFocus,domModification:{classes:[n.markers.item]}}}})]),sr=s([ts("value"),ts("items"),ts("dom"),ts("components"),tg("eventOrder",{}),iv("menuBehaviours",[rH,cN,aA,iY]),tp("movement",{mode:"menu",moveOnTab:!0},ta("mode",{grid:[oZ(),oD("config",function(n,e){return{mode:"flatgrid",selector:"."+n.markers.item,initSize:{numColumns:e.initSize.numColumns,numRows:e.initSize.numRows},focusManager:n.focusManager}})],matrix:[oD("config",function(n,e){return{mode:"matrix",selectors:{row:e.rowSelector,cell:"."+n.markers.item},focusManager:n.focusManager}}),ts("rowSelector")],menu:[tg("moveOnTab",!0),oD("config",function(n,e){return{mode:"menu",selector:"."+n.markers.item,moveOnTab:e.moveOnTab,focusManager:n.focusManager}})]})),tf("markers",oQ()),tg("fakeFocus",!1),tg("focusManager",rx()),oT("onHighlight")]),si=s("alloy.menu-focus"),su=uv({name:"Menu",configFields:sr(),partFields:so(),factory:function(n,e,t,o){return{uid:n.uid,dom:n.dom,markers:n.markers,behaviours:ib(n.menuBehaviours,[rH.config({highlightClass:n.markers.selectedItem,itemClass:n.markers.item,onHighlight:n.onHighlight}),cN.config({store:{mode:"memory",initialValue:n.value}}),aA.config({find:nl.some}),iY.config(n.movement.config(n,n.movement))]),events:tB([tj(a6(),function(n,e){var t=e.event;n.getSystem().getByDom(t.target).each(function(t){rH.highlight(n,t),e.stop(),Q(n,si(),{menu:n,item:t})})}),tj(a4(),function(n,e){var t=e.event.item;rH.highlight(n,t)})]),components:e,eventOrder:n.eventOrder,domModification:{attributes:{role:"menu"}}}}}),sc=function(n,e){return n.components()},sa=tK({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(n,e,t,o){al(n,0,eV,o)},prepend:function(n,e,t,o){al(n,0,eo,o)},remove:ad,replaceAt:am,replaceBy:function(n,e,t,o,r){return H(sc(n),o).bind(function(e){return am(n,0,0,e,r)})},set:function(n,e,t,o){var r,i,u,a,s;u=t0(i=eH(r=n.element)).bind(function(n){var e;return nr(n,r)?nl.some(r):(e=function(t){for(var o=0;o<t.childNodes.length;o++){var r=n5.fromDom(t.childNodes[o]);if(nr(n,r))return nl.some(r);var i=e(t.childNodes[o]);if(i.isSome())return i}return nl.none()})(r.dom)}),s=F(o,n.getSystem().build),a=n.components(),I(n.components(),function(n){return eB(n.element)}),ei(n.element),n.syncComponents(),I($(a,s),function(e){ej(e),n.getSystem().removeFromWorld(e)}),I(s,function(e){e.getSystem().isConnected()?ea(n,e):(n.getSystem().addToWorld(e),ea(n,e),eP(n.element)&&eL(e)),n.syncComponents()}),u.each(function(n){t0(i).filter(function(e){return nr(e,n)}).fold(function(){tQ(n)},c)})},contents:sc})}),ss=function(n,e,t,o){return em(t,o).bind(function(o){return em(n,o).bind(function(o){var r=ss(n,e,t,o);return nl.some([o].concat(r))})}).getOr([])},sf=function(){function e(n){return a(n).bind(a_)}function t(n){return em(o.get(),n)}var o=tJ({}),r=tJ({}),i=tJ({}),u=rX(),c=tJ({}),a=function(n){return em(r.get(),n)};return{setMenuBuilt:function(e,t){var o;r.set(n(n({},r.get()),((o={})[e]={type:"prepared",menu:t},o)))},setContents:function(n,e,t,a){u.set(n),o.set(t),r.set(e),c.set(a);var s,f,l,d=(s={},ef(a,function(n,e){I(n,function(n){s[n]=e})}),l=el(f=eW(t,function(n,e){return{k:n,v:e}}),function(n,e){return[e].concat(ss(s,t,f,e))}),el(s,function(n){return em(l,n).getOr([n])}));i.set(d)},expand:function(n){return em(o.get(),n).map(function(e){return[e].concat(em(i.get(),n).getOr([]))})},refresh:function(n){return em(i.get(),n)},collapse:function(n){return em(i.get(),n).bind(function(n){return 1<n.length?nl.some(n.slice(1)):nl.none()})},lookupMenu:a,lookupItem:t,otherMenus:function(n){return $(eG(c.get()),n)},getPrimary:function(){return u.get().bind(e)},getMenus:function(){return r.get()},clear:function(){o.set({}),r.set({}),i.set({}),u.clear()},isClear:function(){return u.get().isNone()},getTriggeringPath:function(n,r){var c=V(t(n).toArray(),function(n){return e(n).isSome()});return em(i.get(),n).bind(function(n){var t=L(c.concat(n));return function(n){for(var e=[],t=0;t<n.length;t++){var o=n[t];if(!o.isSome())return nl.none();e.push(o.getOrDie())}return nl.some(e)}(z(t,function(n,i){var c;return c=t.slice(0,i+1),e(n).bind(function(e){return(function(e){for(var t=eG(e),o=0,r=t.length;o<r;o++){var i=e[t[o]];if(i===n)return nl.some(i)}return nl.none()})(o.get()).bind(function(n){return r(n).map(function(n){return{triggeredMenu:e,triggeringItem:n,triggeringPath:c}})})}).fold(function(){return tA(u.get(),n)?[]:[nl.none()]},function(n){return[nl.some(n)]})}))})}}},sl=s("collapse-item"),sd=uh({name:"TieredMenu",configFields:[ok(0,"onExecute",e3()),ok(0,"onEscape",e3()),oE("onOpenMenu"),oE("onOpenSubmenu"),oT("onRepositionMenu"),oT("onCollapseMenu"),tg("highlightImmediately",!0),tl("data",[ts("primary"),ts("menus"),ts("expansions")]),tg("fakeFocus",!1),oT("onHighlight"),oT("onHover"),tl("markers",[ts("backgroundMenu")].concat(oO()).concat(ow())),ts("dom"),tg("navigateOnHover",!0),tg("stayInDom",!1),iv("tmenuBehaviours",[iY,rH,aA,sa]),tg("eventOrder",{})],apis:{collapseMenu:function(n,e){n.collapseMenu(e)},highlightPrimary:function(n,e){n.highlightPrimary(e)},repositionMenus:function(n,e){n.repositionMenus(e)}},factory:function(e,t){function o(n){return cN.getValue(n).value}function r(n,e){rH.highlight(n,e),rH.getHighlighted(e).orThunk(function(){return rH.getFirst(e)}).each(function(e){n3(n,e.element,nY(),{})})}function i(n,e){return tN(F(e,function(e){return n.lookupMenu(e).bind(function(n){return"prepared"===n.type?nl.some(n.menu):nl.none()})}))}function u(n,t,o){I(i(t,t.otherMenus(o)),function(t){ac(t.element,[e.markers.backgroundMenu]),e.stayInDom||sa.remove(n,t)})}function a(n,t){ef(m.get().getOrThunk(function(){var t,r={};return I(V((t=n.element,nt("."+e.markers.item,t)),function(n){return"true"===eb(n,"aria-haspopup")}),function(e){n.getSystem().getByDom(e).each(function(n){r[o(n)]=n})}),m.set(r),r}),function(n,e){var o=_(t,e);eh(n.element,"aria-expanded",o)})}function s(n,t,o){return nl.from(o[0]).bind(function(c){return t.lookupMenu(c).bind(function(c){if("notbuilt"===c.type)return nl.none();var a=c.menu;return I(i(t,o.slice(1)),function(n){ek(n.element,e.markers.backgroundMenu)}),eP(a.element)||sa.append(n,tV(cf,a)),ac(a.element,[e.markers.backgroundMenu]),r(n,a),u(n,t,o),nl.some(a)})})}var l,d,m=rX(),g=sf();function p(n,t,r){if(void 0===r&&(r=l.HighlightSubmenu),t.hasConfigured(aq)&&aq.isDisabled(t))return nl.some(t);var i=o(t);return g.expand(i).bind(function(o){return a(n,o),nl.from(o[0]).bind(function(i){return g.lookupMenu(i).bind(function(u){var c=function(n,e,t){if("notbuilt"!==t.type)return t.menu;var o=n.getSystem().build(t.nbMenu());return g.setMenuBuilt(e,o),o}(n,i,u);return eP(c.element)||sa.append(n,tV(cf,c)),e.onOpenSubmenu(n,t,c,L(o)),r===l.HighlightSubmenu?(rH.highlightFirst(c),s(n,g,o)):(rH.dehighlightAll(c),nl.some(t))})})})}function h(n,t){var r=o(t);return g.collapse(r).bind(function(o){return a(n,o),s(n,g,o).map(function(o){return e.onCollapseMenu(n,t,o),o})})}function v(n){return function(t,o){return rr(o.getSource(),"."+e.markers.item).bind(function(e){return t.getSystem().getByDom(e).toOptional().bind(function(e){return n(t,e).map(C)})})}}function b(n){return rH.getHighlighted(n).bind(rH.getHighlighted)}(d=l={})[d.HighlightSubmenu=0]="HighlightSubmenu",d[d.HighlightParent=1]="HighlightParent";var y=tB([tj(si(),function(n,e){var t=e.event.item;g.lookupItem(o(t)).each(function(){var t=e.event.menu;rH.highlight(n,t);var r=o(e.event.item);g.refresh(r).each(function(e){return u(n,g,e)})})}),oe(function(n,t){var r=t.event.target;n.getSystem().getByDom(r).each(function(t){0===o(t).indexOf("collapse-item")&&h(n,t),p(n,t,l.HighlightSubmenu).fold(function(){e.onExecute(n,t)},c)})}),t8(function(t,o){var i,u,c;(u=(i=e.data.primary,el(e.data.menus,function(o,r){function u(){return su.sketch(n(n({},o),{value:r,markers:e.markers,fakeFocus:e.fakeFocus,onHighlight:e.onHighlight,focusManager:(e.fakeFocus?rS:rx)()}))}return r===i?{type:"prepared",menu:t.getSystem().build(u())}:{type:"notbuilt",nbMenu:u}})),c=el(e.data.menus,function(n,e){return z(n.items,function(n){return"separator"===n.type?[]:[n.data.value]})}),g.setContents(e.data.primary,u,e.data.expansions,c),g.getPrimary()).each(function(n){sa.append(t,tV(cf,n)),e.onOpenMenu(t,n),e.highlightImmediately&&r(t,n)})})].concat(e.navigateOnHover?[tj(a4(),function(n,t){var r=t.event.item,i=o(r);g.refresh(i).bind(function(e){return a(n,e),s(n,g,e)}),p(n,r,l.HighlightParent),e.onHover(n,r)})]:[]));return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:ib(e.tmenuBehaviours,[iY.config({mode:"special",onRight:v(function(n,e){return rj(e.element)?nl.none():p(n,e,l.HighlightSubmenu)}),onLeft:v(function(n,e){return rj(e.element)?nl.none():h(n,e)}),onEscape:v(function(n,t){return h(n,t).orThunk(function(){return e.onEscape(n,t).map(function(){return n})})}),focusIn:function(n,e){g.getPrimary().each(function(e){n3(n,e.element,nY(),{})})}}),rH.config({highlightClass:e.markers.selectedMenu,itemClass:e.markers.menu}),aA.config({find:function(n){return rH.getHighlighted(n)}}),sa.config({})]),eventOrder:e.eventOrder,apis:{collapseMenu:function(n){b(n).each(function(e){h(n,e)})},highlightPrimary:function(n){g.getPrimary().each(function(e){r(n,e)})},repositionMenus:function(n){g.getPrimary().bind(function(e){return b(n).bind(function(n){var e=o(n),t=tN(F(ed(g.getMenus(),f),a_));return g.getTriggeringPath(e,function(n){return U(t,function(e){return e.getSystem().isConnected()?N(rH.getCandidates(e),function(e){return o(e)===n}):nl.none()})})}).map(function(n){return{primary:e,triggeringPath:n}})}).fold(function(){nl.from(n.components()[0]).filter(function(n){return"menu"===eb(n.element,"role")}).each(function(t){e.onRepositionMenu(n,t,[])})},function(t){var o=t.primary,r=t.triggeringPath;e.onRepositionMenu(n,o,r)})}},events:y}},extraApis:{tieredData:function(n,e,t){return{primary:n,menus:e,expansions:t}},singleData:function(n,e){return{primary:n,menus:tV(n,e),expansions:{}}},collapseItem:function(n){return{value:ix(sl()),meta:{text:n}}}}}),sm=function(n,e,t,o){return ag(0,e,0,o).bind(function(n){return n.transition.map(function(e){return{transition:e,route:n}})})},sg=function(n,e,t){return ey(n.element,e.destinationAttr).map(function(t){return{start:eb(n.element,e.stateAttr),destination:t}})},sp=Object.freeze({__proto__:null,findRoute:ag,disableTransition:ap,getCurrentRoute:sg,jumpTo:ah,progressTo:function(n,e,t,o){ex(n.element,e.destinationAttr)&&(ey(n.element,e.destinationAttr).each(function(t){eh(n.element,e.stateAttr,t)}),eS(n.element,e.destinationAttr));var r={start:eb(n.element,e.stateAttr),destination:o};sm(n,e,t,r).fold(function(){ah(n,e,t,o)},function(r){ap(n,e,t);var i=r.transition;ek(n.element,i.transitionClass),eh(n.element,e.destinationAttr,o)})},getState:function(n,e,t){return ey(n.element,e.stateAttr)}}),sh=Object.freeze({__proto__:null,events:function(n,e){return tB([tj(nj(),function(t,o){var r=o.event.raw;sg(t,n).each(function(o){ag(0,n,0,o).each(function(i){i.transition.each(function(i){r.propertyName===i.property&&(ah(t,n,e,o.destination),n.onTransition(t,o))})})})}),t8(function(t,o){ah(t,n,e,n.initialState)})])}}),sv=tK({fields:[tg("destinationAttr","data-transitioning-destination"),tg("stateAttr","data-transitioning-state"),ts("initialState"),oT("onTransition"),oT("onFinish"),tf("routes",tr(eJ.value,tr(eJ.value,tt([tm("transition",tt([ts("property"),ts("transitionClass")]))]))))],name:"transitioning",active:sh,apis:sp,extra:{createRoutes:function(n){var e={};return ef(n,function(n,t){var o=t.split("<->");e[o[0]]=tV(o[1],n),e[o[1]]=tV(o[0],n)}),e},createBistate:function(n,e,t){return tB([{key:n,value:tV(e,t)},{key:e,value:tV(n,t)}])},createTristate:function(n,e,t,o){return tB([{key:n,value:tB([{key:e,value:o},{key:t,value:o}])},{key:e,value:tB([{key:n,value:o},{key:t,value:o}])},{key:t,value:tB([{key:n,value:o},{key:e,value:o}])}])}}}),sb=o5("scrollable"),sy=function(n,e,t,o,r){return{data:{value:n,text:e},type:"item",dom:{tag:"div",classes:r?[o5("styles-item-is-menu")]:[]},toggling:{toggleOnExecute:!1,toggleClass:o5("format-matches"),selected:t},itemBehaviours:tB(r?[]:[oB(n,function(n,e){(e?o9.on:o9.off)(n)})]),components:[{dom:{tag:"div",attributes:{style:o},innerHtml:e}}]}},sx=function(n,e,t,o){return{value:n,dom:{tag:"div"},components:[cx.sketch({dom:{tag:"div",classes:[o5("styles-collapser")]},components:o?[{dom:{tag:"span",classes:[o5("styles-collapse-icon")]}},aa(n)]:[aa(n)],action:function(n){var e;o&&(e=t().get(n),sd.collapseMenu(e))}}),{dom:{tag:"div",classes:[o5("styles-menu-items-container")]},components:[su.parts.items({})],behaviours:tB([c3("adhoc-scrollable-menu",[t8(function(n,e){oL(n.element,"overflow-y","auto"),oL(n.element,"-webkit-overflow-scrolling","touch"),ek(n.element,sb)}),t7(function(n){oW(n.element,"overflow-y"),oW(n.element,"-webkit-overflow-scrolling"),eT(n.element,sb)})])])}],items:e,menuBehaviours:tB([sv.config({initialState:"after",routes:sv.createTristate("before","current","after",{transition:{property:"transform",transitionClass:"transitioning"}})})])}},sS=function(n){return B(n,function(n,e){var t,o,r,i=eg(e,"items")?{item:tw((t=["items"],o={},ef(e,function(n,e){_(t,e)||(o[e]=n)}),o),{menu:!0}),menus:tw((r=sS(e.items)).menus,tV(e.title,r.items)),expansions:tw(r.expansions,tV(e.title,e.title))}:{item:e,menus:{},expansions:{}};return{menus:tw(n.menus,i.menus),items:[i.item].concat(n.items),expansions:tw(n.expansions,i.expansions)}},{menus:{},expansions:{},items:[]})},sO=function(n){return z(n,function(n){return(g(n)?sO:ab)(n)})},sw=function(n,e,t,o){n.dom.removeEventListener(e,t,o)},sk=C,sT=tinymce.util.Tools.resolve("tinymce.util.Delay"),sC=th([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);function sE(n,e){var t=n4(n);return"input"===t?fm.after(n):_(["br","img"],t)?0===e?fm.before(n):fm.after(n):fm.on(n,e)}function sD(n){return nl.from(n.getSelection())}function sM(n,e,t,o,r){var i=aT(n,e,t,o,r);sD(n).each(function(n){n.removeAllRanges(),n.addRange(i)})}function s_(n){if(0<n.rangeCount){var e=n.getRangeAt(0),t=n.getRangeAt(n.rangeCount-1);return nl.some(ff(n5.fromDom(e.startContainer),e.startOffset,n5.fromDom(t.endContainer),t.endOffset))}return nl.none()}function sR(n){if(null===n.anchorNode||null===n.focusNode)return s_(n);var e,t,o,r,i=n5.fromDom(n.anchorNode),u=n5.fromDom(n.focusNode);return e=n.anchorOffset,t=n.focusOffset,(o=n8(i).dom.createRange()).setStart(i.dom,e),o.setEnd(u.dom,t),r=nr(i,u)&&e===t,o.collapsed&&!r?nl.some(ff(i,n.anchorOffset,u,n.focusOffset)):s_(n)}function sF(n){return sD(n).filter(function(n){return 0<n.rangeCount}).bind(sR)}function sI(n,e){var t,o,r=(t=aD(n,e).match({ltr:function(e,t,o,r){var i=n.document.createRange();return i.setStart(e.dom,t),i.setEnd(o.dom,r),i},rtl:function(e,t,o,r){var i=n.document.createRange();return i.setStart(o.dom,r),i.setEnd(e.dom,t),i}})).getClientRects();return 0<(o=0<r.length?r[0]:t.getBoundingClientRect()).width||0<o.height?nl.some(o).map(aC):nl.none()}function sV(n){return nl.from(n.dom.contentWindow)}function sB(n){return sV(n).bind(sF)}function sA(n){return n.getFrame()}function sN(n,e,t,o){return n[t].getOrThunk(function(){return function(n){return ax(e,o,n)}})}function sH(n){var e=sA(n);return nl.some(n5.fromDom(e.dom.contentWindow.document.body)).bind(function(t){return nl.some(n5.fromDom(e.dom.contentWindow.document)).bind(function(o){return sV(e).map(function(r){var i=n5.fromDom(o.dom.documentElement),u=n.getCursorBox.getOrThunk(function(){return function(){return sF(r).map(function(n){return fp.exact(n.start,n.soffset,n.finish,n.foffset)}).bind(function(n){return sI(r,n).orThunk(function(){return sF(r).filter(function(n){return nr(n.start,n.finish)&&n.soffset===n.foffset}).bind(function(n){var e=n.start.dom.getBoundingClientRect();return 0<e.width||0<e.height?nl.some(e):nl.none()})})})}}),c=n.setSelection.getOrThunk(function(){return function(n,e,t,o){!function(n,e,t,o,r){var i,u;aD(n,(i=sE(e,t),u=sE(o,r),fp.relative(i,u))).match({ltr:function(e,t,o,r){sM(n,e,t,o,r)},rtl:function(e,t,o,r){sD(n).each(function(i){if(i.setBaseAndExtent)i.setBaseAndExtent(e.dom,t,o.dom,r);else if(i.extend)try{i.collapse(e.dom,t),i.extend(o.dom,r)}catch(i){sM(n,o,r,e,t)}else sM(n,o,r,e,t)})}})}(r,n,e,t,o)}}),a=n.clearSelection.getOrThunk(function(){return function(){sD(r).each(function(n){return n.removeAllRanges()})}});return{body:t,doc:o,win:r,html:i,getSelection:x(sB,e),setSelection:c,clearSelection:a,frame:e,onKeyup:sN(n,o,"onKeyup","keyup"),onNodeChanged:sN(n,o,"onNodeChanged","SelectionChange"),onDomChanged:n.onDomChanged,onScrollToCursor:n.onScrollToCursor,onScrollToElement:n.onScrollToElement,onToReading:n.onToReading,onToEditing:n.onToEditing,onToolbarScrollStart:n.onToolbarScrollStart,onTouchContent:n.onTouchContent,onTapContent:n.onTapContent,onTouchToolstrip:n.onTouchToolstrip,getCursorBox:u}})})})}function sP(){var n=no("head").getOrDie(),e=no('meta[name="viewport"]').getOrThunk(function(){var e=n5.fromTag("meta");return eh(e,"name","viewport"),eV(n,e),e}),t=eb(e,"content");return{maximize:function(){eh(e,"content","width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0")},restore:function(){null!=t&&0<t.length?eh(e,"content",t):eh(e,"content","user-scalable=yes")}}}function sz(n,e){function t(n){return function(e){var t=eb(e,"style"),o=void 0===t?"no-styles":t.trim();o===n||(eh(e,fv,o),eh(e,"style",n))}}var o,r=V(function(n,e){for(var t=b(e)?e:T,o=n.dom,r=[];null!==o.parentNode&&void 0!==o.parentNode;){var i=o.parentNode,u=n5.fromDom(i);if(r.push(u),!0===t(u))break;o=i}return r}(n,void 0),function(n){return nn(n,"*")}),i=z(r,function(n){return V(en(n).map(eI).map(function(e){return V(e,function(e){return!nr(n,e)})}).getOr([]),function(n){return nn(n,"*")})}),u=void 0!==(o=oG(e,"background-color"))&&""!==o?"background-color:"+o+"!important":"background-color:rgb(255,255,255)!important;";I(i,t("display:none!important;")),I(r,t(fb+fy+u)),t((!0===fx?"":fb)+fy+u)(n)}function sj(){I(nt("["+fv+"]"),function(n){var e=eb(n,fv);"no-styles"!==e?eh(n,"style",e):eS(n,"style"),eS(n,fv)})}function sL(n){var e=n.raw;return void 0===e.touches||1!==e.touches.length?nl.none():nl.some(e.touches[0])}function s$(n){var e,t,o=rX(),r=tJ(!1),i=(e=function(e){n.triggerEvent(nJ(),e),r.set(!0)},t=null,{cancel:function(){null!==t&&(clearTimeout(t),t=null)},schedule:function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];t=setTimeout(function(){e.apply(null,n),t=null},400)}}),u=tB([{key:nM(),value:function(n){return sL(n).each(function(e){i.cancel();var t={x:e.clientX,y:e.clientY,target:n.target};i.schedule(n),r.set(!1),o.set(t)}),nl.none()}},{key:n_(),value:function(n){return i.cancel(),sL(n).each(function(n){o.on(function(e){(5<Math.abs(n.clientX-e.x)||5<Math.abs(n.clientY-e.y))&&o.clear()})}),nl.none()}},{key:nR(),value:function(e){return i.cancel(),o.get().filter(function(n){return nr(n.target,e.target)}).map(function(t){return r.get()?(e.prevent(),!1):n.triggerEvent(nK(),e)})}}]);return{fireIfReady:function(n,e){return em(u,e).bind(function(e){return e(n)})}}}function sG(n){var e=s$({triggerEvent:function(e,t){n.onTapContent(t)}});return{fireTouchstart:function(n){e.fireIfReady(n,"touchstart")},onTouchend:function(){return ax(n.body,"touchend",function(n){e.fireIfReady(n,"touchend")})},onTouchmove:function(){return ax(n.body,"touchmove",function(n){e.fireIfReady(n,"touchmove")})}}}function sU(n,e){var t=parseInt(eb(n,e),10);return isNaN(t)?0:t}function sW(e){return n(n({},e),{width:2})}function sX(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}}function sq(n){var e=n.getSelection();return void 0!==e&&0<e.rangeCount?function(n){if(n.collapsed){var e=n5.fromDom(n.startContainer);return en(e).bind(function(t){var o=fp.exact(e,n.startOffset,t,"img"===n4(t)?1:fl.getOption(t).fold(function(){return eI(t).length},function(n){return n.length}));return sI(n.startContainer.ownerDocument.defaultView,o).map(sW).map(G)}).getOr([])}return F(n.getClientRects(),sX)}(e.getRangeAt(0)):[]}function sY(n){return{top:n.top,bottom:n.top+n.height}}function sK(n,e){function t(){p(o)||(clearTimeout(o),o=null)}var o=null;return{cancel:t,throttle:function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];t(),o=setTimeout(function(){o=null,n.apply(null,r)},e)}}}function sJ(n){var e,t=ci(aN.sketch({dom:ub('<div aria-hidden="true" class="${prefix}-mask-tap-icon"></div>'),containerBehaviours:tB([o9.config({toggleClass:o5("mask-tap-icon-selected"),toggleOnExecute:!1})])})),o=(e=null,{cancel:function(){p(e)||(clearTimeout(e),e=null)},throttle:function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];p(e)&&(e=setTimeout(function(){e=null,n.apply(null,t)},200))}});return aN.sketch({dom:ub('<div class="${prefix}-disabled-mask"></div>'),components:[aN.sketch({dom:ub('<div class="${prefix}-content-container"></div>'),components:[cx.sketch({dom:ub('<div class="${prefix}-content-tap-section"></div>'),components:[t.asSpec()],action:function(n){o.throttle()},buttonBehaviours:tB([o9.config({toggleClass:o5("mask-tap-icon-selected")})])})]})]})}function sQ(n){var e,t;return"true"===eb(n,fR)?0<n.dom.scrollLeft||(n.dom.scrollLeft=1,e=0!==n.dom.scrollLeft,n.dom.scrollLeft=0,e):0<n.dom.scrollTop||(n.dom.scrollTop=1,t=0!==n.dom.scrollTop,n.dom.scrollTop=0,t)}function sZ(){function n(n){var e=!0===n.scrollable?"${prefix}-toolbar-scrollable-group":"";return{dom:ub('<div aria-label="'+n.label+'" class="${prefix}-toolbar-group '+e+'"></div>'),tgroupBehaviours:tB([c3("adhoc-scrollable-toolbar",!0===n.scrollable?[on(function(n,e){oL(n.element,"overflow-x","auto"),eh(n.element,fR,"true"),ek(n.element,sb)})]:[])]),components:[aN.sketch({components:[f_.parts.items({})]})],markers:{itemSelector:"."+o5("toolbar-group-item")},items:n.items}}function e(){fE.setGroups(t,r.get()),o9.off(t)}var t=a9(fE.sketch({dom:ub('<div class="${prefix}-toolbar"></div>'),components:[fE.parts.groups({})],toolbarBehaviours:tB([o9.config({toggleClass:o5("context-toolbar"),toggleOnExecute:!1,aria:{mode:"none"}}),iY.config({mode:"cyclic"})]),shell:!0})),o=a9(aN.sketch({dom:{classes:[o5("toolstrip")]},components:[tV(cf,t)],containerBehaviours:tB([o9.config({toggleClass:o5("android-selection-context-toolbar"),toggleOnExecute:!1})])})),r=tJ([]);return{wrapper:o,toolbar:t,createGroups:function(e){return F(e,a(f_.sketch,n))},setGroups:function(n){r.set(n),e()},setContextToolbar:function(n){o9.on(t),fE.setGroups(t,n)},restoreToolbar:function(){o9.isOn(t)&&e()},refresh:function(){},focus:function(){iY.focusIn(t)}}}function s0(n){return a9(cx.sketch({dom:ub('<div class="${prefix}-mask-edit-icon ${prefix}-icon"></div>'),action:function(){n.run(function(n){n.setReadOnly(!1)})}}))}function s1(){return a9(aN.sketch({dom:ub('<div class="${prefix}-editor-socket"></div>'),components:[],containerBehaviours:tB([sa.config({})])}))}function s2(n,e,t,o){(!0===t?os.toAlpha:os.toOmega)(o),(t?function(n,e){sa.append(n,tV(cf,e))}:function(n,e){sa.remove(n,e)})(n,e)}function s9(n,e){return e.getAnimationRoot.fold(function(){return n.element},function(e){return e(n)})}function s3(n){return n.dimension.property}function s5(n,e){return n.dimension.getDimension(e)}function s4(n,e){ac(s9(n,e),[e.shrinkingClass,e.growingClass])}function s6(n,e){eT(n.element,e.openClass),ek(n.element,e.closedClass),oL(n.element,s3(e),"0px"),oX(n.element)}function s8(n,e){eT(n.element,e.closedClass),ek(n.element,e.openClass),oW(n.element,s3(e))}function s7(n,e,t,o){t.setCollapsed(),oL(n.element,s3(e),s5(e,n.element)),oX(n.element),s4(n,e),s6(n,e),e.onStartShrink(n),e.onShrunk(n)}function fn(n,e,t){var o=s5(e,n.element);("0px"===o?s7:function(n,e,t,o){var r=o.getOrThunk(function(){return s5(e,n.element)});t.setCollapsed(),oL(n.element,s3(e),r),oX(n.element);var i=s9(n,e);eT(i,e.growingClass),ek(i,e.shrinkingClass),s6(n,e),e.onStartShrink(n)})(n,e,t,nl.some(o))}function fe(n,e,t){var o=s9(n,e),r=eC(o,e.shrinkingClass),i=s5(e,n.element);s8(n,e);var u=s5(e,n.element);(r?function(){oL(n.element,s3(e),i),oX(n.element)}:function(){s6(n,e)})(),eT(o,e.shrinkingClass),ek(o,e.growingClass),s8(n,e),oL(n.element,s3(e),u),t.setExpanded(),e.onStartGrow(n)}function ft(n,e,t){return!0===eC(s9(n,e),e.growingClass)}function fo(n,e,t){return!0===eC(s9(n,e),e.shrinkingClass)}function fr(n,e){var t=a9(aN.sketch({dom:{tag:"div",classes:[o5("dropup")]},components:[],containerBehaviours:tB([sa.config({}),fV.config({closedClass:o5("dropup-closed"),openClass:o5("dropup-open"),shrinkingClass:o5("dropup-shrinking"),growingClass:o5("dropup-growing"),dimension:{property:"height"},onShrunk:function(t){n(),e(),sa.set(t,[])},onGrown:function(t){n(),e()}}),oA(function(n,e){o(c)})])})),o=function(n){window.requestAnimationFrame(function(){n(),fV.shrink(t)})};return{appear:function(n,e,o){!0===fV.hasShrunk(t)&&!1===fV.isTransitioning(t)&&window.requestAnimationFrame(function(){e(o),sa.set(t,[n()]),fV.grow(t)})},disappear:o,component:t,element:t.element}}function fi(){return nD().browser.isFirefox()}function fu(n,e){return tJ(em(n,"target").getOr(e))}function fc(n,e,t,o,r,i){var u,c,a=n(e,o),s=(u=tJ(!1),c=tJ(!1),{stop:function(){u.set(!0)},cut:function(){c.set(!0)},isStopped:u.get,isCut:c.get,event:t,setSource:r.set,getSource:r.get});return a.fold(function(){return i.logEventNoHandlers(e,o),fB.complete()},function(n){var t=n.descHandler;return ar(t)(s),s.isStopped()?(i.logEventStopped(e,n.element,t.purpose),fB.stopped()):s.isCut()?(i.logEventCut(e,n.element,t.purpose),fB.complete()):en(n.element).fold(function(){return i.logNoParent(e,n.element,t.purpose),fB.complete()},function(o){return i.logEventResponse(e,n.element,t.purpose),fB.resume(o)})})}function fa(n,e,t,o,r){var i=fu(t,o);return fA(n,e,t,o,i,r)}sC.ltr,sC.rtl;var fs,ff=function(n,e,t,o){return{start:n,soffset:e,finish:t,foffset:o}},fl={get:function(n){if(!e_(n))throw Error("Can only get text value of a text node");return fs(n).getOr("")},getOption:fs=function(n){return e_(n)?nl.from(n.dom.nodeValue):nl.none()},set:function(n,e){if(!e_(n))throw Error("Can only set raw text value of a text node");n.dom.nodeValue=e}},fd=th([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),fm={before:fd.before,on:fd.on,after:fd.after,cata:function(n,e,t,o){return n.fold(e,t,o)},getStart:function(n){return n.fold(f,f,f)}},fg=th([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),fp={domRange:fg.domRange,relative:fg.relative,exact:fg.exact,exactFromRange:function(n){return fg.exact(n.start,n.soffset,n.finish,n.foffset)},getWin:function(n){var e=n.match({domRange:function(n){return n5.fromDom(n.startContainer)},relative:function(n,e){return fm.getStart(n)},exact:function(n,e,t,o){return n}});return n5.fromDom(n7(e).dom.defaultView)},range:ff},fh=function(n){return n.getWin.getOrThunk(function(){var e=sA(n);return function(){return sV(e)}})()},fv="data-ephox-mobile-fullscreen-style",fb="position:absolute!important;",fy="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",fx=nD().os.isAndroid(),fS=6<=nD().os.version.major,fO="data-"+o5("last-outer-height"),fw=s({unbind:c}),fk=tE([tl("editor",[ts("getFrame"),td("getBody"),td("getDoc"),td("getWin"),td("getSelection"),td("setSelection"),td("clearSelection"),td("cursorSaver"),td("onKeyup"),td("onNodeChanged"),td("getCursorBox"),ts("onDomChanged"),tg("onTouchContent",c),tg("onTapContent",c),tg("onTouchToolstrip",c),tg("onScrollToCursor",fw),tg("onScrollToElement",fw),tg("onToEditing",fw),tg("onToReading",fw),tg("onToolbarScrollStart",f)]),ts("socket"),ts("toolstrip"),ts("dropup"),ts("toolbar"),ts("container"),ts("alloy"),tF("win",function(n){return n8(n.socket).dom.defaultView}),tF("body",function(n){return n5.fromDom(n.socket.dom.ownerDocument.body)}),tg("translate",f),tg("setReadOnly",c),tg("readOnlyOnInit",C)]),fT=s([ts("dom"),tg("shell",!0),iv("toolbarBehaviours",[sa])]),fC=s([cu({name:"groups",overrides:function(){return{behaviours:tB([sa.config({})])}}})]),fE=uv({name:"Toolbar",configFields:fT(),partFields:fC(),factory:function(n,e,t,o){var r=n.shell?{behaviours:[sa.config({})],components:[]}:{behaviours:[],components:e};return{uid:n.uid,dom:n.dom,components:r.components,behaviours:ib(n.toolbarBehaviours,r.behaviours),apis:{setGroups:function(e,t){(n.shell?nl.some(e):us(e,n,"groups")).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(n){sa.set(n,t)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(n,e,t){n.setGroups(e,t)}}}),fD=s([ts("items"),tl("markers",F(["itemSelector"],ts)),iv("tgroupBehaviours",[iY])]),fM=s([cc({name:"items",unit:"item"})]),f_=uv({name:"ToolbarGroup",configFields:fD(),partFields:fM(),factory:function(n,e,t,o){return{uid:n.uid,dom:n.dom,components:e,behaviours:ib(n.tgroupBehaviours,[iY.config({mode:"flow",selector:n.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),fR="data-"+o5("horizontal-scroll"),fF=Object.freeze({__proto__:null,refresh:function(n,e,t){var o;t.isExpanded()&&(oW(n.element,s3(e)),o=s5(e,n.element),oL(n.element,s3(e),o))},grow:function(n,e,t){t.isExpanded()||fe(n,e,t)},shrink:function(n,e,t){t.isExpanded()&&fn(n,e,t)},immediateShrink:function(n,e,t){t.isExpanded()&&s7(n,e,t)},hasGrown:function(n,e,t){return t.isExpanded()},hasShrunk:function(n,e,t){return t.isCollapsed()},isGrowing:ft,isShrinking:fo,isTransitioning:function(n,e,t){return ft(n,e)||fo(n,e)},toggleGrow:function(n,e,t){(t.isExpanded()?fn:fe)(n,e,t)},disableTransitions:s4}),fI=Object.freeze({__proto__:null,exhibit:function(n,e,t){return tX(e.expanded?{classes:[e.openClass],styles:{}}:{classes:[e.closedClass],styles:tV(e.dimension.property,"0px")})},events:function(n,e){return tB([t$(nj())(function(t,o){o.event.raw.propertyName===n.dimension.property&&(s4(t,n),e.isExpanded()&&oW(t.element,n.dimension.property),(e.isExpanded()?n.onGrown:n.onShrunk)(t))})])}}),fV=tK({fields:[ts("closedClass"),ts("openClass"),ts("shrinkingClass"),ts("growingClass"),td("getAnimationRoot"),oT("onShrunk"),oT("onStartShrink"),oT("onGrown"),oT("onStartGrow"),tg("expanded",!1),tf("dimension",ta("property",{width:[oD("property","width"),oD("getDimension",function(n){return uD(n)+"px"})],height:[oD("property","height"),oD("getDimension",function(n){return oY(n)+"px"})]}))],name:"sliding",active:fI,apis:fF,state:Object.freeze({__proto__:null,init:function(n){var e=tJ(n.expanded);return oi({isExpanded:function(){return!0===e.get()},isCollapsed:function(){return!1===e.get()},setCollapsed:x(e.set,!1),setExpanded:x(e.set,!0),readState:function(){return"expanded: "+e.get()}})}})}),fB=th([{stopped:[]},{resume:["element"]},{complete:[]}]),fA=function(n,e,t,o,r,i){return fc(n,e,t,o,r,i).fold(C,function(o){return fA(n,e,t,o,r,i)},T)},fN=function(e){function t(n){return en(e.element).fold(C,function(e){return nr(n,e)})}function o(n,e){return S.find(t,n,e)}function r(n){I(S.filter(nX()),function(e){ar(e.descHandler)(n)})}var i,u,a,f,l,d,m,g,p,h,v,y,S=function(){function n(n){um(n.element).each(function(n){delete o[n],t.unregisterId(n)})}var e,t=(e={},{registerId:function(n,t,o){ef(o,function(o,r){var i=void 0!==e[r]?e[r]:{};i[t]={cHandler:x.apply(void 0,[o.handler].concat(n)),purpose:o.purpose},e[r]=i})},unregisterId:function(n){ef(e,function(e,t){eX(e,n)&&delete e[n]})},filterByType:function(n){return em(e,n).map(function(n){return ed(n,function(n,e){return{id:e,descHandler:n}})}).getOr([])},find:function(n,t,o){return em(e,t).bind(function(e){var t,r,i;return r=(t=function(n){return um(n).bind(function(n){return em(e,n)}).map(function(e){return{element:n,descHandler:e}})})(o),i=b(n)?n:T,r.orThunk(function(){return i(o)?nl.none():function(n){for(var e=o.dom,t=b(i)?i:T;e.parentNode;){var e=e.parentNode,r=n5.fromDom(e),u=n(r);if(u.isSome())return u;if(t(r))break}return nl.none()}(t)})})}}),o={};return{find:function(n,e,o){return t.find(n,e,o)},filter:function(n){return t.filterByType(n)},register:function(e){var r=um(e.element).getOrThunk(function(){var n;return cp(e.element,n=ix(cm+"uid-")),n});eg(o,r)&&function(e){var t=o[r];if(t!==e)throw Error('The tagId "'+r+'" is already used by: '+t9(t.element)+"\nCannot use it for: "+t9(e.element)+"\nThe conflicting element is"+(eP(t.element)?" ":" not ")+"already in the DOM");n(e)}(e),t.registerId([e],r,e.events),o[r]=e},unregister:n,getById:function(n){return em(o,n)}}}(),w=(i=e.element,l=s$(f=n({stopBackspace:!0},{triggerEvent:function(n,e){return ob(n,e.target,function(t){return fa(o,n,e,e.target,t)})}})),d=F(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(n){return ax(i,n,function(e){l.fireIfReady(e,n).each(function(n){n&&e.kill()}),f.triggerEvent(n,e)&&e.kill()})}),m=rX(),g=ax(i,"paste",function(n){l.fireIfReady(n,"paste").each(function(e){e&&n.kill()}),f.triggerEvent("paste",n)&&n.kill(),m.set(setTimeout(function(){f.triggerEvent(nW(),n)},0))}),p=ax(i,"keydown",function(n){f.triggerEvent("keydown",n)?n.kill():!f.stopBackspace||8!==n.raw.which||_(["input","textarea"],n4(n.target))||rr(n.target,'[contenteditable="true"]',void 0).isSome()||n.prevent()}),h=(u=function(n){f.triggerEvent("focusin",n)&&n.kill()},fi()?aS(i,"focus",u):ax(i,"focusin",u)),y=(a=function(n){f.triggerEvent("focusout",n)&&n.kill(),(v=rX()).set(setTimeout(function(){f.triggerEvent(nU(),n)},0))},fi()?aS(i,"blur",a):ax(i,"focusout",a)),{unbind:function(){I(d,function(n){n.unbind()}),p.unbind(),h.unbind(),y.unbind(),g.unbind(),m.on(clearTimeout),v.on(clearTimeout)}}),k={debugInfo:s("real"),triggerEvent:function(n,e,t){ob(n,e,function(r){return fa(o,n,t,e,r)})},triggerFocus:function(n,e){um(n).fold(function(){tQ(n)},function(t){ob(nG(),n,function(t){var r,i=nG(),u=fu(r={originator:e,kill:c,prevent:c,target:n},n);return fc(o,i,r,n,u,t),!1})})},triggerEscape:function(n,e){k.triggerEvent("keydown",n.element,e.event)},getByUid:function(n){return N(n)},getByDom:function(n){return H(n)},build:a9,addToGui:function(n){M(n)},removeFromGui:function(n){R(n)},addToWorld:function(n){E(n)},removeFromWorld:function(n){D(n)},broadcast:function(n){V(n)},broadcastOn:function(n,e){B(n,e)},broadcastEvent:function(n,e){A(n,e)},isConnected:C},E=function(n){n.connect(k),e_(n.element)||(S.register(n),I(n.components(),E),k.triggerEvent(nQ(),n.element,{target:n.element}))},D=function(n){e_(n.element)||(I(n.components(),D),S.unregister(n)),n.disconnect()},M=function(n){e$(e,n,eV)},R=function(n){es(n)},V=function(n){r({universal:!0,data:n})},B=function(n,e){r({universal:!1,channels:n,data:e})},A=function(n,e){var t,o,r=S.filter(n);return o={stop:function(){t.set(!0)},cut:c,isStopped:(t=tJ(!1)).get,isCut:T,event:e,setSource:O("Cannot set source of a broadcasted event"),getSource:O("Cannot get source of a broadcasted event")},I(r,function(n){ar(n.descHandler)(o)}),o.isStopped()},N=function(n){return S.getById(n).fold(function(){return eJ.error(Error('Could not find component with uid: "'+n+'" in system.'))},eJ.value)},H=function(n){return N(um(n).getOr("not found"))};return E(e),{root:e,element:e.element,destroy:function(){w.unbind(),eB(e.element)},add:M,remove:R,getByUid:N,getByDom:H,addToWorld:E,removeFromWorld:D,broadcast:V,broadcastOn:B,broadcastEvent:A}},fH=o5("readonly-mode"),fP=o5("edit-mode");function fz(n){return fN(a9(aN.sketch({dom:{classes:[o5("outer-container")].concat(n.classes)},containerBehaviours:tB([os.config({alpha:fH,omega:fP})])})))}function fj(n,e){var t=n5.fromTag("input");o$(t,{opacity:"0",position:"absolute",top:"-1000px",left:"-1000px"}),eV(n,t),tQ(t),e(t),eB(t)}function fL(n){var e,t,o=n.getSelection();0<o.rangeCount&&(e=o.getRangeAt(0),(t=n.document.createRange()).setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),o.removeAllRanges(),o.addRange(t))}function f$(n,e){t0().each(function(n){nr(n,e)||tZ(n)}),n.focus(),tQ(n5.fromDom(n.document.body)),fL(n)}function fG(n,e,t,o){function r(){f$(e,o)}var i=ax(t,"keydown",function(n){_(["input","textarea"],n4(n.target))||r()});return{toReading:function(){fj(n,tZ)},toEditing:r,onToolbarTouch:c,destroy:function(){i.unbind()}}}function fU(n){setTimeout(function(){throw n},0)}function fW(n,e){var t,o,r,i,u,c=n8(n).dom.defaultView;return oY(n)+oY(e)-(r=aO(c).isPortrait(),i=(t=c.screen.width,o=c.screen.height,U([{width:320,height:480,keyboard:{portrait:300,landscape:240}},{width:320,height:568,keyboard:{portrait:300,landscape:240}},{width:375,height:667,keyboard:{portrait:305,landscape:240}},{width:414,height:736,keyboard:{portrait:320,landscape:240}},{width:768,height:1024,keyboard:{portrait:320,landscape:400}},{width:1024,height:1366,keyboard:{portrait:380,landscape:460}}],function(n){var e,r;return e=t<=n.width&&o<=n.height,r=n.keyboard,e?nl.some(r):nl.none()}).getOr({portrait:o/5,landscape:t/4})),u=r?i.portrait:i.landscape,(r?c.screen.height:c.screen.width)-c.innerHeight>u?0:u)}function fX(n,e,t){var o=fW(e,t);oL(n,"padding-bottom",oY(e)+oY(t)-o+"px")}function fq(n,e){var t=eb(n,f7);return f6.fixed(n,t,e)}function fY(n,e){return f6.scroller(n,e)}function fK(n){var e=sU(n,f8);return("true"===eb(n,ln)?fY:fq)(n,e)}function fJ(n,e,t){var o=n8(n).dom.defaultView.innerHeight;return eh(n,le,o+"px"),o-e-t}function fQ(n){return parseInt(oU(n,"top").getOr("0"),10)}function fZ(n){return parseInt(n.dom.scrollTop,10)}function f0(n,e){return f4(function(t){var o=x(fZ,n);eh(n,lo,o());var r=Math.abs(e-o());lt.animate(o,e,Math.ceil(r/10),function(e,t){sU(n,lo)!==n.dom.scrollTop?t(n.dom.scrollTop):(n.dom.scrollTop=e,eh(n,lo,e))},function(){n.dom.scrollTop=e,eh(n,lo,e),t(e)},10)})}function f1(n,e){oL(n,"top",e+sU(n,f8)+"px")}var f2,f9=function(n){function e(n){r()?i(n):o.push(n)}var t=nl.none(),o=[],r=function(){return t.isSome()},i=function(n){t.each(function(e){setTimeout(function(){n(e)},0)})};return n(function(n){r()||(t=nl.some(n),I(o,i),o=[])}),{get:e,map:function(n){return f9(function(t){e(function(e){t(n(e))})})},isReady:r}},f3={nu:f9,pure:function(n){return f9(function(e){e(n)})}},f5=function(n){function e(e){n().then(e,fU)}return{map:function(e){return f5(function(){return n().then(e)})},bind:function(e){return f5(function(){return n().then(function(n){return e(n).toPromise()})})},anonBind:function(e){return f5(function(){return n().then(function(){return e.toPromise()})})},toLazy:function(){return f3.nu(e)},toCached:function(){var e=null;return f5(function(){return e=null===e?n():e})},toPromise:n,get:e}},f4=function(n){return f5(function(){return new aF(n)})},f6=th([{fixed:["element","property","offsetY"]},{scroller:["element","offsetY"]}]),f8="data-"+o5("position-y-fixed"),f7="data-"+o5("y-property"),ln="data-"+o5("scrolling"),le="data-"+o5("last-window-height"),lt=(f2=null,{animate:function(n,e,t,o,r,i){function u(n){c=!0,r(n)}var c=!1;function a(n){sT.clearInterval(f2),u(n)}sT.clearInterval(f2),f2=sT.setInterval(function(){var r=n();(Math.abs(r-e)<=t?nl.none():r<e?nl.some(r+t):nl.some(r-t)).fold(function(){sT.clearInterval(f2),u(e)},function(t){var i;o(t,a),c||((i=n())!==t||Math.abs(i-e)>Math.abs(r-e))&&(sT.clearInterval(f2),u(e))})},i)}}),lo="data-"+o5("last-scroll-top");function lr(n,e){var t=F(nt("["+f8+"]",n),fK),o=F(t,function(n){return n.fold(function(n,t,o){return oL(n,t,e+o+"px"),f5(function(){return aF.resolve(o)})},function(n,t){var o,r,i;return r=(o=e+t)-parseInt(oU(n,"top").getOr(t),10),i=n.dom.scrollTop+r,f4(function(e){var t=x(fZ,n);lt.animate(t,i,15,function(e){n.dom.scrollTop=e,oL(n,"top",fQ(n)+15+"px")},function(){n.dom.scrollTop=i,oL(n,"top",o+"px"),e(i)},10)})})});return f4(function(n){var e=[],t=0;0===o.length?n([]):I(o,function(r,i){r.get(function(r){e[i]=r,++t>=o.length&&n(e)})})})}function li(n,e,t){n.system.broadcastOn([og],{command:e,state:t})}function lu(n){return function(){function e(){n._skinLoaded=!0,n.fire("SkinLoaded")}n.initialized?e():n.on("init",e)}}var lc=tinymce.util.Tools.resolve("tinymce.EditorManager"),la="toReading",ls="toEditing";ol.add("mobile",function(n){return{getNotificationManagerImpl:function(){return{open:s({progressBar:{value:c},close:c,text:c,getEl:s(null),moveTo:c,moveRel:c,settings:{}}),close:c,reposition:c,getArgs:s({})}},renderUI:function(){var e,t,o=n.getElement(),r={content:(e=nl.from(n.getParam("skin_url")).getOrThunk(function(){return lc.baseURL+"/skins/ui/oxide"}))+"/content.mobile.min.css",ui:e+"/skin.mobile.min.css"};function i(){n.fire("ScrollIntoView")}!1===n.getParam("skin")==0?(t=of.DOM.styleSheetLoader,n.contentCSS.push(r.content),t.load(r.ui,lu(n)),n.on("remove",function(){return t.unload(r.ui)})):lu(n)();var u,a,l,d,m,p,h,v,b,y,O,k,C,E=nD().os.isAndroid()?(u=fz({classes:[o5("android-container")]}),a=sZ(),d=s0(l=rW()),m=s1(),p=fr(c,i),u.add(a.wrapper),u.add(m),u.add(p.component),{system:u,element:u.element,init:function(n){var e,t,o,r,i,u,a;l.set((oL((e=tc("Getting AndroidWebapp schema",fk,n)).toolstrip,"width","100%"),t=a9(sJ(function(){e.setReadOnly(e.readOnlyOnInit()),a.enter()},e.translate)),e.alloy.add(t),eV(e.container,t.element),a=(o={show:function(){e.alloy.add(t)},hide:function(){e.alloy.remove(t)}},r=sP(),i=rW(),u=rW(),{enter:function(){var n,t,a,s;o.hide(),ek(e.container,o5("fullscreen-maximized")),ek(e.container,o5("android-maximized")),r.maximize(),ek(e.body,o5("android-scroll-reload")),i.set((n=e.win,t=fh(e.editor).getOrDie("no"),a=n5.fromDom(t.document.body),s=ax(n5.fromDom(n),"resize",function(){var e,o;e=sU(a,fO),((o=n.innerHeight)<e?nl.some(e-o):nl.none()).each(function(n){var e;(0<(e=sq(t)).length?nl.some(e[0]).map(sY):nl.none()).each(function(e){var o=e.top>t.innerHeight||e.bottom>t.innerHeight?Math.min(n,e.bottom-t.innerHeight+50):0;0!==o&&t.scrollTo(t.pageXOffset,t.pageYOffset+o)})}),eh(a,fO,n.innerHeight)}),eh(a,fO,n.innerHeight),{toEditing:function(){!function(n){n.focus();var e=n5.fromDom(n.document.body);(t0().exists(function(n){return _(["input","textarea"],n4(n))})?function(n){sT.setTimeout(function(){n()},0)}:w)(function(){t0().each(tZ),tQ(e)})}(t)},destroy:function(){s.unbind()}})),sH(e.editor).each(function(n){var t,o,r,i,a,s;function f(n){return!nr(n.start,n.finish)||n.soffset!==n.foffset}function l(){var n=t.doc.dom.hasFocus()&&t.getSelection().exists(f);r.getByDom(o).each(!0===(n||t0(a).filter(function(n){return"input"===n4(n)}).exists(function(n){return n.dom.selectionStart!==n.dom.selectionEnd}))?o9.on:o9.off)}sz(e.container,n.body),u.set((t=n,o=e.toolstrip,r=e.alloy,i=sG(t),a=n8(o),s=[ax(t.body,"touchstart",function(n){t.onTouchContent(),i.fireTouchstart(n)}),i.onTouchmove(),i.onTouchend(),ax(o,"touchstart",function(n){t.onTouchToolstrip()}),t.onToReading(function(){tZ(t.body)}),t.onToEditing(c),t.onScrollToCursor(function(n){n.preventDefault(),t.getCursorBox().each(function(n){var e=t.win,o=n.top>e.innerHeight||n.bottom>e.innerHeight?n.bottom-e.innerHeight+50:0;0!=o&&e.scrollTo(e.pageXOffset,e.pageYOffset+o)})})].concat(1==fS?[]:[ax(n5.fromDom(t.win),"blur",function(){r.getByDom(o).each(o9.off)}),ax(a,"select",l),ax(t.doc,"selectionchange",l)]),{destroy:function(){I(s,function(n){n.unbind()})}}))})},exit:function(){r.restore(),o.show(),eT(e.container,o5("fullscreen-maximized")),eT(e.container,o5("android-maximized")),sj(),eT(e.body,o5("android-scroll-reload")),u.clear(),i.clear()}}),{setReadOnly:e.setReadOnly,refreshStructure:c,enter:a.enter,exit:a.exit,destroy:c}))},exit:function(){l.run(function(n){n.exit(),sa.remove(m,d)})},setToolbarGroups:function(n){var e=a.createGroups(n);a.setGroups(e)},setContextToolbar:function(n){var e=a.createGroups(n);a.setContextToolbar(e)},focusToolbar:function(){a.focus()},restoreToolbar:function(){a.restoreToolbar()},updateMode:function(n){s2(m,d,n,u.root)},socket:m,dropup:p}):(v=fz({classes:[o5("ios-container")]}),b=sZ(),O=s0(y=rW()),k=s1(),C=fr(function(){y.run(function(n){n.refreshStructure()})},i),v.add(b.wrapper),v.add(k),v.add(C.component),{system:v,element:v.element,init:function(n){var e,t,o,r,i,u,a,s,l;y.set((oL((e=tc("Getting IosWebapp schema",fk,n)).toolstrip,"width","100%"),oL(e.container,"position","relative"),t=a9(sJ(function(){e.setReadOnly(e.readOnlyOnInit()),l.enter()},e.translate)),e.alloy.add(t),o={show:function(){e.alloy.add(t)},hide:function(){e.alloy.remove(t)}},r=sP(),i=rX(),u=rX(),a=rW(),s=rW(),l={enter:function(){o.hide();var n=n5.fromDom(document);sH(e.editor).each(function(t){var o,l,d,m,g,p,h,v;function b(){d.run(function(n){n.refreshSelection()})}function y(n,e){var t=n-g.dom.scrollTop;d.run(function(n){n.scrollIntoView(t,t+e)})}function O(){d.run(function(n){n.clearSelection()})}function w(){l.getCursorBox().each(function(n){y(n.top,n.height)}),d.run(function(n){n.syncHeight()})}i.set({socketHeight:oU(e.socket,"height"),iframeHeight:oU(t.frame,"height"),outerScroll:document.body.scrollTop}),u.set({exclusives:(o="."+sb,ax(n,"touchmove",function(n){rr(n.target,o).filter(sQ).fold(function(){n.prevent()},c)}))}),ek(e.container,o5("fullscreen-maximized")),sz(e.container,t.body),r.maximize(),oL(e.socket,"overflow","scroll"),oL(e.socket,"-webkit-overflow-scrolling","touch"),tQ(t.body),a.set(function(n){var e,t,o,r,i,u,a,s,l,d,m=n.cWin,g=n.ceBody,p=n.socket,h=n.toolstrip,v=n.contentElement,b=n.keyboardType,y=n.outerWindow,O=n.dropup,w=n.outerBody,k=(i=n8(p).dom.defaultView,r=eb(h,"style"),o$(h,{position:"absolute",top:"0px"}),eh(h,f8,"0px"),eh(h,f7,"top"),u={restore:function(){eh(h,"style",r||""),eS(h,f8),eS(h,f7)}},t=fJ(p,a=oY(h),oY(O)),o=eb(p,"style"),ek(p,sb),o$(p,{position:"absolute",height:t+"px",width:"100%",top:a+"px"}),eh(p,f8,a+"px"),eh(p,ln,"true"),eh(p,f7,"top"),s={restore:function(){eT(p,sb),eh(p,"style",o||""),eS(p,f8),eS(p,ln),eS(p,f7)}},e=eb(O,"style"),o$(O,{position:"absolute",bottom:"0px"}),eh(O,f8,"0px"),eh(O,f7,"bottom"),l={restore:function(){eh(O,"style",e||""),eS(O,f8),eS(O,f7)}},d=!0,fX(g,p,O),{setViewportOffset:function(n){eh(p,f8,n+"px"),D()},isExpanding:E,isShrinking:S(E),refresh:D,restore:function(){d=!1,u.restore(),s.restore(),l.restore()}}),T=b(w,m,ec(),v),C=aw(y,{onChange:c,onReady:k.refresh});function E(){var n=i.innerHeight;return sU(p,le)<n}function D(){var n,e;d&&(e=fJ(p,n=oY(h),oY(O)),eh(p,f8,n+"px"),oL(p,"height",e+"px"),fX(g,p,O))}function M(){H.clear()}C.onAdjustment(function(){k.refresh()});var _,R,I,V,B,A=ax(n5.fromDom(y),"resize",function(){k.isExpanding()&&k.refresh()}),N=(_=function(n){var e;return e=n8(h).dom.defaultView,f4(function(t){f1(h,n),f1(p,n),e.scrollTo(0,n),t(n)})},R=tJ(f3.pure({})),I={start:function(n){var e=f3.nu(function(e){return _(n).get(e)});R.set(e)},idle:function(n){R.get().get(function(){n()})}},V=sK(function(){I.idle(function(){lr(w,y.pageYOffset).get(function(){var n=sq(m);nl.from(n[0]).bind(function(n){var e=n.top-p.dom.scrollTop;return e>y.innerHeight+5||e<-5?nl.some({top:e,bottom:e+n.height}):nl.none()}).each(function(n){p.dom.scrollTop=p.dom.scrollTop+n.top}),I.start(0),k.refresh()})})},1e3),B=ax(n5.fromDom(y),"scroll",function(){y.pageYOffset<0||V.throttle()}),lr(w,y.pageYOffset).get(f),{unbind:B.unbind}),H=function(n,e){var t=n.document,o=n5.fromTag("div");function r(n){var e=n5.fromTag("span");return au(e,[o5("layer-editor"),o5("unfocused-selection")]),o$(e,{left:n.left+"px",top:n.top+"px",width:n.width+"px",height:n.height+"px"}),e}ek(o,o5("unfocused-selections")),eV(n5.fromDom(t.documentElement),o);var i=ax(o,"touchstart",function(t){t.prevent(),f$(n,e),u()}),u=function(){ei(o)};return{update:function(){u(),er(o,F(sq(n),r))},isActive:function(){return 0<eI(o).length},destroy:function(){i.unbind(),eB(o)},clear:u}}(m,v);return{toEditing:function(){T.toEditing(),M()},toReading:function(){T.toReading()},onToolbarTouch:function(n){T.onToolbarTouch()},refreshSelection:function(){H.isActive()&&H.update()},clearSelection:M,highlightSelection:function(){H.update()},scrollIntoView:function(n,e){var t=fW(p,O),o=x(fL,m);t<n||t<e?f0(p,p.dom.scrollTop-t+e).get(o):n<0&&f0(p,p.dom.scrollTop+n).get(o)},updateToolbarPadding:c,setViewportOffset:function(n){k.setViewportOffset(n),f4(function(e){function t(n){oL(p,"top",n+"px")}var o=x(fQ,p),r=Math.abs(n-o());lt.animate(o,n,Math.ceil(r/10),t,function(){t(n),e(n)},10)}).get(f)},syncHeight:function(){oL(v,"height",v.dom.contentWindow.document.body.scrollHeight+"px")},refreshStructure:k.refresh,destroy:function(){k.restore(),C.destroy(),N.unbind(),A.unbind(),T.destroy(),H.destroy(),fj(ec(),tZ)}}}({cWin:t.win,ceBody:t.body,socket:e.socket,toolstrip:e.toolstrip,dropup:e.dropup.element,contentElement:t.frame,outerBody:e.body,outerWindow:e.win,keyboardType:fG})),a.run(function(n){n.syncHeight()}),s.set((l=t,d=a,m=e.toolstrip,g=e.socket,e.dropup,p=sG(l),h=sK(w,300),v=[l.onKeyup(function(){O(),h.throttle()}),l.onNodeChanged(b),l.onDomChanged(h.throttle),l.onDomChanged(b),l.onScrollToCursor(function(n){n.preventDefault(),h.throttle()}),l.onScrollToElement(function(n){n.element,y(d,g)}),l.onToEditing(function(){d.run(function(n){n.toEditing()})}),l.onToReading(function(){d.run(function(n){n.toReading()})}),ax(l.doc,"touchend",function(n){nr(l.html,n.target)||nr(l.body,n.target)}),ax(m,"transitionend",function(n){var e;"height"===n.raw.propertyName&&(e=oY(m),d.run(function(n){n.setViewportOffset(e)}),b(),w())}),aS(m,"touchstart",function(n){d.run(function(n){n.highlightSelection()}),d.run(function(e){e.onToolbarTouch(n)}),l.onTouchToolstrip()}),ax(l.body,"touchstart",function(n){O(),l.onTouchContent(),p.fireTouchstart(n)}),p.onTouchmove(),p.onTouchend(),ax(l.body,"click",function(n){n.kill()}),ax(m,"touchmove",function(){l.onToolbarScrollStart()})],{destroy:function(){I(v,function(n){n.unbind()})}}))})},refreshStructure:function(){a.run(function(n){n.refreshStructure()})},exit:function(){r.restore(),s.clear(),a.clear(),o.show(),i.on(function(n){n.socketHeight.each(function(n){oL(e.socket,"height",n)}),n.iframeHeight.each(function(n){oL(e.editor.getFrame(),"height",n)}),document.body.scrollTop=n.scrollTop}),i.clear(),u.on(function(n){n.exclusives.unbind()}),u.clear(),eT(e.container,o5("fullscreen-maximized")),sj(),eT(e.toolbar,sb),oW(e.socket,"overflow"),oW(e.socket,"-webkit-overflow-scrolling"),tZ(e.editor.getFrame()),sH(e.editor).each(function(n){n.clearSelection()})}},{setReadOnly:e.setReadOnly,refreshStructure:l.refreshStructure,enter:l.enter,exit:l.exit,destroy:c}))},exit:function(){y.run(function(n){sa.remove(k,O),n.exit()})},setToolbarGroups:function(n){var e=b.createGroups(n);b.setGroups(e)},setContextToolbar:function(n){var e=b.createGroups(n);b.setContextToolbar(e)},focusToolbar:function(){b.focus()},restoreToolbar:function(){b.restoreToolbar()},updateMode:function(n){s2(k,O,n,v.root)},socket:k,dropup:C});function D(e,t,o,r){!1===r&&n.selection.collapse();var i,u={readOnly:(i=e.get()).backToMask.concat(t.get()),main:i.backToMask.concat(o.get())};E.setToolbarGroups(!0===r?u.readOnly:u.main),n.setMode(!0===r?"readonly":"design"),n.fire(!0===r?la:ls),E.updateMode(r)}function M(e,t){return n.on(e,t),{unbind:function(){n.off(e)}}}(function(n,e){nl.from(n.dom.nextSibling).map(n5.fromDom).fold(function(){en(n).each(function(n){eV(n,e)})},function(n){et(n,e)})})(n5.fromDom(o),(h=E.system).element),I(eI(h.element),function(n){h.getByDom(n).each(eL)});var R=o.ownerDocument.defaultView,V=aw(R,{onChange:function(){var n,e;E.system.broadcastOn([op],{width:(n=nD().os.isiOS(),e=aO(R).isPortrait(),n&&!e?R.screen.height:R.screen.width)})},onReady:c});return n.on("init",function(){E.init({editor:{getFrame:function(){return n5.fromDom(n.contentAreaContainer.querySelector("iframe"))},onDomChanged:function(){return{unbind:c}},onToReading:function(n){return M(la,n)},onToEditing:function(n){return M(ls,n)},onScrollToCursor:function(e){return n.on("ScrollIntoView",function(n){e(n)}),{unbind:function(){n.off("ScrollIntoView"),V.destroy()}}},onTouchToolstrip:function(){r()},onTouchContent:function(){t1(n5.fromDom(n.editorContainer.querySelector("."+o5("toolbar")))).bind(function(n){return E.system.getByDom(n).toOptional()}).each(Z),E.restoreToolbar(),r()},onTapContent:function(e){var t=e.target;"img"===n4(t)?(n.selection.select(t.dom),e.kill()):"a"===n4(t)&&E.system.getByDom(n5.fromDom(n.editorContainer)).each(function(n){var e,o,r;os.isAlpha(n)&&(e=t.dom,(o=document.createElement("a")).target="_blank",o.href=e.href,o.rel="noreferrer noopener",(r=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),document.body.appendChild(o),o.dispatchEvent(r),document.body.removeChild(o))})}},container:n5.fromDom(n.editorContainer),socket:n5.fromDom(n.contentAreaContainer),toolstrip:n5.fromDom(n.editorContainer.querySelector("."+o5("toolstrip"))),toolbar:n5.fromDom(n.editorContainer.querySelector("."+o5("toolbar"))),dropup:E.dropup,alloy:E.system,translate:c,setReadOnly:function(n){D(m,d,l,n)},readOnlyOnInit:function(){return!1}});var e,t,o,r=function(){E.dropup.disappear(function(){E.system.broadcastOn([oh],{})})},i={label:"The first group",scrollable:!1,items:[cO("back",function(){n.selection.collapse(),E.exit()},{},n)]},u={label:"Back to read only",scrollable:!1,items:[cO("readonly-back",function(){D(m,d,l,!0)},{},n)]},a=function(n,e){function t(n){return function(){var t;return cO(n,function(){t.execCommand(n)},{},t=e)}}function o(n){return function(){var t;return t=ux(n),cO(n,function(){e.execCommand(n)},t,e)}}function r(n,t,o){return function(){return cO(n,o,ux(t),e)}}function i(){var n,t,o,r,i;return o=(t={formats:sS((n=function(t){return z(t,function(t){return void 0===t.items?!eg(t,"format")||e.formatter.canApply(t.format)?[t]:[]:0<n(t.items).length?[t]:[]})})(y)),handle:function(n,t){e.undoManager.transact(function(){o9.isOn(n)?e.formatter.remove(t):e.formatter.apply(t)}),e.fire("scrollIntoView")}}).formats,r=function(){return i},(i=ci(sd.sketch({dom:{tag:"div",classes:[o5("styles-menu")]},components:[],fakeFocus:!0,stayInDom:!0,onExecute:function(n,e){var o=cN.getValue(e);return t.handle(e,o.value),nl.none()},onEscape:function(){return nl.none()},onOpenMenu:function(n,e){var t,o=uD(n.element);t=e.element,cH.set(t,o),sv.jumpTo(e,"current")},onOpenSubmenu:function(n,e,t){var o,r=uD(n.element),i=ro(e.element,'[role="menu"]').getOrDie("hacky"),u=n.getSystem().getByDom(i).getOrDie();o=t.element,cH.set(o,r),sv.progressTo(u,"before"),sv.jumpTo(t,"after"),sv.progressTo(t,"current")},onCollapseMenu:function(n,e,t){var o=ro(e.element,'[role="menu"]').getOrDie("hacky"),r=n.getSystem().getByDom(o).getOrDie();sv.progressTo(r,"after"),sv.progressTo(t,"current")},navigateOnHover:!1,highlightImmediately:!0,data:{tmenu:sd.tieredData("styles",tw(el(o.menus,function(n,e){return sx(e,F(n,function(n){return sy(av(n),n.title,void 0!==n.isSelected&&n.isSelected(),void 0!==n.getPreview?n.getPreview():"",eg(o.expansions,av(n)))}),r,!0)}),tV("styles",sx("Styles",[].concat(F(o.items,function(n){return sy(av(n),n.title,n.isSelected(),n.getPreview(),eg(o.expansions,av(n)))})),r,!1))),o.expansions)}.tmenu,markers:{backgroundMenu:o5("styles-background-menu"),menu:o5("styles-menu"),selectedMenu:o5("styles-selected-menu"),item:o5("styles-item"),selectedItem:o5("styles-selected-item")}}))).asSpec()}function u(n,t){return{isSupported:function(){var t=e.ui.registry.getAll().buttons;return n.forall(function(n){return eg(t,n)})},sketch:t}}var c,a,f=t("undo"),l=t("redo"),d=o("bold"),m=o("italic"),g=o("underline"),p=t("removeformat"),h=r("unlink","link",function(){e.execCommand("unlink",null,!1)}),v=r("unordered-list","ul",function(){e.execCommand("InsertUnorderedList",null,!1)}),b=r("ordered-list","ol",function(){e.execCommand("InsertOrderedList",null,!1)}),y=(a=function(n){return F(n,function(n){var e,t;if(eg(n,"items")){var o=a(n.items);return tw(tw(n,{isSelected:T,getPreview:s("")}),{items:o})}return eg(n,"format")?tw(n,{isSelected:x(n.format),getPreview:S(n.format)}):(e=ix(n.title),t=tw(n,{format:e,isSelected:x(e),getPreview:S(e)}),c.formatter.register(e,t),t)})})((c=e).getParam("style_formats",od,"array"));function x(n){return function(){return c.formatter.match(n)}}function S(n){return function(){return c.formatter.getCssText(n)}}return{undo:u(nl.none(),f),redo:u(nl.none(),l),bold:u(nl.none(),d),italic:u(nl.none(),m),underline:u(nl.none(),g),removeformat:u(nl.none(),p),link:u(nl.none(),function(){return cO("link",function(){var t=aJ(n,e);n.setContextToolbar(t),(aV.os.isAndroid()?function(n,e){var t=e.selection.getRng();n(),e.selection.setRng(t)}:w)(function(){n.focusToolbar()},e),aI(e).each(function(n){e.selection.select(n.dom)})},ux("link"),e)}),unlink:u(nl.none(),h),image:u(nl.none(),function(){var n;return n=ci({dom:{tag:"input",attributes:{accept:"image/*",type:"file",title:""},styles:{visibility:"hidden",position:"absolute"}},events:tB([tU(nz()),tj(nP(),function(n,t){var o=t.event.raw,r=o.target.files||o.dataTransfer.files;nl.from(r[0]).each(function(n){new aF(function(e){var t=new FileReader;t.onloadend=function(){e(t.result)},t.readAsDataURL(n)}).then(function(n){return n.split(",")[1]}).then(function(t){e.undoManager.transact(function(){var o=e.editorUpload.blobCache,r=o.create(ix("mceu"),n,t);o.add(r);var i=e.dom.createHTML("img",{src:r.blobUri()});e.insertContent(i)})})})})])}),cx.sketch({dom:uS("image",e),components:[n.asSpec()],action:function(e){n.get(e).element.dom.click()}})}),bullist:u(nl.some("bullist"),v),numlist:u(nl.some("numlist"),b),fontsizeselect:u(nl.none(),function(){var t,o;return o={onChange:function(n){var e;e=t,nl.from(cY[n]).each(function(n){cr(e)!==n&&e.execCommand("fontSize",!1,n)})},getInitialValue:function(){var n;return n=cr(t),H(cY,function(e){return e===n}).getOr(2)}},co(n,"font-size",function(){var n;return[uy('<span class="${prefix}-toolbar-button ${prefix}-icon-small-font ${prefix}-icon"></span>'),(n=tc("SizeSlider",cJ,{onChange:o.onChange,sizes:cQ,category:"font",getInitialValue:o.getInitialValue}),cq.sketch({dom:{tag:"div",classes:[o5("slider-"+n.category+"-size-container"),o5("slider"),o5("slider-size-container")]},onChange:function(e,t,o){var r=o.x();0<=r&&r<n.sizes.length&&n.onChange(r)},onDragStart:function(n,e){o9.on(e)},onDragEnd:function(n,e){o9.off(e)},model:{mode:"x",minX:0,maxX:n.sizes.length-1,getInitialValue:function(){return{x:n.getInitialValue()}}},stepSize:1,snapToGrid:!0,sliderBehaviours:tB([oA(cq.refresh)]),components:[cq.parts.spectrum({dom:ub('<div class="${prefix}-slider-size-container"></div>'),components:[uy('<div class="${prefix}-slider-size-line"></div>')]}),cq.parts.thumb({dom:ub('<div class="${prefix}-slider-thumb"></div>'),behaviours:tB([o9.config({toggleClass:o5("thumb-active")})])})]})),uy('<span class="${prefix}-toolbar-button ${prefix}-icon-large-font ${prefix}-icon"></span>')]},t=e)}),forecolor:u(nl.none(),function(){var t;return t={onChange:function(n,t,o){e.undoManager.transact(function(){e.formatter.apply("forecolor",{value:o}),e.nodeChanged()})},getInitialValue:s(-1)},co(n,"color-levels",function(){return[cq.sketch({dom:ub('<div class="${prefix}-slider ${prefix}-hue-slider-container"></div>'),components:[cq.parts["left-edge"](uy('<div class="${prefix}-hue-slider-black"></div>')),cq.parts.spectrum({dom:ub('<div class="${prefix}-slider-gradient-container"></div>'),components:[uy('<div class="${prefix}-slider-gradient"></div>')],behaviours:tB([o9.config({toggleClass:o5("thumb-active")})])}),cq.parts["right-edge"](uy('<div class="${prefix}-hue-slider-white"></div>')),cq.parts.thumb({dom:ub('<div class="${prefix}-slider-thumb"></div>'),behaviours:tB([o9.config({toggleClass:o5("thumb-active")})])})],onChange:function(e,o,r){var i=n(r.x());oL(o.element,"background-color",i),t.onChange(e,o,i)},onDragStart:function(n,e){o9.on(e)},onDragEnd:function(n,e){o9.off(e)},onInit:function(e,t,o,r){var i=n(r.x());oL(t.element,"background-color",i)},stepSize:10,model:{mode:"x",minX:0,maxX:360,getInitialValue:function(){return{x:t.getInitialValue()}}},sliderBehaviours:tB([oA(cq.refresh)])})];function n(n){return n<0?"black":360<n?"white":"hsl("+n+", 100%, 50%)"}},e)}),styleselect:u(nl.none(),function(){return cO("style-formats",function(t){e.fire("toReading"),n.dropup.appear(i,o9.on,t)},tB([o9.config({toggleClass:o5("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),o0.config({channels:tB([oN(op,o9.off),oN(oh,o9.off)])})]),e)})}}(E,n),f={label:"The extra group",scrollable:!1,items:[]},l=tJ([{label:"the action group",scrollable:!0,items:(e=(g(o=n.getParam("toolbar",om,"array"))?sO:ab)(o),t={},z(e,function(n){var e=!eg(t,n)&&eg(a,n)&&a[n].isSupported()?[a[n].sketch()]:[];return t[n]=!0,e}))},f]),d=tJ([{label:"The read only mode group",scrollable:!0,items:[]},f]),m=tJ({backToMask:[i],backToReadOnly:[u]});I(eG(n.formatter.get()),function(e){n.formatter.formatChanged(e,function(n){li(E,e,n)})}),I(["ul","ol"],function(e){n.selection.selectorChanged(e,function(n,t){li(E,e,n)})})}),n.on("remove",function(){E.exit()}),n.on("detach",function(){var n=E.system;I(eI(n.element),function(e){n.getByDom(e).each(ej)}),eB(n.element),E.system.destroy()}),{iframeContainer:E.socket.element.dom,editorContainer:E.element.dom}}}})}();