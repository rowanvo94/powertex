!function(){"use strict";var t,n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(t){var n=typeof t;return null===t?"null":"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n},o=function(t){return function(n){return typeof n===t}},e=o("boolean"),u=o("function"),i=o("number"),c=function(t){return function(){return t}},f=function(t){return t},l=c(!1),a=c(!0),d=function(){return m},m={fold:function(t,n){return t()},isSome:l,isNone:a,getOr:f,getOrThunk:t=function(t){return t()},getOrDie:function(t){throw Error(t||"error: getOrDie called on none.")},getOrNull:c(null),getOrUndefined:c(void 0),or:f,orThunk:t,map:d,each:function(){},bind:d,exists:l,forall:a,filter:function(){return d()},toArray:function(){return[]},toString:c("none()")},s=function(t){var n=c(t),r=function(){return e},o=function(n){return n(t)},e={fold:function(n,r){return r(t)},isSome:a,isNone:l,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:r,orThunk:r,map:function(n){return s(n(t))},each:function(n){n(t)},bind:o,exists:o,forall:o,filter:function(n){return n(t)?e:m},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return e},g={some:s,none:d,from:function(t){return null==t?m:s(t)}},v=function(t,n){for(var r=t.length,o=Array(r),e=0;e<r;e++){var u=t[e];o[e]=n(u,e)}return o},h=function(t,n){for(var r=0,o=t.length;r<o;r++)n(t[r],r)},p=function(t,n){for(var r=[],o=0,e=t.length;o<e;o++){var u=t[o];n(u,o)&&r.push(u)}return r},y={fromDom:function(t){if(null==t)throw Error("Node cannot be null or undefined");return{dom:t}}},D=function(t,n){var r=t.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(n);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(n);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(n);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(n);throw Error("Browser lacks native selectors")};"undefined"!=typeof window?window:Function("return this;")();var w=function(t){return function(n){return n.dom.nodeType===t}},S=w(1),N=w(3),b=w(9),O=w(11),T=function(t,n,o){if("string"===r(o)||e(o)||i(o))t.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",t),Error("Attribute value was not simple")},A=function(t,n,r){T(t.dom,n,r)},k=function(t,n){t.dom.removeAttribute(n)},C=u(Element.prototype.attachShadow)&&u(Node.prototype.getRootNode)?function(t){return y.fromDom(t.dom.getRootNode())}:function(t){return b(t)?t:y.fromDom(t.dom.ownerDocument)},M=function(t){var n=C(t);return O(n)&&null!=n.dom.host?g.some(n):g.none()},R=function(t){var n=N(t)?t.dom.parentNode:t.dom;if(null==n||null===n.ownerDocument)return!1;var r=n.ownerDocument;return M(y.fromDom(n)).fold(function(){return r.body.contains(n)},function(t){var n;return R((n=t,y.fromDom(n.dom.host)))})},E=function(t,n,r){for(var o=t.dom,e=u(r)?r:l;o.parentNode;){o=o.parentNode;var i=y.fromDom(o);if(n(i))return g.some(i);if(e(i))break}return g.none()},L=function(t,n){var r=t.dom,o=window.getComputedStyle(r).getPropertyValue(n);return""!==o||R(t)?o:P(r,n)},P=function(t,n){return void 0!==t.style&&u(t.style.getPropertyValue)?t.style.getPropertyValue(n):""},x=function(t){return"rtl"===L(t,"direction")?"rtl":"ltr"},B=function(t,n){var r;return(n?(r="ol,ul",E(t,function(t){return D(t,r)},void 0)):g.some(t)).getOr(t)},V=function(t,n){var r=t.selection.getSelectedBlocks();r.length>0&&(h(r,function(t){var r,o=y.fromDom(t),e=S(o)&&"li"===o.dom.nodeName.toLowerCase(),u=B(o,e);(r=u,g.from(r.dom.parentNode).map(y.fromDom).filter(S)).each(function(t){if(x(t)!==n?A(u,"dir",n):x(u)!==n&&k(u,"dir"),e){var r,o;h((r="li[dir]",o=function(t){return D(t,r)},p(v(u.dom.childNodes,y.fromDom),o)),function(t){return k(t,"dir")})}})}),t.nodeChanged())},j=function(t){t.addCommand("mceDirectionLTR",function(){V(t,"ltr")}),t.addCommand("mceDirectionRTL",function(){V(t,"rtl")})},z=function(t,n){return function(r){var o=function(t){var o=y.fromDom(t.element);r.setActive(x(o)===n)};return t.on("NodeChange",o),function(){return t.off("NodeChange",o)}}},U=function(t){t.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:function(){return t.execCommand("mceDirectionLTR")},onSetup:z(t,"ltr")}),t.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:function(){return t.execCommand("mceDirectionRTL")},onSetup:z(t,"rtl")})};n.add("directionality",function(t){j(t),U(t)})}();