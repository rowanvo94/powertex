!function(){"use strict";function t(t){return function(n){return typeof n===t}}function n(t){return function(){return t}}function r(t){return t}function o(){return m}var e,i=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=function(t){var n;return n=typeof t,(null===t?"null":"object"==n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n)===e},c=t("boolean"),f=t("function"),l=t("number"),a=n((e="string",!1)),d=n(!0),m={fold:function(t,n){return t()},isSome:a,isNone:d,getOr:r,getOrThunk:s,getOrDie:function(t){throw Error(t||"error: getOrDie called on none.")},getOrNull:n(null),getOrUndefined:n(void 0),or:r,orThunk:s,map:o,each:function(){},bind:o,exists:a,forall:d,filter:function(){return m},toArray:function(){return[]},toString:n("none()")};function s(t){return t()}function g(t,n){for(var r=0,o=t.length;r<o;r++)n(t[r],r)}function h(t,n){var r=t.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(n);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(n);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(n);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(n);throw Error("Browser lacks native selectors")}var v=function(t){function r(){return i}function o(n){return n(t)}var e=n(t),i={fold:function(n,r){return r(t)},isSome:d,isNone:a,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:r,orThunk:r,map:function(n){return v(n(t))},each:function(n){n(t)},bind:o,exists:o,forall:o,filter:function(n){return n(t)?i:m},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return i},p={some:v,none:o,from:function(t){return null==t?m:v(t)}},y={fromDom:function(t){if(null==t)throw Error("Node cannot be null or undefined");return{dom:t}}};function D(t){return function(n){return n.dom.nodeType===t}}function w(t,n){t.dom.removeAttribute(n)}function S(t){var n,r,o;return"rtl"===(n="direction",r=t.dom,""!==(o=window.getComputedStyle(r).getPropertyValue(n))||M(t)?o:R(r,n))?"rtl":"ltr"}function N(t,n){var r=t.selection.getSelectedBlocks();0<r.length&&(g(r,function(t){var r,o=y.fromDom(t),e=O(o)&&"li"===o.dom.nodeName.toLowerCase(),i=(e?(r="ol,ul",function(t){for(var n=o.dom,e=f(t)?t:a;n.parentNode;){var n=n.parentNode,i=y.fromDom(n);if(h(i,r))return p.some(i);if(e(i))break}return p.none()}(void 0)):p.some(o)).getOr(o);p.from(i.dom.parentNode).map(y.fromDom).filter(O).each(function(t){var r,o;S(t)!==n?function(t,n,r){if(!(u(r)||c(r)||l(r)))throw console.error("Invalid call to Attribute.set. Key ","dir",":: Value ",r,":: Element ",t),Error("Attribute value was not simple");t.setAttribute("dir",r+"")}(i.dom,"dir",n):S(i)!==n&&w(i,"dir"),e&&g((r="li[dir]",o=function(t){return h(t,r)},function(t,n){for(var r=[],o=0,e=t.length;o<e;o++){var i=t[o];n(i,o)&&r.push(i)}return r}(function(t,n){for(var r=t.length,o=Array(r),e=0;e<r;e++){var i=t[e];o[e]=n(i,e)}return o}(i.dom.childNodes,y.fromDom),o)),function(t){return w(t,"dir"),0})})}),t.nodeChanged())}function b(t,n){return function(r){function o(t){var o=y.fromDom(t.element);r.setActive(S(o)===n)}return t.on("NodeChange",o),function(){return t.off("NodeChange",o)}}}"undefined"!=typeof window||Function("return this;")();var O=D(1),T=D(3),A=D(9),k=D(11),C=f(Element.prototype.attachShadow)&&f(Node.prototype.getRootNode)?function(t){return y.fromDom(t.dom.getRootNode())}:function(t){return A(t)?t:y.fromDom(t.dom.ownerDocument)},M=function(t){var n=T(t)?t.dom.parentNode:t.dom;if(null==n||null===n.ownerDocument)return!1;var r,o=n.ownerDocument;return(k(r=C(y.fromDom(n)))&&null!=r.dom.host?p.some(r):p.none()).fold(function(){return o.body.contains(n)},function(t){return M(y.fromDom(t.dom.host))})},R=function(t,n){return void 0!==t.style&&f(t.style.getPropertyValue)?t.style.getPropertyValue(n):""};i.add("directionality",function(t){t.addCommand("mceDirectionLTR",function(){N(t,"ltr")}),t.addCommand("mceDirectionRTL",function(){N(t,"rtl")}),t.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:function(){return t.execCommand("mceDirectionLTR")},onSetup:b(t,"ltr")}),t.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:function(){return t.execCommand("mceDirectionRTL")},onSetup:b(t,"rtl")})})}();