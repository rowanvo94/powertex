!function(){"use strict";var n,e,r,t,o=function(n){var e=n;return{get:function(){return e},set:function(n){e=n}}},i=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=function(n){var e=typeof n;return null===n?"null":"object"===e&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":e},c=function(n){return function(e){return u(e)===n}},a=function(n){return function(e){return typeof e===n}},s=c("string"),l=c("array"),f=a("boolean"),m=function(n){return null!=n},d=a("function"),v=a("number"),h=function(){},g=function(n){return function(){return n}},p=function(n){return n},w=g(!1),y=g(!0),b=function(){return S},S={fold:function(n,e){return n()},isSome:w,isNone:y,getOr:p,getOrThunk:n=function(n){return n()},getOrDie:function(n){throw Error(n||"error: getOrDie called on none.")},getOrNull:g(null),getOrUndefined:g(void 0),or:p,orThunk:n,map:b,each:h,bind:b,exists:w,forall:y,filter:function(){return b()},toArray:function(){return[]},toString:g("none()")},x=function(n){var e=g(n),r=function(){return o},t=function(e){return e(n)},o={fold:function(e,r){return r(n)},isSome:y,isNone:w,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:r,orThunk:r,map:function(e){return x(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:S},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},O={some:x,none:b,from:function(n){return null==n?S:x(n)}},E=function(){return(E=Object.assign||function(n){for(var e,r=1,t=arguments.length;r<t;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}).apply(this,arguments)},F=function(n){var e=o(O.none()),r=function(){return e.get().each(n)};return{clear:function(){r(),e.set(O.none())},isSet:function(){return e.get().isSome()},get:function(){return e.get()},set:function(n){r(),e.set(O.some(n))}}},k=function(){return F(function(n){return n.unbind()})},T=function(){var n=F(h);return E(E({},n),{on:function(e){return n.get().each(e)}})},D=Array.prototype.push,C=function(n,e){for(var r=n.length,t=Array(r),o=0;o<r;o++){var i=n[o];t[o]=e(i,o)}return t},A=function(n,e){for(var r=0,t=n.length;r<t;r++)e(n[r],r)},R=function(n,e){for(var r=[],t=0,o=n.length;t<o;t++){var i=n[t];e(i,t)&&r.push(i)}return r},P=function(n,e,r){for(var t=0,o=n.length;t<o;t++){var i=n[t];if(e(i,t))return O.some(i);if(r(i,t))break}return O.none()},L=function(n,e){return P(n,e,w)},M=function(n){for(var e=[],r=0,t=n.length;r<t;++r){if(!l(n[r]))throw Error("Arr.flatten item "+r+" was not an array, input: "+n);D.apply(e,n[r])}return e},N=function(n,e){for(var r=0;r<n.length;r++){var t=e(n[r],r);if(t.isSome())return t}return O.none()},W=Object.keys,q=function(n,e){for(var r=W(n),t=0,o=r.length;t<o;t++){var i=r[t];e(n[i],i)}},H=function(n,e){return -1!==n.indexOf(e)},I=function(n){return void 0!==n.style&&d(n.style.getPropertyValue)},j={fromDom:function(n){if(null==n)throw Error("Node cannot be null or undefined");return{dom:n}}};"undefined"!=typeof window?window:Function("return this;")();var B=function(n){return function(e){return e.dom.nodeType===n}},V=B(1),X=B(3),_=B(9),z=B(11),U=function(n,e,r,t){var o=n.isiOS()&&!0===/ipad/i.test(r),i=n.isiOS()&&!o,u=n.isiOS()||n.isAndroid(),c=u||t("(pointer:coarse)"),a=o||!i&&u&&t("(min-device-width:768px)"),s=i||u&&!a,l=e.isSafari()&&n.isiOS()&&!1===/safari/i.test(r);return{isiPad:g(o),isiPhone:g(i),isTablet:g(a),isPhone:g(s),isTouch:g(c),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:g(l),isDesktop:g(!s&&!a&&!l)}},$=function(n,e){for(var r=0;r<n.length;r++){var t=n[r];if(t.test(e))return t}},K=function(n,e){var r=$(n,e);if(!r)return{major:0,minor:0};var t=function(n){return Number(e.replace(r,"$"+n))};return G(t(1),t(2))},Y=function(){return G(0,0)},G=function(n,e){return{major:n,minor:e}},J=function(n,e){var r=String(e).toLowerCase();return 0===n.length?Y():K(n,r)},Q=function(n,e){var r=String(e).toLowerCase();return L(n,function(n){return n.search(r)})},Z=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,nn=function(n){return function(e){return H(e,n)}},ne=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return H(n,"edge/")&&H(n,"chrome")&&H(n,"safari")&&H(n,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Z],search:function(n){return H(n,"chrome")&&!H(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return H(n,"msie")||H(n,"trident")}},{name:"Opera",versionRegexes:[Z,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:nn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:nn("firefox")},{name:"Safari",versionRegexes:[Z,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(H(n,"safari")||H(n,"mobile/"))&&H(n,"applewebkit")}}],nr=[{name:"Windows",search:nn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return H(n,"iphone")||H(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:nn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:nn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:nn("linux"),versionRegexes:[]},{name:"Solaris",search:nn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:nn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:nn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],nt={browsers:g(ne),oses:g(nr)},no="Edge",ni="Chrome",nu="Opera",nc="Firefox",na="Safari",ns=function(n){var e=n.current,r=n.version,t=function(n){return function(){return e===n}};return{current:e,version:r,isEdge:t(no),isChrome:t(ni),isIE:t("IE"),isOpera:t(nu),isFirefox:t(nc),isSafari:t(na)}},nl={unknown:function(){return ns({current:void 0,version:Y()})},nu:ns,edge:g(no),chrome:g(ni),ie:g("IE"),opera:g(nu),firefox:g(nc),safari:g(na)},nf="Windows",nm="Android",nd="Linux",nv="Solaris",nh="FreeBSD",ng="ChromeOS",np=function(n){var e=n.current,r=n.version,t=function(n){return function(){return e===n}};return{current:e,version:r,isWindows:t(nf),isiOS:t("iOS"),isAndroid:t(nm),isOSX:t("OSX"),isLinux:t(nd),isSolaris:t(nv),isFreeBSD:t(nh),isChromeOS:t(ng)}},nw={unknown:function(){return np({current:void 0,version:Y()})},nu:np,windows:g(nf),ios:g("iOS"),android:g(nm),linux:g(nd),osx:g("OSX"),solaris:g(nv),freebsd:g(nh),chromeos:g(ng)},ny=function(n,e,r){var t=nt.browsers(),o=nt.oses(),i=e.bind(function(n){return N(n.brands,function(n){var e=n.brand.toLowerCase();return L(t,function(n){var r;return e===(null===(r=n.brand)||void 0===r?void 0:r.toLowerCase())}).map(function(e){return{current:e.name,version:G(parseInt(n.version,10),0)}})})}).orThunk(function(){return Q(t,n).map(function(e){var r=J(e.versionRegexes,n);return{current:e.name,version:r}})}).fold(nl.unknown,nl.nu),u=Q(o,n).map(function(e){var r=J(e.versionRegexes,n);return{current:e.name,version:r}}).fold(nw.unknown,nw.nu),c=U(u,i,n,r);return{browser:i,os:u,deviceType:c}},nb=function(n){return window.matchMedia(n).matches},nS=(e=function(){return ny(navigator.userAgent,O.from(navigator.userAgentData),nb)},t=!1,function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t||(t=!0,r=e.apply(null,n)),r}),nx=function(n,e){var r=n.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw Error("Browser lacks native selectors")},nO=function(n,e){var r=void 0===e?document:e.dom;return 1!==r.nodeType&&9!==r.nodeType&&11!==r.nodeType||0===r.childElementCount?[]:C(r.querySelectorAll(n),j.fromDom)},nE=function(n){return j.fromDom(n.dom.ownerDocument)},nF=function(n,e){for(var r=d(e)?e:w,t=n.dom,o=[];null!==t.parentNode&&void 0!==t.parentNode;){var i=t.parentNode,u=j.fromDom(i);if(o.push(u),!0===r(u))break;t=i}return o},nk=function(n){return C(n.dom.childNodes,j.fromDom)},nT=d(Element.prototype.attachShadow)&&d(Node.prototype.getRootNode),nD=g(nT),nC=nT?function(n){return j.fromDom(n.dom.getRootNode())}:function(n){return _(n)?n:nE(n)},nA=function(n){var e=nC(n);return z(e)&&m(e.dom.host)?O.some(e):O.none()},nR=function(n){return j.fromDom(n.dom.host)},nP=function(n){if(nD()&&m(n.target)){var e=j.fromDom(n.target);if(V(e)&&nL(e)&&n.composed&&n.composedPath){var r,t=n.composedPath();if(t){;return 0<(r=t).length?O.some(r[0]):O.none()}}}return O.from(n.target)},nL=function(n){return m(n.dom.shadowRoot)},nM=function(n){var e=X(n)?n.dom.parentNode:n.dom;if(null==e||null===e.ownerDocument)return!1;var r=e.ownerDocument;return nA(j.fromDom(e)).fold(function(){return r.body.contains(e)},function(n){return nM(nR(n))})},nN=function(n){var e=n.dom.body;if(null==e)throw Error("Body is not available yet");return j.fromDom(e)},nW=function(n,e,r){if(s(r)||f(r)||v(r))n.setAttribute(e,r+"");else throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",r,":: Element ",n),Error("Attribute value was not simple")},nq=function(n,e,r){nW(n.dom,e,r)},nH=function(n,e){var r=n.dom.getAttribute(e);return null===r?void 0:r},nI=function(n,e){n.dom.removeAttribute(e)},nj=function(n,e,r){if(!s(r))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",r,":: Element ",n),Error("CSS value must be a string: "+r);I(n)&&n.style.setProperty(e,r)},nB=function(n,e){var r=n.dom;q(e,function(n,e){nj(r,e,n)})},nV=function(n,e){var r=n.dom,t=window.getComputedStyle(r).getPropertyValue(e);return""!==t||nM(n)?t:nX(r,e)},nX=function(n,e){return I(n)?n.style.getPropertyValue(e):""},n_=function(n){var e=j.fromDom(nP(n).getOr(n.target)),r=function(){return n.stopPropagation()},t=function(){return n.preventDefault()};return{target:e,x:n.clientX,y:n.clientY,stop:r,prevent:t,kill:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return t(r.apply(null,n))},raw:n}},nz=function(n,e,r,t,o){var i=function(n){r(n)&&t(n_(n))};return n.dom.addEventListener(e,i,o),{unbind:function(n){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var o=e.concat(r);return n.apply(null,o)}}(nU,n,e,i,o)}},nU=function(n,e,r,t){n.dom.removeEventListener(e,r,t)},n$=function(n,e){return{left:n,top:e,translate:function(r,t){return n$(n+r,e+t)}}},nK=function(n){var e=void 0!==n?n.dom:document;return n$(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},nY=function(n){var e=void 0===n?window:n;return nS().browser.isFirefox()?O.none():O.from(e.visualViewport)},nG=function(n,e,r,t){return{x:n,y:e,width:r,height:t,right:n+r,bottom:e+t}},nJ=function(n){var e=void 0===n?window:n,r=e.document,t=nK(j.fromDom(r));return nY(e).fold(function(){var n=e.document.documentElement,r=n.clientWidth,o=n.clientHeight;return nG(t.left,t.top,r,o)},function(n){return nG(Math.max(n.pageLeft,t.left),Math.max(n.pageTop,t.top),n.width,n.height)})},nQ=function(n,e,r){return nY(r).map(function(r){var t=function(n){return e(n_(n))};return r.addEventListener(n,t),{unbind:function(){return r.removeEventListener(n,t)}}}).getOrThunk(function(){return{unbind:h}})},nZ=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),n0=tinymce.util.Tools.resolve("tinymce.Env"),n9=tinymce.util.Tools.resolve("tinymce.util.Delay"),n1=function(n,e){n.fire("FullscreenStateChanged",{state:e}),n.fire("ResizeEditor")},n5=function(n){return n.getParam("fullscreen_native",!1,"boolean")},n2=function(n){var e=j.fromDom(n.getElement());return nA(e).map(nR).getOrThunk(function(){return nN(nE(e))})},n3=function(n){var e=n.dom;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen()},n6=function(n){var e=n.dom;e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.webkitCancelFullScreen&&e.webkitCancelFullScreen()},n7=function(n){var e;return n.dom===(void 0!==(e=nE(n).dom).fullscreenElement?e.fullscreenElement:void 0!==e.msFullscreenElement?e.msFullscreenElement:void 0!==e.webkitFullscreenElement?e.webkitFullscreenElement:null)},n8=function(n,e,r){var t;return t=function(n){return nx(n,e)},R(nF(n,r),t)},n4=function(n,e){var r,t;return r=function(n){return nx(n,e)},R((t=n,O.from(t.dom.parentNode).map(j.fromDom).map(nk).map(function(n){return R(n,function(n){return t.dom!==n.dom})}).getOr([])),r)},en="data-ephox-mobile-fullscreen-style",ee="position:absolute!important;",er="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",et=n0.os.isAndroid(),eo=function(n){var e=nV(n,"background-color");return void 0!==e&&""!==e?"background-color:"+e+"!important":"background-color:rgb(255,255,255)!important;"},ei=function(n,e,r){var t=function(e){return function(r){var t=nH(r,"style"),o=void 0===t?"no-styles":t.trim();o!==e&&(nq(r,en,o),nB(r,n.parseStyle(e)))}},o=n8(e,"*"),i=M(C(o,function(n){return n4(n,"*:not(.tox-silver-sink)")})),u=eo(r);A(i,t("display:none!important;")),A(o,t(ee+er+u)),t((!0===et?"":ee)+er+u)(e)},eu=function(n){A(nO("["+en+"]"),function(e){var r=nH(e,en);"no-styles"!==r?nB(e,n.parseStyle(r)):nI(e,"style"),nI(e,en)})},ec=nZ.DOM,ea=nY().fold(function(){return{bind:h,unbind:h}},function(n){var e=T(),r=k(),t=k(),o=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},i=function(){window.requestAnimationFrame(function(){e.on(function(e){return nB(e,{top:n.offsetTop+"px",left:n.offsetLeft+"px",height:n.height+"px",width:n.width+"px"})})})},u=n9.throttle(function(){o(),i()},50);return{bind:function(n){e.set(n),u(),r.set(nQ("resize",u)),t.set(nQ("scroll",u))},unbind:function(){e.on(function(){r.clear(),t.clear()}),e.clear()}}}),es=function(n,e){var r,t=document.body,o=document.documentElement,i=n.getContainer(),u=j.fromDom(i),c=n2(n),a=e.get(),s=j.fromDom(n.getBody()),l=n0.deviceType.isTouch(),f=i.style,m=n.iframeElement.style,d=function(n){n(t,"tox-fullscreen"),n(o,"tox-fullscreen"),n(i,"tox-fullscreen"),nA(u).map(function(n){return nR(n).dom}).each(function(e){n(e,"tox-fullscreen"),n(e,"tox-shadowhost")})},v=function(){l&&eu(n.dom),d(ec.removeClass),ea.unbind(),O.from(e.get()).each(function(n){return n.fullscreenChangeHandler.unbind()})};if(a)a.fullscreenChangeHandler.unbind(),n5(n)&&n7(c)&&n6(nE(c)),m.width=a.iframeWidth,m.height=a.iframeHeight,f.width=a.containerWidth,f.height=a.containerHeight,f.top=a.containerTop,f.left=a.containerLeft,v(),r=a.scrollPos,window.scrollTo(r.x,r.y),e.set(null),n1(n,!1),n.off("remove",v);else{var h,g=(h=nE(c),nz(h,void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",y,function(r){n5(n)&&!n7(c)&&null!==e.get()&&es(n,e)},!1)),p={scrollPos:nJ(window),containerWidth:f.width,containerHeight:f.height,containerTop:f.top,containerLeft:f.left,iframeWidth:m.width,iframeHeight:m.height,fullscreenChangeHandler:g};l&&ei(n.dom,u,s),m.width=m.height="100%",f.width=f.height="",d(ec.addClass),ea.bind(u),n.on("remove",v),e.set(p),n5(n)&&n3(c),n1(n,!0)}},el=function(n,e){n.addCommand("mceFullScreen",function(){es(n,e)})},ef=function(n,e){return function(r){r.setActive(null!==e.get());var t=function(n){return r.setActive(n.state)};return n.on("FullscreenStateChanged",t),function(){return n.off("FullscreenStateChanged",t)}}},em=function(n,e){var r=function(){return n.execCommand("mceFullScreen")};n.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:r,onSetup:ef(n,e)}),n.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:r,onSetup:ef(n,e)})};i.add("fullscreen",function(n){var e,r=o(null);return n.inline||(el(n,r),em(n,r),n.addShortcut("Meta+Shift+F","","mceFullScreen")),e=r,{isFullscreen:function(){return null!==e.get()}}})}();