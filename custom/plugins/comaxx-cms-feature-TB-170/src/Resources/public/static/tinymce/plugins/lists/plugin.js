!function(){"use strict";var e,t,n,r,o,i=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=function(e){var t=typeof e;return null===e?"null":"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},a=function(e){return function(t){return u(t)===e}},s=function(e){return function(t){return typeof t===e}},c=a("string"),f=a("object"),l=a("array"),d=s("boolean"),m=s("function"),p=s("number"),v=function(){},g=function(e){return function(){return e}},h=function(e){return e},y=function(e,t){return e===t},S=function(e){return function(t){return!e(t)}},C=g(!1),b=g(!0),O=function(){return N},N={fold:function(e,t){return e()},isSome:C,isNone:b,getOr:h,getOrThunk:e=function(e){return e()},getOrDie:function(e){throw Error(e||"error: getOrDie called on none.")},getOrNull:g(null),getOrUndefined:g(void 0),or:h,orThunk:e,map:O,each:v,bind:O,exists:C,forall:b,filter:function(){return O()},toArray:function(){return[]},toString:g("none()")},L=function(e){var t=g(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},isSome:b,isNone:C,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return L(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:N},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o},T={some:L,none:O,from:function(e){return null==e?N:L(e)}},x=Array.prototype.slice,k=Array.prototype.push,A=function(e,t){for(var n=e.length,r=Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},w=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},D=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},E=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,u=e.length;i<u;i++){var a=e[i],s=t(a);s!==n&&(r.push(o),o=[]),n=s,o.push(a)}return 0!==o.length&&r.push(o),r},I=function(e,t,n){return w(e,function(e,r){n=t(n,e,r)}),n},B=function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return T.some(i);if(n(i,r))break}return T.none()},P=function(e,t){return B(e,t,C)},R=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!l(e[n]))throw Error("Arr.flatten item "+n+" was not an array, input: "+e);k.apply(t,e[n])}return t},M=function(e,t){return R(A(e,t))},U=function(e){var t=x.call(e,0);return t.reverse(),t},_=function(e,t){return t>=0&&t<e.length?T.some(e[t]):T.none()},$=function(e){return _(e,0)},F=function(e){return _(e,e.length-1)},j=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return T.none()},H=function(){return(H=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},K=function(e,t,n,r){var o=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!o,u=e.isiOS()||e.isAndroid(),a=u||r("(pointer:coarse)"),s=o||!i&&u&&r("(min-device-width:768px)"),c=i||u&&!s,f=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:g(o),isiPhone:g(i),isTablet:g(s),isPhone:g(c),isTouch:g(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:g(f),isDesktop:g(!c&&!s&&!f)}},V=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},W=function(e,t){var n=V(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return X(r(1),r(2))},Q=function(){return X(0,0)},X=function(e,t){return{major:e,minor:t}},q=function(e,t){var n=String(t).toLowerCase();return 0===e.length?Q():W(e,n)},z=function(e,t){var n=String(t).toLowerCase();return P(e,function(e){return e.search(n)})},Y=function(e,t){return -1!==e.indexOf(t)},Z=(t=/^\s+|\s+$/g,function(e){return e.replace(t,"")}),G=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,J=function(e){return function(t){return Y(t,e)}},ee=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Y(e,"edge/")&&Y(e,"chrome")&&Y(e,"safari")&&Y(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,G],search:function(e){return Y(e,"chrome")&&!Y(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Y(e,"msie")||Y(e,"trident")}},{name:"Opera",versionRegexes:[G,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:J("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:J("firefox")},{name:"Safari",versionRegexes:[G,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Y(e,"safari")||Y(e,"mobile/"))&&Y(e,"applewebkit")}}],et=[{name:"Windows",search:J("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Y(e,"iphone")||Y(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:J("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:J("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:J("linux"),versionRegexes:[]},{name:"Solaris",search:J("sunos"),versionRegexes:[]},{name:"FreeBSD",search:J("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:J("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],en={browsers:g(ee),oses:g(et)},er="Edge",eo="Chrome",ei="Opera",eu="Firefox",ea="Safari",es=function(e){var t=e.current,n=e.version,r=function(e){return function(){return t===e}};return{current:t,version:n,isEdge:r(er),isChrome:r(eo),isIE:r("IE"),isOpera:r(ei),isFirefox:r(eu),isSafari:r(ea)}},ec={unknown:function(){return es({current:void 0,version:Q()})},nu:es,edge:g(er),chrome:g(eo),ie:g("IE"),opera:g(ei),firefox:g(eu),safari:g(ea)},ef="Windows",el="Android",ed="Linux",em="Solaris",ep="FreeBSD",ev="ChromeOS",eg=function(e){var t=e.current,n=e.version,r=function(e){return function(){return t===e}};return{current:t,version:n,isWindows:r(ef),isiOS:r("iOS"),isAndroid:r(el),isOSX:r("OSX"),isLinux:r(ed),isSolaris:r(em),isFreeBSD:r(ep),isChromeOS:r(ev)}},eh={unknown:function(){return eg({current:void 0,version:Q()})},nu:eg,windows:g(ef),ios:g("iOS"),android:g(el),linux:g(ed),osx:g("OSX"),solaris:g(em),freebsd:g(ep),chromeos:g(ev)},ey=function(e,t,n){var r=en.browsers(),o=en.oses(),i=t.bind(function(e){return j(e.brands,function(e){var t=e.brand.toLowerCase();return P(r,function(e){var n;return t===(null===(n=e.brand)||void 0===n?void 0:n.toLowerCase())}).map(function(t){return{current:t.name,version:X(parseInt(e.version,10),0)}})})}).orThunk(function(){return z(r,e).map(function(t){var n=q(t.versionRegexes,e);return{current:t.name,version:n}})}).fold(ec.unknown,ec.nu),u=z(o,e).map(function(t){var n=q(t.versionRegexes,e);return{current:t.name,version:n}}).fold(eh.unknown,eh.nu),a=K(u,i,e,n);return{browser:i,os:u,deviceType:a}},eS=function(e){return window.matchMedia(e).matches},eC=(n=function(){return ey(navigator.userAgent,T.from(navigator.userAgentData),eS)},o=!1,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o||(o=!0,r=n.apply(null,e)),r}),eb=function(e,t){var n;return n=Node.DOCUMENT_POSITION_CONTAINED_BY,(e.compareDocumentPosition(t)&n)!=0},eO=function(e){if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},eN=function(e,t){return eO((t||document).createElement(e))},eL=function(e,t){return e.dom===t.dom},eT=function(e,t){var n=e.dom,r=t.dom;return n!==r&&n.contains(r)},ex=function(e,t){var n=e.dom;if(1!==n.nodeType)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},ek=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),eA=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ew=tinymce.util.Tools.resolve("tinymce.util.VK"),eD=Object.keys,eE=function(e,t){for(var n=eD(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},eI=function(e,t){var n,r={};return n=function(e,t){r[t]=e},eE(e,function(e,r){(t(e,r)?n:v)(e,r)}),r};"undefined"!=typeof window?window:Function("return this;")();var eB=function(e){return e.dom.nodeName.toLowerCase()},eP=function(e){return 1===e.dom.nodeType},eR=function(e){return function(t){return eP(t)&&eB(t)===e}},eM=function(e,t,n){if(c(n)||d(n)||p(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),Error("Attribute value was not simple")},eU=function(e,t){var n=e.dom;eE(t,function(e,t){eM(n,t,e)})},e_=function(e){return I(e.dom.attributes,function(e,t){return e[t.name]=t.value,e},{})},e$=function(e){return T.from(e.dom.parentNode).map(eO)},eF=function(e){return A(e.dom.childNodes,eO)},ej=function(e,t){var n=e.dom.childNodes;return T.from(n[t]).map(eO)},eH=function(e){return ej(e,0)},eK=function(e){return ej(e,e.dom.childNodes.length-1)},eV=function(e,t){e$(e).each(function(n){n.dom.insertBefore(t.dom,e.dom)})},eW=function(e,t){e.dom.appendChild(t.dom)},eQ=function(e,t){w(t,function(t){eV(e,t)})},eX=function(e,t){w(t,function(t){eW(e,t)})},eq=function(e){var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},ez=function(e){return eO(e.dom.cloneNode(!0))},eY=function(e,t){var n=eN(t);return eU(n,e_(e)),n},eZ=function(e,t){var n=eY(e,t);return eV(e,n),eX(n,eF(e)),eq(e),n},eG=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),eJ=tinymce.util.Tools.resolve("tinymce.util.Tools"),e0=function(e){return function(t){return t&&t.nodeName.toLowerCase()===e}},e1=function(e){return function(t){return t&&e.test(t.nodeName)}},e9=function(e){return e&&3===e.nodeType},e2=e1(/^(OL|UL|DL)$/),e6=e1(/^(OL|UL)$/),e3=e0("ol"),e4=e1(/^(LI|DT|DD)$/),e5=e1(/^(DT|DD)$/),e7=e1(/^(TH|TD)$/),e8=e0("br"),te=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},tt=function(e,t){return e&&e.nodeName in t},tn=function(e,t,n){var r=e.isEmpty(t);return(!n||!(e.select("span[data-mce-type=bookmark]",t).length>0))&&r},tr=function(e,t){return e.isChildOf(t,e.getRoot())},to=function(e){var t=e.getParam("forced_root_block","p");return!1===t?"":!0===t?"p":t},ti=function(e,t){var n,r,o,i=e.dom,u=e.schema.getBlockElements(),a=i.createFragment(),s=to(e);if(s&&((r=i.create(s)).tagName===s.toUpperCase()&&i.setAttribs(r,e.getParam("forced_root_block_attrs",{})),tt(t.firstChild,u)||a.appendChild(r)),t)for(;n=t.firstChild;){var c=n.nodeName;o||"SPAN"===c&&"bookmark"===n.getAttribute("data-mce-type")||(o=!0),tt(n,u)?(a.appendChild(n),r=null):s?(r||(r=i.create(s),a.appendChild(r)),r.appendChild(n)):a.appendChild(n)}return s?o||r.appendChild(i.create("br",{"data-mce-bogus":"1"})):a.appendChild(i.create("br")),a},tu=eG.DOM,ta=function(e,t,n){var r,o=tu.select('span[data-mce-type="bookmark"]',t),i=ti(e,n),u=tu.createRng();u.setStartAfter(n),u.setEndAfter(t);for(var a=u.extractContents(),s=a.firstChild;s;s=s.firstChild)if("LI"===s.nodeName&&e.dom.isEmpty(s)){tu.remove(s);break}e.dom.isEmpty(a)||tu.insertAfter(a,t),tu.insertAfter(i,t),tn(e.dom,n.parentNode)&&(r=n.parentNode,eJ.each(o,function(e){r.parentNode.insertBefore(e,n.parentNode)}),tu.remove(r)),tu.remove(n),tn(e.dom,t)&&tu.remove(t)},ts=eR("dd"),tc=eR("dt"),tf=function(e,t){ts(t)?eZ(t,"dt"):tc(t)&&e$(t).each(function(n){return ta(e,n.dom,t.dom)})},tl=function(e){tc(e)&&eZ(e,"dd")},td=function(e,t,n){"Indent"===t?w(n,tl):w(n,function(t){return tf(e,t)})},tm=function(e,t){if(e9(e))return{container:e,offset:t};var n=ek.getNode(e,t);return e9(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&e9(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&e9(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},tp=function(e){var t=e.cloneRange(),n=tm(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);var r=tm(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},tv=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),tg=function(e,t){var n=t||e.selection.getStart(!0);return e.dom.getParent(n,"OL,UL,DL",tC(e,n))},th=function(e){var t=tg(e),n=e.selection.getSelectedBlocks();return t&&1===n.length&&n[0]===t?D(t.querySelectorAll("ol,ul,dl"),e2):D(n,function(e){return e2(e)&&t!==e})},ty=function(e,t){var n=eJ.map(t,function(t){return e.dom.getParent(t,"li,dd,dt",tC(e,t))||t});return tv.unique(n)},tS=function(e){var t=e.selection.getSelectedBlocks();return D(ty(e,t),e4)},tC=function(e,t){var n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},tb=function(e,t){return F(e.dom.getParents(t,"ol,ul",tC(e,t)))},tO=function(e){var t=tb(e,e.selection.getStart()),n=D(e.selection.getSelectedBlocks(),e6);return t.toArray().concat(n)},tN=function(e){var t=tO(e);return tL(e,t)},tL=function(e,t){var n=A(t,function(t){return tb(e,t).getOr(t)});return tv.unique(n)},tT=function(e,t,n){return void 0===n&&(n=y),e.exists(function(e){return n(e,t)})},tx=function(e,t,n){return e.isSome()&&t.isSome()?T.some(n(e.getOrDie(),t.getOrDie())):T.none()},tk=function(e,t){var n=(t||document).createDocumentFragment();return w(e,function(e){n.appendChild(e.dom)}),eO(n)},tA=function(e,t,n){return e.fire("ListMutation",{action:t,element:n})},tw=function(e,t,n){if(!c(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),Error("CSS value must be a string: "+n);void 0!==e.style&&m(e.style.getPropertyValue)&&e.style.setProperty(t,n)},tD=function(e,t,n){tw(e.dom,t,n)},tE=function(e,t){eW(e.item,t.list)},tI=function(e){for(var t=1;t<e.length;t++)tE(e[t-1],e[t])},tB=function(e,t){tx(F(e),$(t),tE)},tP=function(e,t){var n={list:eN(t,e),item:eN("li",e)};return eW(n.list,n.item),n},tR=function(e,t,n){for(var r=[],o=0;o<n;o++)r.push(tP(e,t.listType));return r},tM=function(e,t){for(var n=0;n<e.length-1;n++)tD(e[n].item,"list-style-type","none");F(e).each(function(e){eU(e.list,t.listAttributes),eU(e.item,t.itemAttributes),eX(e.item,t.content)})},tU=function(e,t){eB(e.list)!==t.listType&&(e.list=eZ(e.list,t.listType)),eU(e.list,t.listAttributes)},t_=function(e,t,n){var r=eN("li",e);return eU(r,t),eX(r,n),r},t$=function(e,t){eW(e.list,t),e.item=t},tF=function(e,t,n){var r=t.slice(0,n.depth);return F(r).each(function(t){t$(t,t_(e,n.itemAttributes,n.content)),tU(t,n)}),r},tj=function(e,t,n){var r=tR(e,n,n.depth-t.length);return tI(r),tM(r,n),tB(t,r),t.concat(r)},tH=function(e){return ex(e,"OL,UL")},tK=function(e){return eH(e).exists(tH)},tV=function(e){return e.depth>0},tW=function(e){return e.isSelected},tQ=function(e){var t=eF(e);return A(eK(e).exists(tH)?t.slice(0,-1):t,ez)},tX=function(e,t){switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0},tq=function(e,t){e.listType=t.listType,e.listAttributes=H({},t.listAttributes)},tz=function(e){e.listAttributes=eI(e.listAttributes,function(e,t){return"start"!==t})},tY=function(e,t){var n=e[t].depth,r=function(e){return e.depth===n&&!e.dirty},o=function(e){return e.depth<n};return B(U(e.slice(0,t)),r,o).orThunk(function(){return B(e.slice(t+1),r,o)})},tZ=function(e){return w(e,function(t,n){tY(e,n).fold(function(){t.dirty&&tz(t)},function(e){return tq(t,e)})}),e},tG=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},tJ=function(e,t,n,r){return M(eF(r),function(r){return(tH(r)?tJ:function(e,t,n,r){return eH(r).filter(tH).fold(function(){t.each(function(e){eL(e.start,r)&&n.set(!0)});var o,i=(o=n.get(),e$(r).filter(eP).map(function(t){return{depth:e,dirty:!1,isSelected:o,content:tQ(r),itemAttributes:e_(r),listAttributes:e_(t),listType:eB(t)}}));t.each(function(e){eL(e.end,r)&&n.set(!1)});var u=eK(r).filter(tH).map(function(r){return tJ(e,t,n,r)}).getOr([]);return i.toArray().concat(u)},function(r){return tJ(e,t,n,r)})})(e+1,t,n,r)})},t0=function(e,t){var n=tG(!1);return A(e,function(e){return{sourceList:e,entries:tJ(0,t,n,e)}})},t1=function(e,t){var n,r=tZ(t);return(n=e.contentDocument,$(I(r,function(e,t){return t.depth>e.length?tj(n,e,t):tF(n,e,t)},[])).map(function(e){return e.list})).toArray()},t9=function(e,t){w(D(e,tW),function(e){return tX(t,e)})},t2=function(e){var t=A(tS(e),eO);return tx(P(t,S(tK)),P(U(t),S(tK)),function(e,t){return{start:e,end:t}})},t6=function(e,t,n){w(t0(t,t2(e)),function(t){t9(t.entries,n);var r=M(E(t.entries,tV),function(t){return $(t).exists(tV)?t1(e,t):A(tZ(t),function(t){return eO(ti(e,tk(t.content).dom))})});w(r,function(t){tA(e,"Indent"===n?"IndentList":"OutdentList",t.dom)}),eQ(t.sourceList,r),eq(t.sourceList)})},t3=function(e,t){var n=A(tN(e),eO),r=A(D(tS(e),e5),eO),o=!1;if(n.length||r.length){var i=e.selection.getBookmark();t6(e,n,t),td(e,t,r),e.selection.moveToBookmark(i),e.selection.setRng(tp(e.selection.getRng())),e.nodeChanged(),o=!0}return o},t4=function(e){return t3(e,"Indent")},t5=function(e){return t3(e,"Outdent")},t7=function(e){return t3(e,"Flatten")},t8=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),ne=eG.DOM,nt=function(e){var t={},n=function(n){var r=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"];if(1===r.nodeType){var i=ne.create("span",{"data-mce-type":"bookmark"});r.hasChildNodes()?(o=Math.min(o,r.childNodes.length-1),n?r.insertBefore(i,r.childNodes[o]):ne.insertAfter(i,r.childNodes[o])):r.appendChild(i),r=i,o=0}t[n?"startContainer":"endContainer"]=r,t[n?"startOffset":"endOffset"]=o};return n(!0),e.collapsed||n(),t},nn=function(e){var t=function(t){var n,r=n=e[t?"startContainer":"endContainer"],o=e[t?"startOffset":"endOffset"];r&&(1===r.nodeType&&(o=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;(1!==t.nodeType||"bookmark"!==t.getAttribute("data-mce-type"))&&n++,t=t.nextSibling}return -1}(r),r=r.parentNode,ne.remove(n),!r.hasChildNodes()&&ne.isBlock(r)&&r.appendChild(ne.create("br"))),e[t?"startContainer":"endContainer"]=r,e[t?"startOffset":"endOffset"]=o)};t(!0),t();var n=ne.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),tp(n)},nr=function(e){switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},no=function(e){return/\btox\-/.test(e.className)},ni=function(e,t,n){var r=function(e){n(B(e.parents,e2,e7).filter(function(e){return e.nodeName===t&&!no(e)}).isSome())};return r({parents:e.dom.getParents(e.selection.getNode())}),e.on("NodeChange",r),function(){return e.off("NodeChange",r)}},nu=function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)},na=function(e,t){eJ.each(t,function(t,n){e.setAttribute(n,t)})},ns=function(e,t,n){na(t,n["list-attributes"]),eJ.each(e.select("li",t),function(e){na(e,n["list-item-attributes"])})},nc=function(e,t,n){nu(e,t,n),ns(e,t,n)},nf=function(e,t,n){eJ.each(n,function(n){var r;return e.setStyle(t,((r={})[n]="",r))})},nl=function(e,t,n,r){var o=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"];for(1===o.nodeType&&(o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o),!n&&e8(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r&&!(te(e,o)||/^(TD|TH)$/.test(o.parentNode.nodeName));)o=o.parentNode;return o},nd=function(e,t,n){for(var r,o=[],i=e.dom,u=nl(e,t,!0,n),a=nl(e,t,!1,n),s=[],c=u;c&&(s.push(c),c!==a);c=c.nextSibling);return eJ.each(s,function(t){if(te(e,t)){o.push(t),r=null;return}if(i.isBlock(t)||e8(t)){e8(t)&&i.remove(t),r=null;return}var u=t.nextSibling;if(t8.isBookmarkNode(t)&&(e2(u)||te(e,u)||!u&&t.parentNode===n)){r=null;return}r||(r=i.create("p"),t.parentNode.insertBefore(r,t),o.push(r)),r.appendChild(t)}),o},nm=function(e,t,n){var r=e.getStyle(t,"list-style-type"),o=n?n["list-style-type"]:"";return r===(o=null===o?"":o)},np=function(e,t,n){var r=e.selection.getRng(),o="LI",i=tC(e,e.selection.getStart(!0)),u=e.dom;if("false"!==u.getContentEditable(e.selection.getNode())){"DL"===(t=t.toUpperCase())&&(o="DT");var a=nt(r),s=nd(e,r,i);eJ.each(s,function(r){var i,a=r.previousSibling;e4(r.parentNode)||(a&&e2(a)&&a.nodeName===t&&nm(u,a,n)?(i=a,r=u.rename(r,o),a.appendChild(r)):(i=u.create(t),r.parentNode.insertBefore(i,r),i.appendChild(r),r=u.rename(r,o)),nf(u,r,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),nc(u,i,n),ng(e.dom,i))}),e.selection.setRng(nn(a))}},nv=function(e,t,n){return t&&n&&e2(t)&&t.nodeName===n.nodeName&&e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)&&t.className===n.className},ng=function(e,t){var n,r;if(n=t.nextSibling,nv(e,t,n)){for(;r=n.firstChild;)t.appendChild(r);e.remove(n)}if(n=t.previousSibling,nv(e,t,n)){for(;r=n.lastChild;)t.insertBefore(r,t.firstChild);e.remove(n)}},nh=function(e,t,n,r){if(t.nodeName!==n){var o=e.dom.rename(t,n);nc(e.dom,o,r),tA(e,nr(n),o)}else nc(e.dom,t,r),tA(e,nr(n),t)},ny=function(e,t,n,r,o){var i=e2(t);if(i&&t.nodeName===r&&!nS(o))t7(e);else{np(e,r,o);var u=nt(e.selection.getRng()),a=i?function(e,t,n){if(n||2==arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([t],n,!0):n;eJ.each(a,function(t){nh(e,t,r,o)}),e.selection.setRng(nn(u))}},nS=function(e){return"list-style-type"in e},nC=function(e,t,n,r){if(t!==e.getBody()){if(t){if(t.nodeName!==n||nS(r)||no(t)){var o=nt(e.selection.getRng());nc(e.dom,t,r);var i=e.dom.rename(t,n);ng(e.dom,i),e.selection.setRng(nn(o)),np(e,n,r),tA(e,nr(n),i)}else t7(e)}else np(e,n,r),tA(e,nr(n),t)}},nb=function(e,t,n){var r=tg(e),o=th(e),i=f(n)?n:{};o.length>0?ny(e,r,o,t,i):nC(e,r,t,i)},nO=eG.DOM,nN=function(e,t){var n=t.parentNode;if("LI"===n.nodeName&&n.firstChild===t){var r=n.previousSibling;r&&"LI"===r.nodeName?(r.appendChild(t),tn(e,n)&&nO.remove(n)):nO.setStyle(n,"listStyleType","none")}if(e2(n)){var r=n.previousSibling;r&&"LI"===r.nodeName&&r.appendChild(t)}},nL=function(e,t){var n=eJ.grep(e.select("ol,ul",t));eJ.each(n,function(t){nN(e,t)})},nT=function(e,t,n,r){var o,i,u=t.startContainer,a=t.startOffset;if(e9(u)&&(n?a<u.data.length:a>0))return u;var s=e.schema.getNonEmptyElements();1===u.nodeType&&(u=ek.getNode(u,a));var c=new eA(u,r);for(n&&(o=e.dom,e8(i=u)&&o.isBlock(i.nextSibling)&&!e8(i.previousSibling)&&c.next());u=c[n?"next":"prev2"]();)if("LI"===u.nodeName&&!u.hasChildNodes()||s[u.nodeName]||e9(u)&&u.data.length>0)return u},nx=function(e,t){var n=t.childNodes;return 1===n.length&&!e2(n[0])&&e.isBlock(n[0])},nk=function(e,t){nx(e,t)&&e.remove(t.firstChild,!0)},nA=function(e,t,n){var r,o=nx(e,n)?n.firstChild:n;if(nk(e,t),!tn(e,t,!0))for(;r=t.firstChild;)o.appendChild(r)},nw=function(e,t,n){var r,o=t.parentNode;if(tr(e,t)&&tr(e,n)){e2(n.lastChild)&&(r=n.lastChild),o===n.lastChild&&e8(o.previousSibling)&&e.remove(o.previousSibling);var i,u,a=n.lastChild;a&&e8(a)&&t.hasChildNodes()&&e.remove(a),tn(e,n,!0)&&e.$(n).empty(),nA(e,t,n),r&&n.appendChild(r);var s=(i=eO(n),u=eO(t),eC().browser.isIE()?eb(i.dom,u.dom):eT(i,u))?e.getParents(t,e2,n):[];e.remove(t),w(s,function(t){tn(e,t)&&t!==e.getRoot()&&e.remove(t)})}},nD=function(e,t,n){e.dom.$(n).empty(),nw(e.dom,t,n),e.selection.setCursorLocation(n,0)},nE=function(e,t,n,r){var o=e.dom;if(o.isEmpty(r))nD(e,n,r);else{var i=nt(t);nw(o,n,r),e.selection.setRng(nn(i))}},nI=function(e,t,n,r){var o=nt(t);nw(e.dom,n,r);var i=nn(o);e.selection.setRng(i)},nB=function(e,t){var n=e.dom,r=e.selection,o=tC(e,r.getStart()),i=n.getParent(r.getStart(),"LI",o);if(i){var u=i.parentNode;if(u===e.getBody()&&tn(n,u))return!0;var a=tp(r.getRng()),s=n.getParent(nT(e,a,t,o),"LI",o);if(s&&s!==i)return e.undoManager.transact(function(){t?nE(e,a,s,i):i.parentNode.firstChild===i?t5(e):nI(e,a,i,s)}),!0;if(!s&&!t&&0===a.startOffset&&0===a.endOffset)return e.undoManager.transact(function(){t7(e)}),!0}return!1},nP=function(e,t,n){var r=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),r&&e.isEmpty(r)&&e.remove(r)},nR=function(e,t){var n=e.dom,r=e.selection.getStart(),o=tC(e,r),i=n.getParent(r,n.isBlock,o);if(i&&n.isEmpty(i)){var u=tp(e.selection.getRng()),a=n.getParent(nT(e,u,t,o),"LI",o);if(a)return e.undoManager.transact(function(){nP(n,i,o),ng(n,a.parentNode),e.selection.select(a,!0),e.selection.collapse(t)}),!0}return!1},nM=function(e){var t=e.selection.getStart(),n=tC(e,t);return(!!e.dom.getParent(t,"LI,DT,DD",n)||tS(e).length>0)&&(e.undoManager.transact(function(){e.execCommand("Delete"),nL(e.dom,e.getBody())}),!0)},nU=function(e,t){return e.selection.isCollapsed()?nB(e,t)||nR(e,t):nM(e)},n_=function(e){e.on("keydown",function(t){t.keyCode===ew.BACKSPACE?nU(e,!1)&&t.preventDefault():t.keyCode===ew.DELETE&&nU(e,!0)&&t.preventDefault()})},n$=function(e,t){var n=tg(e);e.undoManager.transact(function(){f(t.styles)&&e.dom.setStyles(n,t.styles),f(t.attrs)&&eE(t.attrs,function(t,r){return e.dom.setAttrib(n,r,t)})})},nF=function(e){return I(A(U(Z(e).split("")),function(e,t){return Math.pow(26,t)*(e.toUpperCase().charCodeAt(0)-65+1)}),function(e,t){return e+t},0)},nj=function(e){if(--e<0)return"";var t=e%26;return nj(Math.floor(e/26))+String.fromCharCode(65+t)},nH=function(e){var t;switch(t=e,/^[0-9]+$/.test(t)?2:/^[A-Z]+$/.test(t)?0:/^[a-z]+$/.test(t)?1:t.length>0?4:3){case 2:return T.some({listStyleType:T.none(),start:e});case 0:return T.some({listStyleType:T.some("upper-alpha"),start:nF(e).toString()});case 1:return T.some({listStyleType:T.some("lower-alpha"),start:nF(e).toString()});case 3:return T.some({listStyleType:T.none(),start:""});case 4:return T.none()}},nK=function(e){var t=parseInt(e.start,10);return tT(e.listStyleType,"upper-alpha")?nj(t):tT(e.listStyleType,"lower-alpha")?nj(t).toLowerCase():e.start},nV=function(e){var t=tg(e);e3(t)&&e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:nK({start:e.dom.getAttrib(t,"start","1"),listStyleType:T.some(e.dom.getStyle(t,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(t){nH(t.getData().start).each(function(t){e.execCommand("mceListUpdate",!1,{attrs:{start:"1"===t.start?"":t.start},styles:{"list-style-type":t.listStyleType.getOr("")}})}),t.close()}})},nW=function(e,t){return function(){var n=tg(e);return n&&n.nodeName===t}},nQ=function(e){e.addCommand("mceListProps",function(){nV(e)})},nX=function(e){e.on("BeforeExecCommand",function(t){var n=t.command.toLowerCase();"indent"===n?t4(e):"outdent"===n&&t5(e)}),e.addCommand("InsertUnorderedList",function(t,n){nb(e,"UL",n)}),e.addCommand("InsertOrderedList",function(t,n){nb(e,"OL",n)}),e.addCommand("InsertDefinitionList",function(t,n){nb(e,"DL",n)}),e.addCommand("RemoveList",function(){t7(e)}),nQ(e),e.addCommand("mceListUpdate",function(t,n){f(n)&&n$(e,n)}),e.addQueryStateHandler("InsertUnorderedList",nW(e,"UL")),e.addQueryStateHandler("InsertOrderedList",nW(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",nW(e,"DL"))},nq=function(e){e.on("keydown",function(t){t.keyCode!==ew.TAB||ew.metaKeyPressed(t)||e.undoManager.transact(function(){(t.shiftKey?t5(e):t4(e))&&t.preventDefault()})})},nz=function(e){e.getParam("lists_indent_on_tab",!0)&&nq(e),n_(e)},nY=function(e){var t=function(t){return function(){return e.execCommand(t)}};e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:function(t){return ni(e,"OL",t.setActive)}}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:function(t){return ni(e,"UL",t.setActive)}}))},nZ=function(e){e.ui.registry.addMenuItem("listprops",{text:"List properties...",icon:"ordered-list",onAction:function(){return e.execCommand("mceListProps")},onSetup:function(t){return ni(e,"OL",function(e){return t.setDisabled(!e)})}}),e.ui.registry.addContextMenu("lists",{update:function(t){return e3(tg(e,t))?["listprops"]:[]}})};i.add("lists",function(e){return!1===e.hasPlugin("rtc",!0)?(nz(e),nX(e)):nQ(e),nY(e),nZ(e),{backspaceDelete:function(t){nU(e,t)}}})}();