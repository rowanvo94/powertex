!function(){"use strict";function e(e){return function(t){var n;return n=typeof t,(null===t?"null":"object"==n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n)===e}}function t(e){return function(t){return typeof t===e}}function n(){}function r(e){return function(){return e}}function o(e){return e}function i(e,t){return e===t}function a(e){return function(t){return!e(t)}}function s(){return v}var u=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=e("string"),l=e("object"),d=e("array"),f=t("boolean"),m=t("function"),p=t("number"),g=r(!1),h=r(!0),v={fold:function(e,t){return e()},isSome:g,isNone:h,getOr:o,getOrThunk:y,getOrDie:function(e){throw Error(e||"error: getOrDie called on none.")},getOrNull:r(null),getOrUndefined:r(void 0),or:o,orThunk:y,map:s,each:n,bind:s,exists:g,forall:h,filter:function(){return v},toArray:function(){return[]},toString:r("none()")};function y(e){return e()}function S(e,t){for(var n=e.length,r=Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}function C(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function b(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n}function O(e,t,n){return C(e,function(e,r){n=t(n,e,r)}),n}function N(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return A.some(i);if(n(i,r))break}return A.none()}function L(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!d(e[n]))throw Error("Arr.flatten item "+n+" was not an array, input: "+e);E.apply(t,e[n])}return t}(S(e,t))}function T(e){var t=w.call(e,0);return t.reverse(),t}function D(e,t){return 0<=t&&t<e.length?A.some(e[t]):A.none()}function x(e){return D(e,e.length-1)}var k=function(e){function t(){return i}function n(t){return t(e)}var o=r(e),i={fold:function(t,n){return n(e)},isSome:h,isNone:g,getOr:o,getOrThunk:o,getOrDie:o,getOrNull:o,getOrUndefined:o,or:t,orThunk:t,map:function(t){return k(t(e))},each:function(t){t(e)},bind:n,exists:n,forall:n,filter:function(t){return t(e)?i:v},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return i},A={some:k,none:s,from:function(e){return null==e?v:k(e)}},w=Array.prototype.slice,E=Array.prototype.push,I=function(){return(I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function B(e,t){var n=String(t).toLowerCase();return N(e,function(e){return e.search(n)},g)}function P(e,t){return -1!==e.indexOf(t)}function R(e){return function(t){return P(t,e)}}function M(e){return window.matchMedia(e).matches}function U(e,t){for(var n=ed(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}}function _(){return Q(0,0)}function $(e){function t(e){return function(){return n===e}}var n=e.current;return{current:n,version:e.version,isEdge:t("Edge"),isChrome:t("Chrome"),isIE:t("IE"),isOpera:t("Opera"),isFirefox:t(Z),isSafari:t("Safari")}}function F(e){function t(e){return function(){return n===e}}var n=e.current;return{current:n,version:e.version,isWindows:t(J),isiOS:t("iOS"),isAndroid:t(ee),isOSX:t("OSX"),isLinux:t("Linux"),isSolaris:t(et),isFreeBSD:t(en),isChromeOS:t(er)}}function j(e){if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}}var H,K,V,W,Q=function(e,t){return{major:e,minor:t}},X={nu:Q,detect:function(e,t){var n,r,o=String(t).toLowerCase();return 0===e.length?_():(r=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,n=o))?Q(i(1),i(2)):{major:0,minor:0};function i(e){return Number(n.replace(r,"$"+e))}},unknown:_},q=(H=/^\s+|\s+$/g,function(e){return e.replace(H,"")}),z=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Y={browsers:r([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return P(e,"edge/")&&P(e,"chrome")&&P(e,"safari")&&P(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,z],search:function(e){return P(e,"chrome")&&!P(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return P(e,"msie")||P(e,"trident")}},{name:"Opera",versionRegexes:[z,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:R("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:R("firefox")},{name:"Safari",versionRegexes:[z,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(P(e,"safari")||P(e,"mobile/"))&&P(e,"applewebkit")}}]),oses:r([{name:"Windows",search:R("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return P(e,"iphone")||P(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:R("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:R("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:R("linux"),versionRegexes:[]},{name:"Solaris",search:R("sunos"),versionRegexes:[]},{name:"FreeBSD",search:R("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:R("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},Z="Firefox",G=function(){return $({current:void 0,version:X.unknown()})},J=(r("Edge"),r("Chrome"),r("IE"),r("Opera"),r(Z),r("Safari"),"Windows"),ee="Android",et="Solaris",en="FreeBSD",er="ChromeOS",eo=function(){return F({current:void 0,version:X.unknown()})},ei=(r(J),r("iOS"),r(ee),r("Linux"),r("OSX"),r(et),r(en),r(er),K=function(){var e,t,n,o,i,a,s,u,c,l,d,f,m;return e=navigator.userAgent,t=A.from(navigator.userAgentData),l=Y.browsers(),d=Y.oses(),{browser:f=t.bind(function(e){return function(e){for(var t=0;t<e.length;t++){var n=function(e){var t=e.brand.toLowerCase();return N(l,function(e){var n;return t===(null===(n=e.brand)||void 0===n?void 0:n.toLowerCase())},g).map(function(t){return{current:t.name,version:X.nu(parseInt(e.version,10),0)}})}(e[t]);if(n.isSome())return n}return A.none()}(e.brands)}).orThunk(function(){return B(l,e).map(function(t){var n=X.detect(t.versionRegexes,e);return{current:t.name,version:n}})}).fold(G,$),os:m=B(d,e).map(function(t){var n=X.detect(t.versionRegexes,e);return{current:t.name,version:n}}).fold(eo,F),deviceType:(n=m.isiOS()&&!0===/ipad/i.test(e),o=m.isiOS()&&!n,a=(i=m.isiOS()||m.isAndroid())||M("(pointer:coarse)"),s=n||!o&&i&&M("(min-device-width:768px)"),u=o||i&&!s,c=f.isSafari()&&m.isiOS()&&!1===/safari/i.test(e),{isiPad:r(n),isiPhone:r(o),isTablet:r(s),isPhone:r(u),isTouch:r(a),isAndroid:m.isAndroid,isiOS:m.isiOS,isWebView:r(c),isDesktop:r(!u&&!s&&!c)})}},W=!1,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return W||(W=!0,V=K.apply(null,e)),V}),ea={fromTag:function(e,t){return j((t||document).createElement(e))},fromDom:j},es=function(e,t){var n=e.dom;if(1!==n.nodeType)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},eu=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),ec=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),el=tinymce.util.Tools.resolve("tinymce.util.VK"),ed=Object.keys;function ef(e){return e.dom.nodeName.toLowerCase()}function em(e){return function(t){return ts(t)&&ef(t)===e}}function ep(e,t){var n=e.dom;U(t,function(e,t){!function(e,t,n){if(!(c(n)||f(n)||p(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),Error("Attribute value was not simple");e.setAttribute(t,n+"")}(n,t,e)})}function eg(e){return O(e.dom.attributes,function(e,t){return e[t.name]=t.value,e},{})}function eh(e){return A.from(e.dom.parentNode).map(ea.fromDom)}function ev(e){return S(e.dom.childNodes,ea.fromDom)}function ey(e,t){var n=e.dom.childNodes;return A.from(n[t]).map(ea.fromDom)}function eS(e){return ey(e,e.dom.childNodes.length-1)}function eC(e,t){eh(e).each(function(n){n.dom.insertBefore(t.dom,e.dom)})}function eb(e,t){e.dom.appendChild(t.dom)}function eO(e,t){C(t,function(t){eb(e,t)})}function eN(e){var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)}function eL(e){return ea.fromDom(e.dom.cloneNode(!0))}function eT(e,t){var n,r=(ep(n=ea.fromTag(t),eg(e)),n);return eC(e,r),eO(r,ev(e)),eN(e),r}function eD(e){return function(t){return t&&t.nodeName.toLowerCase()===e}}function ex(e){return function(t){return t&&e.test(t.nodeName)}}function ek(e){return e&&3===e.nodeType}function eA(e,t){return t&&e.schema.getTextBlockElements()[t.nodeName]}function ew(e,t){return e&&e.nodeName in t}function eE(e,t,n){var r=e.isEmpty(t);return!(n&&0<e.select("span[data-mce-type=bookmark]",t).length)&&r}function eI(e,t){return e.isChildOf(t,e.getRoot())}function eB(e,t){var n,r,o,i,a=e.dom,s=e.schema.getBlockElements(),u=a.createFragment(),c=!1===(n=e.getParam("forced_root_block","p"))?"":!0===n?"p":n;if(c&&((o=a.create(c)).tagName===c.toUpperCase()&&a.setAttribs(o,e.getParam("forced_root_block_attrs",{})),ew(t.firstChild,s)||u.appendChild(o)),t)for(;r=t.firstChild;){var l=r.nodeName;i||"SPAN"===l&&"bookmark"===r.getAttribute("data-mce-type")||(i=!0),ew(r,s)?(u.appendChild(r),o=null):c?(o||(o=a.create(c),u.appendChild(o)),o.appendChild(r)):u.appendChild(r)}return c?i||o.appendChild(a.create("br",{"data-mce-bogus":"1"})):u.appendChild(a.create("br")),u}function eP(e){tS(e)&&eT(e,"dd")}function eR(e,t){if(ek(e))return{container:e,offset:t};var n=eu.getNode(e,t);return ek(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&ek(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&ek(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}}function eM(e){var t=e.cloneRange(),n=eR(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);var r=eR(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t}function eU(e,t){var n=t||e.selection.getStart(!0);return e.dom.getParent(n,"OL,UL,DL",tb(e,n))}function e_(e){var t,n=e.selection.getSelectedBlocks();return b((t=tc.map(n,function(t){return e.dom.getParent(t,"li,dd,dt",tb(e,t))||t}),tC.unique(t)),tm)}function e$(e,t){return x(e.dom.getParents(t,"ol,ul",tb(e,t)))}function eF(e,t,n){return void 0===n&&(n=i),e.exists(function(e){return n(e,t)})}function ej(e,t,n){return e.isSome()&&t.isSome()?A.some(n(e.getOrDie(),t.getOrDie())):A.none()}function eH(e,t,n){return e.fire("ListMutation",{action:t,element:n})}function eK(e,t){eb(e.item,t.list)}function eV(e){return es(e,"OL,UL")}function eW(e){return ey(e,0).exists(eV)}function eQ(e){return 0<e.depth}function eX(e){return e.isSelected}function eq(e){return C(e,function(t,r){var o;function i(e){return e.depth===o&&!e.dirty}function a(e){return e.depth<o}o=e[r].depth,N(T(e.slice(0,r)),i,a).orThunk(function(){return N(e.slice(r+1),i,a)}).fold(function(){var e,r,o,i,a;t.dirty&&(t.listAttributes=(e=t.listAttributes,o=function(e,t){return"start"!==t},i=r={},a=function(e,t){i[t]=e},U(e,function(e,t){(o(e,t)?a:n)(e,t)}),r))},function(e){t.listType=e.listType,t.listAttributes=I({},e.listAttributes)})}),e}function ez(e,t){var n,r,o,i,s,u,l,d=S((r=e$(e,e.selection.getStart()),o=b(e.selection.getSelectedBlocks(),td),tO(e,r.toArray().concat(o))),ea.fromDom),f=S(b(e_(e),tp),ea.fromDom),p=!1;return(d.length||f.length)&&(n=e.selection.getBookmark(),C((i=ej(N(l=S(e_(e),ea.fromDom),a(eW),g),N(T(l),a(eW),g),function(e,t){return{start:e,end:t}}),s=!1,u={get:function(){return s},set:function(e){s=e}},S(d,function(e){return{sourceList:e,entries:tN(0,i,u,e)}})),function(n){C(b(n.entries,eX),function(e){return function(e){switch(t){case"Indent":e.depth++;break;case"Outdent":e.depth--;break;case"Flatten":e.depth=0}e.dirty=!0}(e),0});var r,o=L(function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var s=e[i],u=t(s);u!==n&&(r.push(o),o=[]),n=u,o.push(s)}return 0!==o.length&&r.push(o),r}(n.entries,eQ),function(t){return(D(t,0).exists(eQ)?function(e,t){var n,r=eq(t),o=e.contentDocument;return(n=O(r,function(e,t){return(t.depth>e.length?function(e,t,n){var r=function(e,t,n){for(var r,o,i=[],a=0;a<n;a++)i.push((r=t.listType,eb((o={list:ea.fromTag(r,e),item:ea.fromTag("li",e)}).list,o.item),o));return i}(e,n,n.depth-t.length);return function(e){for(var t=1;t<e.length;t++)eK(e[t-1],e[t])}(r),function(e,t){for(var n=0;n<e.length-1;n++)!function(e,t,n){if(!c(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),Error("CSS value must be a string: "+n);void 0!==e.style&&m(e.style.getPropertyValue)&&e.style.setProperty(t,n)}(e[n].item.dom,"list-style-type","none");x(e).each(function(e){ep(e.list,t.listAttributes),ep(e.item,t.itemAttributes),eO(e.item,t.content)})}(r,n),ej(x(t),D(r,0),eK),t.concat(r)}:function(e,t,n){var r=t.slice(0,n.depth);return x(r).each(function(t){var r,o,i,a=(r=n.itemAttributes,o=n.content,ep(i=ea.fromTag("li",e),r),eO(i,o),i);eb(t.list,a),t.item=a,ef(t.list)!==n.listType&&(t.list=eT(t.list,n.listType)),ep(t.list,n.listAttributes)}),r})(o,e,t)},[]),D(n,0)).map(function(e){return e.list}).toArray()}:function(e,t){return S(eq(t),function(t){var n,r,o=(n=t.content,r=document.createDocumentFragment(),C(n,function(e){r.appendChild(e.dom)}),ea.fromDom(r));return ea.fromDom(eB(e,o.dom))})})(e,t)});C(o,function(n){eH(e,"Indent"===t?"IndentList":"OutdentList",n.dom)}),r=n.sourceList,C(o,function(e){eC(r,e)}),eN(n.sourceList)}),C(f,"Indent"===t?eP:function(t){return ty(t)?eT(t,"dt"):tS(t)&&eh(t).each(function(n){return function(e,t,n){var r=tv.select('span[data-mce-type="bookmark"]',t),o=eB(e,n),i=tv.createRng();i.setStartAfter(n),i.setEndAfter(t);for(var a,s=i.extractContents(),u=s.firstChild;u;u=u.firstChild)if("LI"===u.nodeName&&e.dom.isEmpty(u)){tv.remove(u);break}e.dom.isEmpty(s)||tv.insertAfter(s,t),tv.insertAfter(o,t),eE(e.dom,n.parentNode)&&(a=n.parentNode,tc.each(r,function(e){a.parentNode.insertBefore(e,n.parentNode)}),tv.remove(a)),tv.remove(n),eE(e.dom,t)&&tv.remove(t)}(e,n.dom,t.dom)}),0}),e.selection.moveToBookmark(n),e.selection.setRng(eM(e.selection.getRng())),e.nodeChanged(),p=!0),p}function eY(e){return ez(e,"Indent")}function eZ(e){return ez(e,"Outdent")}function eG(e){return ez(e,"Flatten")}function eJ(e){function t(t){var r,o=e[t?"startContainer":"endContainer"],i=e[t?"startOffset":"endOffset"];1===o.nodeType&&(r=tT.create("span",{"data-mce-type":"bookmark"}),o.hasChildNodes()?(i=Math.min(i,o.childNodes.length-1),t?o.insertBefore(r,o.childNodes[i]):tT.insertAfter(r,o.childNodes[i])):o.appendChild(r),o=r,i=0),n[t?"startContainer":"endContainer"]=o,n[t?"startOffset":"endOffset"]=i}var n={};return t(!0),e.collapsed||t(),n}function e0(e){function t(t){var n,r=n=e[t?"startContainer":"endContainer"],o=e[t?"startOffset":"endOffset"];r&&(1===r.nodeType&&(o=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return -1}(r),r=r.parentNode,tT.remove(n),!r.hasChildNodes()&&tT.isBlock(r)&&r.appendChild(tT.create("br"))),e[t?"startContainer":"endContainer"]=r,e[t?"startOffset":"endOffset"]=o)}t(!0),t();var n=tT.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),eM(n)}function e1(e){switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}}function e9(e){return/\btox\-/.test(e.className)}function e2(e,t,n){function r(e){n(N(e.parents,tl,tg).filter(function(e){return e.nodeName===t&&!e9(e)}).isSome())}return r({parents:e.dom.getParents(e.selection.getNode())}),e.on("NodeChange",r),function(){return e.off("NodeChange",r)}}function e6(e,t){tc.each(t,function(t,n){e.setAttribute(n,t)})}function e3(e,t,n){var r=n["list-style-type"]||null;e.setStyle(t,"list-style-type",r),e6(t,n["list-attributes"]),tc.each(e.select("li",t),function(e){e6(e,n["list-item-attributes"])})}function e4(e,t,n,r){var o=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"];for(1===o.nodeType&&(o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o),!n&&th(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r&&!(eA(e,o)||/^(TD|TH)$/.test(o.parentNode.nodeName));)o=o.parentNode;return o}function e5(e,t,n){var r,o,i=e.selection.getRng(),a="LI",s=tb(e,e.selection.getStart(!0)),u=e.dom;"false"!==u.getContentEditable(e.selection.getNode())&&("DL"===(t=t.toUpperCase())&&(a="DT"),r=eJ(i),o=function(e,t,n){for(var r,o=[],i=e.dom,a=e4(e,t,!0,n),s=e4(e,t,!1,n),u=[],c=a;c&&(u.push(c),c!==s);c=c.nextSibling);return tc.each(u,function(t){if(eA(e,t))return o.push(t),void(r=null);if(i.isBlock(t)||th(t))return th(t)&&i.remove(t),void(r=null);var a=t.nextSibling;tL.isBookmarkNode(t)&&(tl(a)||eA(e,a)||!a&&t.parentNode===n)?r=null:(r||(r=i.create("p"),t.parentNode.insertBefore(r,t),o.push(r)),r.appendChild(t))}),o}(e,i,s),tc.each(o,function(r){var o,i,s,c=r.previousSibling;tm(r.parentNode)||(c&&tl(c)&&c.nodeName===t&&u.getStyle(c,"list-style-type")===(s=null===(s=n?n["list-style-type"]:"")?"":s)?(o=c,r=u.rename(r,a),c.appendChild(r)):(o=u.create(t),r.parentNode.insertBefore(o,r),o.appendChild(r),r=u.rename(r,a)),i=r,tc.each(["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],function(e){var t;return u.setStyle(i,((t={})[e]="",t))}),e3(u,o,n),tD(e.dom,o))}),e.selection.setRng(e0(r)))}function e7(e,t,n){return t&&n&&tl(t)&&t.nodeName===n.nodeName&&e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)&&t.className===n.className}function e8(e,t,n){var r,o,i,a,s,u,c,d=eU(e),f=(i=eU(e),a=e.selection.getSelectedBlocks(),i&&1===a.length&&a[0]===i?b(i.querySelectorAll("ol,ul,dl"),tl):b(a,function(e){return tl(e)&&i!==e})),m=l(n)?n:{};0<f.length?(c=tl(d))&&d.nodeName===t&&!tx(m)?eG(e):(e5(e,t,m),s=eJ(e.selection.getRng()),u=c?function(e,t){for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||((n=n||Array.prototype.slice.call(t,0,r))[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}([d],f,!0):f,tc.each(u,function(n){var r;n.nodeName!==t?(r=e.dom.rename(n,t),e3(e.dom,r,m),eH(e,e1(t),r)):(e3(e.dom,n,m),eH(e,e1(t),n))}),e.selection.setRng(e0(s))):d!==e.getBody()&&(d?d.nodeName!==t||tx(m)||e9(d)?(r=eJ(e.selection.getRng()),e3(e.dom,d,m),o=e.dom.rename(d,t),tD(e.dom,o),e.selection.setRng(e0(r)),e5(e,t,m),eH(e,e1(t),o)):eG(e):(e5(e,t,m),eH(e,e1(t),d)))}function te(e,t,n,r){var o=t.startContainer,i=t.startOffset;if(ek(o)&&(n?i<o.data.length:0<i))return o;var a=e.schema.getNonEmptyElements();1===o.nodeType&&(o=eu.getNode(o,i));var s,u,c=new ec(o,r);for(n&&(s=e.dom,th(u=o)&&s.isBlock(u.nextSibling)&&!th(u.previousSibling)&&c.next());o=c[n?"next":"prev2"]();)if("LI"===o.nodeName&&!o.hasChildNodes()||a[o.nodeName]||ek(o)&&0<o.data.length)return o}function tt(e,t){var n=t.childNodes;return 1===n.length&&!tl(n[0])&&e.isBlock(n[0])}function tn(e,t,n){var r,o,i,a,s,u,c,l,d,f,m=t.parentNode;eI(e,t)&&eI(e,n)&&(tl(n.lastChild)&&(l=n.lastChild),m===n.lastChild&&th(m.previousSibling)&&e.remove(m.previousSibling),(d=n.lastChild)&&th(d)&&t.hasChildNodes()&&e.remove(d),eE(e,n,!0)&&e.$(n).empty(),function(e,t,n){var r,o=tt(e,n)?n.firstChild:n;if(tt(e,t)&&e.remove(t.firstChild,!0),!eE(e,t,!0))for(;r=t.firstChild;)o.appendChild(r)}(e,t,n),l&&n.appendChild(l),r=ea.fromDom(n),o=ea.fromDom(t),f=(ei().browser.isIE()?(i=r.dom,a=o.dom,s=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(i.compareDocumentPosition(a)&s)):(u=r.dom)!==(c=o.dom)&&u.contains(c))?e.getParents(t,tl,n):[],e.remove(t),C(f,function(t){eE(e,t)&&t!==e.getRoot()&&e.remove(t)}))}function tr(e,t){var n,r;return e.selection.isCollapsed()?function(e,t){var n=e.dom,r=e.selection,o=tb(e,r.getStart()),i=n.getParent(r.getStart(),"LI",o);if(i){var a=i.parentNode;if(a===e.getBody()&&eE(n,a))return 1;var s=eM(r.getRng()),u=n.getParent(te(e,s,t,o),"LI",o);if(u&&u!==i)return e.undoManager.transact(function(){var n,r;t?(r=e.dom).isEmpty(i)?(e.dom.$(i).empty(),tn(e.dom,u,i),e.selection.setCursorLocation(i,0)):(n=eJ(s),tn(r,u,i),e.selection.setRng(e0(n))):i.parentNode.firstChild===i?eZ(e):function(e,t,n){var r=eJ(s);tn(e.dom,t,n);var o=e0(r);e.selection.setRng(o)}(e,i,u)}),1;if(!u&&!t&&0===s.startOffset&&0===s.endOffset)return e.undoManager.transact(function(){eG(e)}),1}}(e,t)||function(e,t){var n=e.dom,r=e.selection.getStart(),o=tb(e,r),i=n.getParent(r,n.isBlock,o);if(i&&n.isEmpty(i)){var a=eM(e.selection.getRng()),s=n.getParent(te(e,a,t,o),"LI",o);if(s)return e.undoManager.transact(function(){var r=n.getParent(i.parentNode,n.isBlock,o);n.remove(i),r&&n.isEmpty(r)&&n.remove(r),tD(n,s.parentNode),e.selection.select(s,!0),e.selection.collapse(t)}),1}}(e,t):(n=e.selection.getStart(),r=tb(e,n),(e.dom.getParent(n,"LI,DT,DD",r)||0<e_(e).length)&&(e.undoManager.transact(function(){var t,n,r;e.execCommand("Delete"),t=e.dom,n=e.getBody(),r=tc.grep(t.select("ol,ul",n)),tc.each(r,function(e){var n,r;"LI"===(r=e.parentNode).nodeName&&r.firstChild===e&&((n=r.previousSibling)&&"LI"===n.nodeName?(n.appendChild(e),eE(t,r)&&tk.remove(r)):tk.setStyle(r,"listStyleType","none")),tl(r)&&(n=r.previousSibling)&&"LI"===n.nodeName&&n.appendChild(e)})}),1))}function to(e){return O(S(T(q(e).split("")),function(e,t){return Math.pow(26,t)*(e.toUpperCase().charCodeAt(0)-65+1)}),function(e,t){return e+t},0)}function ti(e,t){return function(){var n=eU(e);return n&&n.nodeName===t}}function ta(e){e.addCommand("mceListProps",function(){var t,n,r;tf(r=eU(e))&&e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:(n=parseInt((t={start:e.dom.getAttrib(r,"start","1"),listStyleType:A.some(e.dom.getStyle(r,"list-style-type"))}).start,10),eF(t.listStyleType,"upper-alpha")?tA(n):eF(t.listStyleType,"lower-alpha")?tA(n).toLowerCase():t.start)},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(t){(function(e){switch(/^[0-9]+$/.test(e)?2:/^[A-Z]+$/.test(e)?0:/^[a-z]+$/.test(e)?1:0<e.length?4:3){case 2:return A.some({listStyleType:A.none(),start:e});case 0:return A.some({listStyleType:A.some("upper-alpha"),start:to(e).toString()});case 1:return A.some({listStyleType:A.some("lower-alpha"),start:to(e).toString()});case 3:return A.some({listStyleType:A.none(),start:""});case 4:return A.none()}})(t.getData().start).each(function(t){e.execCommand("mceListUpdate",!1,{attrs:{start:"1"===t.start?"":t.start},styles:{"list-style-type":t.listStyleType.getOr("")}})}),t.close()}})})}function ts(e){return 1===e.dom.nodeType}"undefined"!=typeof window||Function("return this;")();var tu=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),tc=tinymce.util.Tools.resolve("tinymce.util.Tools"),tl=ex(/^(OL|UL|DL)$/),td=ex(/^(OL|UL)$/),tf=eD("ol"),tm=ex(/^(LI|DT|DD)$/),tp=ex(/^(DT|DD)$/),tg=ex(/^(TH|TD)$/),th=eD("br"),tv=tu.DOM,ty=em("dd"),tS=em("dt"),tC=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),tb=function(e,t){var n=e.dom.getParents(t,"TD,TH");return 0<n.length?n[0]:e.getBody()},tO=function(e,t){var n=S(t,function(t){return e$(e,t).getOr(t)});return tC.unique(n)},tN=function(e,t,n,r){return L(ev(r),function(r){return(eV(r)?tN:function(e,t,n,r){return ey(r,0).filter(eV).fold(function(){t.each(function(e){e.start.dom===r.dom&&n.set(!0)});var o,i=(o=n.get(),eh(r).filter(ts).map(function(t){var n;return{depth:e,dirty:!1,isSelected:o,content:(n=ev(r),S(eS(r).exists(eV)?n.slice(0,-1):n,eL)),itemAttributes:eg(r),listAttributes:eg(t),listType:ef(t)}}));t.each(function(e){e.end.dom===r.dom&&n.set(!1)});var a=eS(r).filter(eV).map(function(r){return tN(e,t,n,r)}).getOr([]);return i.toArray().concat(a)},function(r){return tN(e,t,n,r)})})(e+1,t,n,r)})},tL=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),tT=tu.DOM,tD=function(e,t){var n,r=t.nextSibling;if(e7(e,t,r)){for(;n=r.firstChild;)t.appendChild(n);e.remove(r)}if(e7(e,t,r=t.previousSibling)){for(;n=r.lastChild;)t.insertBefore(n,t.firstChild);e.remove(r)}},tx=function(e){return"list-style-type"in e},tk=tu.DOM,tA=function(e){if(--e<0)return"";var t=e%26;return tA(Math.floor(e/26))+String.fromCharCode(65+t)};u.add("lists",function(e){var t,n;return!1===e.hasPlugin("rtc",!0)?(e.getParam("lists_indent_on_tab",!0)&&e.on("keydown",function(t){t.keyCode!==el.TAB||el.metaKeyPressed(t)||e.undoManager.transact(function(){(t.shiftKey?eZ:eY)(e)&&t.preventDefault()})}),e.on("keydown",function(t){t.keyCode===el.BACKSPACE?tr(e,!1)&&t.preventDefault():t.keyCode===el.DELETE&&tr(e,!0)&&t.preventDefault()}),e.on("BeforeExecCommand",function(t){var n=t.command.toLowerCase();"indent"===n?eY(e):"outdent"===n&&eZ(e)}),e.addCommand("InsertUnorderedList",function(t,n){e8(e,"UL",n)}),e.addCommand("InsertOrderedList",function(t,n){e8(e,"OL",n)}),e.addCommand("InsertDefinitionList",function(t,n){e8(e,"DL",n)}),e.addCommand("RemoveList",function(){eG(e)}),ta(e),e.addCommand("mceListUpdate",function(t,n){var r;l(n)&&(r=eU(e),e.undoManager.transact(function(){l(n.styles)&&e.dom.setStyles(r,n.styles),l(n.attrs)&&U(n.attrs,function(t,n){return e.dom.setAttrib(r,n,t)})}))}),e.addQueryStateHandler("InsertUnorderedList",ti(e,"UL")),e.addQueryStateHandler("InsertOrderedList",ti(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",ti(e,"DL"))):ta(e),e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:r("InsertOrderedList"),onSetup:function(t){return e2(e,"OL",t.setActive)}}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:r("InsertUnorderedList"),onSetup:function(t){return e2(e,"UL",t.setActive)}})),n={text:"List properties...",icon:"ordered-list",onAction:function(){return t.execCommand("mceListProps")},onSetup:function(e){return e2(t,"OL",function(t){return e.setDisabled(!t)})}},(t=e).ui.registry.addMenuItem("listprops",n),t.ui.registry.addContextMenu("lists",{update:function(e){return tf(eU(t,e))?["listprops"]:[]}}),{backspaceDelete:function(t){tr(e,t)}};function r(t){return function(){return e.execCommand(t)}}})}();