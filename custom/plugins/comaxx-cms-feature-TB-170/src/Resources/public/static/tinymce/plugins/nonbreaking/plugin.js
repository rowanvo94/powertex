!function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(n){var e=n.getParam("nonbreaking_force_tab",0);return"boolean"==typeof e?!0===e?3:0:e},a=function(n,e){for(var a="",o=0;o<e;o++)a+=n;return a},o=function(n,e){var o=n.getParam("nonbreaking_wrap",!0,"boolean")||n.plugins.visualchars?'<span class="'+(n.plugins.visualchars&&n.plugins.visualchars.isEnabled()?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap")+'" contenteditable="false">'+a("&nbsp;",e)+"</span>":a("&nbsp;",e);n.undoManager.transact(function(){return n.insertContent(o)})},t=function(n){n.addCommand("mceNonBreaking",function(){o(n,1)})},i=tinymce.util.Tools.resolve("tinymce.util.VK"),r=function(n){var a=e(n);a>0&&n.on("keydown",function(e){e.keyCode!==i.TAB||e.isDefaultPrevented()||e.shiftKey||(e.preventDefault(),e.stopImmediatePropagation(),o(n,a))})},c=function(n){var e=function(){return n.execCommand("mceNonBreaking")};n.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:e}),n.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:e})};n.add("nonbreaking",function(n){t(n),c(n),r(n)})}();