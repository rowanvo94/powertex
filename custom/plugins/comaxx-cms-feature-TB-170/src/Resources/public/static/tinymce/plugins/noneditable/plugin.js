!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),e=function(t){return t.getParam("noneditable_noneditable_class","mceNonEditable")},r=function(t){var n=t.getParam("noneditable_regexp",[]);return n&&n.constructor===RegExp?[n]:n},a=function(t){return function(n){return -1!==(" "+n.attr("class")+" ").indexOf(t)}},i=function(t,n,e){return function(r){var a=arguments,i=a[a.length-2],o=i>0?n.charAt(i-1):"";if('"'===o)return r;if(">"===o){var c=n.lastIndexOf("<",i);if(-1!==c&&-1!==n.substring(c,i).indexOf('contenteditable="false"'))return r}return'<span class="'+e+'" data-mce-content="'+t.dom.encode(a[0])+'">'+t.dom.encode("string"==typeof a[1]?a[1]:a[0])+"</span>"}},o=function(t,n,r){var a=n.length,o=r.content;if("raw"!==r.format){for(;a--;)o=o.replace(n[a],i(t,o,e(t)));r.content=o}},c=function(t){var i="contenteditable",c=" "+n.trim(t.getParam("noneditable_editable_class","mceEditable"))+" ",l=" "+n.trim(e(t))+" ",u=a(c),f=a(l),s=r(t);t.on("PreInit",function(){s.length>0&&t.on("BeforeSetContent",function(n){o(t,s,n)}),t.parser.addAttributeFilter("class",function(t){for(var n,e=t.length;e--;)u(n=t[e])?n.attr(i,"true"):f(n)&&n.attr(i,"false")}),t.serializer.addAttributeFilter(i,function(t){for(var n,e=t.length;e--;)(u(n=t[e])||f(n))&&(s.length>0&&n.attr("data-mce-content")?(n.name="#text",n.type=3,n.raw=!0,n.value=n.attr("data-mce-content")):n.attr(i,null))})})};t.add("noneditable",function(t){c(t)})}();