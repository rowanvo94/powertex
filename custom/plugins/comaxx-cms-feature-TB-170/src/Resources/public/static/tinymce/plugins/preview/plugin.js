!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),i=function(e){var t=e.getParam("body_class","","string");return -1===t.indexOf("=")?t:e.getParam("body_class","","hash")[e.id]||""},o=function(e){var t=e.getParam("body_id","","hash");return t[e.id]||t},r=function(e){var t=e.getParam("body_id","tinymce","string");return -1===t.indexOf("=")?t:o(e)},a=function(e){var o="",a=e.dom.encode,c=e.getParam("content_style","","string");o+='<base href="'+a(e.documentBaseURI.getURI())+'">';var s=e.getParam("content_css_cors",!1,"boolean")?' crossorigin="anonymous"':"";n.each(e.contentCSS,function(t){o+='<link type="text/css" rel="stylesheet" href="'+a(e.documentBaseURI.toAbsolute(t))+'"'+s+">"}),c&&(o+='<style type="text/css">'+c+"</style>");var d=r(e),l=i(e),m=t.mac?"e.metaKey":"e.ctrlKey && !e.altKey",u=e.getBody().dir,y=u?' dir="'+a(u)+'"':"";return"<!DOCTYPE html><html><head>"+o+'</head><body id="'+a(d)+'" class="mce-content-body '+a(l)+'"'+y+">"+e.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+m+")) {e.preventDefault();}}}, false);<\/script> </body></html>"},c=function(e){var t=a(e);e.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:t}}).focus("close")},s=function(e){e.addCommand("mcePreview",function(){c(e)})},d=function(e){var t=function(){return e.execCommand("mcePreview")};e.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:t}),e.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:t})};e.add("preview",function(e){s(e),d(e)})}();