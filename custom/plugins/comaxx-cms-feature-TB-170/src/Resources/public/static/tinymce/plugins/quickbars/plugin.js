!function(){"use strict";var t,e,n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=0,o=function(t){var e=new Date().getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++r+String(e)},i=function(t,e){var n='<table data-mce-id="mce" style="width: 100%">';n+="<tbody>";for(var r=0;r<e;r++){n+="<tr>";for(var o=0;o<t;o++)n+="<td><br></td>";n+="</tr>"}return n+"</tbody></table>"},u=function(t,e,n){t.undoManager.transact(function(){t.insertContent(i(e,n));var r=t.dom.select("*[data-mce-id]")[0];r.removeAttribute("data-mce-id");var o=t.dom.select("td,th",r);t.selection.setCursorLocation(o[0],0)})},c=function(t,e,n){t.plugins.table?t.plugins.table.insertTable(e,n):u(t,e,n)},a=function(t,e,n){var r=t.editorUpload.blobCache,i=r.create(o("mceu"),n,e);r.add(i),t.insertContent(t.dom.createHTML("img",{src:i.blobUri()}))},l=tinymce.util.Tools.resolve("tinymce.util.Promise"),s=tinymce.util.Tools.resolve("tinymce.Env"),f=tinymce.util.Tools.resolve("tinymce.util.Delay"),d=function(t){t.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:function(){new l(function(e){var n=document.createElement("input");n.type="file",n.accept="image/*",n.style.position="fixed",n.style.left="0",n.style.top="0",n.style.opacity="0.001",document.body.appendChild(n),n.addEventListener("change",function(t){e(Array.prototype.slice.call(t.target.files))});var r=function(o){var i=function(){e([]),n.parentNode.removeChild(n)};s.os.isAndroid()&&"remove"!==o.type?f.setEditorTimeout(t,i,0):i(),t.off("focusin remove",r)};t.on("focusin remove",r),n.click()}).then(function(e){if(e.length>0){var n=e[0];new l(function(t){var e=new FileReader;e.onloadend=function(){t(e.result.split(",")[1])},e.readAsDataURL(n)}).then(function(e){a(t,e,n)})}})}}),t.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:function(){c(t,2,2)}})},m=function(t){var e=typeof t;return null===t?"null":"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},g=function(t){return function(e){return m(e)===t}},b=function(t){return function(e){return typeof e===t}},p=g("string"),y=g("object"),v=g("array"),h=b("boolean"),k=(t=void 0,function(e){return t===e}),w=b("function"),T=function(t){return function(){return t}},S=function(t){return t},E=T(!1),O=T(!0),q=function(){return C},C={fold:function(t,e){return t()},isSome:E,isNone:O,getOr:S,getOrThunk:e=function(t){return t()},getOrDie:function(t){throw Error(t||"error: getOrDie called on none.")},getOrNull:T(null),getOrUndefined:T(void 0),or:S,orThunk:e,map:q,each:function(){},bind:q,exists:E,forall:O,filter:function(){return q()},toArray:function(){return[]},toString:T("none()")},M=function(t){var e=T(t),n=function(){return o},r=function(e){return e(t)},o={fold:function(e,n){return n(t)},isSome:O,isNone:E,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return M(e(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?o:C},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return o},N={some:M,none:q};function A(t,e,n,r,o){return t(n,r)?N.some(n):w(o)&&o(n)?N.none():e(n,r,o)}var D={fromDom:function(t){if(null==t)throw Error("Node cannot be null or undefined");return{dom:t}}},x=function(t,e){var n=t.dom;if(1!==n.nodeType)return!1;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw Error("Browser lacks native selectors")};"undefined"!=typeof window?window:Function("return this;")();var _=function(t,e,n){for(var r=t.dom,o=w(n)?n:E;r.parentNode;){r=r.parentNode;var i=D.fromDom(r);if(e(i))return N.some(i);if(o(i))break}return N.none()},P=function(t,e,n){return _(t,function(t){return x(t,e)},n)},U=function(t,e){if(e(t))return!0;throw Error("Default value doesn't match requested type.")},B=function(t,e){if(v(t)||y(t))throw Error("expected a string but found: "+t);return k(t)?e:h(t)?!1===t?"":e:t},L=function(t,e,n){return U(n,p),B(t.getParam(e,n),n)},I=function(t){var e=L(t,"quickbars_insert_toolbar","quickimage quicktable");e.trim().length>0&&t.ui.registry.addContextToolbar("quickblock",{predicate:function(e){var n=D.fromDom(e),r=t.schema.getTextBlockElements(),o=function(e){return e.dom===t.getBody()};return A(function(t,e){return x(t,e)},P,n,"table",o).fold(function(){return A(function(t,e){return e(t)},_,n,function(e){return e.dom.nodeName.toLowerCase()in r&&t.dom.isEmpty(e.dom)},o).isSome()},E)},items:e,position:"line",scope:"editor"})},j=function(t){var e=function(t){return"IMG"===t.nodeName||"FIGURE"===t.nodeName&&/image/i.test(t.className)},n=L(t,"quickbars_image_toolbar","alignleft aligncenter alignright");n.trim().length>0&&t.ui.registry.addContextToolbar("imageselection",{predicate:e,items:n,position:"node"});var r=L(t,"quickbars_selection_toolbar","bold italic | quicklink h2 h3 blockquote");r.trim().length>0&&t.ui.registry.addContextToolbar("textselection",{predicate:function(n){return!e(n)&&!t.selection.isCollapsed()&&"false"!==t.dom.getContentEditableParent(n)},items:r,position:"selection",scope:"editor"})};n.add("quickbars",function(t){d(t),I(t),j(t)})}();