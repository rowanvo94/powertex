!function(){"use strict";function t(t){return function(e){var n;return n=typeof e,(null===e?"null":"object"==n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n)===t}}function e(t){return function(e){return typeof e===t}}function n(t){return function(){return t}}function r(t){return t}function o(){return v}var i,u=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=0,a=tinymce.util.Tools.resolve("tinymce.util.Promise"),l=tinymce.util.Tools.resolve("tinymce.Env"),s=tinymce.util.Tools.resolve("tinymce.util.Delay"),d=t("string"),f=t("object"),m=t("array"),g=e("boolean"),b=e("function"),p=n(!1),y=n((i=void 0,!0)),v={fold:function(t,e){return t()},isSome:p,isNone:y,getOr:r,getOrThunk:h,getOrDie:function(t){throw Error(t||"error: getOrDie called on none.")},getOrNull:n(null),getOrUndefined:n(void 0),or:r,orThunk:h,map:o,each:function(){},bind:o,exists:p,forall:y,filter:function(){return v},toArray:function(){return[]},toString:n("none()")};function h(t){return t()}var k=function(t){function e(){return i}function r(e){return e(t)}var o=n(t),i={fold:function(e,n){return n(t)},isSome:y,isNone:p,getOr:o,getOrThunk:o,getOrDie:o,getOrNull:o,getOrUndefined:o,or:e,orThunk:e,map:function(e){return k(e(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?i:v},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return i},T={some:k,none:o};function w(t,e,n,r,o){return t(n,r)?T.some(n):b(o)&&o(n)?T.none():e(n,r,o)}function S(t,e){var n=t.dom;if(1!==n.nodeType)return!1;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw Error("Browser lacks native selectors")}var E={fromDom:function(t){if(null==t)throw Error("Node cannot be null or undefined");return{dom:t}}};function O(t,e,n){for(var r=t.dom,o=b(n)?n:p;r.parentNode;){var r=r.parentNode,i=E.fromDom(r);if(e(i))return T.some(i);if(o(i))break}return T.none()}function q(t,e,n){return O(t,function(t){return S(t,e)},n)}"undefined"!=typeof window||Function("return this;")();var C=function(t,e,n){return function(){if(!d(n))throw Error("Default value doesn't match requested type.")}(),function(t,e){if(m(t)||f(t))throw Error("expected a string but found: "+t);return i===t?e:g(t)?!1===t?"":e:t}(t.getParam(e,n),n)};u.add("quickbars",function(t){var e;t.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:function(){new a(function(e){var n=document.createElement("input");n.type="file",n.accept="image/*",n.style.position="fixed",n.style.left="0",n.style.top="0",n.style.opacity="0.001",document.body.appendChild(n),n.addEventListener("change",function(t){e(Array.prototype.slice.call(t.target.files))});var r=function(o){function i(){e([]),n.parentNode.removeChild(n)}l.os.isAndroid()&&"remove"!==o.type?s.setEditorTimeout(t,i,0):i(),t.off("focusin remove",r)};t.on("focusin remove",r),n.click()}).then(function(e){var n;0<e.length&&(n=e[0],new a(function(t){var e=new FileReader;e.onloadend=function(){t(e.result.split(",")[1])},e.readAsDataURL(n)}).then(function(e){var r,o,i;i=(o=t.editorUpload.blobCache).create((r=(new Date).getTime(),"mceu_"+Math.floor(1e9*Math.random())+ ++c+String(r)),n,e),o.add(i),t.insertContent(t.dom.createHTML("img",{src:i.blobUri()}))}))})}}),t.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:function(){t.plugins.table?t.plugins.table.insertTable(2,2):t.undoManager.transact(function(){t.insertContent(function(){var t='<table data-mce-id="mce" style="width: 100%">';t+="<tbody>";for(var e=0;e<2;e++){t+="<tr>";for(var n=0;n<2;n++)t+="<td><br></td>";t+="</tr>"}return(t+="</tbody>")+"</table>"}());var e=t.dom.select("*[data-mce-id]")[0];e.removeAttribute("data-mce-id");var n=t.dom.select("td,th",e);t.selection.setCursorLocation(n[0],0)})}}),0<(e=C(t,"quickbars_insert_toolbar","quickimage quicktable")).trim().length&&t.ui.registry.addContextToolbar("quickblock",{predicate:function(e){function n(e){return e.dom===t.getBody()}var r=E.fromDom(e),o=t.schema.getTextBlockElements();return w(S,q,r,"table",n).fold(function(){return w(function(t,e){return e(t)},O,r,function(e){return e.dom.nodeName.toLowerCase()in o&&t.dom.isEmpty(e.dom)},n).isSome()},p)},items:e,position:"line",scope:"editor"}),function(t){function e(t){return"IMG"===t.nodeName||"FIGURE"===t.nodeName&&/image/i.test(t.className)}var n=C(t,"quickbars_image_toolbar","alignleft aligncenter alignright");0<n.trim().length&&t.ui.registry.addContextToolbar("imageselection",{predicate:e,items:n,position:"node"});var r=C(t,"quickbars_selection_toolbar","bold italic | quicklink h2 h3 blockquote");0<r.trim().length&&t.ui.registry.addContextToolbar("textselection",{predicate:function(n){return!e(n)&&!t.selection.isCollapsed()&&"false"!==t.dom.getContentEditableParent(n)},items:r,position:"selection",scope:"editor"})}(t)})}();