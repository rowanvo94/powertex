!function(){"use strict";function e(e){var t=e;return{get:function(){return t},set:function(e){t=e}}}function t(e){return function(t){var n;return n=typeof t,(null===t?"null":"object"==n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n)===e}}function n(e){return function(t){return typeof t===e}}function r(){}function o(e){return function(){return e}}function i(e){return e}function a(){return p}var c=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=t("string"),s=t("array"),f=n("boolean"),d=n("number"),m=o(!1),g=o(!0),h=o("[!-#%-*,-\\/:;?@\\[-\\]_{}\xa1\xab\xb7\xbb\xbf;\xb7՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"),p={fold:function(e,t){return e()},isSome:m,isNone:g,getOr:i,getOrThunk:v,getOrDie:function(e){throw Error(e||"error: getOrDie called on none.")},getOrNull:o(null),getOrUndefined:o(void 0),or:i,orThunk:v,map:a,each:r,bind:a,exists:m,forall:g,filter:function(){return p},toArray:function(){return[]},toString:o("none()")};function v(e){return e()}function y(e,t){for(var n=e.length,r=Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}function x(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function b(e,t){for(var n=e.length-1;0<=n;n--)t(e[n],n)}function w(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!s(e[n]))throw Error("Arr.flatten item "+n+" was not an array, input: "+e);T.apply(t,e[n])}return t}(y(e,t))}var O=function(e){function t(){return i}function n(t){return t(e)}var r=o(e),i={fold:function(t,n){return n(e)},isSome:g,isNone:m,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:t,orThunk:t,map:function(t){return O(t(e))},each:function(t){t(e)},bind:n,exists:n,forall:n,filter:function(t){return t(e)?i:p},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return i},C={some:O,none:a,from:function(e){return null==e?p:O(e)}},k=tinymce.util.Tools.resolve("tinymce.Env"),E=tinymce.util.Tools.resolve("tinymce.util.Tools"),S=Array.prototype.slice,T=Array.prototype.push,N=Object.hasOwnProperty;function A(e,t){return{element:e,offset:t}}function D(e,t){C.from(e.dom.parentNode).map(eo.fromDom).each(function(n){n.dom.insertBefore(t.dom,e.dom)}),t.dom.appendChild(e.dom)}function B(e){return ei.get(e)}function F(e,t){var n,r;return e.isBlock(t)||(n=e.schema.getShortEndedElements(),r=t.nodeName,N.call(n,r))}function I(e,t){return"false"===e.getContentEditable(t)}function M(e,t){var n,r;return!e.isBlock(t)&&(n=e.schema.getWhiteSpaceElements(),r=t.nodeName,N.call(n,r))}function R(){return{sOffset:0,fOffset:0,elements:[]}}function P(e,t){var n,r;return 0<(r=y((n=eo.fromDom(e)).dom.childNodes,eo.fromDom)).length&&t<r.length?A(r[t],0):A(n,t)}function W(e,t,n,r,o,i){for(var a=(i=void 0===i||i)?t(!1):n;a;){var c=I(e,a);if(c||M(e,a)){if(c?r.cef(a):r.boundary(a))break;a=t(!0)}else{if(F(e,a)){if(r.boundary(a))break}else 3===a.nodeType&&r.text(a);if(a===o)break;a=t(!1)}}}function j(e,t,n,r,o){var i;F(e,n)||I(e,n)||M(e,n)||"true"===e.getContentEditable(n)&&"false"===e.getContentEditableParent(n.parentNode)||(i=new ea(n,e.getParent(r,e.isBlock)),W(e,(o?i.next:i.prev).bind(i),n,{boundary:g,cef:g,text:function(e){o?t.fOffset+=e.length:t.sOffset+=e.length,t.elements.push(eo.fromDom(e))}}))}function V(e,t,n,r,o,i){void 0===i&&(i=!0);var a=new ea(n,t),c=[],u=R();function l(){return 0<u.elements.length&&(c.push(u),u=R()),!1}return j(e,u,n,t,!1),W(e,a.next.bind(a),n,{boundary:l,cef:function(e){return l(),o&&c.push.apply(c,o.cef(e)),!1},text:function(e){u.elements.push(eo.fromDom(e)),o&&o.text(e,u)}},r,i),r&&j(e,u,r,t,!0),l(),c}function U(e,t){var n,r,o,i;return t.collapsed?[]:(r=(n=P(t.startContainer,t.startOffset)).element.dom,i=(o=P(t.endContainer,t.endOffset)).element.dom,V(e,t.commonAncestorContainer,r,i,{text:function(e,t){e===i?t.fOffset+=e.length-o.offset:e===r&&(t.sOffset+=n.offset)},cef:function(t){var n,r,o,i,a,c=w((r=eo.fromDom(t),o="*[contenteditable=true]",1!==(i=a=void 0===r?document:r.dom).nodeType&&9!==i.nodeType&&11!==i.nodeType||0===i.childElementCount?[]:y(a.querySelectorAll(o),eo.fromDom)),function(t){var n=t.dom;return V(e,n,n)});return(n=S.call(c,0)).sort(function(e,t){var n,r,o;return n=e.elements[0].dom,r=t.elements[0].dom,o=Node.DOCUMENT_POSITION_PRECEDING,0!=(n.compareDocumentPosition(r)&o)?1:-1}),n}},!1))}function $(e,t){var n=e.createRng();return n.selectNode(t),U(e,n)}function _(e,t){return w(t,function(t){var n,r,o=t.elements,i=y(o,B).join(""),a=function(e,t,n,r){void 0===r&&(r=e.length);var o=t.regex;o.lastIndex=n=void 0===n?0:n;for(var i,a=[];i=o.exec(e);){var c=i[t.matchIndex],u=i.index+i[0].indexOf(c),l=u+c.length;if(r<l)break;a.push({start:u,finish:l}),o.lastIndex=l}return a}(i,e,t.sOffset,i.length-t.fOffset);return function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var c=e[i],u=t(c);u!==n&&(r.push(o),o=[]),n=u,o.push(c)}return 0!==o.length&&r.push(o),r}((n=function(e,t){var n=B(t),r=e.last,o=r+n.length,i=w(a,function(e,n){return e.start<o&&e.finish>r?[{element:t,start:Math.max(r,e.start)-r,finish:Math.min(o,e.finish)-r,matchId:n}]:[]});return{results:e.results.concat(i),last:o}},r={results:[],last:0},x(o,function(e,t){r=n(r,e)}),r.results),function(e){return e.matchId})})}function z(e,t){b(e,function(e,n){b(e,function(e){var r=eo.fromDom(t.cloneNode(!1));o="data-mce-index",function(e,t,n){if(!(l(n)||f(n)||d(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),Error("Attribute value was not simple");e.setAttribute(t,n+"")}(r.dom,o,n);var o,i,a=e.element.dom;a.length===e.finish&&0===e.start?D(e.element,r):(a.length!==e.finish&&a.splitText(e.finish),i=a.splitText(e.start),D(eo.fromDom(i),r))})})}function q(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t}function G(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)}function K(e,t){var n=[],r=E.toArray(e.getBody().getElementsByTagName("span"));if(r.length)for(var o=0;o<r.length;o++){var i=q(r[o]);null!==i&&i.length&&i===t.toString()&&n.push(r[o])}return n}function H(e,t,n){var r=t.get(),o=r.index,i=e.dom;(n=!1!==n)?o+1===r.count?o=0:o++:o-1==-1?o=r.count-1:o--,i.removeClass(K(e,r.index),"mce-match-marker-selected");var a=K(e,o);return a.length?(i.addClass(K(e,o),"mce-match-marker-selected"),e.selection.scrollIntoView(a[0]),o):-1}function J(e,t){var n=t.parentNode;e.remove(t),e.isEmpty(n)&&e.remove(n)}function L(e,t,n,r,o,i){var a,c,u,l,s,f,d,m,g,p,v,y=e.selection,x=(p="("+n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")",o?"(?:^|\\s|"+h()+")"+p+"(?=$|\\s|"+h()+")":p),b=y.isForward(),O=(a={regex:new RegExp(x,r?"g":"gi"),matchIndex:1},(c=e.dom.create("span",{"data-mce-bogus":1})).className="mce-match-marker",g=e.getBody(),ec(e,t,!1),i?(l=e.dom,f=(s=e.selection).getBookmark(),z(m=_(a,0<(d=l.select("td[data-mce-selected],th[data-mce-selected]")).length?w(d,function(e){return $(l,e)}):U(l,s.getRng())),c),s.moveToBookmark(f),m.length):(z(u=_(a,$(e.dom,g)),c),u.length));return k.browser.isSafari()&&y.setRng(y.getRng(),b),O&&(v=H(e,t,!0),t.set({index:v,count:O,text:n,matchCase:r,wholeWord:o,inSelection:i})),O}function Q(e,t){var n=H(e,t,!0);t.set(u(u({},t.get()),{index:n}))}function X(e,t){var n=H(e,t,!1);t.set(u(u({},t.get()),{index:n}))}function Y(e){var t=q(e);return null!==t&&0<t.length}function Z(e,t,n,r,o){var i,a=t.get(),c=a.index,l=c;r=!1!==r;for(var s=e.getBody(),f=E.grep(E.toArray(s.getElementsByTagName("span")),Y),d=0;d<f.length;d++){var m=i=parseInt(q(f[d]),10);if(o||m===a.index){for(n.length?(f[d].firstChild.nodeValue=n,G(f[d])):J(e.dom,f[d]);f[++d];){if((m=parseInt(q(f[d]),10))!==i){d--;break}J(e.dom,f[d])}r&&l--}else c<i&&f[d].setAttribute("data-mce-index",String(i-1))}return t.set(u(u({},a),{count:o?0:a.count-1,index:l})),(r?Q:X)(e,t),!o&&0<t.get().count}function ee(t,n){var o,i,a=(o=e(C.none()),u(u({},i={clear:function(){c(),o.set(C.none())},isSet:function(){return o.get().isSome()},get:function(){return o.get()},set:function(e){c(),o.set(C.some(e))}}),{on:function(e){return i.get().each(e)}}));function c(){return o.get().each(r)}function l(e){(1<n.get().count?e.enable:e.disable)("next"),(1<n.get().count?e.enable:e.disable)("prev")}function s(e,t){x(["replace","replaceall","prev","next"],t?e.disable:e.enable)}function f(e,t){k.browser.isSafari()&&k.deviceType.isTouch()&&("find"===t||"replace"===t||"replaceall"===t)&&e.focus(t)}function d(e){ec(t,n,!1),s(e,!0),l(e)}function m(e){var r,o=e.getData(),i=n.get();o.findtext.length?(i.text===o.findtext&&i.matchCase===o.matchcase&&i.wholeWord===o.wholewords?Q(t,n):((r=L(t,n,o.findtext,o.matchcase,o.wholewords,o.inselection))<=0&&t.windowManager.alert("Could not find the specified string.",function(){e.focus("findtext")}),s(e,0===r)),l(e)):d(e)}t.undoManager.add();var g=E.trim(t.selection.getContent({format:"text"})),h=n.get(),p={title:"Find and Replace",size:"normal",body:{type:"panel",items:[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",disabled:!0,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",disabled:!0,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}]},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",disabled:!0},{type:"custom",name:"replaceall",text:"Replace all",disabled:!0}],initialData:{findtext:g,replacetext:"",wholewords:h.wholeWord,matchcase:h.matchCase,inselection:h.inSelection},onChange:function(e,t){"findtext"===t.name&&0<n.get().count&&d(e)},onAction:function(e,r){var o,i,a=e.getData();switch(r.name){case"find":m(e);break;case"replace":(Z(t,n,a.replacetext)?l:d)(e);break;case"replaceall":Z(t,n,a.replacetext,!0,!0),d(e);break;case"prev":X(t,n),l(e);break;case"next":Q(t,n),l(e);break;case"matchcase":case"wholewords":case"inselection":o=e.getData(),i=n.get(),n.set(u(u({},i),{matchCase:o.matchcase,wholeWord:o.wholewords,inSelection:o.inselection})),d(e)}f(e,r.name)},onSubmit:function(e){m(e),f(e,"find")},onClose:function(){t.focus(),ec(t,n),t.undoManager.add()}};a.set(t.windowManager.open(p,{inline:"toolbar"}))}function et(e,t){return function(){ee(e,t)}}"undefined"!=typeof window||Function("return this;")();var en,er,eo={fromDom:function(e){if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}}},ei=(en=function(e){return 3===e.dom.nodeType},{get:function(e){if(!en(e))throw Error("Can only get text value of a text node");return er(e).getOr("")},getOption:er=function(e){return en(e)?C.from(e.dom.nodeValue):C.none()},set:function(e,t){if(!en(e))throw Error("Can only set raw text value of a text node");e.dom.nodeValue=t}}),ea=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ec=function(e,t,n){for(var r,o,i=t.get(),a=E.toArray(e.getBody().getElementsByTagName("span")),c=0;c<a.length;c++){var l=q(a[c]);null!==l&&l.length&&(l===i.index.toString()&&(r=r||a[c].firstChild,o=a[c].firstChild),G(a[c]))}if(t.set(u(u({},i),{index:-1,count:0,text:""})),r&&o){var s=e.dom.createRng();return s.setStart(r,0),s.setEnd(o,o.data.length),!1!==n&&e.selection.setRng(s),s}};c.add("searchreplace",function(t){var n=e({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return t.addCommand("SearchReplace",function(){ee(t,n)}),t.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:et(t,n),icon:"search"}),t.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:et(t,n),icon:"search"}),t.shortcuts.add("Meta+F","",et(t,n)),{done:function(e){return ec(t,n,e)},find:function(e,r,o,i){return L(t,n,e,r,o,i=void 0!==i&&i)},next:function(){return Q(t,n)},prev:function(){return X(t,n)},replace:function(e,r,o){return Z(t,n,e,r,o)}}})}();