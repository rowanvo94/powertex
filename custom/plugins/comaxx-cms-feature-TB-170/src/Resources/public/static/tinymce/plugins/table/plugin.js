!function(){"use strict";var n,e,t,r,o,u,i,c=function(n){var e=typeof n;return null===n?"null":"object"===e&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":e},l=function(n){return function(e){return c(e)===n}},a=function(n){return function(e){return typeof e===n}},f=function(n){return function(e){return n===e}},s=l("string"),m=l("object"),d=l("array"),g=f(null),p=a("boolean"),b=f(void 0),h=function(n){return null!=n},v=a("function"),w=a("number"),y=function(){},C=function(n){return function(){return n}},S=function(n){return n},T=function(n,e){return n===e};function x(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=e.concat(t);return n.apply(null,o)}}var R=function(n){return function(e){return!n(e)}},D=C(!1),O=C(!0),A=function(){return k},k={fold:function(n,e){return n()},isSome:D,isNone:O,getOr:S,getOrThunk:n=function(n){return n()},getOrDie:function(n){throw Error(n||"error: getOrDie called on none.")},getOrNull:C(null),getOrUndefined:C(void 0),or:S,orThunk:n,map:A,each:y,bind:A,exists:D,forall:O,filter:function(){return A()},toArray:function(){return[]},toString:C("none()")},I=function(n){var e=C(n),t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},isSome:O,isNone:D,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return I(e(n))},each:function(e){e(n)},bind:r,exists:r,forall:r,filter:function(e){return e(n)?o:k},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},B={some:I,none:A,from:function(n){return null==n?k:I(n)}},M=Array.prototype.slice,E=Array.prototype.indexOf,P=Array.prototype.push,N=function(n,e){return E.call(n,e)>-1},z=function(n,e){for(var t=0,r=n.length;t<r;t++)if(e(n[t],t))return!0;return!1},_=function(n,e){for(var t=[],r=0;r<n;r++)t.push(e(r));return t},L=function(n,e){for(var t=n.length,r=Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)}return r},j=function(n,e){for(var t=0,r=n.length;t<r;t++)e(n[t],t)},W=function(n,e){for(var t=n.length-1;t>=0;t--)e(n[t],t)},F=function(n,e){for(var t=[],r=[],o=0,u=n.length;o<u;o++){var i=n[o];(e(i,o)?t:r).push(i)}return{pass:t,fail:r}},H=function(n,e){for(var t=[],r=0,o=n.length;r<o;r++){var u=n[r];e(u,r)&&t.push(u)}return t},V=function(n,e,t){return W(n,function(n,r){t=e(t,n,r)}),t},q=function(n,e,t){return j(n,function(n,r){t=e(t,n,r)}),t},U=function(n,e,t){for(var r=0,o=n.length;r<o;r++){var u=n[r];if(e(u,r))return B.some(u);if(t(u,r))break}return B.none()},G=function(n,e){return U(n,e,D)},$=function(n,e){for(var t=0,r=n.length;t<r;t++)if(e(n[t],t))return B.some(t);return B.none()},K=function(n){for(var e=[],t=0,r=n.length;t<r;++t){if(!d(n[t]))throw Error("Arr.flatten item "+t+" was not an array, input: "+n);P.apply(e,n[t])}return e},X=function(n,e){return K(L(n,e))},Y=function(n,e){for(var t=0,r=n.length;t<r;++t)if(!0!==e(n[t],t))return!1;return!0},J=function(n){var e=M.call(n,0);return e.reverse(),e},Q=function(n,e){for(var t={},r=0,o=n.length;r<o;r++){var u=n[r];t[String(u)]=e(u,r)}return t},Z=function(n){return[n]},nn=function(n,e){var t=M.call(n,0);return t.sort(e),t},ne=function(n,e){return e>=0&&e<n.length?B.some(n[e]):B.none()},nt=function(n){return ne(n,0)},nr=function(n){return ne(n,n.length-1)},no=function(n,e){for(var t=0;t<n.length;t++){var r=e(n[t],t);if(r.isSome())return r}return B.none()},nu=function(){return(nu=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}).apply(this,arguments)};function ni(n,e,t){if(t||2==arguments.length)for(var r,o=0,u=e.length;o<u;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return n.concat(r||Array.prototype.slice.call(e))}var nc=function(n){var e,t=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return t||(t=!0,e=n.apply(null,r)),e}},nl=function(n,e,t,r){var o=n.isiOS()&&!0===/ipad/i.test(t),u=n.isiOS()&&!o,i=n.isiOS()||n.isAndroid(),c=i||r("(pointer:coarse)"),l=o||!u&&i&&r("(min-device-width:768px)"),a=u||i&&!l,f=e.isSafari()&&n.isiOS()&&!1===/safari/i.test(t);return{isiPad:C(o),isiPhone:C(u),isTablet:C(l),isPhone:C(a),isTouch:C(c),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:C(f),isDesktop:C(!a&&!l&&!f)}},na=function(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(r.test(e))return r}},nf=function(n,e){var t=na(n,e);if(!t)return{major:0,minor:0};var r=function(n){return Number(e.replace(t,"$"+n))};return nm(r(1),r(2))},ns=function(){return nm(0,0)},nm=function(n,e){return{major:n,minor:e}},nd=function(n,e){var t=String(e).toLowerCase();return 0===n.length?ns():nf(n,t)},ng=function(n,e){var t=String(e).toLowerCase();return G(n,function(n){return n.search(t)})},np=function(n,e,t){return""===e||n.length>=e.length&&n.substr(t,t+e.length)===e},nb=function(n,e){var t;return nv(n,e)?(t=e.length,n.substring(t)):n},nh=function(n,e){return -1!==n.indexOf(e)},nv=function(n,e){return np(n,e,0)},nw=function(n,e){return np(n,e,n.length-e.length)},ny=(e=/^\s+|\s+$/g,function(n){return n.replace(e,"")}),nC=function(n){return n.length>0},nS=function(n){var e=parseFloat(n);return isNaN(e)?B.none():B.some(e)},nT=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,nx=function(n){return function(e){return nh(e,n)}},nR=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return nh(n,"edge/")&&nh(n,"chrome")&&nh(n,"safari")&&nh(n,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,nT],search:function(n){return nh(n,"chrome")&&!nh(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return nh(n,"msie")||nh(n,"trident")}},{name:"Opera",versionRegexes:[nT,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:nx("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:nx("firefox")},{name:"Safari",versionRegexes:[nT,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(nh(n,"safari")||nh(n,"mobile/"))&&nh(n,"applewebkit")}}],nD=[{name:"Windows",search:nx("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return nh(n,"iphone")||nh(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:nx("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:nx("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:nx("linux"),versionRegexes:[]},{name:"Solaris",search:nx("sunos"),versionRegexes:[]},{name:"FreeBSD",search:nx("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:nx("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],nO={browsers:C(nR),oses:C(nD)},nA="Edge",nk="Chrome",nI="Opera",nB="Firefox",nM="Safari",nE=function(n){var e=n.current,t=n.version,r=function(n){return function(){return e===n}};return{current:e,version:t,isEdge:r(nA),isChrome:r(nk),isIE:r("IE"),isOpera:r(nI),isFirefox:r(nB),isSafari:r(nM)}},nP={unknown:function(){return nE({current:void 0,version:ns()})},nu:nE,edge:C(nA),chrome:C(nk),ie:C("IE"),opera:C(nI),firefox:C(nB),safari:C(nM)},nN="Windows",nz="Android",n_="Linux",nL="Solaris",nj="FreeBSD",nW="ChromeOS",nF=function(n){var e=n.current,t=n.version,r=function(n){return function(){return e===n}};return{current:e,version:t,isWindows:r(nN),isiOS:r("iOS"),isAndroid:r(nz),isOSX:r("OSX"),isLinux:r(n_),isSolaris:r(nL),isFreeBSD:r(nj),isChromeOS:r(nW)}},nH={unknown:function(){return nF({current:void 0,version:ns()})},nu:nF,windows:C(nN),ios:C("iOS"),android:C(nz),linux:C(n_),osx:C("OSX"),solaris:C(nL),freebsd:C(nj),chromeos:C(nW)},nV=function(n,e,t){var r=nO.browsers(),o=nO.oses(),u=e.bind(function(n){return no(n.brands,function(n){var e=n.brand.toLowerCase();return G(r,function(n){var t;return e===(null===(t=n.brand)||void 0===t?void 0:t.toLowerCase())}).map(function(e){return{current:e.name,version:nm(parseInt(n.version,10),0)}})})}).orThunk(function(){return ng(r,n).map(function(e){var t=nd(e.versionRegexes,n);return{current:e.name,version:t}})}).fold(nP.unknown,nP.nu),i=ng(o,n).map(function(e){var t=nd(e.versionRegexes,n);return{current:e.name,version:t}}).fold(nH.unknown,nH.nu),c=nl(i,u,n,t);return{browser:u,os:i,deviceType:c}},nq=function(n){return window.matchMedia(n).matches},nU=nc(function(){return nV(navigator.userAgent,B.from(navigator.userAgentData),nq)}),nG=function(){return nU()},n$=function(n,e){var t;return t=Node.DOCUMENT_POSITION_CONTAINED_BY,(n.compareDocumentPosition(e)&t)!=0},nK=function(n){if(null==n)throw Error("Node cannot be null or undefined");return{dom:n}},nX={fromTag:function(n,e){return nK((e||document).createElement(n))},fromText:function(n,e){return nK((e||document).createTextNode(n))},fromDom:nK,fromPoint:function(n,e,t){return B.from(n.dom.elementFromPoint(e,t)).map(nK)}},nY=function(n,e){var t=n.dom;if(1!==t.nodeType)return!1;if(void 0!==t.matches)return t.matches(e);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(e);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(e);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(e);throw Error("Browser lacks native selectors")},nJ=function(n){return 1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount},nQ=function(n,e){var t=void 0===e?document:e.dom;return nJ(t)?[]:L(t.querySelectorAll(n),nX.fromDom)},nZ=function(n,e){var t=void 0===e?document:e.dom;return nJ(t)?B.none():B.from(t.querySelector(n)).map(nX.fromDom)},n0=function(n,e){return n.dom===e.dom},n1=function(n,e){var t=n.dom,r=e.dom;return t!==r&&t.contains(r)},n9=function(n,e){return nG().browser.isIE()?n$(n.dom,e.dom):n1(n,e)},n2=Object.keys,n3=Object.hasOwnProperty,n5=function(n,e){for(var t=n2(n),r=0,o=t.length;r<o;r++){var u=t[r];e(n[u],u)}},n4=function(n,e){return n7(n,function(n,t){return{k:t,v:e(n,t)}})},n7=function(n,e){var t={};return n5(n,function(n,r){var o=e(n,r);t[o.k]=o.v}),t},n6=function(n,e){var t,r={};return t=function(n,e){r[e]=n},n5(n,function(n,r){(e(n,r)?t:y)(n,r)}),r},n8=function(n,e){var t=[];return n5(n,function(n,r){t.push(e(n,r))}),t},en=function(n){return n8(n,S)},ee=function(n){return n2(n).length},et=function(n,e){return er(n,e)?B.from(n[e]):B.none()},er=function(n,e){return n3.call(n,e)},eo=function(n,e){return er(n,e)&&void 0!==n[e]&&null!==n[e]},eu=function(n){for(var e in n)if(n3.call(n,e))return!1;return!0},ei=["tfoot","thead","tbody","colgroup"],ec=function(n,e,t){return{element:n,rowspan:e,colspan:t}},el=function(n,e,t){return{element:n,cells:e,section:t}},ea=function(n,e,t){return{element:n,isNew:e,isLocked:t}},ef=function(n,e,t,r){return{element:n,cells:e,section:t,isNew:r}};"undefined"!=typeof window?window:Function("return this;")();var es=function(n){return n.dom.nodeName.toLowerCase()},em=function(n){return n.dom.nodeType},ed=function(n){return function(e){return em(e)===n}},eg=function(n){return 8===em(n)||"#comment"===es(n)},ep=ed(1),eb=ed(3),eh=ed(9),ev=ed(11),ew=function(n){return function(e){return ep(e)&&es(e)===n}},ey=function(n){return nX.fromDom(n.dom.ownerDocument)},eC=function(n){return eh(n)?n:ey(n)},eS=function(n){return B.from(n.dom.parentNode).map(nX.fromDom)},eT=function(n,e){for(var t=v(e)?e:D,r=n.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var u=r.parentNode,i=nX.fromDom(u);if(o.push(i),!0===t(i))break;r=u}return o},ex=function(n){return B.from(n.dom.previousSibling).map(nX.fromDom)},eR=function(n){return B.from(n.dom.nextSibling).map(nX.fromDom)},eD=function(n){return L(n.dom.childNodes,nX.fromDom)},eO=function(n,e){var t=n.dom.childNodes;return B.from(t[e]).map(nX.fromDom)},eA=v(Element.prototype.attachShadow)&&v(Node.prototype.getRootNode),ek=C(eA),eI=eA?function(n){return nX.fromDom(n.dom.getRootNode())}:eC,eB=function(n){var e=eI(n);return ev(e)&&h(e.dom.host)?B.some(e):B.none()},eM=function(n){if(ek()&&h(n.target)){var e=nX.fromDom(n.target);if(ep(e)&&eE(e)&&n.composed&&n.composedPath){var t=n.composedPath();if(t)return nt(t)}}return B.from(n.target)},eE=function(n){return h(n.dom.shadowRoot)},eP=function(n){var e=eb(n)?n.dom.parentNode:n.dom;if(null==e||null===e.ownerDocument)return!1;var t=e.ownerDocument;return eB(nX.fromDom(e)).fold(function(){return t.body.contains(e)},function(n){var e;return eP((e=n,nX.fromDom(e.dom.host)))})},eN=function(n){var e=n.dom.body;if(null==e)throw Error("Body is not available yet");return nX.fromDom(e)},ez=function(n,e){var t=[];return j(eD(n),function(n){e(n)&&(t=t.concat([n])),t=t.concat(ez(n,e))}),t},e_=function(n,e,t){var r;return r=function(n){return nY(n,e)},H(eT(n,t),r)},eL=function(n,e){var t;return t=function(n){return nY(n,e)},H(eD(n),t)},ej=function(n,e){return nQ(e,n)};function eW(n,e,t,r,o){return n(t,r)?B.some(t):v(o)&&o(t)?B.none():e(t,r,o)}var eF=function(n,e,t){for(var r=n.dom,o=v(t)?t:D;r.parentNode;){r=r.parentNode;var u=nX.fromDom(r);if(e(u))return B.some(u);if(o(u))break}return B.none()},eH=function(n,e){var t=function(n){for(var r=0;r<n.childNodes.length;r++){var o=nX.fromDom(n.childNodes[r]);if(e(o))return B.some(o);var u=t(n.childNodes[r]);if(u.isSome())return u}return B.none()};return t(n.dom)},eV=function(n,e,t){return eF(n,function(n){return nY(n,e)},t)},eq=function(n,e){var t;return t=function(n){return nY(n,e)},G(n.dom.childNodes,function(n){return t(nX.fromDom(n))}).map(nX.fromDom)},eU=function(n,e){return nZ(e,n)},eG=function(n,e,t){return eW(function(n,e){return nY(n,e)},eV,n,e,t)},e$=function(n,e,t){if(s(t)||p(t)||w(t))n.setAttribute(e,t+"");else throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",t,":: Element ",n),Error("Attribute value was not simple")},eK=function(n,e,t){e$(n.dom,e,t)},eX=function(n,e){var t=n.dom;n5(e,function(n,e){e$(t,e,n)})},eY=function(n,e){n5(e,function(e,t){e.fold(function(){eZ(n,t)},function(e){e$(n.dom,t,e)})})},eJ=function(n,e){var t=n.dom.getAttribute(e);return null===t?void 0:t},eQ=function(n,e){return B.from(eJ(n,e))},eZ=function(n,e){n.dom.removeAttribute(e)},e0=function(n){return q(n.dom.attributes,function(n,e){return n[e.name]=e.value,n},{})},e1=function(n,e,t){return void 0===t&&(t=T),n.exists(function(n){return t(n,e)})},e9=function(n){for(var e=[],t=function(n){e.push(n)},r=0;r<n.length;r++)n[r].each(t);return e},e2=function(n,e,t){return n.isSome()&&e.isSome()?B.some(t(n.getOrDie(),e.getOrDie())):B.none()},e3=function(n,e){return n?B.some(e):B.none()},e5=function(n){return void 0!==n.style&&v(n.style.getPropertyValue)},e4=function(n,e,t){if(!s(t))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",t,":: Element ",n),Error("CSS value must be a string: "+t);e5(n)&&n.style.setProperty(e,t)},e7=function(n,e){e5(n)&&n.style.removeProperty(e)},e6=function(n,e,t){e4(n.dom,e,t)},e8=function(n,e){var t=n.dom;n5(e,function(n,e){e4(t,e,n)})},tn=function(n,e){var t=n.dom,r=window.getComputedStyle(t).getPropertyValue(e);return""!==r||eP(n)?r:te(t,e)},te=function(n,e){return e5(n)?n.style.getPropertyValue(e):""},tt=function(n,e){var t=te(n.dom,e);return B.from(t).filter(function(n){return n.length>0})},tr=function(n,e){e7(n.dom,e),e1(eQ(n,"style").map(ny),"")&&eZ(n,"style")},to=function(n,e){var t=n.dom,r=e.dom;e5(t)&&e5(r)&&(r.style.cssText=t.style.cssText)},tu=function(n,e,t){return void 0===t&&(t=0),eQ(n,e).map(function(n){return parseInt(n,10)}).getOr(t)},ti=function(n,e){return tu(n,e,1)},tc=function(n){return ew("col")(n)?tu(n,"span",1)>1:ti(n,"colspan")>1},tl=function(n){return ti(n,"rowspan")>1},ta=function(n,e){return parseInt(tn(n,e),10)},tf=C(10),ts=C(10),tm=function(n,e){return td(n,e,O)},td=function(n,e,t){return X(eD(n),function(n){return nY(n,e)?t(n)?[n]:[]:td(n,e,t)})},tg=function(n,e){var t,r;return t=["td","th"],(void 0===(r=e)&&(r=D),r(n))?B.none():N(t,es(n))?B.some(n):eV(n,t.join(","),function(n){return nY(n,"table")||r(n)})},tp=function(n){return tm(n,"th,td")},tb=function(n){return nY(n,"colgroup")?eL(n,"col"):X(tw(n),function(n){return eL(n,"col")})},th=function(n,e){return eG(n,"table",e)},tv=function(n){return tm(n,"tr")},tw=function(n){return th(n).fold(C([]),function(n){return eL(n,"colgroup")})},ty=function(n,e){return L(n,function(n){if("colgroup"===es(n)){var t=L(tb(n),function(n){var e=tu(n,"span",1);return ec(n,1,e)});return el(n,t,"colgroup")}var t=L(tp(n),function(n){var e=tu(n,"rowspan",1),t=tu(n,"colspan",1);return ec(n,e,t)});return el(n,t,e(n))})},tC=function(n){return eS(n).map(function(n){var e=es(n);return N(ei,e)?e:"tbody"}).getOr("tbody")},tS=function(n){var e=tv(n);return ty(ni(ni([],tw(n),!0),e,!0),tC)},tT=function(n,e,t){var r=n.cells,o=r.slice(0,e),u=r.slice(e);return tD(n,o.concat(t).concat(u))},tx=function(n,e,t){return tT(n,e,[t])},tR=function(n,e,t){n.cells[e]=t},tD=function(n,e){return ef(n.element,e,n.section,n.isNew)},tO=function(n,e){var t=L(n.cells,e);return ef(n.element,t,n.section,n.isNew)},tA=function(n,e){return n.cells[e]},tk=function(n,e){return tA(n,e).element},tI=function(n){return n.cells.length},tB=function(n){var e=F(n,function(n){return"colgroup"===n.section});return{rows:e.fail,cols:e.pass}},tM=function(n,e,t){var r=L(n.cells,t);return ef(e(n.element),r,n.section,!0)},tE="data-snooker-locked-cols",tP=function(n){return eQ(n,tE).bind(function(n){return B.from(n.match(/\d+/g))}).map(function(n){return Q(n,O)})},tN=function(n){return nn(n8(q(tB(n).rows,function(n,e){return j(e.cells,function(e,t){e.isLocked&&(n[t]=!0)}),n},{}),function(n,e){return parseInt(e,10)}))},tz=function(n,e){return n+","+e},t_=function(n,e){return H(X(n.all,function(n){return n.cells}),e)},tL=function(n){var e={},t=0;return j(n.cells,function(n){var r=n.colspan;_(r,function(o){var u=t+o;e[u]={element:n.element,colspan:r,column:u}}),t+=r}),e},tj=function(n){var e={},t=[],r=nt(n).map(function(n){return n.element}).bind(th).bind(tP).getOr({}),o=0,u=0,i=0,c=F(n,function(n){return"colgroup"===n.section}),l=c.pass;j(c.fail,function(n){var c=[];j(n.cells,function(n){for(var t,o=0;void 0!==e[tz(i,o)];)o++;for(var l=eo(r,o.toString()),a=(t=n.element,{element:t,rowspan:n.rowspan,colspan:n.colspan,row:i,column:o,isLocked:l}),f=0;f<n.colspan;f++)for(var s=0;s<n.rowspan;s++){var m=o+f;e[tz(i+s,m)]=a,u=Math.max(u,m+1)}c.push(a)}),o++,t.push(el(n.element,c,n.section)),i++});var a=nr(l).map(function(n){var e=tL(n);return{colgroups:[{element:n.element,columns:en(e)}],columns:e}}).getOrThunk(function(){return{colgroups:[],columns:{}}}),f=a.columns,s=a.colgroups;return{grid:{rows:o,columns:u},access:e,all:t,columns:f,colgroups:s}},tW={fromTable:function(n){return tj(tS(n))},generate:tj,getAt:function(n,e,t){return B.from(n.access[tz(e,t)])},findItem:function(n,e,t){var r=t_(n,function(n){return t(e,n.element)});return r.length>0?B.some(r[0]):B.none()},filterItems:t_,justCells:function(n){return X(n.all,function(n){return n.cells})},justColumns:function(n){return en(n.columns)},hasColumns:function(n){return n2(n.columns).length>0},getColumnAt:function(n,e){return B.from(n.columns[e])}},tF=function(n,e){var t=e.column,r=e.column+e.colspan-1,o=e.row,u=e.row+e.rowspan-1;return t<=n.finishCol&&r>=n.startCol&&o<=n.finishRow&&u>=n.startRow},tH=function(n,e){return e.column>=n.startCol&&e.column+e.colspan-1<=n.finishCol&&e.row>=n.startRow&&e.row+e.rowspan-1<=n.finishRow},tV=function(n,e){for(var t=!0,r=x(tH,e),o=e.startRow;o<=e.finishRow;o++)for(var u=e.startCol;u<=e.finishCol;u++)t=t&&tW.getAt(n,o,u).exists(r);return t?B.some(e):B.none()},tq=function(n,e){var t;return t=Math.min(n.row,e.row),{startRow:t,startCol:Math.min(n.column,e.column),finishRow:Math.max(n.row+n.rowspan-1,e.row+e.rowspan-1),finishCol:Math.max(n.column+n.colspan-1,e.column+e.colspan-1)}},tU=function(n,e,t){var r=tW.findItem(n,e,n0),o=tW.findItem(n,t,n0);return r.bind(function(n){return o.map(function(e){return tq(n,e)})})},tG=function(n,e,t){return tU(n,e,t).map(function(e){return L(tW.filterItems(n,x(tF,e)),function(n){return n.element})})},t$=function(n,e){return tW.findItem(n,e,function(n,e){return n9(e,n)}).map(function(n){return n.element})},tK=function(n,e,t,r,o){var u=tY(n),i=n0(n,t)?B.some(e):t$(u,e),c=n0(n,o)?B.some(r):t$(u,r);return i.bind(function(n){return c.bind(function(e){return tG(u,n,e)})})},tX=function(n,e,t){var r;return tU(r=tY(n),e,t).bind(function(n){return tV(r,n)})},tY=tW.fromTable,tJ=function(n,e){eS(n).each(function(t){t.dom.insertBefore(e.dom,n.dom)})},tQ=function(n,e){eR(n).fold(function(){eS(n).each(function(n){t0(n,e)})},function(n){tJ(n,e)})},tZ=function(n,e){eO(n,0).fold(function(){t0(n,e)},function(t){n.dom.insertBefore(e.dom,t.dom)})},t0=function(n,e){n.dom.appendChild(e.dom)},t1=function(n,e,t){eO(n,t).fold(function(){t0(n,e)},function(n){tJ(n,e)})},t9=function(n,e){tJ(n,e),t0(e,n)},t2=function(n,e){j(e,function(e){tJ(n,e)})},t3=function(n,e){j(e,function(t,r){tQ(0===r?n:e[r-1],t)})},t5=function(n,e){j(e,function(e){t0(n,e)})},t4=function(n){n.dom.textContent="",j(eD(n),function(n){t7(n)})},t7=function(n){var e=n.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},t6=function(n){var e=eD(n);e.length>0&&t2(n,e),t7(n)},t8=(t="text",{get:function(n){if(!eb(n))throw Error("Can only get "+t+" value of a "+t+" node");return r(n).getOr("")},getOption:r=function(n){return eb(n)?B.from(n.dom.nodeValue):B.none()},set:function(n,e){if(!eb(n))throw Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=e}}),rn=function(n){return t8.get(n)},re=function(n){return t8.getOption(n)},rt=function(n,e){return t8.set(n,e)},rr=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function ro(){return{up:C({selector:eV,closest:eG,predicate:eF,all:eT}),down:C({selector:ej,predicate:ez}),styles:C({get:tn,getRaw:tt,set:e6,remove:tr}),attrs:C({get:eJ,set:eK,remove:eZ,copyTo:function(n,e){eX(e,e0(n))}}),insert:C({before:tJ,after:tQ,afterAll:t3,append:t0,appendAll:t5,prepend:tZ,wrap:t9}),remove:C({unwrap:t6,remove:t7}),create:C({nu:nX.fromTag,clone:function(n){return nX.fromDom(n.dom.cloneNode(!1))},text:nX.fromText}),query:C({comparePosition:function(n,e){return n.dom.compareDocumentPosition(e.dom)},prevSibling:ex,nextSibling:eR}),property:C({children:eD,name:es,parent:eS,document:function(n){return eC(n).dom},isText:eb,isComment:eg,isElement:ep,isSpecial:function(n){return N(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],es(n))},getLanguage:function(n){return ep(n)?eQ(n,"lang"):B.none()},getText:rn,setText:rt,isBoundary:function(n){return!!ep(n)&&("body"===es(n)||N(rr,es(n)))},isEmptyTag:function(n){return!!ep(n)&&N(["br","img","hr","input"],es(n))},isNonEditable:function(n){return ep(n)&&"false"===eJ(n,"contenteditable")}}),eq:n0,is:nY}}var ru=function(n,e,t){var r;return t.length>0?(r=t[0],V(t.slice(1),function(t,r){var o,u,i,c=e(n,r);return o=n,u=t,i=c,u.bind(function(n){return i.filter(x(o.eq,n))})},e(n,r))):B.none()},ri=function(n,e,t,r){void 0===r&&(r=D);var o=[e].concat(n.up().all(e)),u=[t].concat(n.up().all(t)),i=function(n){return $(n,r).fold(function(){return n},function(e){return n.slice(0,e+1)})},c=i(o),l=i(u),a=G(c,function(e){return z(l,x(n.eq,e))});return{firstpath:c,secondpath:l,shared:a}},rc=ro(),rl=function(n,e){return ru(rc,function(e,t){return n(t)},e)},ra=function(n){return eV(n,"table")},rf=function(n,e,t){var r=function(n){return function(e){return void 0!==t&&t(e)||n0(e,n)}};return n0(n,e)?B.some({boxes:B.some([n]),start:n,finish:e}):ra(n).bind(function(o){return ra(e).bind(function(u){if(n0(o,u))return B.some({boxes:tG(tY(o),n,e),start:n,finish:e});if(n9(o,u)){var i=e_(e,"td,th",r(o)),c=i.length>0?i[i.length-1]:e;return B.some({boxes:tK(o,n,o,e,u),start:n,finish:c})}if(!n9(u,o))return ri(rc,n,e,void 0).shared.bind(function(i){return eG(i,"table",t).bind(function(t){var i=e_(e,"td,th",r(t)),c=i.length>0?i[i.length-1]:e,l=e_(n,"td,th",r(t)),a=l.length>0?l[l.length-1]:n;return B.some({boxes:tK(t,n,o,e,u),start:a,finish:c})})});var i=e_(n,"td,th",r(u)),l=i.length>0?i[i.length-1]:n;return B.some({boxes:tK(u,n,o,e,u),start:n,finish:l})})})},rs=function(n,e){var t=ej(n,e);return t.length>0?B.some(t):B.none()},rm=function(n,e,t){return eU(n,e).bind(function(e){return eU(n,t).bind(function(n){return rl(ra,[e,n]).map(function(t){return{first:e,last:n,table:t}})})})},rd=function(n,e){return rs(n,e)},rg=function(n){if(!d(n))throw Error("cases must be an array");if(0===n.length)throw Error("there must be at least one case");var e=[],t={};return j(n,function(r,o){var u=n2(r);if(1!==u.length)throw Error("one and only one name per case");var i=u[0],c=r[i];if(void 0!==t[i])throw Error("duplicate key detected:"+i);if("cata"===i)throw Error("cannot have a case named cata (sorry)");if(!d(c))throw Error("case arguments must be an array");e.push(i),t[i]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var u=t.length;if(u!==c.length)throw Error("Wrong number of arguments to case "+i+". Expected "+c.length+" ("+c+"), got "+u);return{fold:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(e.length!==n.length)throw Error("Wrong number of arguments to fold. Expected "+n.length+", got "+e.length);return e[o].apply(null,t)},match:function(n){var r=n2(n);if(e.length!==r.length)throw Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+r.join(","));if(!Y(e,function(n){return N(r,n)}))throw Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+e.join(", "));return n[i].apply(null,t)},log:function(n){console.log(n,{constructors:e,constructor:i,params:t})}}}}),t},rp=rg([{none:[]},{multiple:["elements"]},{single:["element"]}]),rb=function(n,e,t,r){return n.fold(e,t,r)},rh=rp.none,rv=rp.multiple,rw=rp.single,ry=tinymce.util.Tools.resolve("tinymce.PluginManager"),rC=function(n,e){return nX.fromDom(n.dom.cloneNode(e))},rS=function(n){return rC(n,!1)},rT=function(n){return rC(n,!0)},rx=function(n,e){var t=nX.fromTag(e);return eX(t,e0(n)),t},rR=function(n,e){var t=rx(n,e);return t5(t,eD(rT(n))),t},rD=function(n,e){var t=rx(n,e);return tJ(n,t),t5(t,eD(n)),t7(n),t},rO=function(n,e){var t=function(t){var r=e(t);return r<=0||null===r?parseFloat(tn(t,n))||0:r},r=function(n,e){return q(e,function(e,t){var r=tn(n,t),o=void 0===r?0:parseInt(r,10);return isNaN(o)?e:e+o},0)};return{set:function(e,t){if(!w(t)&&!t.match(/^[0-9]+$/))throw Error(n+".set accepts only positive integer values. Value was "+t);var r=e.dom;e5(r)&&(r.style[n]=t+"px")},get:t,getOuter:t,aggregate:r,max:function(n,e,t){var o=r(n,t);return e>o?e-o:0}}},rA=function(){var n=nG().browser;return n.isIE()||n.isEdge()},rk=function(n,e,t){return nS(tn(n,e)).getOr(t)},rI=function(n){return tn(n,"box-sizing")},rB=function(n,e,t,r){return e-rk(n,"padding-"+t,0)-rk(n,"padding-"+r,0)-rk(n,"border-"+t+"-width",0)-rk(n,"border-"+r+"-width",0)},rM=function(n,e){var t=n.dom,r=t.getBoundingClientRect().height||t.offsetHeight;return"border-box"===e?r:rB(n,r,"top","bottom")},rE=function(n,e){var t=n.dom,r=t.getBoundingClientRect().width||t.offsetWidth;return"border-box"===e?r:rB(n,r,"left","right")},rP=rO("width",function(n){return n.dom.offsetWidth}),rN=function(n){return rP.get(n)},rz=function(n){return rP.getOuter(n)},r_=function(n){return rE(n,"content-box")},rL=function(n,e){void 0===e&&(e=O);var t=n.grid,r=_(t.columns,S),o=_(t.rows,S);return L(r,function(t){return rj(function(){return X(o,function(e){return tW.getAt(n,e,t).filter(function(n){return n.column===t}).toArray()})},function(n){return 1===n.colspan&&e(n.element)},function(){return tW.getAt(n,0,t)})})},rj=function(n,e,t){var r=n();return G(r,e).orThunk(function(){return B.from(r[0]).orThunk(t)}).map(function(n){return n.element})},rW=function(n){var e=n.grid,t=_(e.rows,S),r=_(e.columns,S);return L(t,function(e){return rj(function(){return X(r,function(t){return tW.getAt(n,e,t).filter(function(n){return n.row===e}).fold(C([]),function(n){return[n]})})},function(n){return 1===n.rowspan},function(){return tW.getAt(n,e,0)})})},rF=function(n,e){if(e<0||e>=n.length-1)return B.none();var t=n[e].fold(function(){return no(J(n.slice(0,e)),function(n,e){return n.map(function(n){return{value:n,delta:e+1}})})},function(n){return B.some({value:n,delta:0})}),r=n[e+1].fold(function(){return no(n.slice(e+1),function(n,e){return n.map(function(n){return{value:n,delta:e+1}})})},function(n){return B.some({value:n,delta:1})});return t.bind(function(n){return r.map(function(e){var t=e.delta+n.delta;return Math.abs(e.value-n.value)/t})})},rH=function(n,e){return function(t){return"rtl"===rV(t)?e:n}},rV=function(n){return"rtl"===tn(n,"direction")?"rtl":"ltr"},rq=rO("height",function(n){var e=n.dom;return eP(n)?e.getBoundingClientRect().height:e.offsetHeight}),rU=function(n){return rq.get(n)},rG=function(n){return rq.getOuter(n)},r$=function(n,e){return{left:n,top:e,translate:function(t,r){return r$(n+t,e+r)}}},rK=function(n){var e=n.getBoundingClientRect();return r$(e.left,e.top)},rX=function(n,e){return void 0!==n?n:void 0!==e?e:0},rY=function(n){var e=n.dom.ownerDocument,t=e.body,r=e.defaultView,o=e.documentElement;if(t===n.dom)return r$(t.offsetLeft,t.offsetTop);var u=rX(null==r?void 0:r.pageYOffset,o.scrollTop),i=rX(null==r?void 0:r.pageXOffset,o.scrollLeft),c=rX(o.clientTop,t.clientTop),l=rX(o.clientLeft,t.clientLeft);return rJ(n).translate(i-l,u-c)},rJ=function(n){var e=n.dom,t=e.ownerDocument.body;return t===e?r$(t.offsetLeft,t.offsetTop):eP(n)?rK(e):r$(0,0)},rQ=function(n,e){return{row:n,y:e}},rZ=function(n,e){return{col:n,x:e}},r0=function(n){return rY(n).left+rz(n)},r1=function(n){return rY(n).left},r9=function(n,e){return rZ(n,r1(e))},r2=function(n,e){return rZ(n,r0(e))},r3=function(n){return rY(n).top},r5=function(n,e){return rQ(n,r3(e))},r4=function(n,e){return rQ(n,r3(e)+rG(e))},r7=function(n,e,t){if(0===t.length)return[];var r=L(t.slice(1),function(e,t){return e.map(function(e){return n(t,e)})}),o=t[t.length-1].map(function(n){return e(t.length-1,n)});return r.concat([o])},r6={delta:S,positions:function(n){return r7(r5,r4,n)},edge:r3},r8=rH({delta:S,edge:r1,positions:function(n){return r7(r9,r2,n)}},{delta:function(n){return-n},edge:r0,positions:function(n){return r7(r2,r9,n)}}),on={delta:function(n,e){return r8(e).delta(n,e)},positions:function(n,e){return r8(e).positions(n,e)},edge:function(n){return r8(n).edge(n)}},oe={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},ot=(u="[eE][+-]?"+(o="[0-9]+"),RegExp("^([+-]?(?:"+["Infinity",o+"\\."+(i=function(n){return"(?:"+n+")?"})(o)+i(u),"\\."+o+i(u),o+i(u)].join("|")+"))(.*)$")),or=/(\d+(\.\d+)?)%/,oo=/(\d+(\.\d+)?)px|em/,ou=ew("col"),oi=function(n,e,t){var r=B.from(n.dom.parentElement).map(nX.fromDom).getOrThunk(function(){return eN(ey(n))});return e(n)/t(r)*100},oc=function(n,e){e6(n,"width",e+"px")},ol=function(n,e){e6(n,"width",e+"%")},oa=function(n,e){e6(n,"height",e+"px")},of=function(n,e,t,r){var o=th(n).map(function(n){return Math.floor(e/100*t(n))}).getOr(e);return r(n,o),o},os=function(n,e,t,r){var o=parseFloat(n);return nw(n,"%")&&"table"!==es(e)?of(e,o,t,r):o},om=function(n){var e,t=(e=n,(rA()?rM(e,rI(e)):rk(e,"height",e.dom.offsetHeight))+"px");return t?os(t,n,rU,oa):rU(n)},od=function(n,e){return tt(n,e).orThunk(function(){return eQ(n,e).map(function(n){return n+"px"})})},og=function(n){return od(n,"width")},op=function(n){return oi(n,rN,r_)},ob=function(n){return ou(n)?rN(n):rA()?rE(n,rI(n)):rk(n,"width",n.dom.offsetWidth)},oh=function(n){var e;return e="rowspan",om(n)/ti(n,e)},ov=function(n,e,t){e6(n,"width",e+t)},ow=function(n){return oi(n,rN,r_)+"%"},oy=C(or),oC=ew("col"),oS=function(n){return og(n).getOrThunk(function(){return ob(n)+"px"})},oT=function(n){return od(n,"height").getOrThunk(function(){return oh(n)+"px"})},ox=function(n){var e=nG().browser,t=e.isChrome()||e.isFirefox();return!oC(n)||t},oR=function(n,e,t,r,o,u){return n.filter(r).fold(function(){return u(rF(t,e))},function(n){return o(n)})},oD=function(n,e,t,r){var o=rL(n),u=tW.hasColumns(n)?L(tW.justColumns(n),function(n){return B.from(n.element)}):o,i=[B.some(on.edge(e))].concat(L(on.positions(o,e),function(n){return n.map(function(n){return n.x})})),c=R(tc);return L(u,function(n,e){return oR(n,e,i,c,function(n){var u;return ox(n)?t(n):oR(null!=(u=o[e])?S(u):B.none(),e,i,c,function(n){return r(B.some(rN(n)))},r)},r)})},oO=function(n){return n.map(function(n){return n+"px"}).getOr("")},oA=function(n,e,t){return oD(n,e,ob,function(n){return n.getOrThunk(t.minCellWidth)})},ok=function(n,e,t,r,o){var u=rW(n),i=[B.some(t.edge(e))].concat(L(t.positions(u,e),function(n){return n.map(function(n){return n.y})}));return L(u,function(n,e){return oR(n,e,i,R(tl),r,o)})},oI=function(n,e){return function(){return eP(n)?e(n):parseFloat(tt(n,"width").getOr("0"))}},oB=function(n){var e=oI(n,rN),t=C(0);return{width:e,pixelWidth:e,getWidths:function(e,t){return oA(e,n,t)},getCellDelta:t,singleColumnWidth:C([0]),minCellWidth:t,setElementWidth:y,adjustTableWidth:y,isRelative:!0,label:"none"}},oM=function(n){var e=oI(n,function(n){return parseFloat(ow(n))}),t=oI(n,rN);return{width:e,pixelWidth:t,getWidths:function(e,t){return oD(e,n,op,function(n){return n.fold(function(){return t.minCellWidth()},function(n){return n/t.pixelWidth()*100})})},getCellDelta:function(n){return n/t()*100},singleColumnWidth:function(n,e){return[100-n]},minCellWidth:function(){return tf()/t()*100},setElementWidth:ol,adjustTableWidth:function(t){var r=e();ol(n,r+t/100*r)},isRelative:!0,label:"percent"}},oE=function(n){var e=oI(n,rN);return{width:e,pixelWidth:e,getWidths:function(e,t){return oA(e,n,t)},getCellDelta:S,singleColumnWidth:function(n,e){return[Math.max(tf(),n+e)-n]},minCellWidth:tf,setElementWidth:oc,adjustTableWidth:function(t){oc(n,e()+t)},isRelative:!1,label:"pixel"}},oP={getTableSize:function(n){return og(n).fold(function(){return oB(n)},function(e){return null!==oy().exec(e)?oM(n):oE(n)})},pixelSize:oE,percentageSize:oM},oN=function(n,e){var t=n.grid.columns,r=n.grid.rows,o=t,u=0,i=0,c=[],l=[];return n5(n.access,function(n){if(c.push(n),e(n)){l.push(n);var t=n.row,a=t+n.rowspan-1,f=n.column,s=f+n.colspan-1;t<r?r=t:a>u&&(u=a),f<o?o=f:s>i&&(i=s)}}),{minRow:r,minCol:o,maxRow:u,maxCol:i,allCells:c,selectedCells:l}},oz=function(n,e,t){var r=n[t].element,o=nX.fromTag("td");t0(o,nX.fromTag("br")),(e?t0:tZ)(r,o)},o_=function(n,e,t,r){for(var o=e.grid.columns,u=e.grid.rows,i=0;i<u;i++)for(var c=!1,l=0;l<o;l++)i<t.minRow||i>t.maxRow||l<t.minCol||l>t.maxCol||(tW.getAt(e,i,l).filter(r).isNone()?oz(n,c,i):c=!0)},oL=function(n,e,t,r){n5(t.columns,function(n){(n.column<e.minCol||n.column>e.maxCol)&&t7(n.element)}),j(H(tm(n,"tr"),function(n){return 0===n.dom.childElementCount}),t7),(e.minCol===e.maxCol||e.minRow===e.maxRow)&&j(tm(n,"th,td"),function(n){eZ(n,"rowspan"),eZ(n,"colspan")}),eZ(n,tE),eZ(n,"data-snooker-col-series"),oP.getTableSize(n).adjustTableWidth(r)},oj=function(n,e,t,r){if(0===r.minCol&&e.grid.columns===r.maxCol+1)return 0;var o=oA(e,n,t),u=q(o,function(n,e){return n+e},0),i=q(o.slice(r.minCol,r.maxCol+1),function(n,e){return n+e},0)/u*t.pixelWidth()-t.pixelWidth();return t.getCellDelta(i)},oW=function(n,e){var t=function(n){return nY(n.element,e)},r=rT(n),o=tS(r),u=oP.getTableSize(n),i=tW.generate(o),c=oN(i,t),l="th:not("+e+"),td:not("+e+")";j(td(r,"th,td",function(n){return nY(n,l)}),t7),o_(o,i,c,t);var a=tW.fromTable(n),f=oj(n,a,u,c);return oL(r,c,i,f),r},oF=function(n){return"img"===es(n)?1:re(n).fold(function(){return eD(n).length},function(n){return n.length})},oH=["img","br"],oV=function(n){return re(n).filter(function(n){return 0!==n.trim().length||n.indexOf("\xa0")>-1}).isSome()||N(oH,es(n))},oq=function(n){return eH(n,oV)},oU=function(n){return oG(n,oV)},oG=function(n,e){var t=function(n){for(var r=eD(n),o=r.length-1;o>=0;o--){var u=r[o];if(e(u))return B.some(u);var i=t(u);if(i.isSome())return i}return B.none()};return t(n)},o$={scope:["row","col"]},oK=function(n){return function(){var e=nX.fromTag("td",n.dom);return t0(e,nX.fromTag("br",n.dom)),e}},oX=function(n){return function(){return nX.fromTag("col",n.dom)}},oY=function(n){return function(){return nX.fromTag("colgroup",n.dom)}},oJ=function(n){return function(){return nX.fromTag("tr",n.dom)}},oQ=function(n,e,t){var r=rR(n,e);return n5(t,function(n,e){null===n?eZ(r,e):eK(r,e,n)}),r},oZ=function(n){return n},o0=function(n,e){n5(o$,function(t,r){return eQ(n,r).filter(function(n){return N(t,n)}).each(function(n){return eK(e,r,n)})})},o1=function(n,e,t){var r=function(n,e){to(n.element,e),tr(e,"height"),1!==n.colspan&&tr(e,"width")};return{col:function(t){var o=nX.fromTag(es(t.element),e.dom);return r(t,o),n(t.element,o),o},colgroup:oY(e),row:oJ(e),cell:function(o){var u,i=nX.fromTag(es(o.element),e.dom),c=t.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),l=c.length>0?oq(u=o.element).map(function(n){return V(e_(n,c.join(","),function(n){return n0(n,u)}),function(n,e){var t=rS(e);return eZ(t,"contenteditable"),t0(n,t),t},i)}).getOr(i):i;return t0(l,nX.fromTag("br")),r(o,i),o0(o.element,i),n(o.element,i),i},replace:oQ,colGap:oX(e),gap:oK(e)}},o9=function(n){return{col:oX(n),colgroup:oY(n),row:oJ(n),cell:oK(n),replace:oZ,colGap:oX(n),gap:oK(n)}},o2=function(n,e){var t=(e||document).createElement("div");return t.innerHTML=n,eD(nX.fromDom(t))},o3=function(n){return L(n,nX.fromDom)},o5=function(n){return nX.fromDom(n.getBody())},o4=function(n){return n.getBoundingClientRect().width},o7=function(n){return n.getBoundingClientRect().height},o6=function(n){return function(e){return n0(e,o5(n))}},o8=function(n){return/^\d+(\.\d+)?$/.test(n)?n+"px":n},un=function(n){eZ(n,"data-mce-style");var e=function(n){return eZ(n,"data-mce-style")};j(tp(n),e),j(tb(n),e),j(tv(n),e)},ue=function(n,e){var t=n.dom.getStyle(e,"width")||n.dom.getAttrib(e,"width");return B.from(t).filter(nC)},ut=function(n){return nX.fromDom(n.selection.getStart())},ur=function(n){return rb(n.get(),C([]),S,Z)},uo=function(n){var e=function(n,e){return eQ(n,e).exists(function(n){return parseInt(n,10)>1})},t=ur(n);return t.length>0&&Y(t,function(n){return e(n,"rowspan")||e(n,"colspan")})?B.some(t):B.none()},uu="data-mce-selected",ui="data-mce-first-selected",uc="data-mce-last-selected",ul="["+uu+"]",ua={selected:uu,selectedSelector:"td["+uu+"],th["+uu+"]",firstSelected:ui,firstSelectedSelector:"td["+ui+"],th["+ui+"]",lastSelected:uc,lastSelectedSelector:"td["+uc+"],th["+uc+"]"},uf=function(n,e,t){return{element:t,mergable:rb(n.get(),B.none,function(n){return n.length<=1?B.none():rm(e,ua.firstSelectedSelector,ua.lastSelectedSelector).bind(function(n){var t=function(n){return n0(e,n)},r="thead,tfoot,tbody,table",o=eV(n.first,r,t),u=eV(n.last,r,t);return o.bind(function(e){return u.bind(function(t){return n0(e,t)?tX(n.table,n.first,n.last):B.none()})})}).map(function(e){return{bounds:e,cells:n}})},B.none),unmergable:uo(n),selection:ur(n)}},us=function(n){return function(e,t){var r=es(e);return eG("col"===r||"colgroup"===r?th(e).bind(function(n){return rd(n,ua.firstSelectedSelector)}).fold(C(e),function(n){return n[0]}):e,n,t)}},um=us("th,td,caption"),ud=us("th,td"),ug=function(n){return ur(n)},up=function(n,e){var t=ud(n),r=t.bind(function(n){return th(n)}).map(function(n){return tv(n)});return e2(t,r,function(n,t){return H(t,function(t){return z(o3(t.dom.cells),function(t){return"1"===eJ(t,e)||n0(t,n)})})}).getOr([])},ub=function(n,e,t){n.on("BeforeGetContent",function(t){!0===t.selection&&rb(e.get(),y,function(e){t.preventDefault(),th(e[0]).map(function(n){var e=oW(n,ul);return un(e),[e]}).each(function(e){t.content="text"===t.format?L(e,function(n){return n.dom.innerText}).join(""):L(e,function(e){return n.selection.serializer.serialize(e.dom,{})}).join("")})},y)}),n.on("BeforeSetContent",function(r){!0===r.selection&&!0===r.paste&&nt(ug(e)).each(function(e){th(e).each(function(o){var u=H(o2(r.content),function(n){return"meta"!==es(n)}),i=ew("table");if(1===u.length&&i(u[0])){r.preventDefault();var c=o9(nX.fromDom(n.getDoc())),l={element:e,clipboard:u[0],generators:c};t.pasteCells(o,l).each(function(){n.focus()})}})})})},uh=rg([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),uv=nu({},uh),uw=function(n,e,t,r,o){var u=n.slice(0),i=0===n.length?uv.none():1===n.length?uv.only(0):0===e?uv.left(0,1):e===n.length-1?uv.right(e-1,e):e>0&&e<n.length-1?uv.middle(e-1,e,e+1):uv.none(),c=C(L(u,C(0)));return i.fold(c,function(n){return r.singleColumnWidth(u[n],t)},function(n,e){return o.calcLeftEdgeDeltas(u,n,e,t,r.minCellWidth(),r.isRelative)},function(n,e,i){return o.calcMiddleDeltas(u,n,e,i,t,r.minCellWidth(),r.isRelative)},function(n,e){return o.calcRightEdgeDeltas(u,n,e,t,r.minCellWidth(),r.isRelative)})},uy=function(n,e,t){for(var r=0,o=n;o<e;o++)r+=void 0!==t[o]?t[o]:0;return r},uC=function(n,e,t){var r,o;j((r=n,o=e,tW.hasColumns(r)?L(tW.justColumns(r),function(n,e){return{element:n.element,width:o[e],colspan:n.colspan}}):L(tW.justCells(r),function(n){var e=uy(n.column,n.column+n.colspan,o);return{element:n.element,width:e,colspan:n.colspan}})),function(n){t.setElementWidth(n.element,n.width)})},uS=function(n,e,t,r,o){var u=tW.fromTable(n),i=o.getCellDelta(e),c=o.getWidths(u,o),l=t===u.grid.columns-1,a=r.clampTableDelta(c,t,i,o.minCellWidth(),l);uC(u,L(uw(c,t,a,o,r),function(n,e){return n+c[e]}),o),r.resizeTable(o.adjustTableWidth,a,l)},uT=function(n,e,t,r){var o=tW.fromTable(n),u=L(ok(o,n,r,oh,function(n){return n.getOrThunk(ts)}),function(n,r){return t===r?Math.max(e+n,ts()):n}),i=L(tW.justCells(o),function(n){var e=uy(n.row,n.row+n.rowspan,u);return{element:n.element,height:e,rowspan:n.rowspan}});j(L(o.all,function(n,e){return{element:n.element,height:u[e]}}),function(n){oa(n.element,n.height)}),j(i,function(n){oa(n.element,n.height)}),oa(n,V(u,function(n,e){return n+e},0))},ux=function(n,e,t,r,o){var u=tW.generate(e),i=r.getWidths(u,r),c=r.pixelWidth(),l=o.calcRedestributedWidths(i,c,t.pixelDelta,r.isRelative),a=l.newSizes,f=l.delta;uC(u,a,r),r.adjustTableWidth(f)},uR=function(n,e,t,r){var o=tW.generate(e),u=r.getWidths(o,r);uC(o,u,r)},uD=function(n){return L(n,C(0))},uO=function(n,e,t,r,o){return o(n.slice(0,e)).concat(r).concat(o(n.slice(t)))},uA=function(n){return function(e,t,r,o){if(!n(r))return r;var u=Math.abs(Math.max(o,e[t]-Math.abs(r))-e[t]);return r>=0?u:-u}},uk=uA(function(n){return n<0}),uI=uA(O),uB=function(){var n=function(n,e,t,r,o){var u=uk(n,e,r,o);return uO(n,e,t+1,[u,0],uD)},e=function(n,e,t,r){var o=(100+t)/100,u=Math.max(r,(n[e]+t)/o);return L(n,function(n,t){return(t===e?u:n/o)-n})},t=function(t,r,o,u,i,c){return c?e(t,r,u,i):n(t,r,o,u,i)};return{resizeTable:function(n,e){return n(e)},clampTableDelta:uk,calcLeftEdgeDeltas:t,calcMiddleDeltas:function(n,e,r,o,u,i,c){return t(n,r,o,u,i,c)},calcRightEdgeDeltas:function(n,t,r,o,u,i){if(i)return e(n,r,o,u);var c=uk(n,r,o,u);return uD(n.slice(0,r)).concat([c])},calcRedestributedWidths:function(n,e,t,r){if(!r)return{delta:t,newSizes:n};var o=(e+t)/e,u=L(n,function(n){return n/o});return{delta:100*o-100,newSizes:u}}}},uM=function(){var n=function(n,e,t,r,o){var u=uI(n,r>=0?t:e,r,o);return uO(n,e,t+1,[u,-u],uD)};return{resizeTable:function(n,e,t){t&&n(e)},clampTableDelta:function(n,e,t,r,o){return o?t>=0?t:Math.max(-q(n,function(n,e){return n+e-r},0),t):uk(n,e,t,r)},calcLeftEdgeDeltas:n,calcMiddleDeltas:function(e,t,r,o,u,i){return n(e,r,o,u,i)},calcRightEdgeDeltas:function(n,e,t,r,o,u){if(u)return uD(n);var i=r/n.length;return L(n,C(i))},calcRedestributedWidths:function(n,e,t,r){return{delta:0,newSizes:n}}}},uE={only:function(n,e){return{parent:C(B.from(n.dom.documentElement).map(nX.fromDom).getOr(n)),view:C(n),origin:C(r$(0,0)),isResizable:e}},body:function(n,e,t){return{parent:C(e),view:C(n),origin:C(r$(0,0)),isResizable:t}}},uP=rg([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),uN=function(n,e,t){var r=t.substring(0,t.length-n.length),o=parseFloat(r);return r===o.toString()?e(o):uP.invalid(t)},uz=nu(nu({},uP),{from:function(n){return nw(n,"%")?uN("%",uP.percent,n):nw(n,"px")?uN("px",uP.pixels,n):uP.invalid(n)}}),u_=function(n,e,t){var r=t/e;return L(n,function(n){return uz.from(n).fold(function(){return n},function(n){return n*r+"px"},function(n){return n/100*t+"px"})})},uL=function(n,e){var t=n.fold(function(){return C("")},function(n){return C(n/e+"px")},function(){return C(100/e+"%")});return _(e,t)},uj=function(n,e,t){var r=uz.from(t);return uH(Y(n,function(n){return"0px"===n})?uL(r,n.length):r.fold(function(){return n},function(t){return u_(n,e,t)},function(t){return L(n,function(n){return uz.from(n).fold(function(){return n},function(n){return n/e*100+"%"},function(n){return n+"%"})})}))},uW=function(n,e){return 0===n.length?e:V(n,function(n,e){return uz.from(e).fold(C(0),S,S)+n},0)},uF=function(n,e){var t=Math.floor(n);return{value:t+e,remainder:n-t}},uH=function(n){if(0===n.length)return n;var e,t,r=V(n,function(n,e){var t=uz.from(e).fold(function(){return{value:e,remainder:0}},function(n){return uF(n,"px")},function(n){return{value:n+"%",remainder:0}});return{output:[t.value].concat(n.output),remainder:n.remainder+t.remainder}},{output:[],remainder:0}),o=r.output;return o.slice(0,o.length-1).concat([(e=o[o.length-1],t=Math.round(r.remainder),uz.from(e).fold(C(e),function(n){return n+t+"px"},function(n){return n+t+"%"}))])},uV=uz.from,uq=function(n,e,t){j(e,function(e){var r=uW(n.slice(e.column,e.colspan+e.column),tf());e6(e.element,"width",r+t)})},uU=function(n,e,t){j(e,function(e,r){var o=uW([n[r]],tf());e6(e.element,"width",o+t)})},uG=function(n,e,t,r){j(t,function(e){var t=uW(n.slice(e.row,e.rowspan+e.row),ts());e6(e.element,"height",t+r)}),j(e,function(e,t){e6(e.element,"height",n[t])})},u$=function(n){return uV(n).fold(C("px"),C("px"),C("%"))},uK=function(n,e,t){var r=tW.fromTable(n),o=r.all,u=tW.justCells(r),i=tW.justColumns(r);e.each(function(e){var t=u$(e),o=rN(n),c=uj(oD(r,n,oS,oO),o,e);tW.hasColumns(r)?uU(c,i,t):uq(c,u,t),e6(n,"width",e)}),t.each(function(e){var t=u$(e),i=rU(n);uG(uj(ok(r,n,r6,oT,oO),i,e),o,u,t),e6(n,"height",e)})},uX=function(n){return og(n).exists(function(n){return or.test(n)})},uY=function(n){return og(n).exists(function(n){return oo.test(n)})},uJ=function(n){return og(n).isNone()},uQ=function(n){return tW.fromTable(n).grid},uZ=function(n){var e=[];return{bind:function(n){if(void 0===n)throw Error("Event bind error: undefined handler");e.push(n)},unbind:function(n){e=H(e,function(e){return e!==n})},trigger:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o={};j(n,function(n,e){o[n]=t[e]}),j(e,function(n){n(o)})}}},u0=function(n){return{registry:n4(n,function(n){return{bind:n.bind,unbind:n.unbind}}),trigger:n4(n,function(n){return n.trigger})}},u1=function(n,e){var t=null,r=function(){g(t)||(clearTimeout(t),t=null)};return{cancel:r,throttle:function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];r(),t=setTimeout(function(){t=null,n.apply(null,o)},e)}}},u9=function(n){return n.slice(0).sort()},u2=function(n,e){throw Error("All required keys ("+u9(n).join(", ")+") were not specified. Specified keys were: "+u9(e).join(", ")+".")},u3=function(n){throw Error("Unsupported keys for object: "+u9(n).join(", "))},u5=function(n,e){if(!d(e))throw Error("The "+n+" fields must be an array. Was: "+e+".");j(e,function(e){if(!s(e))throw Error("The value "+e+" in the "+n+" fields was not a string.")})},u4=function(n,e){throw Error("All values need to be of type: "+e+". Keys ("+u9(n).join(", ")+") were not.")},u7=function(n){var e=u9(n);G(e,function(n,t){return t<e.length-1&&n===e[t+1]}).each(function(n){throw Error("The field: "+n+" occurs more than once in the combined fields: ["+e.join(", ")+"].")})},u6=function(n,e,t){if(0===e.length)throw Error("You must specify at least one required field.");return u5("required",e),u7(e),function(r){var o=n2(r);Y(e,function(n){return N(o,n)})||u2(e,o),n(e,o);var u=H(e,function(n){return!t.validate(r[n],n)});return u.length>0&&u4(u,t.label),r}},u8=function(n,e){var t=H(e,function(e){return!N(n,e)});t.length>0&&u3(t)},ie=function(n){return u6(u8,n,{validate:v,label:"function"})},it=ie(["compare","extract","mutate","sink"]),ir=ie(["element","start","stop","destroy"]),io=ie(["forceDrop","drop","move","delayDrop"]),iu=function(){var n=B.none(),e=function(e,t){var r=n.map(function(n){return e.compare(n,t)});return n=B.some(t),r},t=u0({move:uZ(["info"])});return{onEvent:function(n,r){r.extract(n).each(function(n){e(r,n).each(function(n){t.trigger.move(n)})})},reset:function(){n=B.none()},events:t.registry}},ii=function(){var n={onEvent:y,reset:y,events:u0({move:uZ(["info"])}).registry},e=iu(),t=n;return{on:function(){t.reset(),t=e},off:function(){t.reset(),t=n},isOn:function(){return t===e},onEvent:function(n,e){t.onEvent(n,e)},events:e.events}},ic=function(n,e,t){var r=!1,o=u0({start:uZ([]),stop:uZ([])}),u=ii(),i=function(){a.stop(),u.isOn()&&(u.off(),o.trigger.stop())},c=u1(i,200);u.events.move.bind(function(t){e.mutate(n,t.info)});var l=function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r&&n.apply(null,e)}},a=e.sink(io({forceDrop:i,drop:l(i),move:l(function(n){c.cancel(),u.onEvent(n,e)}),delayDrop:l(c.throttle)}),t);return{element:a.element,go:function(n){a.start(n),u.on(),o.trigger.start()},on:function(){r=!0},off:function(){r=!1},destroy:function(){a.destroy()},events:o.registry}},il=function(n){var e=nX.fromDom(eM(n).getOr(n.target)),t=function(){return n.stopPropagation()},r=function(){return n.preventDefault()};return{target:e,x:n.clientX,y:n.clientY,stop:t,prevent:r,kill:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return r(t.apply(null,n))},raw:n}},ia=function(n,e,t,r,o){var u=function(n){t(n)&&r(il(n))};return n.dom.addEventListener(e,u,o),{unbind:x(is,n,e,u,o)}},is=function(n,e,t,r){n.dom.removeEventListener(e,t,r)},im=function(n,e,t){return ia(n,e,O,t,!1)},id=function(n,e){var t=eJ(n,e);return void 0===t||""===t?[]:t.split(" ")},ig=function(n,e,t){var r=id(n,e).concat([t]);return eK(n,e,r.join(" ")),!0},ip=function(n,e,t){var r=H(id(n,e),function(n){return n!==t});return r.length>0?eK(n,e,r.join(" ")):eZ(n,e),!1},ib=function(n){return void 0!==n.dom.classList},ih=function(n,e){ib(n)?n.dom.classList.add(e):ig(n,"class",e)},iv=function(n){0===(ib(n)?n.dom.classList:id(n,"class")).length&&eZ(n,"class")},iw=function(n,e){return ib(n)&&n.dom.classList.contains(e)},iy=function(n){var e=n.replace(/\./g,"-");return{resolve:function(n){return e+"-"+n}}},iC=iy("ephox-dragster").resolve,iS=function(n){var e=nu({layerClass:iC("blocker")},n),t=nX.fromTag("div");return eK(t,"role","presentation"),e8(t,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),ih(t,iC("blocker")),ih(t,e.layerClass),{element:C(t),destroy:function(){t7(t)}}},iT=it({compare:function(n,e){return r$(e.left-n.left,e.top-n.top)},extract:function(n){return B.some(r$(n.x,n.y))},sink:function(n,e){var t=iS(e),r=im(t.element(),"mousedown",n.forceDrop),o=im(t.element(),"mouseup",n.drop),u=im(t.element(),"mousemove",n.move),i=im(t.element(),"mouseout",n.delayDrop);return ir({element:t.element,start:function(n){t0(n,t.element())},stop:function(){t7(t.element())},destroy:function(){t.destroy(),o.unbind(),u.unbind(),i.unbind(),r.unbind()}})},mutate:function(n,e){n.mutate(e.left,e.top)}}),ix=function(n){return eG(n,"[contenteditable]")},iR=function(n,e){return(void 0===e&&(e=!1),!nG().browser.isIE()&&eP(n))?n.dom.isContentEditable:ix(n).fold(C(e),function(n){return"true"===iD(n)})},iD=function(n){return n.dom.contentEditable},iO=iy("ephox-snooker").resolve,iA=function(){var n=u0({drag:uZ(["xDelta","yDelta"])});return{mutate:function(e,t){n.trigger.drag(e,t)},events:n.registry}},ik=function(){var n=u0({drag:uZ(["xDelta","yDelta","target"])}),e=B.none(),t=iA();return t.events.drag.bind(function(t){e.each(function(e){n.trigger.drag(t.xDelta,t.yDelta,e)})}),{assign:function(n){e=B.some(n)},get:function(){return e},mutate:t.mutate,events:n.registry}},iI=function(n,e,t,r,o){var u=nX.fromTag("div");return e8(u,{position:"absolute",left:e-r/2+"px",top:t+"px",height:o+"px",width:r+"px"}),eX(u,{"data-column":n,role:"presentation"}),u},iB=function(n,e,t,r,o){var u=nX.fromTag("div");return e8(u,{position:"absolute",left:e+"px",top:t-o/2+"px",height:o+"px",width:r+"px"}),eX(u,{"data-row":n,role:"presentation"}),u},iM=iO("resizer-bar"),iE=iO("resizer-rows"),iP=iO("resizer-cols"),iN=function(n,e){var t=[];return _(n.grid.columns,function(r){tW.getColumnAt(n,r).map(function(n){return n.element}).forall(e)&&t.push(r)}),H(t,function(t){return Y(tW.filterItems(n,function(n){return n.column===t}),function(n){return e(n.element)})})},iz=function(n){j(ej(n.parent(),"."+iM),t7)},i_=function(n,e,t){var r=n.origin();j(e,function(e){e.each(function(e){var o=t(r,e);ih(o,iM),t0(n.parent(),o)})})},iL=function(n,e,t,r){i_(n,e,function(n,e){var o=iI(e.col,e.x-n.left,t.top-n.top,7,r);return ih(o,iP),o})},ij=function(n,e,t,r){i_(n,e,function(n,e){var o=iB(e.row,t.left-n.left,e.y-n.top,r,7);return ih(o,iE),o})},iW=function(n,e,t,r,o){var u=rY(t),i=e.isResizable,c=r.length>0?r6.positions(r,t):[],l=c.length>0?X(n.all,function(n,e){return i(n.element)?[e]:[]}):[];ij(e,H(c,function(n,e){return z(l,function(n){return e===n})}),u,rz(t));var a=o.length>0?on.positions(o,t):[],f=a.length>0?iN(n,i):[];iL(e,H(a,function(n,e){return z(f,function(n){return e===n})}),u,rG(t))},iF=function(n,e){if(iz(n),n.isResizable(e)){var t=tW.fromTable(e),r=rW(t),o=rL(t);iW(t,n,e,r,o)}},iH=function(n,e){j(ej(n.parent(),"."+iM),e)},iV=function(n){iH(n,function(n){e6(n,"display","none")})},iq=function(n){iH(n,function(n){e6(n,"display","block")})},iU=iO("resizer-bar-dragging"),iG=function(n){var e,t=ik(),r=ic(t,void 0!==(e={}).mode?e.mode:iT,e),o=B.none(),u=function(n,e){return B.from(eJ(n,e))};t.events.drag.bind(function(n){u(n.target,"data-row").each(function(e){var t=ta(n.target,"top");e6(n.target,"top",t+n.yDelta+"px")}),u(n.target,"data-column").each(function(e){var t=ta(n.target,"left");e6(n.target,"left",t+n.xDelta+"px")})});var i=function(n,e){return ta(n,e)-tu(n,"data-initial-"+e,0)};r.events.stop.bind(function(){t.get().each(function(e){o.each(function(t){u(e,"data-row").each(function(n){var r=i(e,"top");eZ(e,"data-initial-top"),s.trigger.adjustHeight(t,r,parseInt(n,10))}),u(e,"data-column").each(function(n){var r=i(e,"left");eZ(e,"data-initial-left"),s.trigger.adjustWidth(t,r,parseInt(n,10))}),iF(n,t)})})});var c=function(e,o){s.trigger.startAdjust(),t.assign(e),eK(e,"data-initial-"+o,ta(e,o)),ih(e,iU),e6(e,"opacity","0.2"),r.go(n.parent())},l=im(n.parent(),"mousedown",function(n){iw(n.target,iE)&&c(n.target,"top"),iw(n.target,iP)&&c(n.target,"left")}),a=function(e){return n0(e,n.view())},f=im(n.view(),"mouseover",function(e){eG(e.target,"table",a).filter(iR).fold(function(){eP(e.target)&&iz(n)},function(e){o=B.some(e),iF(n,e)})}),s=u0({adjustHeight:uZ(["table","delta","row"]),adjustWidth:uZ(["table","delta","column"]),startAdjust:uZ([])});return{destroy:function(){l.unbind(),f.unbind(),r.destroy(),iz(n)},refresh:function(e){iF(n,e)},on:r.on,off:r.off,hideBars:x(iV,n),showBars:x(iq,n),events:s.registry}},i$={create:function(n,e,t){var r=iG(n),o=u0({beforeResize:uZ(["table","type"]),afterResize:uZ(["table","type"]),startDrag:uZ([])});return r.events.adjustHeight.bind(function(n){var e=n.table;o.trigger.beforeResize(e,"row");var t=r6.delta(n.delta,e);uT(e,t,n.row,r6),o.trigger.afterResize(e,"row")}),r.events.startAdjust.bind(function(n){o.trigger.startDrag()}),r.events.adjustWidth.bind(function(n){var r=n.table;o.trigger.beforeResize(r,"col");var u=on.delta(n.delta,r),i=t(r);uS(r,u,n.column,e,i),o.trigger.afterResize(r,"col")}),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:o.registry}}},iK=function(n,e){return n.fire("newrow",{node:e})},iX=function(n,e){return n.fire("newcell",{node:e})},iY=function(n,e,t,r,o){n.fire("ObjectResizeStart",{target:e,width:t,height:r,origin:o})},iJ=function(n,e,t,r,o){n.fire("ObjectResized",{target:e,width:t,height:r,origin:o})},iQ=function(n,e,t,r,o){n.fire("TableSelectionChange",{cells:e,start:t,finish:r,otherCells:o})},iZ=function(n){n.fire("TableSelectionClear")},i0=function(n,e,t){n.fire("TableModified",nu(nu({},t),{table:e}))},i1={structure:!1,style:!0},i9={structure:!0,style:!1},i2={structure:!0,style:!0},i3={"border-collapse":"collapse",width:"100%"},i5=_(5,function(n){var e=n+1+"px";return{title:e,value:e}}),i4=L(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],function(n){return{title:n,value:n.toLowerCase()}}),i7=function(n){var e;if(cd(n)){var t=n.dom,r=null!==(e=t.getParent(n.selection.getStart(),t.isBlock))&&void 0!==e?e:n.getBody(),o=r_(nX.fromDom(r));return nu(nu({},i3),{width:o+"px"})}return cg(n)?n6(i3,function(n,e){return"width"!==e}):i3},i6={border:"1"},i8="preservetable",cn=function(n){return n.getParam("table_sizing_mode","auto")},ce=function(n){return n.getParam("table_responsive_width")},ct=function(n){return n.getParam("table_border_widths",i5,"array")},cr=function(n){return n.getParam("table_border_styles",i4,"array")},co=function(n){return n.getParam("table_default_attributes",i6,"object")},cu=function(n){return n.getParam("table_default_styles",i7(n),"object")},ci=function(n){return n.getParam("table_cell_advtab",!0,"boolean")},cc=function(n){return n.getParam("table_row_advtab",!0,"boolean")},cl=function(n){return n.getParam("table_advtab",!0,"boolean")},ca=function(n){return n.getParam("table_style_by_css",!1,"boolean")},cf=function(n){return n.getParam("table_cell_class_list",[],"array")},cs=function(n){return n.getParam("table_class_list",[],"array")},cm=function(n){return"relative"===cn(n)||!0===ce(n)},cd=function(n){return"fixed"===cn(n)||!1===ce(n)},cg=function(n){return"responsive"===cn(n)},cp=function(n){var e="section",t=n.getParam("table_header_type",e,"string");return N(["section","cells","sectionCells","auto"],t)?t:e},cb=function(n){var e=n.getParam("table_column_resizing",i8,"string");return G(["preservetable","resizetable"],function(n){return n===e}).getOr(i8)},ch=function(n){return"preservetable"===cb(n)},cv=function(n){return"resizetable"===cb(n)},cw=function(n){var e=n.getParam("table_clone_elements");return s(e)?B.some(e.split(/[ ,]/)):Array.isArray(e)?B.some(e):B.none()},cy=function(n){var e=n.getParam("object_resizing",!0);return s(e)?"table"===e:e},cC=function(n){return n.getParam("table_background_color_map",[],"array")},cS=function(n){return n.getParam("table_border_color_map",[],"array")},cT=function(n,e){return cm(n)?oP.percentageSize(e):cd(n)?oP.pixelSize(e):oP.getTableSize(e)},cx=function(n){eZ(n,"width")},cR=function(n){var e=ow(n);uK(n,B.some(e),B.none()),cx(n)},cD=function(n){var e=rN(n)+"px";uK(n,B.some(e),B.none()),cx(n)},cO=function(n){tr(n,"width");var e=tb(n);j(e.length>0?e:tp(n),function(n){tr(n,"width"),cx(n)}),cx(n)},cA=function(n){var e=tW.fromTable(n);tW.hasColumns(e)||j(tp(n),function(n){var e=tn(n,"width");e6(n,"width",e),eZ(n,"width")})},ck=function(){var n=nX.fromTag("div");return e8(n,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),t0(eN(nX.fromDom(document)),n),n},cI=function(n,e){n.inline&&t7(e.parent())},cB="bar-",cM=function(n){return"false"!==eJ(n,"data-mce-resize")},cE=function(n){var e,t,r=B.none(),o=B.none(),u=B.none(),i=function(n){return"TABLE"===n.nodeName},c=function(){return o},l=function(e){return cT(n,e)},a=function(){return ch(n)?uM():uB()},f=function(r,o,u){var i,c,f=nw(o,"e");if(""===t&&cR(r),u!==e&&""!==t){e6(r,"width",t);var s=a(),m=l(r),d=ch(n)||f?uQ(r).columns-1:0;uS(r,u-e,d,s,m)}else i=t,/^(\d+(\.\d+)?)%$/.test(i)&&e6(r,"width",u*parseFloat(t.replace("%",""))/e+"%");c=t,/^(\d+(\.\d+)?)px$/.test(c)&&cA(r)};return n.on("init",function(){var e=n.inline?uE.body(o5(n),ck(),cM):uE.only(nX.fromDom(n.getDoc()),cM);if(u=B.some(e),cy(n)&&n.getParam("table_resize_bars",!0,"boolean")){var t=a(),i=i$.create(e,t,l);i.on(),i.events.startDrag.bind(function(e){r=B.some(n.selection.getRng())}),i.events.beforeResize.bind(function(e){var t=e.table.dom;iY(n,t,o4(t),o7(t),cB+e.type)}),i.events.afterResize.bind(function(e){var t=e.table,o=t.dom;un(t),r.each(function(e){n.selection.setRng(e),n.focus()}),iJ(n,o,o4(o),o7(o),cB+e.type),n.undoManager.add()}),o=B.some(i)}}),n.on("ObjectResizeStart",function(r){var o=r.target;if(i(o)){var u=nX.fromDom(o);j(n.dom.select(".mce-clonedresizable"),function(e){n.dom.addClass(e,"mce-"+cb(n)+"-columns")}),!uY(u)&&cd(n)?cD(u):!uX(u)&&cm(n)&&cR(u),uJ(u)&&nv(r.origin,cB)&&cR(u),e=r.width,t=cg(n)?"":ue(n,o).getOr("")}}),n.on("ObjectResized",function(e){var t=e.target;if(i(t)){var r=nX.fromDom(t),o=e.origin;nv(o,"corner-")&&f(r,o,e.width),un(r),i0(n,r.dom,i1)}}),n.on("SwitchMode",function(){c().each(function(e){n.mode.isReadOnly()?e.hideBars():e.showBars()})}),{lazyResize:c,lazyWire:function(){return u.getOr(uE.only(nX.fromDom(n.getBody()),cM))},destroy:function(){o.each(function(n){n.destroy()}),u.each(function(e){cI(n,e)})}}},cP=function(n,e){return{element:n,offset:e}},cN=function(n,e,t){return n.property().isText(e)&&0===n.property().getText(e).trim().length||n.property().isComment(e)?t(e).bind(function(e){return cN(n,e,t).orThunk(function(){return B.some(e)})}):B.none()},cz=function(n,e){return n.property().isText(e)?n.property().getText(e).length:n.property().children(e).length},c_=function(n,e){var t=cN(n,e,n.query().prevSibling).getOr(e);if(n.property().isText(t))return cP(t,cz(n,t));var r=n.property().children(t);return r.length>0?c_(n,r[r.length-1]):cP(t,cz(n,t))},cL=ro(),cj=function(n,e){1===ti(n,"colspan")&&og(n).bind(function(n){var e;return e=["fixed","relative","empty"],B.from(ot.exec(n)).bind(function(n){var t=Number(n[1]),r=n[2];return z(e,function(n){return z(oe[n],function(n){return r===n})})?B.some({value:t,unit:r}):B.none()})}).each(function(t){var r=t.value/2;ov(n,r,t.unit),ov(e,r,t.unit)})},cW=ew("th"),cF=function(n){return Y(n,function(n){return cW(n.element)})},cH=function(n){var e="thead"===n.section,t=e1(cV(n.cells),"th");return e||t?{type:"header",subType:e&&t?"sectionCells":e?"section":"cells"}:"tfoot"===n.section?{type:"footer"}:{type:"body"}},cV=function(n){var e=H(n,function(n){return cW(n.element)});return 0===e.length?B.some("td"):e.length===n.length?B.some("th"):B.none()},cq=function(n){var e=L(n,function(n){return cH(n).type}),t=N(e,"header"),r=N(e,"footer");if(!t&&!r)return B.some("body");var o=N(e,"body");return!t||o||r?t||o||!r?B.none():B.some("footer"):B.some("header")},cU=function(n,e,t){return ea(t(n.element,e),!0,n.isLocked)},cG=function(n,e){return n.section!==e?ef(n.element,n.cells,e,n.isNew):n},c$=function(){return{transformRow:cG,transformCell:function(n,e,t){var r=t(n.element,e);return ea("td"!==es(r)?rD(r,"td"):r,n.isNew,n.isLocked)}}},cK=function(){return{transformRow:cG,transformCell:cU}},cX=function(){return{transformRow:function(n,e){return cG(n,"thead"===e?"tbody":e)},transformCell:cU}},cY={getTableSectionType:function(n,e){switch(no(tW.fromTable(n).all,function(n){var e=cH(n);return"header"===e.type?B.from(e.subType):B.none()}).getOr(e)){case"section":return c$();case"sectionCells":return cK();case"cells":return cX()}},section:c$,sectionCells:cK,cells:cX,fallback:function(){return{transformRow:S,transformCell:cU}}},cJ=function(n,e,t,r){t===r?eZ(n,e):eK(n,e,t)},cQ=function(n,e,t){nr(eL(n,e)).fold(function(){return tZ(n,t)},function(n){return tQ(n,t)})},cZ=function(n,e){var t=eq(n,e).getOrThunk(function(){var t=nX.fromTag(e,ey(n).dom);return"thead"===e?cQ(n,"caption,colgroup",t):"colgroup"===e?cQ(n,"caption",t):t0(n,t),t});return t4(t),t},c0=function(n,e){var t=[],r=[],o=function(e,o){t5(cZ(n,o),("colgroup"===o?function(n){return X(n,function(n){return L(n.cells,function(n){return cJ(n.element,"span",n.colspan,1),n.element})})}:function(n){return L(n,function(n){n.isNew&&t.push(n.element);var e=n.element;return t4(e),j(n.cells,function(n){n.isNew&&r.push(n.element),cJ(n.element,"colspan",n.colspan,1),cJ(n.element,"rowspan",n.rowspan,1),t0(e,n.element)}),e})})(e))},u=function(e){eq(n,e).each(t7)},i=function(n,e){n.length>0?o(n,e):u(e)},c=[],l=[],a=[],f=[];return j(e,function(n){switch(n.section){case"thead":c.push(n);break;case"tbody":l.push(n);break;case"tfoot":a.push(n);break;case"colgroup":f.push(n)}}),i(f,"colgroup"),i(c,"thead"),i(l,"tbody"),i(a,"tfoot"),{newRows:t,newCells:r}},c1=function(n,e){if(0===n.length)return 0;var t=n[0];return $(n,function(n){return!e(t.element,n.element)}).getOr(n.length)},c9=function(n,e,t,r){var o=n[e],u="colgroup"===o.section;return{colspan:c1(o.cells.slice(t),r),rowspan:u?1:c1(L(n.slice(e),function(n){return tA(n,t)}),r)}},c2=function(n,e){var t=L(n,function(n){return L(n.cells,D)}),r=function(n,e,r,o){for(var u=n;u<n+r;u++)for(var i=e;i<e+o;i++)t[u][i]=!0};return L(n,function(o,u){var i=X(o.cells,function(o,i){if(!1!==t[u][i])return[];var c,l=c9(n,u,i,e);return r(u,i,l.rowspan,l.colspan),[(c=o.element,{element:c,rowspan:l.rowspan,colspan:l.colspan,isNew:o.isNew})]});return{element:o.element,cells:i,section:o.section,isNew:o.isNew}})},c3=function(n,e,t){var r=[];j(n.colgroups,function(o){for(var u=[],i=0;i<n.grid.columns;i++){var c=tW.getColumnAt(n,i).map(function(n){return ea(n.element,t,!1)}).getOrThunk(function(){return ea(e.colGap(),!0,!1)});u.push(c)}r.push(ef(o.element,u,"colgroup",t))});for(var o=0;o<n.grid.rows;o++){for(var u=[],i=0;i<n.grid.columns;i++){var c=tW.getAt(n,o,i).map(function(n){return ea(n.element,t,n.isLocked)}).getOrThunk(function(){return ea(e.gap(),!0,!1)});u.push(c)}var l=n.all[o],a=ef(l.element,u,l.section,t);r.push(a)}return r},c5=function(n){return c2(n,n0)},c4=function(n,e){return no(n.all,function(n){return G(n.cells,function(n){return n0(e,n.element)})})},c7=function(n,e,t){var r=e9(L(e.selection,function(e){return tg(e).bind(function(e){return c4(n,e)}).filter(t)}));return e3(r.length>0,r)},c6=function(n,e,t,r,o){return function(u,i,c,l,a){var f=tW.fromTable(i),s=B.from(null==a?void 0:a.section).getOrThunk(cY.fallback);return e(f,c).map(function(e){var t=n(c3(f,l,!1),e,n0,o(l),s),r=tN(t.grid);return{info:e,grid:c5(t.grid),cursor:t.cursor,lockedColumns:r}}).bind(function(n){var e=c0(i,n.grid),o=B.from(null==a?void 0:a.sizing).getOrThunk(function(){return oP.getTableSize(i)}),c=B.from(null==a?void 0:a.resize).getOrThunk(uM);return t(i,n.grid,n.info,{sizing:o,resize:c,section:s}),r(i),iF(u,i),eZ(i,tE),n.lockedColumns.length>0&&eK(i,tE,n.lockedColumns.join(",")),B.some({cursor:n.cursor,newRows:e.newRows,newCells:e.newCells})})}},c8=function(n,e){return c7(n,e,O).map(function(n){return{cells:n,generators:e.generators,clipboard:e.clipboard}})},ln=function(n,e){return c7(n,e,O)},le=function(n,e){return c7(n,e,function(n){return!n.isLocked})},lt=function(n,e){return Y(e,function(e){return c4(n,e).exists(function(n){return!n.isLocked})})},lr=function(n,e){return e.mergable.filter(function(e){return lt(n,e.cells)})},lo=function(n,e){return e.unmergable.filter(function(e){return lt(n,e)})},lu=function(n,e,t,r){var o=tB(n).rows;if(0===o.length)return n;for(var u=e.startRow;u<=e.finishRow;u++)for(var i=e.startCol;i<=e.finishCol;i++){var c=o[u],l=tA(c,i).isLocked;tR(c,i,ea(r(),!1,l))}return n},li=function(n,e,t,r){for(var o=tB(n).rows,u=!0,i=0;i<o.length;i++)for(var c=0;c<tI(o[0]);c++){var l=o[i],a=tA(l,c),f=t(a.element,e);!0===f&&!1===u?tR(l,c,ea(r(),!0,a.isLocked)):!0===f&&(u=!1)}return n},lc=function(n,e,t,r){var o=tB(n).rows;return e>0&&e<o.length&&j(q(o[e-1].cells,function(n,e){return z(n,function(n){return t(n.element,e.element)})?n:n.concat([e])},[]),function(n){for(var u=B.none(),i=e;i<o.length;i++)for(var c=function(e){var c=o[i],l=tA(c,e);t(l.element,n.element)&&(u.isNone()&&(u=B.some(r())),u.each(function(n){tR(c,e,ea(n,!0,l.isLocked))}))},l=0;l<tI(o[0]);l++)c(l)}),n},ll=function(n){return{isValue:O,isError:D,getOr:C(n),getOrThunk:C(n),getOrDie:C(n),or:function(e){return ll(n)},orThunk:function(e){return ll(n)},fold:function(e,t){return t(n)},map:function(e){return ll(e(n))},mapError:function(e){return ll(n)},each:function(e){e(n)},bind:function(e){return e(n)},exists:function(e){return e(n)},forall:function(e){return e(n)},toOptional:function(){return B.some(n)}}},la=function(n){return{isValue:D,isError:O,getOr:S,getOrThunk:function(n){return n()},getOrDie:function(){var e;return(e=String(n),function(){throw Error(e)})()},or:S,orThunk:function(n){return n()},fold:function(e,t){return e(n)},map:function(e){return la(n)},mapError:function(e){return la(e(n))},each:y,bind:function(e){return la(n)},exists:D,forall:O,toOptional:B.none}},lf={value:ll,error:la},ls=function(n,e,t){if(n.row>=e.length||n.column>tI(e[0]))return lf.error("invalid start address out of table bounds, row: "+n.row+", column: "+n.column);var r=e.slice(n.row),o=r[0].cells.slice(n.column),u=tI(t[0]),i=t.length;return lf.value({rowDelta:r.length-i,colDelta:o.length-u})},lm=function(n,e){return{rowDelta:0,colDelta:tI(n[0])-tI(e[0])}},ld=function(n,e){return{rowDelta:n.length-e.length,colDelta:0}},lg=function(n,e,t,r){var o="colgroup"===e.section?t.col:t.cell;return _(n,function(n){return ea(o(),!0,r(n))})},lp=function(n,e,t,r){var o=n[n.length-1];return n.concat(_(e,function(){var n="colgroup"===o.section?t.colgroup:t.row,e=tM(o,n,S),u=lg(e.cells.length,e,t,function(n){return er(r,n.toString())});return tD(e,u)}))},lb=function(n,e,t,r){return L(n,function(n){var o=lg(e,n,t,D);return tT(n,r,o)})},lh=function(n,e,t){var r=e.colDelta<0?lb:S,o=e.rowDelta<0?lp:S,u=tN(n),i=tI(n[0]),c=z(u,function(n){return n===i-1}),l=r(n,Math.abs(e.colDelta),t,c?i-1:i),a=tN(l);return o(l,Math.abs(e.rowDelta),t,Q(a,O))},lv=function(n,e,t,r){var o=x(r,tA(n[e],t).element),u=n[e];return n.length>1&&tI(u)>1&&(t>0&&o(tk(u,t-1))||t<u.cells.length-1&&o(tk(u,t+1))||e>0&&o(tk(n[e-1],t))||e<n.length-1&&o(tk(n[e+1],t)))},lw=function(n,e,t,r,o,u){for(var i=n.row,c=n.column,l=t.length,a=tI(t[0]),f=i+l,s=c+a+u.length,m=Q(u,O),d=i;d<f;d++)for(var g=0,p=c;p<s;p++){if(m[p]){g++;continue}lv(e,d,p,o)&&li(e,tk(e[d],p),o,r.cell);var b=p-c-g,h=tA(t[d-i],b),v=h.element,w=r.replace(v);tR(e[d],p,ea(w,!0,h.isLocked))}return e},ly=function(n,e,t){var r=tI(e[0]);return{row:tB(e).cols.length+n.row,column:G(_(r-n.column,function(e){return e+n.column}),function(n){return Y(t,function(e){return e!==n})}).getOr(r-1)}},lC=function(n,e,t){return H(t,function(t){return t>=n.column&&t<=tI(e[0])+n.column})},lS=function(n,e,t,r,o){var u=tN(e),i=ly(n,e,u),c=tB(t).rows,l=lC(i,c,u);return ls(i,e,c).map(function(n){var t=lh(e,nu(nu({},n),{colDelta:n.colDelta-l.length}),r),u=lC(i,c,tN(t));return lw(i,t,c,r,o,u)})},lT=function(n,e,t,r,o){u=r.cell,n>0&&n<e[0].cells.length&&j(e,function(e){var t=e.cells[n-1],r=e.cells[n];o(r.element,t.element)&&tR(e,n,ea(u(),!0,r.isLocked))});var u,i=ld(t,e),c=lh(t,i,r),l=ld(e,c);return L(lh(e,l,r),function(e,t){return tT(e,n,c[t].cells)})},lx=function(n,e,t,r,o){lc(e,n,o,r.cell);var u=tN(e),i=lm(e,t),c=lh(e,nu(nu({},i),{colDelta:i.colDelta-u.length}),r),l=tB(c),a=l.cols,f=l.rows,s=tN(c),m=lm(t,e),d=nu(nu({},m),{colDelta:m.colDelta+s.length}),g=lh(L(t,function(n){return q(s,function(e,t){return tx(e,t,lg(1,n,r,O)[0])},n)}),d,r);return a.concat(f.slice(0,n)).concat(g).concat(f.slice(n,f.length))},lR=function(n,e,t,r,o){var u=tB(n),i=u.rows,c=u.cols,l=i.slice(0,e),a=i.slice(e),f=tM(i[t],function(n){return o(n,r)},function(n,t){return e>0&&e<i.length&&r(tk(i[e-1],t),tk(i[e],t))?tA(i[e],t):ea(o(n.element,r),!0,n.isLocked)});return c.concat(l).concat([f]).concat(a)},lD=function(n,e,t,r,o){return L(n,function(n){var u=e>0&&e<tI(n)&&r(tk(n,e-1),tk(n,e)),i="colgroup"!==n.section&&u?tA(n,e):ea(o(tA(n,t).element,r),!0,!1);return tx(n,e,i)})},lO=function(n,e,t){var r=tB(n),o=r.rows;return r.cols.concat(o.slice(0,e)).concat(o.slice(t+1))},lA=function(n,e,t,r){var o;return void 0!==tk(n[e],t)&&e>0&&r(tk(n[e-1],t),tk(n[e],t))||(o=n[e],t>0&&r(tk(o,t-1),tk(o,t)))},lk=function(n,e,t,r){var o=function(n){return("row"===n?tl(e):tc(e))?n+"group":n};return n?cW(e)?o(t):null:r&&cW(e)?o("row"===t?"col":"row"):null},lI=function(n,e,t){return ea(t(n.element,e),!0,n.isLocked)},lB=function(n,e,t,r,o,u,i){return L(n,function(n,c){return tO(n,function(n,l){if(!z(e,function(e){return t(n.element,e.element)}))return n;var a=i(n,c,l)?o(n,t,r):n;return u(a,c,l).each(function(n){eY(a.element,{scope:B.from(n)})}),a})})},lM=function(n,e,t){return X(n,function(r,o){return lA(n,o,e,t)?[]:[tA(r,e)]})},lE=function(n,e,t,r,o){var u=tB(n).rows,i=X(e,function(n){return lM(u,n,r)}),c=L(n,function(n){return cF(n.cells)}),l=Y(c,S)&&cF(i)?O:function(n,e,t){return!("th"===es(n.element)&&c[e])};return lB(n,i,r,o,lI,function(n,e){return B.some(lk(t,n.element,"row",c[e]))},l)},lP=function(n,e,t,r,o,u,i){var c=tB(n),l=c.cols,a=c.rows,f=a[e[0]],s=X(e,function(n){return X(a[n].cells,function(e,t){return lA(a,n,t,o)?[]:[e]})}),m=L(f.cells,function(n,e){return cF(lM(a,e,o))}),d=ni([],a,!0);j(e,function(n){d[n]=i.transformRow(a[n],t)});var g=l.concat(d),p=Y(m,S)&&cF(f.cells)?O:function(n,e,t){return!("th"===es(n.element)&&m[t])};return lB(g,s,o,u,i.transformCell,function(n,e,t){return B.some(lk(r,n.element,"col",m[t]))},p)},lN=function(n,e,t,r){var o=tB(n).rows;return lB(n,L(e,function(n){return tA(o[n.row],n.column)}),t,r,lI,B.none,O)},lz=function(n){return q(n,function(n,e){return z(n,function(n){return n.column===e.column})?n:n.concat([e])},[]).sort(function(n,e){return n.column-e.column})},l_=ew("col"),lL=ew("colgroup"),lj=function(n){return"tr"===es(n)||lL(n)},lW=function(n){var e=tu(n,"colspan",1),t=tu(n,"rowspan",1);return{element:n,colspan:e,rowspan:t}},lF=function(n){return eQ(n,"scope").map(function(n){return n.substr(0,3)})},lH=function(n,e){void 0===e&&(e=lW);var t=function(t){if(lj(t))return lL((o={element:t}).element)?n.colgroup(o):n.row(o);var o,u,i=l_((u=e(t)).element)?n.col(u):n.cell(u);return r=B.some({item:t,replacement:i}),i},r=B.none();return{getOrInit:function(n,e){return r.fold(function(){return t(n)},function(r){return e(n,r.item)?r.replacement:t(n)})}}},lV=function(n){return function(e){var t=[],r=function(r){var o=e.replace(r,n,"td"===n?{scope:null}:{});return t.push({item:r,sub:o}),o};return{replaceOrInit:function(n,e){return lj(n)||l_(n)?n:G(t,function(t){return e(t.item,n)}).fold(function(){return r(n)},function(t){return e(n,t.item)?t.sub:r(n)})}}}},lq=function(n){return{unmerge:function(e){var t=lF(e);return t.each(function(n){return eK(e,"scope",n)}),function(){var r=n.cell({element:e,colspan:1,rowspan:1});return tr(r,"width"),tr(e,"width"),t.each(function(n){return eK(r,"scope",n)}),r}},merge:function(n){return tr(n[0],"width"),(function(){var e=e9(L(n,lF));if(0===e.length)return B.none();var t=e[0],r=["row","col"];return z(e,function(n){return n!==t&&N(r,n)})?B.none():B.from(t)})().fold(function(){return eZ(n[0],"scope")},function(e){return eK(n[0],"scope",e+"group")}),C(n[0])}}},lU=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],lG=ro(),l$=function(n){return N(lU,lG.property().name(n))},lK=function(n){return N(["ol","ul"],lG.property().name(n))},lX=function(n){var e,t=function(n){return"br"===es(n)},r=0===(e=X(n,function(n){var e=eD(n);return Y(e,function(n){return t(n)||eb(n)&&0===rn(n).trim().length})?[]:e.concat(oU(n).bind(function(e){var r=eR(e).map(function(n){var e;return!!l$(n)||(e=n,!!N(["br","img","hr","input"],lG.property().name(e))&&"img"!==es(n))}).getOr(!1);return eS(e).map(function(o){var u;return!0===r||"li"===es(u=o)||eF(u,lK).isSome()||t(e)||l$(o)&&!n0(n,o)?[]:[nX.fromTag("br")]})}).getOr([]))})).length?[nX.fromTag("br")]:e;t4(n[0]),t5(n[0],r)},lY=function(n){return iR(n,!0)},lJ=function(n){0===tp(n).length&&t7(n)},lQ=function(n,e){return{grid:n,cursor:e}},lZ=function(n,e,t){var r,o,u=tB(n).rows;return B.from(null===(o=null===(r=u[e])||void 0===r?void 0:r.cells[t])||void 0===o?void 0:o.element).filter(lY).orThunk(function(){return no(u,function(n){return no(n.cells,function(n){var e=n.element;return e3(lY(e),e)})})})},l0=function(n,e,t){var r=lZ(n,e,t);return lQ(n,r)},l1=function(n){return q(n,function(n,e){return z(n,function(n){return n.row===e.row})?n:n.concat([e])},[]).sort(function(n,e){return n.row-e.row})},l9=function(n,e){return function(t,r,o,u,i){return l0(lP(t,L(l1(r),function(n){return n.row}),n,e,o,u.replaceOrInit,i),r[0].row,r[0].column)}},l2=l9("thead",!0),l3=l9("tbody",!1),l5=l9("tfoot",!1),l4=function(n,e,t){var r,o=(r=t.section,ty(n,function(){return r}));return c3(tW.generate(o),e,!0)},l7=function(n,e,t,r){return uR(n,e,t,r.sizing)},l6=function(n,e,t,r){return ux(n,e,t,r.sizing,r.resize)},l8=function(n,e){return z(e,function(n){return 0===n.column&&n.isLocked})},an=function(n,e){return z(e,function(e){return e.column+e.colspan>=n.grid.columns&&e.isLocked})},ae=function(n,e){var t=rL(n);return q(lz(e),function(n,e){return n+t[e.column].map(rz).getOr(0)},0)},at=function(n){return function(e,t){return ln(e,t).filter(function(t){return!(n?l8:an)(e,t)}).map(function(n){return{details:n,pixelDelta:ae(e,n)}})}},ar=function(n){return function(e,t){return c8(e,t).filter(function(t){return!(n?l8:an)(e,t.cells)})}},ao=lV("th"),au=lV("td"),ai=c6(function(n,e,t,r){var o=e[0].row;return l0(V(l1(e),function(n,e){return{grid:lR(n.grid,o,e.row+n.delta,t,r.getOrInit),delta:n.delta+1}},{grid:n,delta:0}).grid,o,e[0].column)},ln,y,y,lH),ac=c6(function(n,e,t,r){var o=l1(e),u=o[o.length-1],i=u.row+u.rowspan;return l0(V(o,function(n,e){return lR(n,i,e.row,t,r.getOrInit)},n),i,e[0].column)},ln,y,y,lH),al=c6(function(n,e,t,r){var o=e.details,u=lz(o),i=u[0].column;return l0(V(u,function(n,e){return{grid:lD(n.grid,i,e.column+n.delta,t,r.getOrInit),delta:n.delta+1}},{grid:n,delta:0}).grid,o[0].row,i)},at(!0),l6,y,lH),aa=c6(function(n,e,t,r){var o=e.details,u=o[o.length-1],i=u.column+u.colspan;return l0(V(lz(o),function(n,e){return lD(n,i,e.column,t,r.getOrInit)},n),o[0].row,i)},at(!1),l6,y,lH),af=c6(function(n,e,t,r){var o,u=lz(e.details),i=(o=L(u,function(n){return n.column}),X(n,function(n){var e=V(o,function(n,e){return e>=0&&e<n.length?n.slice(0,e).concat(n.slice(e+1)):n},n.cells);return e.length>0?[ef(n.element,e,n.section,n.isNew)]:[]})),c=i.length>0?i[0].cells.length-1:0;return l0(i,u[0].row,Math.min(u[0].column,c))},function(n,e){return le(n,e).map(function(e){return{details:e,pixelDelta:-ae(n,e)}})},l6,lJ,lH),as=c6(function(n,e,t,r){var o=l1(e),u=lO(n,o[0].row,o[o.length-1].row),i=u.length>0?u.length-1:0;return l0(u,Math.min(e[0].row,i),e[0].column)},ln,y,lJ,lH),am=c6(function(n,e,t,r){return l0(lE(n,L(lz(e),function(n){return n.column}),!0,t,r.replaceOrInit),e[0].row,e[0].column)},le,y,y,ao),ad=c6(function(n,e,t,r){return l0(lE(n,L(lz(e),function(n){return n.column}),!1,t,r.replaceOrInit),e[0].row,e[0].column)},le,y,y,au),ag=c6(l2,le,y,y,ao),ap=c6(l3,le,y,y,au),ab=c6(l5,le,y,y,au),ah=c6(function(n,e,t,r){return l0(lN(n,e,t,r.replaceOrInit),e[0].row,e[0].column)},le,y,y,ao),av=c6(function(n,e,t,r){return l0(lN(n,e,t,r.replaceOrInit),e[0].row,e[0].column)},le,y,y,au),aw=c6(function(n,e,t,r){var o=e.cells;return lX(o),lQ(lu(n,e.bounds,t,r.merge(o)),B.from(o[0]))},lr,l7,y,lq),ay=c6(function(n,e,t,r){return lQ(V(e,function(n,e){return li(n,e,t,r.unmerge(e))},n),B.from(e[0]))},lo,l7,y,lq),aC=c6(function(n,e,t,r){var o,u,i=(o=e.clipboard,u=e.generators,c3(tW.fromTable(o),u,!0));return lS({row:e.row,column:e.column},n,i,e.generators,t).fold(function(){return lQ(n,B.some(e.element))},function(n){return l0(n,e.row,e.column)})},function(n,e){return tg(e.element).bind(function(t){return c4(n,t).map(function(n){return nu(nu({},n),{generators:e.generators,clipboard:e.clipboard})})})},l7,y,lH),aS=c6(function(n,e,t,r){var o=tB(n).rows,u=e.cells[0].column,i=o[e.cells[0].row];return l0(lT(u,n,l4(e.clipboard,e.generators,i),e.generators,t),e.cells[0].row,e.cells[0].column)},ar(!0),y,y,lH),aT=c6(function(n,e,t,r){var o=tB(n).rows,u=e.cells[e.cells.length-1].column+e.cells[e.cells.length-1].colspan,i=o[e.cells[0].row];return l0(lT(u,n,l4(e.clipboard,e.generators,i),e.generators,t),e.cells[0].row,e.cells[0].column)},ar(!1),y,y,lH),ax=c6(function(n,e,t,r){var o=tB(n).rows,u=e.cells[0].row,i=o[u];return l0(lx(u,n,l4(e.clipboard,e.generators,i),e.generators,t),e.cells[0].row,e.cells[0].column)},c8,y,y,lH),aR=c6(function(n,e,t,r){var o=tB(n).rows,u=e.cells[e.cells.length-1].row+e.cells[e.cells.length-1].rowspan,i=o[e.cells[0].row];return l0(lx(u,n,l4(e.clipboard,e.generators,i),e.generators,t),e.cells[0].row,e.cells[0].column)},c8,y,y,lH),aD=function(n,e){var t=tW.fromTable(n);return ln(t,e).bind(function(n){var e=n[n.length-1],r=n[0].column,o=e.column+e.colspan;return cV(K(L(t.all,function(n){return H(n.cells,function(n){return n.column>=r&&n.column<o})})))}).getOr("")},aO=function(n,e){return ln(tW.fromTable(n),e).bind(cV).getOr("")},aA=function(n,e){var t=tW.fromTable(n);return ln(t,e).bind(function(n){var e=n[n.length-1],r=n[0].row,o=e.row+e.rowspan;return cq(t.all.slice(r,o))}).getOr("")},ak=function(n,e,t){var r=function(n){return"table"===es(o5(n))},o=cw(n),u=cv(n)?y:cj,i=function(e){switch(cp(n)){case"section":return cY.section();case"sectionCells":return cY.sectionCells();case"cells":return cY.cells();default:return cY.getTableSectionType(e,"section")}},c=function(t,r,u,c,l){return function(a,f,s){void 0===s&&(s=!1),un(a);var m=c(),d=o1(u,nX.fromDom(n.getDoc()),o),g={sizing:cT(n,a),resize:cv(n)?uB():uM(),section:i(a)};return r(a)?t(m,a,f,d,g).bind(function(t){j(t.newRows,function(e){iK(n,e.dom)}),j(t.newCells,function(e){iX(n,e.dom)});var r=t.cursor.fold(function(){return nt(tp(a)).filter(eP).map(function(t){e.clear(a);var r=n.dom.createRng();return r.selectNode(t.dom),n.selection.setRng(r),eK(t,"data-mce-selected","1"),r})},function(t){var r=c_(cL,t),o=n.dom.createRng();return o.setStart(r.element.dom,r.offset),o.setEnd(r.element.dom,r.offset),n.selection.setRng(o),e.clear(a),B.some(o)});return eP(a)&&(un(a),s||i0(n,a.dom,l)),r.map(function(n){return{rng:n,effect:l}})}):B.none()}};return{deleteRow:c(as,function(e){return!1===r(n)||uQ(e).rows>1},y,t,i9),deleteColumn:c(af,function(e){return!1===r(n)||uQ(e).columns>1},y,t,i9),insertRowsBefore:c(ai,O,y,t,i9),insertRowsAfter:c(ac,O,y,t,i9),insertColumnsBefore:c(al,O,u,t,i9),insertColumnsAfter:c(aa,O,u,t,i9),mergeCells:c(aw,O,y,t,i9),unmergeCells:c(ay,O,y,t,i9),pasteColsBefore:c(aS,O,y,t,i9),pasteColsAfter:c(aT,O,y,t,i9),pasteRowsBefore:c(ax,O,y,t,i9),pasteRowsAfter:c(aR,O,y,t,i9),pasteCells:c(aC,O,y,t,i2),makeCellsHeader:c(ah,O,y,t,i9),unmakeCellsHeader:c(av,O,y,t,i9),makeColumnsHeader:c(am,O,y,t,i9),unmakeColumnsHeader:c(ad,O,y,t,i9),makeRowsHeader:c(ag,O,y,t,i9),makeRowsBody:c(ap,O,y,t,i9),makeRowsFooter:c(ab,O,y,t,i9),getTableRowType:aA,getTableCellType:aO,getTableColType:aD}},aI={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},aB=function(n,e,t,r){for(var o=nX.fromTag("tr"),u=0;u<n;u++){var i=r<e||u<t?nX.fromTag("th"):nX.fromTag("td");u<t&&eK(i,"scope","row"),r<e&&eK(i,"scope","col"),t0(i,nX.fromTag("br")),t0(o,i)}return o},aM=function(n){var e=nX.fromTag("colgroup");return _(n,function(){return t0(e,nX.fromTag("col"))}),e},aE=function(n,e,t,r){return _(n,function(n){return aB(e,t,r,n)})},aP=function(n,e,t,r,o,u){void 0===u&&(u=aI);var i=nX.fromTag("table"),c="cells"!==o;e8(i,u.styles),eX(i,u.attributes),u.colGroups&&t0(i,aM(e));var l=Math.min(n,t);if(c&&t>0){var a=nX.fromTag("thead");t0(i,a),t5(a,aE(t,e,"sectionCells"===o?l:0,r))}var f=nX.fromTag("tbody");t0(i,f);var s=c?0:t;return t5(f,aE(c?n-l:n,e,s,r)),i},aN=function(n){var e=nX.fromTag("div");return t0(e,nX.fromDom(n.dom.cloneNode(!0))),e.dom.innerHTML},az=function(n,e){n.selection.select(e.dom,!0),n.selection.collapse(!0)},a_=function(n,e){eU(e,"td,th").each(x(az,n))},aL=function(n,e){j(ej(e,"tr"),function(e){iK(n,e.dom),j(ej(e,"th,td"),function(e){iX(n,e.dom)})})},aj=function(n,e,t,r,o){var u=cu(n),i={styles:u,attributes:co(n),colGroups:n.getParam("table_use_colgroups",!1,"boolean")};return n.undoManager.ignore(function(){var u=aP(t,e,o,r,cp(n),i);eK(u,"data-mce-id","__mce");var c=aN(u);n.insertContent(c),n.addVisual()}),eU(o5(n),'table[data-mce-id="__mce"]').map(function(e){if(cd(n))cD(e);else if(cg(n))cO(e);else{var t;(cm(n)||s(t=u.width)&&-1!==t.indexOf("%"))&&cR(e)}return un(e),eZ(e,"data-mce-id"),aL(n,e),a_(n,e),e.dom}).getOr(null)},aW=function(n,e,t,r,o){void 0===r&&(r={});var u=function(n){return w(n)&&n>0};if(!(u(e)&&u(t)))return console.error(o),null;var i=r.headerRows||0;return aj(n,t,e,r.headerColumns||0,i)},aF=function(n){return function(){return n().fold(function(){return[]},function(n){return L(n,function(n){return n.dom})})}},aH=function(n){return function(e){n(e.length>0?B.some(o3(e)):B.none())}},aV=function(n,e,t){var r=tu(n,e,1);1===t||r<=1?eZ(n,e):eK(n,e,Math.min(t,r))},aq=function(n,e,t){if(!tW.hasColumns(n))return[];var r=L(H(tW.justColumns(n),function(n){return n.column>=e&&n.column<t}),function(n){var r=rT(n.element);return aV(r,"span",t-e),r}),o=nX.fromTag("colgroup");return t5(o,r),[o]},aU=function(n,e){var t=tW.fromTable(n);return le(t,e).map(function(n){var e=n[n.length-1],r=n[0].column,o=e.column+e.colspan,u=aq(t,r,o),i=L(t.all,function(n){var e=L(H(n.cells,function(n){return n.column>=r&&n.column<o}),function(n){var e=rT(n.element);return aV(e,"colspan",o-r),e}),t=nX.fromTag("tr");return t5(t,e),t});return ni(ni([],u,!0),i,!0)})},aG=function(n,e,t){var r=tW.fromTable(n);return ln(r,e).bind(function(n){var e=c5(X(tB(c3(r,t,!1)).rows.slice(n[0].row,n[n.length-1].row+n[n.length-1].rowspan),function(n){var e=H(n.cells,function(n){return!n.isLocked});return e.length>0?[nu(nu({},n),{cells:e})]:[]}));return e3(e.length>0,e)}).map(function(n){return L(n,function(n){var e=rS(n.element);return j(n.cells,function(n){var t=rT(n.element);cJ(t,"colspan",n.colspan,1),cJ(t,"rowspan",n.rowspan,1),t0(e,t)}),e})})},a$=tinymce.util.Tools.resolve("tinymce.util.Tools"),aK=function(n,e,t){return function(e,r){for(var o=0;o<r.length;o++){var u=n.getStyle(r[o],t);if(void 0===e&&(e=u),e!==u)return""}return e}(void 0,n.select("td,th",e))},aX=function(n,e,t){t&&n.formatter.apply("align"+t,{},e)},aY=function(n,e,t){t&&n.formatter.apply("valign"+t,{},e)},aJ=function(n,e){a$.each("left center right".split(" "),function(t){n.formatter.remove("align"+t,{},e)})},aQ=function(n,e){a$.each("top middle bottom".split(" "),function(t){n.formatter.remove("valign"+t,{},e)})},aZ=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],a0=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,a1=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,a9=function(n){var e=n.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},a2=function(n){return{value:a9(n.red)+a9(n.green)+a9(n.blue)}},a3=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,a5=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,a4=function(n,e,t,r){return{red:n,green:e,blue:t,alpha:r}},a7=function(n,e,t,r){return a4(parseInt(n,10),parseInt(e,10),parseInt(t,10),parseFloat(r))},a6=function(n){if("transparent"===n)return B.some(a4(0,0,0,0));var e=a3.exec(n);if(null!==e)return B.some(a7(e[1],e[2],e[3],"1"));var t=a5.exec(n);return null!==t?B.some(a7(t[1],t[2],t[3],t[4])):B.none()},a8=function(n){var e=n;return{get:function(){return e},set:function(n){e=n}}},fn=function(n){var e=a8(B.none()),t=function(){return e.get().each(n)};return{clear:function(){t(),e.set(B.none())},isSet:function(){return e.get().isSome()},get:function(){return e.get()},set:function(n){t(),e.set(B.some(n))}}},fe=function(){var n=fn(y);return nu(nu({},n),{on:function(e){return n.get().each(e)}})},ft=function(n){return eo(n,"menu")},fr=function(n){return L(n,function(n){var e=n.text||n.title;return ft(n)?{text:e,items:fr(n.menu)}:{text:e,value:n.value}})},fo=function(n,e,t,r,o){return L(t,function(t){var u,i=t.text||t.title;return ft(t)?{type:"nestedmenuitem",text:i,getSubmenuItems:function(){return fo(n,e,t.menu,r,o)}}:{text:i,type:"togglemenuitem",onAction:function(){return o(t.value)},onSetup:(u=t.value,function(t){var o=fn(function(n){return n.unbind()}),i=!nC(u),c=function(){var c=ug(e),l=function(e){return n.formatter.match(r,{value:u},e.dom,i)};i?(t.setActive(!z(c,l)),o.set(n.formatter.formatChanged(r,function(n){return t.setActive(!n)},!0))):(t.setActive(Y(c,l)),o.set(n.formatter.formatChanged(r,t.setActive,!1,{value:u})))};return n.initialized?c():n.on("init",c),o.clear})}})},fu=function(n,e){return function(t){var r;n.execCommand("mceTableApplyCellStyle",!1,((r={})[e]=t,r))}},fi=function(n){return X(n,function(n){return ft(n)?[nu(nu({},n),{menu:fi(n.menu)})]:nC(n.value)?[n]:[]})},fc=function(n,e,t,r,o){return function(u){return u(fo(n,e,t,r,o))}},fl=function(n,e,t){var r=L(e,function(n){var e,t;return{text:n.title,value:"#"+(t=e=n.value,a0.test(t)||a1.test(t)?B.some({value:nb(t,"#").toUpperCase()}):B.none()).orThunk(function(){return a6(e).map(a2)}).getOrThunk(function(){var n=document.createElement("canvas");n.height=1,n.width=1;var t=n.getContext("2d");t.clearRect(0,0,n.width,n.height),t.fillStyle="#FFFFFF",t.fillStyle=e,t.fillRect(0,0,1,1);var r=t.getImageData(0,0,1,1).data;return a2(a4(r[0],r[1],r[2],r[3]))}).value,type:"choiceitem"}});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:r.length>0?r:void 0,allowCustomColors:!1},onAction:function(e){var r,o="remove"===e.value?"":e.value;n.execCommand("mceTableApplyCellStyle",!1,((r={})[t]=o,r))}}]},fa=function(n){return function(){var e=n.queryCommandValue("mceTableRowType");n.execCommand("mceTableRowType",!1,{type:"header"===e?"body":"header"})}},ff=function(n){return function(){var e=n.queryCommandValue("mceTableColType");n.execCommand("mceTableColType",!1,{type:"th"===e?"td":"th"})}},fs=function(n){var e=fr(cf(n));return e.length>0?B.some({name:"class",type:"listbox",label:"Class",items:e}):B.none()},fm=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:aZ}],fd=function(n){return fm.concat(fs(n).toArray())},fg=function(n,e){var t=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(fr(cr(n)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===e?[{name:"borderwidth",type:"input",label:"Border width"}].concat(t):t}},fp=function(n){return function(e,t){var r=e.dom;return{setAttrib:function(e,o){(!n||o)&&r.setAttrib(t,e,o)},setStyle:function(e,o){(!n||o)&&r.setStyle(t,e,o)},setFormat:function(r,o){(!n||o)&&(""===o?e.formatter.remove(r,{value:null},t,!0):e.formatter.apply(r,{value:o},t))}}}},fb={normal:fp(!1),ifTruthy:fp(!0)},fh=function(n){return function(e){return nv(e,"rgb")?n.toHex(e):e}},fv=function(n,e){var t=nX.fromDom(e);return{borderwidth:tt(t,"border-width").getOr(""),borderstyle:tt(t,"border-style").getOr(""),bordercolor:tt(t,"border-color").map(fh(n)).getOr(""),backgroundcolor:tt(t,"background-color").map(fh(n)).getOr("")}},fw=function(n){var e=n[0];return j(n.slice(1),function(n){j(n2(e),function(t){n5(n,function(n,r){var o=e[t];""!==o&&t===r&&o!==n&&(e[t]="")})})}),e},fy=function(n,e,t,r){return G(n,function(n){return!b(t.formatter.matchNode(r,e+n))}).getOr("")},fC=x(fy,["left","center","right"],"align"),fS=x(fy,["top","middle","bottom"],"valign"),fT=function(n,e){var t,r,o,u,i=cu(n),c=co(n),l=e?(t=n.dom,{borderstyle:et(i,"border-style").getOr(""),bordercolor:fh(t)(et(i,"border-color").getOr("")),backgroundcolor:fh(t)(et(i,"background-color").getOr(""))}):{};return nu(nu(nu(nu(nu(nu({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""}),i),c),l),(r=i["border-width"],ca(n)&&r?{border:r}:et(c,"border").fold(function(){return{}},function(n){return{border:n}}))),(o=et(i,"border-spacing").or(et(c,"cellspacing")).fold(function(){return{}},function(n){return{cellspacing:n}}),u=et(i,"border-padding").or(et(c,"cellpadding")).fold(function(){return{}},function(n){return{cellpadding:n}}),nu(nu({},o),u)))},fx=function(n,e,t){var r,o=n.dom,u=ca(n)?o.getStyle(e,"border-spacing")||o.getAttrib(e,"cellspacing"):o.getAttrib(e,"cellspacing")||o.getStyle(e,"border-spacing"),i=ca(n)?aK(o,e,"padding")||o.getAttrib(e,"cellpadding"):o.getAttrib(e,"cellpadding")||aK(o,e,"padding");return nu({width:o.getStyle(e,"width")||o.getAttrib(e,"width"),height:o.getStyle(e,"height")||o.getAttrib(e,"height"),cellspacing:u,cellpadding:i,border:(r=tt(nX.fromDom(e),"border-width"),ca(n)&&r.isSome()?r.getOr(""):o.getAttrib(e,"border")||aK(n.dom,e,"border-width")||aK(n.dom,e,"border")),caption:!!o.select("caption",e)[0],class:o.getAttrib(e,"class",""),align:fC(n,e)},t?fv(o,e):{})},fR=function(n,e,t){var r=n.dom;return nu({height:r.getStyle(e,"height")||r.getAttrib(e,"height"),class:r.getAttrib(e,"class",""),type:th(nX.fromDom(e)).map(function(n){return aA(n,{selection:o3(e.cells)})}).getOr(""),align:fC(n,e)},t?fv(r,e):{})},fD=function(n,e,t,r){var o=n.dom,u=r.getOr(e),i=function(n,e){return o.getStyle(n,e)||o.getAttrib(n,e)};return nu({width:i(u,"width"),height:i(e,"height"),scope:o.getAttrib(e,"scope"),celltype:e.nodeName.toLowerCase(),class:o.getAttrib(e,"class",""),halign:fC(n,e),valign:fS(n,e)},t?fv(o,e):{})},fO=function(n,e){var t=tW.fromTable(n);return L(H(tW.justCells(t),function(n){return z(e,function(e){return n0(n.element,e)})}),function(n){return{element:n.element.dom,column:tW.getColumnAt(t,n.column).map(function(n){return n.element.dom})}})},fA=function(n,e,t){n.setAttrib("scope",t.scope),n.setAttrib("class",t.class),n.setStyle("height",o8(t.height)),e.setStyle("width",o8(t.width))},fk=function(n,e){n.setFormat("tablecellbackgroundcolor",e.backgroundcolor),n.setFormat("tablecellbordercolor",e.bordercolor),n.setFormat("tablecellborderstyle",e.borderstyle),n.setFormat("tablecellborderwidth",o8(e.borderwidth))},fI=function(n,e,t){var r=1===e.length;j(e,function(e){var o=e.element,u=r?fb.normal(n,o):fb.ifTruthy(n,o),i=e.column.map(function(e){return r?fb.normal(n,e):fb.ifTruthy(n,e)}).getOr(u);fA(u,i,t),ci(n)&&fk(u,t),r&&(aJ(n,o),aQ(n,o)),t.halign&&aX(n,o,t.halign),t.valign&&aY(n,o,t.valign)})},fB=function(n,e){n.execCommand("mceTableCellType",!1,{type:e.celltype,no_events:!0})},fM=function(n,e,t,r){var o=n6(r,function(n,e){return t[e]!==n});ee(o)>0&&e.length>=1&&th(e[0]).each(function(t){var u=fO(t,e),i=ee(n6(o,function(n,e){return"scope"!==e&&"celltype"!==e}))>0,c=er(o,"celltype");(i||er(o,"scope"))&&fI(n,u,r),c&&fB(n,r),i0(n,t.dom,{structure:c,style:i})})},fE=function(n,e,t,r){var o=r.getData();r.close(),n.undoManager.transact(function(){fM(n,e,t,o),n.focus()})},fP=function(n,e){var t=ug(e);if(0!==t.length){var r=fw(th(t[0]).map(function(e){return L(fO(e,t),function(e){return fD(n,e.element,ci(n),e.column)})}).getOrDie()),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:fd(n)},fg(n,"cell")]},u={type:"panel",items:[{type:"grid",columns:2,items:fd(n)}]};n.windowManager.open({title:"Cell Properties",size:"normal",body:ci(n)?o:u,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:x(fE,n,t,r)})}},fN=function(n){var e=fr(n.getParam("table_row_class_list",[],"array"));return e.length>0?B.some({name:"class",type:"listbox",label:"Class",items:e}):B.none()},fz=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],f_=function(n){return fz.concat(fN(n).toArray())},fL=function(n,e){n.setAttrib("class",e.class),n.setStyle("height",o8(e.height))},fj=function(n,e){n.setStyle("background-color",e.backgroundcolor),n.setStyle("border-color",e.bordercolor),n.setStyle("border-style",e.borderstyle)},fW=function(n,e,t,r){var o=1===e.length;j(e,function(e){var u=o?fb.normal(n,e):fb.ifTruthy(n,e);fL(u,t),cc(n)&&fj(u,t),t.align!==r.align&&(aJ(n,e),aX(n,e,t.align))})},fF=function(n,e){n.execCommand("mceTableRowType",!1,{type:e.type,no_events:!0})},fH=function(n,e,t,r){var o=n6(r,function(n,e){return t[e]!==n});if(ee(o)>0){var u=er(o,"type"),i=!u||ee(o)>1;i&&fW(n,e,r,t),u&&fF(n,r),th(nX.fromDom(e[0])).each(function(e){return i0(n,e.dom,{structure:u,style:i})})}},fV=function(n,e,t,r){var o=r.getData();r.close(),n.undoManager.transact(function(){fH(n,e,t,o),n.focus()})},fq=function(n){var e=up(ut(n),ua.selected);if(0!==e.length){var t=fw(L(e,function(e){return fR(n,e.dom,cc(n))})),r={type:"tabpanel",tabs:[{title:"General",name:"general",items:f_(n)},fg(n,"row")]},o={type:"panel",items:[{type:"grid",columns:2,items:f_(n)}]};n.windowManager.open({title:"Row Properties",size:"normal",body:cc(n)?r:o,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:t,onSubmit:x(fV,n,L(e,function(n){return n.dom}),t)})}},fU=function(n,e,t){var r=n.getParam("table_appearance_options",!0,"boolean")?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],o=e.length>0?[{type:"listbox",name:"class",label:"Class",items:e}]:[];return(t?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[]).concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(r).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(o)},fG=function(n,e,t,r){if("TD"===e.tagName||"TH"===e.tagName)s(t)?n.setStyle(e,t,r):n.setStyle(e,t);else if(e.children)for(var o=0;o<e.children.length;o++)fG(n,e.children[o],t,r)},f$=function(n,e,t){var r,o=n.dom,u={},i={};if((u.class=t.class,i.height=o8(t.height),o.getAttrib(e,"width")&&!ca(n))?u.width=(r=t.width)?r.replace(/px$/,""):"":i.width=o8(t.width),ca(n)?(i["border-width"]=o8(t.border),i["border-spacing"]=o8(t.cellspacing)):(u.border=t.border,u.cellpadding=t.cellpadding,u.cellspacing=t.cellspacing),ca(n)&&e.children)for(var c=0;c<e.children.length;c++)fG(o,e.children[c],{"border-width":o8(t.border),padding:o8(t.cellpadding)}),cl(n)&&fG(o,e.children[c],{"border-color":t.bordercolor});cl(n)&&(i["background-color"]=t.backgroundcolor,i["border-color"]=t.bordercolor,i["border-style"]=t.borderstyle),u.style=o.serializeStyle(nu(nu({},cu(n)),i)),o.setAttribs(e,nu(nu({},co(n)),u))},fK=function(n,e,t,r){var o=n.dom,u=r.getData(),i=n6(u,function(n,e){return t[e]!==n});r.close(),""===u.class&&delete u.class,n.undoManager.transact(function(){if(e||(e=aj(n,parseInt(u.cols,10)||1,parseInt(u.rows,10)||1,0,0)),ee(i)>0){f$(n,e,u);var t=o.select("caption",e)[0];(t&&!u.caption||!t&&u.caption)&&n.execCommand("mceTableToggleCaption"),""===u.align?aJ(n,e):aX(n,e,u.align)}if(n.focus(),n.addVisual(),ee(i)>0){var r=er(i,"caption"),c=!r||ee(i)>1;i0(n,e,{structure:r,style:c})}})},fX=function(n,e){var t,r=n.dom,o=fT(n,cl(n));!1===e?(t=r.getParent(n.selection.getStart(),"table",n.getBody()))?o=fx(n,t,cl(n)):cl(n)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""):(o.cols="1",o.rows="1",cl(n)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""));var u=fr(cs(n));u.length>0&&o.class&&(o.class=o.class.replace(/\s*mce\-item\-table\s*/g,""));var i={type:"grid",columns:2,items:fU(n,u,e)},c=cl(n)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[i]},fg(n,"table")]}:{type:"panel",items:[i]};n.windowManager.open({title:"Table Properties",size:"normal",body:c,onSubmit:x(fK,n,t,o),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o})},fY=function(n){return um(ut(n),o6(n))},fJ=function(n,e,t,r,o){var u=o6(n),i=function(n){return th(n,u)},c=function(e){return ud(ut(n),o6(n)).bind(function(n){return i(n).map(function(t){return e(t,n)})})},l=function(e){n.focus()},a=function(n,e){return void 0===e&&(e=!1),c(function(t,o){var u=uf(r,t,o);n(t,u,e).each(l)})},f=function(){return c(function(e,t){var o=uf(r,e,t);return aG(e,o,o1(y,nX.fromDom(n.getDoc()),B.none()))})},d=function(){return c(function(n,e){var t=uf(r,n,e);return aU(n,t)})},g=function(e,t){return t().each(function(t){var o=L(t,function(n){return rT(n)});c(function(t,u){var i=o9(nX.fromDom(n.getDoc()));e(t,{selection:ur(r),clipboard:o,generators:i}).each(l)})})},p=function(n){return function(e,t){return et(t,"type").each(function(e){a(n(e),t.no_events)})}};n5({mceTableSplitCells:function(){return a(e.unmergeCells)},mceTableMergeCells:function(){return a(e.mergeCells)},mceTableInsertRowBefore:function(){return a(e.insertRowsBefore)},mceTableInsertRowAfter:function(){return a(e.insertRowsAfter)},mceTableInsertColBefore:function(){return a(e.insertColumnsBefore)},mceTableInsertColAfter:function(){return a(e.insertColumnsAfter)},mceTableDeleteCol:function(){return a(e.deleteColumn)},mceTableDeleteRow:function(){return a(e.deleteRow)},mceTableCutCol:function(){return d().each(function(n){o.setColumns(n),a(e.deleteColumn)})},mceTableCutRow:function(){return f().each(function(n){o.setRows(n),a(e.deleteRow)})},mceTableCopyCol:function(){return d().each(function(n){return o.setColumns(n)})},mceTableCopyRow:function(){return f().each(function(n){return o.setRows(n)})},mceTablePasteColBefore:function(){return g(e.pasteColsBefore,o.getColumns)},mceTablePasteColAfter:function(){return g(e.pasteColsAfter,o.getColumns)},mceTablePasteRowBefore:function(){return g(e.pasteRowsBefore,o.getRows)},mceTablePasteRowAfter:function(){return g(e.pasteRowsAfter,o.getRows)},mceTableDelete:function(){return fY(n).each(function(e){th(e,u).filter(R(u)).each(function(e){var t=nX.fromText("");if(tQ(e,t),t7(e),n.dom.isEmpty(n.getBody()))n.setContent(""),n.selection.setCursorLocation();else{var r=n.dom.createRng();r.setStart(t.dom,0),r.setEnd(t.dom,0),n.selection.setRng(r),n.nodeChanged()}})})},mceTableCellToggleClass:function(e,t){c(function(e){var o=ug(r),u=Y(o,function(e){return n.formatter.match("tablecellclass",{value:t},e.dom)})?n.formatter.remove:n.formatter.apply;j(o,function(n){return u("tablecellclass",{value:t},n.dom)}),i0(n,e.dom,i1)})},mceTableToggleClass:function(e,t){c(function(e){n.formatter.toggle("tableclass",{value:t},e.dom),i0(n,e.dom,i1)})},mceTableToggleCaption:function(){fY(n).each(function(e){th(e,u).each(function(t){eq(t,"caption").fold(function(){var e=nX.fromTag("caption");t0(e,nX.fromText("Caption")),t1(t,e,0),n.selection.setCursorLocation(e.dom,0)},function(r){ew("caption")(e)&&nZ("td",t).each(function(e){return n.selection.setCursorLocation(e.dom,0)}),t7(r)}),i0(n,t.dom,i9)})})},mceTableSizingMode:function(e,t){return fY(n).each(function(e){cg(n)||cd(n)||cm(n)||th(e,u).each(function(e){"relative"!==t||uX(e)?"fixed"!==t||uY(e)?"responsive"!==t||uJ(e)||cO(e):cD(e):cR(e),un(e),i0(n,e.dom,i9)})})},mceTableCellType:p(function(n){return"th"===n?e.makeCellsHeader:e.unmakeCellsHeader}),mceTableColType:p(function(n){return"th"===n?e.makeColumnsHeader:e.unmakeColumnsHeader}),mceTableRowType:p(function(n){switch(n){case"header":return e.makeRowsHeader;case"footer":return e.makeRowsFooter;default:return e.makeRowsBody}})},function(e,t){return n.addCommand(t,e)}),n5({mceTableProps:x(fX,n,!1),mceTableRowProps:x(fq,n),mceTableCellProps:x(fP,n,r)},function(e,t){return n.addCommand(t,function(){return e()})}),n.addCommand("mceInsertTable",function(e,t){m(t)&&n2(t).length>0?aW(n,t.rows,t.columns,t.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):fX(n,!0)}),n.addCommand("mceTableApplyCellStyle",function(e,t){var o=function(n){return"tablecell"+n.toLowerCase().replace("-","")};if(m(t)){var u=ug(r);if(0!==u.length){var c=n6(t,function(e,t){return n.formatter.has(o(t))&&s(e)});eu(c)||(n5(c,function(e,t){j(u,function(r){fb.normal(n,r.dom).setFormat(o(t),e)})}),i(u[0]).each(function(e){return i0(n,e.dom,i1)}))}}})},fQ=function(n,e,t){var r=o6(n),o=function(e){return ud(ut(n)).bind(function(n){return th(n,r).map(function(r){var o=uf(t,r,n);return e(r,o)})}).getOr("")};n5({mceTableRowType:function(){return o(e.getTableRowType)},mceTableCellType:function(){return o(e.getTableCellType)},mceTableColType:function(){return o(e.getTableColType)}},function(e,t){return n.addQueryValueHandler(t,e)})},fZ=function(){var n=fe(),e=fe();return{getRows:n.get,setRows:function(t){t.fold(n.clear,n.set),e.clear()},clearRows:n.clear,getColumns:e.get,setColumns:function(t){t.fold(e.clear,e.set),n.clear()},clearColumns:e.clear}},f0={remove_similar:!0,inherit:!1},f1=nu({selector:"td,th"},f0),f9={tablecellbackgroundcolor:nu({styles:{backgroundColor:"%value"}},f1),tablecellverticalalign:nu({styles:{"vertical-align":"%value"}},f1),tablecellbordercolor:nu({styles:{borderColor:"%value"}},f1),tablecellclass:nu({classes:["%value"]},f1),tableclass:nu({selector:"table",classes:["%value"]},f0),tablecellborderstyle:nu({styles:{borderStyle:"%value"}},f1),tablecellborderwidth:nu({styles:{borderWidth:"%value"}},f1)},f2=function(n){n.formatter.register(f9)},f3=rg([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),f5=nu(nu({},f3),{none:function(n){return void 0===n&&(n=void 0),f3.none(n)}}),f4=function(n,e,t,r,o){void 0===o&&(o=O);var u=1===r;if(!u&&t<=0)return f5.first(n[0]);if(u&&t>=n.length-1)return f5.last(n[n.length-1]);var i=t+r,c=n[i];return o(c)?f5.middle(e,c):f4(n,e,i,r,o)},f7=function(n,e){return th(n,e).bind(function(e){var t=tp(e);return $(t,function(e){return n0(n,e)}).map(function(n){return{index:n,all:t}})})},f6={create:function(n,e,t,r){return{start:n,soffset:e,finish:t,foffset:r}}},f8=rg([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),sn={before:f8.before,on:f8.on,after:f8.after,getStart:function(n){return n.fold(S,S,S)}},se=rg([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),st=(se.domRange,se.relative),sr=se.exact,so=(f6.create,function(n){var e;return e=n.match({domRange:function(n){return nX.fromDom(n.startContainer)},relative:function(n,e){return sn.getStart(n)},exact:function(n,e,t,r){return n}}),nX.fromDom(eC(e).dom.defaultView)}),su=function(n,e){var t=n.document.createRange();return t.selectNode(e.dom),t},si=function(n,e){var t=n.document.createRange();return sc(t,e),t},sc=function(n,e){return n.selectNodeContents(e.dom)},sl=function(n,e){e.fold(function(e){n.setStartBefore(e.dom)},function(e,t){n.setStart(e.dom,t)},function(e){n.setStartAfter(e.dom)})},sa=function(n,e){e.fold(function(e){n.setEndBefore(e.dom)},function(e,t){n.setEnd(e.dom,t)},function(e){n.setEndAfter(e.dom)})},sf=function(n,e,t){var r=n.document.createRange();return sl(r,e),sa(r,t),r},ss=function(n,e,t,r,o){var u=n.document.createRange();return u.setStart(e.dom,t),u.setEnd(r.dom,o),u},sm=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}},sd=function(n){var e=n.getClientRects(),t=e.length>0?e[0]:n.getBoundingClientRect();return t.width>0||t.height>0?B.some(t).map(sm):B.none()},sg=rg([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),sp=function(n,e,t){return e(nX.fromDom(t.startContainer),t.startOffset,nX.fromDom(t.endContainer),t.endOffset)},sb=function(n,e){var t=e.ltr();return t.collapsed?e.rtl().filter(function(n){return!1===n.collapsed}).map(function(n){return sg.rtl(nX.fromDom(n.endContainer),n.endOffset,nX.fromDom(n.startContainer),n.startOffset)}).getOrThunk(function(){return sp(n,sg.ltr,t)}):sp(n,sg.ltr,t)},sh=function(n,e){var t=e.match({domRange:function(n){return{ltr:C(n),rtl:B.none}},relative:function(e,t){return{ltr:nc(function(){return sf(n,e,t)}),rtl:nc(function(){return B.some(sf(n,t,e))})}},exact:function(e,t,r,o){return{ltr:nc(function(){return ss(n,e,t,r,o)}),rtl:nc(function(){return B.some(ss(n,r,o,e,t))})}}});return sb(n,t)},sv=function(n,e){return sh(n,e).match({ltr:function(e,t,r,o){var u=n.document.createRange();return u.setStart(e.dom,t),u.setEnd(r.dom,o),u},rtl:function(e,t,r,o){var u=n.document.createRange();return u.setStart(r.dom,o),u.setEnd(e.dom,t),u}})};sg.ltr,sg.rtl;var sw=function(n,e,t,r,o){if(0===o)return 0;if(e===r)return o-1;for(var u=r,i=1;i<o;i++){var c=n(i),l=Math.abs(e-c.left);if(t<=c.bottom){if(t<c.top||l>u)return i-1;u=l}}return 0},sy=function(n,e,t){return e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom},sC=function(n,e,t,r,o){var u=function(t){var r=n.dom.createRange();return r.setStart(e.dom,t),r.collapse(!0),r},i=rn(e).length,c=sw(function(n){return u(n).getBoundingClientRect()},t,r,o.right,i);return u(c)},sS=function(n,e,t,r){var o=n.dom.createRange();return o.selectNode(e.dom),no(o.getClientRects(),function(n){return sy(n,t,r)?B.some(n):B.none()}).map(function(o){return sC(n,e,t,r,o)})},sT=function(n,e,t,r){var o=n.dom.createRange();return no(eD(e),function(e){return o.selectNode(e.dom),sy(o.getBoundingClientRect(),t,r)?sx(n,e,t,r):B.none()})},sx=function(n,e,t,r){return eb(e)?sS(n,e,t,r):sT(n,e,t,r)},sR=function(n,e,t,r){var o=n.dom.createRange();o.selectNode(e.dom);var u=o.getBoundingClientRect();return sx(n,e,Math.max(u.left,Math.min(u.right,t)),Math.max(u.top,Math.min(u.bottom,r)))},sD=function(n,e){return e-n.left<n.right-e},sO=function(n,e,t){var r=n.dom.createRange();return r.selectNode(e.dom),r.collapse(t),r},sA=function(n,e,t){var r=n.dom.createRange();r.selectNode(e.dom);var o=sD(r.getBoundingClientRect(),t);return(!0===o?oq:oU)(e).map(function(e){return sO(n,e,o)})},sk=function(n,e,t){var r=sD(e.dom.getBoundingClientRect(),t);return B.some(sO(n,e,r))},sI=function(n,e,t,r){var o=n.dom.createRange();o.selectNode(e.dom);var u=o.getBoundingClientRect();return sR(n,e,Math.max(u.left,Math.min(u.right,t)),Math.max(u.top,Math.min(u.bottom,r)))},sB=document.caretPositionFromPoint?function(n,e,t){var r,o;return B.from(null===(o=(r=n.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,e,t)).bind(function(e){if(null===e.offsetNode)return B.none();var t=n.dom.createRange();return t.setStart(e.offsetNode,e.offset),t.collapse(),B.some(t)})}:document.caretRangeFromPoint?function(n,e,t){var r,o;return B.from(null===(o=(r=n.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,e,t))}:function(n,e,t){return nX.fromPoint(n,e,t).bind(function(r){var o=function(){return(0===eD(r).length?sk:sA)(n,r,e)};return 0===eD(r).length?o():sI(n,r,e,t).orThunk(o)})},sM=function(n,e){var t=es(n);return"input"===t?sn.after(n):N(["br","img"],t)?0===e?sn.before(n):sn.after(n):sn.on(n,e)},sE=function(n,e){return st(n.fold(sn.before,sM,sn.after),e.fold(sn.before,sM,sn.after))},sP=function(n,e,t,r){return st(sM(n,e),sM(t,r))},sN=function(n,e,t,r){var o=ey(n).dom.createRange();return o.setStart(n.dom,e),o.setEnd(t.dom,r),o},sz=function(n,e,t,r){var o=sN(n,e,t,r),u=n0(n,t)&&e===r;return o.collapsed&&!u},s_=function(n){return B.from(n.getSelection())},sL=function(n,e){s_(n).each(function(n){n.removeAllRanges(),n.addRange(e)})},sj=function(n,e,t,r,o){var u=ss(n,e,t,r,o);sL(n,u)},sW=function(n,e,t,r,o,u){e.collapse(t.dom,r),e.extend(o.dom,u)},sF=function(n,e){return sh(n,e).match({ltr:function(e,t,r,o){sj(n,e,t,r,o)},rtl:function(e,t,r,o){s_(n).each(function(u){if(u.setBaseAndExtent)u.setBaseAndExtent(e.dom,t,r.dom,o);else if(u.extend)try{sW(n,u,e,t,r,o)}catch(u){sj(n,r,o,e,t)}else sj(n,r,o,e,t)})}})},sH=function(n,e,t,r,o){sF(n,sP(e,t,r,o))},sV=function(n,e,t){sF(n,sE(e,t))},sq=function(n){var e=so(n).dom,t=function(n,t,r,o){return ss(e,n,t,r,o)};return sh(e,n.match({domRange:function(n){var e=nX.fromDom(n.startContainer),t=nX.fromDom(n.endContainer);return sP(e,n.startOffset,t,n.endOffset)},relative:sE,exact:sP})).match({ltr:t,rtl:t})},sU=function(n){if(!(n.rangeCount>0))return B.none();var e=n.getRangeAt(0),t=n.getRangeAt(n.rangeCount-1);return B.some(f6.create(nX.fromDom(e.startContainer),e.startOffset,nX.fromDom(t.endContainer),t.endOffset))},sG=function(n){if(null===n.anchorNode||null===n.focusNode)return sU(n);var e=nX.fromDom(n.anchorNode),t=nX.fromDom(n.focusNode);return sz(e,n.anchorOffset,t,n.focusOffset)?B.some(f6.create(e,n.anchorOffset,t,n.focusOffset)):sU(n)},s$=function(n,e,t){void 0===t&&(t=!0);var r=(t?si:su)(n,e);sL(n,r)},sK=function(n){return s_(n).filter(function(n){return n.rangeCount>0}).bind(sG).map(function(n){return sr(n.start,n.soffset,n.finish,n.foffset)})},sX=function(n){s_(n).each(function(n){return n.removeAllRanges()})},sY=tinymce.util.Tools.resolve("tinymce.util.VK"),sJ=function(n,e,t){return sQ(n,e,f7(t,void 0).fold(function(){return f5.none(t)},function(n){return f4(n.all,t,n.index,1,iR)}))},sQ=function(n,e,t){return t.fold(B.none,B.none,function(n,e){return oq(e).map(function(n){return sq(sr(n,0,n,0))})},function(t){return n.execCommand("mceTableInsertRowAfter"),sJ(n,e,t)})},sZ=["table","li","dl"],s0=function(n,e,t){if(n.keyCode===sY.TAB){var r=o5(e),o=function(n){var e=es(n);return n0(n,r)||N(sZ,e)},u=e.selection.getRng();tg(nX.fromDom(n.shiftKey?u.startContainer:u.endContainer),o).each(function(r){n.preventDefault(),th(r,o).each(t.clear),e.selection.collapse(n.shiftKey),(n.shiftKey?function(n,e,t){return sQ(n,e,f7(t,void 0).fold(function(){return f5.none()},function(n){return f4(n.all,t,n.index,-1,iR)}))}:sJ)(e,o,r).each(function(n){e.selection.setRng(n)})})}},s1={create:function(n,e){return{selection:n,kill:e}}},s9=function(n,e,t,r){return{start:sn.on(n,e),finish:sn.on(t,r)}},s2=function(n,e){var t=sv(n,e);return f6.create(nX.fromDom(t.startContainer),t.startOffset,nX.fromDom(t.endContainer),t.endOffset)},s3=function(n,e,t,r,o){return n0(t,r)?B.none():rf(t,r,e).bind(function(e){var r=e.boxes.getOr([]);return r.length>1?(o(n,r,e.start,e.finish),B.some(s1.create(B.some(s9(t,0,t,oF(t))),!0))):B.none()})},s5=function(n,e){return{item:n,mode:e}},s4=function(n,e,t,r){return void 0===r&&(r=s7),n.property().parent(e).map(function(n){return s5(n,r)})},s7=function(n,e,t,r){return void 0===r&&(r=s6),t.sibling(n,e).map(function(n){return s5(n,r)})},s6=function(n,e,t,r){void 0===r&&(r=s6);var o=n.property().children(e);return t.first(o).map(function(n){return s5(n,r)})},s8=[{current:s4,next:s7,fallback:B.none()},{current:s7,next:s6,fallback:B.some(s4)},{current:s6,next:s6,fallback:B.some(s7)}],mn=function(n,e,t,r,o){return void 0===o&&(o=s8),G(o,function(n){return n.current===t}).bind(function(t){return t.current(n,e,r,t.next).orThunk(function(){return t.fallback.bind(function(t){return mn(n,e,t,r)})})})},me=function(n,e,t,r,o,u){return mn(n,e,r,o).bind(function(e){return u(e.item)?B.none():t(e.item)?B.some(e.item):me(n,e.item,t,e.mode,o,u)})},mt=function(n){return function(e){return 0===n.property().children(e).length}},mr=function(n,e,t,r){return me(n,e,t,s7,{sibling:function(n,e){return n.query().prevSibling(e)},first:function(n){return n.length>0?B.some(n[n.length-1]):B.none()}},r)},mo=function(n,e,t,r){return me(n,e,t,s7,{sibling:function(n,e){return n.query().nextSibling(e)},first:function(n){return n.length>0?B.some(n[0]):B.none()}},r)},mu=ro(),mi=function(n,e){return mr(mu,n,mt(mu),e)},mc=function(n,e){return mo(mu,n,mt(mu),e)},ml=rg([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),ma=function(n,e,t){var r=n.getRect(e),o=n.getRect(t);return o.right>r.left&&o.left<r.right},mf=function(n){return eG(n,"tr")},ms=nu(nu({},ml),{verify:function(n,e,t,r,o,u,i){return eG(r,"td,th",i).bind(function(t){return eG(e,"td,th",i).map(function(e){return n0(t,e)?n0(r,t)&&oF(t)===o?u(e):ml.none("in same cell"):rl(mf,[t,e]).fold(function(){return ma(n,e,t)?ml.success():u(e)},function(n){return u(e)})})}).getOr(ml.none("default"))},cata:function(n,e,t,r,o){return n.fold(e,t,r,o)}}),mm=function(n){return"br"===es(n)},md=function(n,e,t){return e(n,t).bind(function(n){return eb(n)&&0===rn(n).trim().length?md(n,e,t):B.some(n)})},mg=function(n,e,t,r){var o,u,i,c;return(mm(e)?r.traverse(e).orThunk(function(){return md(e,r.gather,n)}).map(r.relative):(o=n,u=e,i=t,c=r,eO(u,i).filter(mm).orThunk(function(){return eO(u,i-1).filter(mm)}).bind(function(n){return c.traverse(n).fold(function(){return md(n,c.gather,o).map(c.relative)},function(n){return eS(n).bind(function(e){var t=eD(e);return $(t,x(n0,n)).map(function(r){return{parent:e,children:t,element:n,index:r}})}).map(function(n){return sn.on(n.parent,n.index)})})}))).map(function(n){return{start:n,finish:n}})},mp=function(n,e){return{left:n.left,top:n.top+e,right:n.right,bottom:n.bottom+e}},mb=function(n,e){return{left:n.left,top:n.top-e,right:n.right,bottom:n.bottom-e}},mh=function(n,e,t){return{left:n.left+e,top:n.top+t,right:n.right+e,bottom:n.bottom+t}},mv=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}},mw=function(n,e){return B.some(n.getRect(e))},my=function(n,e,t){return ep(e)?mw(n,e).map(mv):eb(e)?(t>=0&&t<oF(e)?n.getRangedRect(e,t,e,t+1):t>0?n.getRangedRect(e,t-1,e,t):B.none()).map(mv):B.none()},mC=function(n,e){return ep(e)?mw(n,e).map(mv):eb(e)?n.getRangedRect(e,0,e,oF(e)).map(mv):B.none()},mS=rg([{none:[]},{retry:["caret"]}]),mT=function(n,e,t){return eW(function(n,e){return e(n)},eF,e,l$,void 0).fold(D,function(e){return mC(n,e).exists(function(n){return t.left<n.left||1>Math.abs(n.right-t.left)||t.left>n.right})})},mx=function(n,e,t,r,o){var u,i,c;return 0===o?B.some(r):(u=r.left,i=e.point(r),n.elementFromPoint(u,i).filter(function(n){return"table"===es(n)}).isSome())?(c=o-1,mx(n,e,t,e.move(r,5),c)):n.situsFromPoint(r.left,e.point(r)).bind(function(u){return u.start.fold(B.none,function(u){return mC(n,u).bind(function(i){return e.adjuster(n,u,i,t,r).fold(B.none,function(r){return mx(n,e,t,r,o-1)})}).orThunk(function(){return B.some(r)})},B.none)})},mR=function(n,e,t){var r=n.move(t,5),o=mx(e,n,t,r,100).getOr(r);return(n.point(o)>e.getInnerHeight()?B.some(n.point(o)-e.getInnerHeight()):0>n.point(o)?B.some(-n.point(o)):B.none()).fold(function(){return e.situsFromPoint(o.left,n.point(o))},function(t){return e.scrollBy(0,t),e.situsFromPoint(o.left,n.point(o)-t)})},mD={tryUp:x(mR,{point:function(n){return n.top},adjuster:function(n,e,t,r,o){var u=mb(o,5);return 1>Math.abs(t.top-r.top)||t.bottom<o.top?mS.retry(u):t.bottom===o.top?mS.retry(mb(o,1)):mT(n,e,o)?mS.retry(mh(u,5,0)):mS.none()},move:mb,gather:mi}),tryDown:x(mR,{point:function(n){return n.bottom},adjuster:function(n,e,t,r,o){var u=mp(o,5);return 1>Math.abs(t.bottom-r.bottom)||t.top>o.bottom?mS.retry(u):t.top===o.bottom?mS.retry(mp(o,1)):mT(n,e,o)?mS.retry(mh(u,5,0)):mS.none()},move:mp,gather:mc}),ieTryUp:function(n,e){return n.situsFromPoint(e.left,e.top-5)},ieTryDown:function(n,e){return n.situsFromPoint(e.left,e.bottom+5)},getJumpSize:C(5)},mO=function(n,e,t,r,o,u){return 0===u?B.none():mI(n,e,t,r,o).bind(function(i){var c=n.fromSitus(i),l=ms.verify(n,t,r,c.finish,c.foffset,o.failure,e);return ms.cata(l,function(){return B.none()},function(){return B.some(i)},function(i){return n0(t,i)&&0===r?mA(n,t,r,mb,o):mO(n,e,i,0,o,u-1)},function(i){return n0(t,i)&&r===oF(i)?mA(n,t,r,mp,o):mO(n,e,i,oF(i),o,u-1)})})},mA=function(n,e,t,r,o){return my(n,e,t).bind(function(e){return mk(n,o,r(e,mD.getJumpSize()))})},mk=function(n,e,t){var r=nG().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?e.otherRetry(n,t):r.isIE()?e.ieRetry(n,t):B.none()},mI=function(n,e,t,r,o){return my(n,t,r).bind(function(e){return mk(n,o,e)})},mB=function(n,e,t,r,o){return eG(r,"td,th",e).bind(function(r){return eG(r,"table",e).bind(function(u){var i,c,l;return eF(o,function(n){return eS(n).exists(function(n){return n0(n,u)})},void 0).isSome()?(i=n,c=e,l=t,i.getSelection().bind(function(n){return mg(c,n.finish,n.foffset,l).fold(function(){return B.some(cP(n.finish,n.foffset))},function(e){var t,r=i.fromSitus(e);return t=ms.verify(i,n.finish,n.foffset,r.finish,r.foffset,l.failure,c),ms.cata(t,function(n){return B.none()},function(){return B.none()},function(n){return B.some(cP(n,0))},function(n){return B.some(cP(n,oF(n)))})})}).bind(function(n){return mO(i,c,n.element,n.offset,l,20).map(i.fromSitus)})).bind(function(n){return eG(n.finish,"td,th",e).map(function(e){return{start:r,finish:e,range:n}})}):B.none()})})},mM=function(n,e,t,r,o,u){return nG().browser.isIE()?B.none():u(r,e).orThunk(function(){return mB(n,e,t,r,o).map(function(n){var e=n.range;return s1.create(B.some(s9(e.start,e.soffset,e.finish,e.foffset)),!0)})})},mE=function(n,e){return eG(n,"tr",e).bind(function(n){return eG(n,"table",e).bind(function(t){return n0(n,ej(t,"tr")[0])?mr(mu,t,function(n){return oU(n).isSome()},e).map(function(n){var e=oF(n);return s1.create(B.some(s9(n,e,n,e)),!0)}):B.none()})})},mP=function(n,e){return eG(n,"tr",e).bind(function(n){return eG(n,"table",e).bind(function(t){var r=ej(t,"tr");return n0(n,r[r.length-1])?mo(mu,t,function(n){return oq(n).isSome()},e).map(function(n){return s1.create(B.some(s9(n,0,n,0)),!0)}):B.none()})})},mN=function(n,e,t,r,o,u,i){return mB(n,t,r,o,u).bind(function(n){return s3(e,t,n.start,n.finish,i)})},mz=function(n,e){return eG(n,"td,th",e)},m_=function(n,e,t,r){var o=fe(),u=o.clear,i=function(u){o.on(function(o){r.clearBeforeUpdate(e),mz(u.target,t).each(function(i){rf(o,i,t).each(function(t){var o=t.boxes.getOr([]);if(1===o.length){var c=o[0],l="false"===iD(c),a=e1(ix(u.target),c,n0);l&&a&&(r.selectRange(e,o,c,c),n.selectContents(c))}else o.length>1&&(r.selectRange(e,o,t.start,t.finish),n.selectContents(i))})})})};return{clearstate:u,mousedown:function(n){r.clear(e),mz(n.target,t).each(o.set)},mouseover:function(n){i(n)},mouseup:function(n){i(n),u()}}},mL={traverse:eR,gather:mc,relative:sn.before,otherRetry:mD.tryDown,ieRetry:mD.ieTryDown,failure:ms.failedDown},mj={traverse:ex,gather:mi,relative:sn.before,otherRetry:mD.tryUp,ieRetry:mD.ieTryUp,failure:ms.failedUp},mW=function(n){return function(e){return e===n}},mF=mW(38),mH=mW(40),mV=function(n){return n>=37&&n<=40},mq={isBackward:mW(37),isForward:mW(39)},mU={isBackward:mW(39),isForward:mW(37)},mG=function(n){var e=void 0!==n?n.dom:document;return r$(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},m$=function(n,e,t){var r=(void 0!==t?t.dom:document).defaultView;r&&r.scrollBy(n,e)},mK=function(n){return{elementFromPoint:function(e,t){return nX.fromPoint(nX.fromDom(n.document),e,t)},getRect:function(n){return n.dom.getBoundingClientRect()},getRangedRect:function(e,t,r,o){return sd(sv(n,sr(e,t,r,o)))},getSelection:function(){return sK(n).map(function(e){return s2(n,e)})},fromSitus:function(e){return s2(n,st(e.start,e.finish))},situsFromPoint:function(e,t){var r,o,u;return(r=n,o=e,u=t,sB(nX.fromDom(r.document),o,u).map(function(n){return f6.create(nX.fromDom(n.startContainer),n.startOffset,nX.fromDom(n.endContainer),n.endOffset)})).map(function(n){return s9(n.start,n.soffset,n.finish,n.foffset)})},clearSelection:function(){sX(n)},collapseSelection:function(e){void 0===e&&(e=!1),sK(n).each(function(t){return t.fold(function(n){return n.collapse(e)},function(t,r){var o=e?t:r;sV(n,o,o)},function(t,r,o,u){var i=e?t:o,c=e?r:u;sH(n,i,c,i,c)})})},setSelection:function(e){sH(n,e.start,e.soffset,e.finish,e.foffset)},setRelativeSelection:function(e,t){sV(n,e,t)},selectNode:function(e){s$(n,e,!1)},selectContents:function(e){s$(n,e)},getInnerHeight:function(){return n.innerHeight},getScrollY:function(){return mG(nX.fromDom(n.document)).top},scrollBy:function(e,t){m$(e,t,nX.fromDom(n.document))}}},mX=function(n,e){return{rows:n,cols:e}},mY=function(n,e,t,r){var o=m_(mK(n),e,t,r);return{clearstate:o.clearstate,mousedown:o.mousedown,mouseover:o.mouseover,mouseup:o.mouseup}},mJ=function(n,e,t,r){var o=mK(n),u=function(){return r.clear(e),B.none()};return{keydown:function(n,i,c,l,a,f){var s=n.raw,m=s.which,d=!0===s.shiftKey;return rs(e,r.selectedSelector).fold(function(){return(mV(m)&&!d&&r.clearBeforeUpdate(e),mH(m)&&d)?x(mN,o,e,t,mL,l,i,r.selectRange):mF(m)&&d?x(mN,o,e,t,mj,l,i,r.selectRange):mH(m)?x(mM,o,t,mL,l,i,mP):mF(m)?x(mM,o,t,mj,l,i,mE):B.none},function(n){var t=function(t){return function(){return no(t,function(t){var o,u,i,c,l,a;return o=t.rows,(u=n,i=o,c=t.cols,l=r.firstSelectedSelector,a=r.lastSelectedSelector,G(u,function(n){return nY(n,a)}).bind(function(n){return th(n).bind(function(e){var t;return t=tY(e),tW.findItem(t,n,n0).bind(function(n){var e=i>0?n.row+n.rowspan-1:n.row,r=c>0?n.column+n.colspan-1:n.column;return tW.getAt(t,e+i,r+c).map(function(n){return n.element})})}).bind(function(n){return eV(n,"table").bind(function(e){return eU(e,l).bind(function(e){return rf(e,n).bind(function(n){return n.boxes.map(function(e){return{boxes:e,start:n.start,finish:n.finish}})})})})})})).map(function(n){return r.clearBeforeUpdate(e),r.selectRange(e,n.boxes,n.start,n.finish),n.boxes})}).fold(function(){return rm(e,r.firstSelectedSelector,r.lastSelectedSelector).map(function(n){var t=mH(m)||f.isForward(m)?sn.after:sn.before;return o.setRelativeSelection(sn.on(n.first,0),t(n.table)),r.clear(e),s1.create(B.none(),!0)})},function(n){return B.some(s1.create(B.none(),!0))})}};return mH(m)&&d?t([mX(1,0)]):mF(m)&&d?t([mX(-1,0)]):f.isBackward(m)&&d?t([mX(0,-1),mX(-1,0)]):f.isForward(m)&&d?t([mX(0,1),mX(1,0)]):mV(m)&&!d?u:B.none})()},keyup:function(n,o,u,i,c){return rs(e,r.selectedSelector).fold(function(){var l,a=n.raw,f=a.which;return!0===a.shiftKey&&mV(f)?(l=r.selectRange,n0(o,i)&&u===c?B.none():eG(o,"td,th",t).bind(function(n){return eG(i,"td,th",t).bind(function(r){return s3(e,t,n,r,l)})})):B.none()},B.none)}}},mQ=function(n,e,t,r){var o=mK(n);return function(n,u){r.clearBeforeUpdate(e),rf(n,u,t).each(function(n){var t=n.boxes.getOr([]);r.selectRange(e,t,n.start,n.finish),o.selectContents(u),o.collapseSelection()})}},mZ=function(n,e,t){var r=function(e){eZ(e,n.selected),eZ(e,n.firstSelected),eZ(e,n.lastSelected)},o=function(e){eK(e,n.selected,"1")},u=function(n){i(n),t()},i=function(e){j(ej(e,n.selectedSelector+","+n.firstSelectedSelector+","+n.lastSelectedSelector),r)};return{clearBeforeUpdate:i,clear:u,selectRange:function(t,r,i,c){u(t),j(r,o),eK(i,n.firstSelected,"1"),eK(c,n.lastSelected,"1"),e(r,i,c)},selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}},m0=function(n,e,t){var r=tW.fromTable(n);return ln(r,e).map(function(n){var e=c3(r,t,!1);return{upOrLeftCells:X(c5(e.slice(0,n[n.length-1].row+1)),function(e){return L(e.cells.slice(0,n[n.length-1].column+1),function(n){return n.element})}),downOrRightCells:X(c5(e.slice(n[0].row+n[0].rowspan-1,e.length)),function(e){return L(e.cells.slice(n[0].column+n[0].colspan-1,e.cells.length),function(n){return n.element})})}})},m1=tinymce.util.Tools.resolve("tinymce.Env"),m9=function(n){return!1===iw(nX.fromDom(n.target),"ephox-snooker-resizer-bar")},m2=function(n,e){var t=a8(B.none()),r=a8([]),o=B.none(),u=ew("caption"),i=function(n){return o.forall(function(e){return!e[n]})},c=function(){return um(ut(n),o6(n)).bind(function(t){return e2(th(t),um(nX.fromDom(n.selection.getEnd()),o6(n)).bind(th),function(n,r){return n0(n,r)?u(t)?B.some({element:t,mergable:B.none(),unmergable:B.none(),selection:[t]}):B.some(uf(e,n,t)):B.none()}).bind(S)})},l=function(n){return th(n.element).map(function(e){var t=tW.fromTable(e),r=q(ln(t,n).getOr([]),function(n,e){return e.isLocked&&(n.onAny=!0,0===e.column?n.onFirst=!0:e.column+e.colspan>=t.grid.columns&&(n.onLast=!0)),n},{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:lr(t,n).isSome(),unmergeable:lo(t,n).isSome(),locked:r}})},a=function(){t.set(nc(c)()),o=t.get().bind(l),j(r.get(),function(n){return n()})},f=function(n){return n(),r.set(r.get().concat([n])),function(){r.set(H(r.get(),function(e){return e!==n}))}},s=function(n,e){return f(function(){return t.get().fold(function(){n.setDisabled(!0)},function(t){n.setDisabled(e(t))})})},m=function(n,e,r){return f(function(){return t.get().fold(function(){n.setDisabled(!0),n.setActive(!1)},function(t){n.setDisabled(e(t)),n.setActive(r(t))})})},d=function(n){return o.exists(function(e){return e.locked[n]})},g=function(e,t){return function(r){return m(r,function(n){return u(n.element)},function(){return n.queryCommandValue(e)===t})}},p=g("mceTableRowType","header"),b=g("mceTableColType","th");return n.on("NodeChange ExecCommand TableSelectorChange",a),{onSetupTable:function(n){return s(n,function(n){return!1})},onSetupCellOrRow:function(n){return s(n,function(n){return u(n.element)})},onSetupColumn:function(n){return function(e){return s(e,function(e){return u(e.element)||d(n)})}},onSetupPasteable:function(n){return function(e){return s(e,function(e){return u(e.element)||n().isNone()})}},onSetupPasteableColumn:function(n,e){return function(t){return s(t,function(t){return u(t.element)||n().isNone()||d(e)})}},onSetupMergeable:function(n){return s(n,function(n){return i("mergeable")})},onSetupUnmergeable:function(n){return s(n,function(n){return i("unmergeable")})},resetTargets:a,onSetupTableWithCaption:function(e){return m(e,D,function(e){return th(e.element,o6(n)).exists(function(n){return eq(n,"caption").isSome()})})},onSetupTableRowHeaders:p,onSetupTableColumnHeaders:b,targets:t.get}},m3=function(n,e,t,r){n.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(n){return n("inserttable | cell row column | advtablesort | tableprops deletetable")}});var o=function(e){return function(){return n.execCommand(e)}};n.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:o("mceTableProps"),icon:"table",onSetup:t.onSetupTable}),n.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:o("mceTableDelete"),icon:"table-delete-table",onSetup:t.onSetupTable}),n.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:o("mceTableCellProps"),icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:o("mceTableMergeCells"),icon:"table-merge-cells",onSetup:t.onSetupMergeable}),n.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:o("mceTableSplitCells"),icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),n.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:o("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:o("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:o("mceTableDeleteRow"),icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:o("mceTableRowProps"),icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:o("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:t.onSetupColumn("onFirst")}),n.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:o("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:t.onSetupColumn("onLast")}),n.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:o("mceTableDeleteCol"),icon:"table-delete-column",onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:t.onSetupPasteable(r.getRows)}),n.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:t.onSetupPasteable(r.getRows)}),n.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onFirst")}),n.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onLast")}),n.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:o("mceInsertTable"),icon:"table"});var u=fi(cs(n));0!==u.length&&n.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:fc(n,e,u,"tableclass",function(e){return n.execCommand("mceTableToggleClass",!1,e)}),onSetup:t.onSetupTable});var i=fi(cf(n));0!==i.length&&n.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:fc(n,e,i,"tablecellclass",function(e){return n.execCommand("mceTableCellToggleClass",!1,e)}),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:fc(n,e,aZ,"tablecellverticalalign",fu(n,"vertical-align")),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:fc(n,e,ct(n),"tablecellborderwidth",fu(n,"border-width")),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:fc(n,e,cr(n),"tablecellborderstyle",fu(n,"border-style")),onSetup:t.onSetupCellOrRow}),n.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:o("mceTableToggleCaption"),icon:"table-caption",onSetup:t.onSetupTableWithCaption}),n.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(e){return e(fl(n,cC(n),"background-color"))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(e){return e(fl(n,cS(n),"border-color"))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:fa(n),onSetup:t.onSetupTableRowHeaders}),n.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:ff(n),onSetup:t.onSetupTableColumnHeaders})},m5=function(n){var e=n.getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol");e.length>0&&n.ui.registry.addContextToolbar("table",{predicate:function(e){return n.dom.is(e,"table")&&n.getBody().contains(e)},items:e,scope:"node",position:"node"})},m4=function(n,e,t,r){var o=function(e){return function(){return n.execCommand(e)}},u=function(e){n.execCommand("mceInsertTable",!1,{rows:e.numRows,columns:e.numColumns})},i={text:"Table properties",onSetup:t.onSetupTable,onAction:o("mceTableProps")},c={text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,onAction:o("mceTableDelete")};n.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:o("mceTableInsertRowBefore"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:o("mceTableInsertRowAfter"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:o("mceTableDeleteRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:o("mceTableRowProps"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:t.onSetupPasteable(r.getRows)}),n.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:t.onSetupPasteable(r.getRows)});var l={type:"nestedmenuitem",text:"Row",getSubmenuItems:C("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")};n.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:o("mceTableInsertColBefore"),onSetup:t.onSetupColumn("onFirst")}),n.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:o("mceTableInsertColAfter"),onSetup:t.onSetupColumn("onLast")}),n.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:o("mceTableDeleteCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onFirst")}),n.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onLast")});var a={type:"nestedmenuitem",text:"Column",getSubmenuItems:C("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")};n.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:o("mceTableCellProps"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:o("mceTableMergeCells"),onSetup:t.onSetupMergeable}),n.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:o("mceTableSplitCells"),onSetup:t.onSetupUnmergeable});var f={type:"nestedmenuitem",text:"Cell",getSubmenuItems:C("tablecellprops tablemergecells tablesplitcells")};!1===n.getParam("table_grid",!0,"boolean")?n.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTable")}):n.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:u}]}}),n.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTable")}),n.ui.registry.addMenuItem("tableprops",i),n.ui.registry.addMenuItem("deletetable",c),n.ui.registry.addNestedMenuItem("row",l),n.ui.registry.addNestedMenuItem("column",a),n.ui.registry.addNestedMenuItem("cell",f),n.ui.registry.addContextMenu("table",{update:function(){return t.resetTargets(),t.targets().fold(C(""),function(n){return"caption"===es(n.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}});var s=fi(cs(n));0!==s.length&&n.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return fo(n,e,s,"tableclass",function(e){return n.execCommand("mceTableToggleClass",!1,e)})},onSetup:t.onSetupTable});var m=fi(cf(n));0!==m.length&&n.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return fo(n,e,m,"tablecellclass",function(e){return n.execCommand("mceTableCellToggleClass",!1,e)})},onSetup:t.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return fo(n,e,aZ,"tablecellverticalalign",fu(n,"vertical-align"))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return fo(n,e,ct(n),"tablecellborderwidth",fu(n,"border-width"))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return fo(n,e,cr(n),"tablecellborderstyle",fu(n,"border-style"))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:o("mceTableToggleCaption"),onSetup:t.onSetupTableWithCaption}),n.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return fl(n,cC(n),"background-color")},onSetup:t.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return fl(n,cS(n),"border-color")},onSetup:t.onSetupCellOrRow}),n.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:fa(n),onSetup:t.onSetupTableRowHeaders}),n.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:ff(n),onSetup:t.onSetupTableColumnHeaders})};ry.add("table",function(n){var e,t,r,o,u,i,c,l,a,f=(u=function(){return o5(n)},i=function(){return ud(ut(n),o6(n))},c=ua.selectedSelector,{get:function(){return rd(u(),c).fold(function(){return i().fold(rh,rw)},function(n){return rv(n)})}}),s=m2(n,f),m=cE(n),d=(l=m.lazyResize,a=mZ(ua,function(e,t,r){s.targets().each(function(o){th(t).each(function(u){var i=cw(n),c=m0(u,o,o1(y,nX.fromDom(n.getDoc()),i));iQ(n,e,t,r,c)})})},function(){return iZ(n)}),n.on("init",function(e){var t,r,o=n.getWin(),u=o5(n),i=o6(n),c=mY(o,u,i,a),f=mJ(o,u,i,a),s=mQ(o,u,i,a);n.on("TableSelectorChange",function(n){return s(n.start,n.finish)});var m=function(e,t){!0===e.raw.shiftKey&&(t.kill&&e.kill(),t.selection.each(function(e){var t=sv(o,st(e.start,e.finish));n.selection.setRng(t)}))},d=function(n){return 0===n.button},g=(t=a8(nX.fromDom(u)),r=a8(0),{touchEnd:function(n){var e=nX.fromDom(n.target);if("td"===es(e)||"th"===es(e)){var o=t.get(),u=r.get();n0(o,e)&&n.timeStamp-u<300&&(n.preventDefault(),s(e,e))}t.set(e),r.set(n.timeStamp)}});n.on("dragstart",function(n){c.clearstate()}),n.on("mousedown",function(n){d(n)&&m9(n)&&c.mousedown(il(n))}),n.on("mouseover",function(n){(void 0===n.buttons||m1.browser.isEdge()&&0===n.buttons||(1&n.buttons)!=0)&&m9(n)&&c.mouseover(il(n))}),n.on("mouseup",function(n){d(n)&&m9(n)&&c.mouseup(il(n))}),n.on("touchend",g.touchEnd),n.on("keyup",function(e){var t=il(e);if(t.raw.shiftKey&&mV(t.raw.which)){var r=n.selection.getRng(),o=nX.fromDom(r.startContainer),u=nX.fromDom(r.endContainer);f.keyup(t,o,r.startOffset,u,r.endOffset).each(function(n){m(t,n)})}}),n.on("keydown",function(e){var t=il(e);l().each(function(n){return n.hideBars()});var r=n.selection.getRng(),o=nX.fromDom(r.startContainer),u=nX.fromDom(r.endContainer),i=rH(mq,mU)(nX.fromDom(n.selection.getStart()));f.keydown(t,o,r.startOffset,u,r.endOffset,i).each(function(n){m(t,n)}),l().each(function(n){return n.showBars()})}),n.on("NodeChange",function(){var e=n.selection;rl(th,[nX.fromDom(e.getStart()),nX.fromDom(e.getEnd())]).fold(function(){return a.clear(u)},y)})}),{clear:a.clear}),g=ak(n,d,m.lazyWire),p=fZ();return fJ(n,g,d,f,p),fQ(n,g,f),ub(n,f,g),m4(n,f,s,p),m3(n,f,s,p),m5(n),n.on("PreInit",function(){n.serializer.addTempAttr(ua.firstSelected),n.serializer.addTempAttr(ua.lastSelected),f2(n)}),n.getParam("table_tab_navigation",!0,"boolean")&&n.on("keydown",function(e){s0(e,n,d)}),n.on("remove",function(){m.destroy()}),e=n,t=p,r=m,o=s,{insertTable:function(n,t,r){void 0===r&&(r={});var o=aW(e,t,n,r,"Invalid values for insertTable - rows and columns values are required to insert a table.");return e.undoManager.add(),o},setClipboardRows:aH(t.setRows),getClipboardRows:aF(t.getRows),setClipboardCols:aH(t.setColumns),getClipboardCols:aF(t.getColumns),resizeHandler:r,selectionTargets:o}})}();