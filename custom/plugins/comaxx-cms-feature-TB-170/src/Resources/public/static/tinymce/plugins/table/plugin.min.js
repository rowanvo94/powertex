!function(){"use strict";function e(e){return function(t){var n;return n=typeof t,(null===t?"null":"object"==n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n)===e}}function t(e){return function(t){return typeof t===e}}function n(e){return function(t){return e===t}}function r(){}function o(e){return function(){return e}}function u(e){return e}function i(e,t){return e===t}var c=e("string"),l=e("object"),a=e("array"),f=n(null),s=t("boolean"),m=n(void 0),d=t("function"),g=t("number");function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}function b(e){return function(t){return!e(t)}}function h(){return y}var v=o(!1),w=o(!0),y={fold:function(e,t){return e()},isSome:v,isNone:w,getOr:u,getOrThunk:C,getOrDie:function(e){throw Error(e||"error: getOrDie called on none.")},getOrNull:o(null),getOrUndefined:o(void 0),or:u,orThunk:C,map:h,each:r,bind:h,exists:v,forall:w,filter:function(){return y},toArray:function(){return[]},toString:o("none()")};function C(e){return e()}function S(e,t){return -1<q.call(e,t)}function T(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1}function x(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n}function R(e,t){for(var n=e.length,r=Array(n),o=0;o<n;o++){var u=e[o];r[o]=t(u,o)}return r}function D(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function O(e,t){for(var n=[],r=[],o=0,u=e.length;o<u;o++){var i=e[o];(t(i,o)?n:r).push(i)}return{pass:n,fail:r}}function A(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var u=e[r];t(u,r)&&n.push(u)}return n}function k(e,t,n){return function(e){for(var r,o=e.length-1;0<=o;o--)r=e[o],n=t(n,r,o)}(e),n}function I(e,t,n){return D(e,function(e,r){n=t(n,e,r)}),n}function B(e,t){return function(e,t,n){for(var r=0,o=e.length;r<o;r++){var u=e[r];if(t(u,r))return H.some(u);if(n(u,r))break}return H.none()}(e,t,v)}function M(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return H.some(n);return H.none()}function E(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!a(e[n]))throw Error("Arr.flatten item "+n+" was not an array, input: "+e);U.apply(t,e[n])}return t}function P(e,t){return E(R(e,t))}function N(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return!1;return!0}function z(e,t){for(var n={},r=0,o=e.length;r<o;r++){var u=e[r];n[String(u)]=t(u,r)}return n}function _(e){return[e]}function L(e,t){return 0<=t&&t<e.length?H.some(e[t]):H.none()}function W(e){return L(e,e.length-1)}function j(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return H.none()}var F=function(e){function t(){return u}function n(t){return t(e)}var r=o(e),u={fold:function(t,n){return n(e)},isSome:w,isNone:v,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:t,orThunk:t,map:function(t){return F(t(e))},each:function(t){t(e)},bind:n,exists:n,forall:n,filter:function(t){return t(e)?u:y},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return u},H={some:F,none:h,from:function(e){return null==e?y:F(e)}},V=Array.prototype.slice,q=Array.prototype.indexOf,U=Array.prototype.push,G=function(){return(G=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function $(e,t,n){if(n||2==arguments.length)for(var r,o=0,u=t.length;o<u;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function K(e){var t,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,t=e.apply(null,r)),t}}function X(e,t){var n=String(t).toLowerCase();return B(e,function(e){return e.search(n)})}function Y(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t}function J(e,t){return -1!==e.indexOf(t)}function Q(e,t){return Y(e,t,e.length-t.length)}function Z(e){return 0<e.length}function ee(e){return function(t){return J(t,e)}}function et(e){return window.matchMedia(e).matches}function en(e,t){var n=e.dom;if(1!==n.nodeType)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw Error("Browser lacks native selectors")}function er(e){return 1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount}function eo(e,t){var n=void 0===t?document:t.dom;return er(n)?H.none():H.from(n.querySelector(e)).map(eL.fromDom)}function eu(e,t){return e.dom===t.dom}function ei(e,t){var n,r,o,u,i;return e_().browser.isIE()?(n=e.dom,r=t.dom,o=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(n.compareDocumentPosition(r)&o)):(u=e.dom)!==(i=t.dom)&&u.contains(i)}function ec(e,t){for(var n=eW(e),r=0,o=n.length;r<o;r++){var u=n[r];t(e[u],u)}}function el(e,t){return eF(e,function(e,n){return{k:n,v:t(e,n)}})}function ea(e,t){var n={},o=function(e,t){n[t]=e};return ec(e,function(e,n){(t(e,n)?o:r)(e,n)}),n}function ef(e,t){var n=[];return ec(e,function(e,r){n.push(t(e,r))}),n}function es(e){return eW(e).length}function em(e,t){return eH(e,t)?H.from(e[t]):H.none()}function ed(e,t){return eH(e,t)&&void 0!==e[t]&&null!==e[t]}function eg(e,t,n){return{element:e,rowspan:t,colspan:n}}function ep(e,t,n){return{element:e,cells:t,section:n}}function eb(e,t,n){return{element:e,isNew:t,isLocked:n}}function eh(e,t,n,r){return{element:e,cells:t,section:n,isNew:r}}function ev(){return eT(0,0)}function ew(e){function t(e){return function(){return n===e}}var n=e.current;return{current:n,version:e.version,isEdge:t("Edge"),isChrome:t("Chrome"),isIE:t("IE"),isOpera:t("Opera"),isFirefox:t(ek),isSafari:t("Safari")}}function ey(e){function t(e){return function(){return n===e}}var n=e.current;return{current:n,version:e.version,isWindows:t(eB),isiOS:t("iOS"),isAndroid:t(eM),isOSX:t("OSX"),isLinux:t("Linux"),isSolaris:t(eE),isFreeBSD:t(eP),isChromeOS:t(eN)}}function eC(e){if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}}var eS,eT=function(e,t){return{major:e,minor:t}},ex=function(e,t){var n,r,o=String(t).toLowerCase();return 0===e.length?eT(0,0):(r=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,n=o))?eT(u(1),u(2)):{major:0,minor:0};function u(e){return Number(n.replace(r,"$"+e))}},eR=function(e,t){return Y(e,t,0)},eD=(eS=/^\s+|\s+$/g,function(e){return e.replace(eS,"")}),eO=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,eA={browsers:o([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return J(e,"edge/")&&J(e,"chrome")&&J(e,"safari")&&J(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,eO],search:function(e){return J(e,"chrome")&&!J(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return J(e,"msie")||J(e,"trident")}},{name:"Opera",versionRegexes:[eO,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ee("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ee("firefox")},{name:"Safari",versionRegexes:[eO,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(J(e,"safari")||J(e,"mobile/"))&&J(e,"applewebkit")}}]),oses:o([{name:"Windows",search:ee("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return J(e,"iphone")||J(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ee("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ee("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ee("linux"),versionRegexes:[]},{name:"Solaris",search:ee("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ee("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ee("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},ek="Firefox",eI=function(){return ew({current:void 0,version:eT(0,0)})},eB=(o("Edge"),o("Chrome"),o("IE"),o("Opera"),o(ek),o("Safari"),"Windows"),eM="Android",eE="Solaris",eP="FreeBSD",eN="ChromeOS",ez=function(){return ey({current:void 0,version:eT(0,0)})},e_=(o(eB),o("iOS"),o(eM),o("Linux"),o("OSX"),o(eE),o(eP),o(eN),K(function(){var e,t,n,r,u,i,c,l,a,f,s,m,d;return e=navigator.userAgent,t=H.from(navigator.userAgentData),f=eA.browsers(),s=eA.oses(),{browser:m=t.bind(function(e){return j(e.brands,function(e){var t=e.brand.toLowerCase();return B(f,function(e){var n;return t===(null===(n=e.brand)||void 0===n?void 0:n.toLowerCase())}).map(function(t){return{current:t.name,version:eT(parseInt(e.version,10),0)}})})}).orThunk(function(){return X(f,e).map(function(t){var n=ex(t.versionRegexes,e);return{current:t.name,version:n}})}).fold(eI,ew),os:d=X(s,e).map(function(t){var n=ex(t.versionRegexes,e);return{current:t.name,version:n}}).fold(ez,ey),deviceType:(n=d.isiOS()&&!0===/ipad/i.test(e),r=d.isiOS()&&!n,i=(u=d.isiOS()||d.isAndroid())||et("(pointer:coarse)"),c=n||!r&&u&&et("(min-device-width:768px)"),l=r||u&&!c,a=m.isSafari()&&d.isiOS()&&!1===/safari/i.test(e),{isiPad:o(n),isiPhone:o(r),isTablet:o(c),isPhone:o(l),isTouch:o(i),isAndroid:d.isAndroid,isiOS:d.isiOS,isWebView:o(a),isDesktop:o(!l&&!c&&!a)})}})),eL={fromTag:function(e,t){return eC((t||document).createElement(e))},fromText:function(e,t){return eC((t||document).createTextNode(e))},fromDom:eC,fromPoint:function(e,t,n){return H.from(e.dom.elementFromPoint(t,n)).map(eC)}},eW=Object.keys,ej=Object.hasOwnProperty,eF=function(e,t){var n={};return ec(e,function(e,r){var o=t(e,r);n[o.k]=o.v}),n},eH=function(e,t){return ej.call(e,t)},eV=["tfoot","thead","tbody","colgroup"];function eq(e){return e.dom.nodeName.toLowerCase()}function eU(e){return e.dom.nodeType}function eG(e){return function(t){return eU(t)===e}}function e$(e){return 8===eU(e)||"#comment"===eq(e)}function eK(e){return function(t){return e4(t)&&eq(t)===e}}function eX(e){return eL.fromDom(e.dom.ownerDocument)}function eY(e){return e6(e)?e:eX(e)}function eJ(e){return H.from(e.dom.parentNode).map(eL.fromDom)}function eQ(e,t){for(var n=d(t)?t:v,r=e.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var u=r.parentNode,i=eL.fromDom(u);if(o.push(i),!0===n(i))break;r=u}return o}function eZ(e){return H.from(e.dom.previousSibling).map(eL.fromDom)}function e0(e){return H.from(e.dom.nextSibling).map(eL.fromDom)}function e1(e){return R(e.dom.childNodes,eL.fromDom)}function e9(e,t){var n=e.dom.childNodes;return H.from(n[t]).map(eL.fromDom)}function e2(e,t,n){var r;return r=function(e){return en(e,t)},A(eQ(e,n),r)}function e3(e,t){var n;return n=function(e){return en(e,t)},A(e1(e),n)}function e5(e,t){var n;return er(n=void 0===e?document:e.dom)?[]:R(n.querySelectorAll(t),eL.fromDom)}"undefined"!=typeof window||Function("return this;")();var e4=eG(1),e7=eG(3),e6=eG(9),e8=eG(11),te=d(Element.prototype.attachShadow)&&d(Node.prototype.getRootNode),tt=o(te),tn=te?function(e){return eL.fromDom(e.dom.getRootNode())}:eY,tr=function(e){var t=e7(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var n,r=t.ownerDocument;return(e8(n=tn(eL.fromDom(t)))&&null!=n.dom.host?H.some(n):H.none()).fold(function(){return r.body.contains(t)},function(e){return tr(eL.fromDom(e.dom.host))})},to=function(e){var t=e.dom.body;if(null==t)throw Error("Body is not available yet");return eL.fromDom(t)},tu=function(e,t){var n=[];return D(e1(e),function(e){n=(n=t(e)?n.concat([e]):n).concat(tu(e,t))}),n};function ti(e,t,n,r,o){return e(n,r)?H.some(n):d(o)&&o(n)?H.none():t(n,r,o)}function tc(e,t,n){for(var r=e.dom,o=d(n)?n:v;r.parentNode;){var r=r.parentNode,u=eL.fromDom(r);if(t(u))return H.some(u);if(o(u))break}return H.none()}function tl(e,t,n){return tc(e,function(e){return en(e,t)},n)}function ta(e,t){var n;return n=function(e){return en(e,t)},B(e.dom.childNodes,function(e){return n(eL.fromDom(e))}).map(eL.fromDom)}function tf(e,t,n){return ti(en,tl,e,t,n)}function ts(e,t,n){if(!(c(n)||s(n)||g(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),Error("Attribute value was not simple");e.setAttribute(t,n+"")}function tm(e,t,n){ts(e.dom,t,n)}function td(e,t){var n=e.dom;ec(t,function(e,t){ts(n,t,e)})}function tg(e,t){var n=e.dom.getAttribute(t);return null===n?void 0:n}function tp(e,t){return H.from(tg(e,t))}function tb(e){return I(e.dom.attributes,function(e,t){return e[t.name]=t.value,e},{})}function th(e,t,n){return void 0===n&&(n=i),e.exists(function(e){return n(e,t)})}function tv(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t}function tw(e,t,n){return e.isSome()&&t.isSome()?H.some(n(e.getOrDie(),t.getOrDie())):H.none()}function ty(e,t){return e?H.some(t):H.none()}function tC(e){return void 0!==e.style&&d(e.style.getPropertyValue)}function tS(e,t,n){if(!c(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),Error("CSS value must be a string: "+n);tC(e)&&e.style.setProperty(t,n)}function tT(e,t,n){tS(e.dom,t,n)}function tx(e,t){var n=e.dom;ec(t,function(e,t){tS(n,t,e)})}function tR(e,t){var n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||tr(e)?r:ni(n,t)}function tD(e,t){var n=ni(e.dom,t);return H.from(n).filter(function(e){return 0<e.length})}function tO(e,t){var n;tC(n=e.dom)&&n.style.removeProperty(t),th(tp(e,"style").map(eD),"")&&nu(e,"style")}function tA(e,t,n){return void 0===n&&(n=0),tp(e,t).map(function(e){return parseInt(e,10)}).getOr(n)}function tk(e){return eK("col")(e)?1<tA(e,"span",1):1<tA(e,"colspan",1)}function tI(e){return 1<tA(e,"rowspan",1)}function tB(e,t){return parseInt(tR(e,t),10)}function tM(e,t){var n,r;return n=["td","th"],(r=void 0===(r=t)?v:t)(e)?H.none():S(n,eq(e))?H.some(e):tl(e,n.join(","),function(e){return en(e,"table")||r(e)})}function tE(e){return na(e,"th,td",w)}function tP(e){return en(e,"colgroup")?e3(e,"col"):P(nf(e),function(e){return e3(e,"col")})}function tN(e,t){return tf(e,"table",t)}function tz(e){return na(e,"tr",w)}function t_(e,t){return R(e,function(e){if("colgroup"!==eq(e))return ep(e,n=R(tE(e),function(e){return eg(e,tA(e,"rowspan",1),tA(e,"colspan",1))}),t(e));var n=R(tP(e),function(e){return eg(e,1,tA(e,"span",1))});return ep(e,n,"colgroup")})}function tL(e){return eJ(e).map(function(e){var t=eq(e);return S(eV,t)?t:"tbody"}).getOr("tbody")}function tW(e){var t=tz(e);return t_($($([],nf(e),!0),t,!0),tL)}function tj(e,t,n){var r=e.cells,o=r.slice(0,t),u=r.slice(t);return ns(e,o.concat(n).concat(u))}function tF(e,t,n){e.cells[t]=n}function tH(e,t){return e.cells[t]}function tV(e,t){return tH(e,t).element}function tq(e){return e.cells.length}function tU(e){var t=O(e,function(e){return"colgroup"===e.section});return{rows:t.fail,cols:t.pass}}function tG(e,t,n){var r=R(e.cells,n);return eh(t(e.element),r,e.section,!0)}function t$(e){return tp(e,nm).bind(function(e){return H.from(e.match(/\d+/g))}).map(function(e){return z(e,w)})}function tK(e){var t,n=ef(I(tU(e).rows,function(e,t){return D(t.cells,function(t,n){t.isLocked&&(e[n]=!0)}),e},{}),function(e,t){return parseInt(t,10)});return(t=V.call(n,0)).sort(void 0),t}function tX(e){var t={},n=[],r=L(e,0).map(function(e){return e.element}).bind(tN).bind(t$).getOr({}),o=0,i=0,c=0,l=O(e,function(e){return"colgroup"===e.section}),a=l.pass;D(l.fail,function(e){var u=[];D(e.cells,function(e){for(var n=0;void 0!==t[c+","+n];)n++;for(var o=ed(r,n.toString()),l={element:e.element,rowspan:e.rowspan,colspan:e.colspan,row:c,column:n,isLocked:o},a=0;a<e.colspan;a++)for(var f=0;f<e.rowspan;f++){var s=n+a;t[c+f+","+s]=l,i=Math.max(i,s+1)}u.push(l)}),o++,n.push(ep(e.element,u,e.section)),c++});var f=W(a).map(function(e){var t,n,r=(t={},n=0,D(e.cells,function(e){var r=e.colspan;x(r,function(o){var u=n+o;t[u]={element:e.element,colspan:r,column:u}}),n+=r}),t);return{colgroups:[{element:e.element,columns:ef(r,u)}],columns:r}}).getOrThunk(function(){return{colgroups:[],columns:{}}}),s=f.columns,m=f.colgroups;return{grid:{rows:o,columns:i},access:t,all:n,columns:s,colgroups:m}}function tY(e,t){var n=t.column,r=t.column+t.colspan-1,o=t.row,u=t.row+t.rowspan-1;return n<=e.finishCol&&r>=e.startCol&&o<=e.finishRow&&u>=e.startRow}function tJ(e,t){return t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow}function tQ(e,t,n){var r=nd.findItem(e,t,eu),o=nd.findItem(e,n,eu);return r.bind(function(e){return o.map(function(t){return{startRow:Math.min(e.row,t.row),startCol:Math.min(e.column,t.column),finishRow:Math.max(e.row+e.rowspan-1,t.row+t.rowspan-1),finishCol:Math.max(e.column+e.colspan-1,t.column+t.colspan-1)}})})}function tZ(e,t,n){return tQ(e,t,n).map(function(t){return R(nd.filterItems(e,p(tY,t)),function(e){return e.element})})}function t0(e,t){return nd.findItem(e,t,function(e,t){return ei(t,e)}).map(function(e){return e.element})}function t1(e,t,n,r,o){var u=ng(e),i=eu(e,n)?H.some(t):t0(u,t),c=eu(e,o)?H.some(r):t0(u,r);return i.bind(function(e){return c.bind(function(t){return tZ(u,e,t)})})}function t9(e,t){eJ(e).each(function(n){n.dom.insertBefore(t.dom,e.dom)})}function t2(e,t){e0(e).fold(function(){eJ(e).each(function(e){np(e,t)})},function(e){t9(e,t)})}function t3(e,t){e9(e,0).fold(function(){np(e,t)},function(n){e.dom.insertBefore(t.dom,n.dom)})}function t5(e,t){t9(e,t),np(t,e)}function t4(e,t){D(t,function(n,r){t2(0===r?e:t[r-1],n)})}function t7(e,t){D(t,function(t){np(e,t)})}function t6(e){e.dom.textContent="",D(e1(e),function(e){nb(e)})}function t8(e){var t=e1(e);0<t.length&&D(t,function(t){t9(e,t)}),nb(e)}function ne(e){return nh.get(e)}function nt(e){return nh.getOption(e)}function nn(e,t){return nh.set(e,t)}function nr(e,t){return A(P(e.all,function(e){return e.cells}),t)}var no,nu=function(e,t){e.dom.removeAttribute(t)},ni=function(e,t){return tC(e)?e.style.getPropertyValue(t):""},nc=o(10),nl=o(10),na=function(e,t,n){return P(e1(e),function(e){return en(e,t)?n(e)?[e]:[]:na(e,t,n)})},nf=function(e){return tN(e).fold(o([]),function(e){return e3(e,"colgroup")})},ns=function(e,t){return eh(e.element,t,e.section,e.isNew)},nm="data-snooker-locked-cols",nd={fromTable:function(e){return tX(tW(e))},generate:tX,getAt:function(e,t,n){return H.from(e.access[t+","+n])},findItem:function(e,t,n){var r=nr(e,function(e){return n(t,e.element)});return 0<r.length?H.some(r[0]):H.none()},filterItems:nr,justCells:function(e){return P(e.all,function(e){return e.cells})},justColumns:function(e){return ef(e.columns,u)},hasColumns:function(e){return 0<eW(e.columns).length},getColumnAt:function(e,t){return H.from(e.columns[t])}},ng=nd.fromTable,np=function(e,t){e.dom.appendChild(t.dom)},nb=function(e){var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},nh={get:function(e){if(!e7(e))throw Error("Can only get text value of a text node");return no(e).getOr("")},getOption:no=function(e){return e7(e)?H.from(e.dom.nodeValue):H.none()},set:function(e,t){if(!e7(e))throw Error("Can only set raw text value of a text node");e.dom.nodeValue=t}},nv=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function nw(){return{up:o({selector:tl,closest:tf,predicate:tc,all:eQ}),down:o({selector:e5,predicate:tu}),styles:o({get:tR,getRaw:tD,set:tT,remove:tO}),attrs:o({get:tg,set:tm,remove:nu,copyTo:function(e,t){td(t,tb(e))}}),insert:o({before:t9,after:t2,afterAll:t4,append:np,appendAll:t7,prepend:t3,wrap:t5}),remove:o({unwrap:t8,remove:nb}),create:o({nu:eL.fromTag,clone:function(e){return eL.fromDom(e.dom.cloneNode(!1))},text:eL.fromText}),query:o({comparePosition:function(e,t){return e.dom.compareDocumentPosition(t.dom)},prevSibling:eZ,nextSibling:e0}),property:o({children:e1,name:eq,parent:eJ,document:function(e){return eY(e).dom},isText:e7,isComment:e$,isElement:e4,isSpecial:function(e){return S(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],eq(e))},getLanguage:function(e){return e4(e)?tp(e,"lang"):H.none()},getText:ne,setText:nn,isBoundary:function(e){return!!e4(e)&&("body"===eq(e)||S(nv,eq(e)))},isEmptyTag:function(e){return!!e4(e)&&S(["br","img","hr","input"],eq(e))},isNonEditable:function(e){return e4(e)&&"false"===tg(e,"contenteditable")}}),eq:eu,is:en}}function ny(e,t){return nZ(n1,function(t,n){return e(n)},t)}function nC(e){return tl(e,"table")}function nS(e,t,n){function r(e){return function(t){return void 0!==n&&n(t)||eu(t,e)}}return eu(e,t)?H.some({boxes:H.some([e]),start:e,finish:t}):nC(e).bind(function(o){return nC(t).bind(function(u){if(eu(o,u))return H.some({boxes:tZ(ng(o),e,t),start:e,finish:t});if(ei(o,u)){var i=0<(c=e2(t,"td,th",r(o))).length?c[c.length-1]:t;return H.some({boxes:t1(o,e,o,t,u),start:e,finish:i})}if(ei(u,o)){var c,l=0<(c=e2(e,"td,th",r(u))).length?c[c.length-1]:e;return H.some({boxes:t1(u,e,o,t,u),start:e,finish:l})}return n0(n1,e,t,void 0).shared.bind(function(i){return tf(i,"table",n).bind(function(n){var i=e2(t,"td,th",r(n)),c=0<i.length?i[i.length-1]:t,l=e2(e,"td,th",r(n)),a=0<l.length?l[l.length-1]:e;return H.some({boxes:t1(n,e,o,t,u),start:a,finish:c})})})})})}function nT(e,t){var n=e5(e,t);return 0<n.length?H.some(n):H.none()}function nx(e,t,n){return eo(t,e).bind(function(t){return eo(n,e).bind(function(e){return ny(nC,[t,e]).map(function(n){return{first:t,last:e,table:n}})})})}function nR(e,t){return eL.fromDom(e.dom.cloneNode(t))}function nD(e){return nR(e,!0)}function nO(e,t){var n=eL.fromTag(t);return td(n,tb(e)),n}function nA(e,t){function n(n){var r=t(n);return r<=0||null===r?parseFloat(tR(n,e))||0:r}function r(e,t){return I(t,function(t,n){var r=tR(e,n),o=void 0===r?0:parseInt(r,10);return isNaN(o)?t:t+o},0)}return{set:function(t,n){if(!g(n)&&!n.match(/^[0-9]+$/))throw Error(e+".set accepts only positive integer values. Value was "+n);var r=t.dom;tC(r)&&(r.style[e]=n+"px")},get:n,getOuter:n,aggregate:r,max:function(e,t,n){var o=r(e,n);return o<t?t-o:0}}}function nk(){var e=e_().browser;return e.isIE()||e.isEdge()}function nI(e,t,n){var r;return(isNaN(r=parseFloat(tR(e,t)))?H.none():H.some(r)).getOr(n)}function nB(e){return tR(e,"box-sizing")}function nM(e,t,n,r){return t-nI(e,"padding-"+n,0)-nI(e,"padding-"+r,0)-nI(e,"border-"+n+"-width",0)-nI(e,"border-"+r+"-width",0)}function nE(e,t){var n=e.dom,r=n.getBoundingClientRect().width||n.offsetWidth;return"border-box"===t?r:nM(e,r,"left","right")}function nP(e){return n7.get(e)}function nN(e){return n7.getOuter(e)}function nz(e,t){void 0===t&&(t=w);var n=e.grid,r=x(n.columns,u),o=x(n.rows,u);return R(r,function(n){return n8(function(){return P(o,function(t){return nd.getAt(e,t,n).filter(function(e){return e.column===n}).toArray()})},function(e){return 1===e.colspan&&t(e.element)},function(){return nd.getAt(e,0,n)})})}function n_(e){var t=e.grid,n=x(t.rows,u),r=x(t.columns,u);return R(n,function(t){return n8(function(){return P(r,function(n){return nd.getAt(e,t,n).filter(function(e){return e.row===t}).fold(o([]),function(e){return[e]})})},function(e){return 1===e.rowspan},function(){return nd.getAt(e,t,0)})})}function nL(e,t){return function(n){return"rtl"===re(n)?t:e}}function nW(e){return rt.getOuter(e)}function nj(e,t){return void 0!==e?e:void 0!==t?t:0}function nF(e){var t=e.dom.ownerDocument,n=t.body,r=t.defaultView,o=t.documentElement;if(n===e.dom)return ro(n.offsetLeft,n.offsetTop);var u=nj(null==r?void 0:r.pageYOffset,o.scrollTop),i=nj(null==r?void 0:r.pageXOffset,o.scrollLeft),c=nj(o.clientTop,n.clientTop),l=nj(o.clientLeft,n.clientLeft);return ru(e).translate(i-l,u-c)}function nH(e){return nF(e).left+nN(e)}function nV(e){return nF(e).left}function nq(e,t){return{col:e,x:nV(t)}}function nU(e,t){return{col:e,x:nH(t)}}function nG(e){return nF(e).top}function n$(e,t){return{row:e,y:nG(t)}}function nK(e,t){return{row:e,y:nG(t)+nW(t)}}function nX(e,t,n){if(0===n.length)return[];var r=R(n.slice(1),function(t,n){return t.map(function(t){return e(n,t)})}),o=n[n.length-1].map(function(e){return t(n.length-1,e)});return r.concat([o])}function nY(e){if(!a(e))throw Error("cases must be an array");if(0===e.length)throw Error("there must be at least one case");var t=[],n={};return D(e,function(r,o){var u=eW(r);if(1!==u.length)throw Error("one and only one name per case");var i=u[0],c=r[i];if(void 0!==n[i])throw Error("duplicate key detected:"+i);if("cata"===i)throw Error("cannot have a case named cata (sorry)");if(!a(c))throw Error("case arguments must be an array");t.push(i),n[i]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var u=n.length;if(u!==c.length)throw Error("Wrong number of arguments to case "+i+". Expected "+c.length+" ("+c+"), got "+u);return{fold:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length!==e.length)throw Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[o].apply(null,n)},match:function(e){var r=eW(e);if(t.length!==r.length)throw Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!N(t,function(e){return S(r,e)}))throw Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[i].apply(null,n)},log:function(e){console.log(e,{constructors:t,constructor:i,params:n})}}}}),n}var nJ,nQ,nZ=function(e,t,n){var r;return 0<n.length?(r=n[0],k(n.slice(1),function(n,r){var o=t(e,r);return n.bind(function(t){return o.filter(p(e.eq,t))})},t(e,r))):H.none()},n0=function(e,t,n,r){function o(e){return M(e,r).fold(function(){return e},function(t){return e.slice(0,t+1)})}void 0===r&&(r=v);var u=[t].concat(e.up().all(t)),i=[n].concat(e.up().all(n)),c=o(u),l=o(i),a=B(c,function(t){return T(l,p(e.eq,t))});return{firstpath:c,secondpath:l,shared:a}},n1=nw(),n9=nY([{none:[]},{multiple:["elements"]},{single:["element"]}]),n2=n9.none,n3=n9.multiple,n5=n9.single,n4=tinymce.util.Tools.resolve("tinymce.PluginManager"),n7=nA("width",function(e){return e.dom.offsetWidth}),n6=function(e){return nE(e,"content-box")},n8=function(e,t,n){var r=e();return B(r,t).orThunk(function(){return H.from(r[0]).orThunk(n)}).map(function(e){return e.element})},re=function(e){return"rtl"===tR(e,"direction")?"rtl":"ltr"},rt=nA("height",function(e){var t=e.dom;return tr(e)?t.getBoundingClientRect().height:t.offsetHeight}),rn=function(e){var t,n,r;return nk()?(t=nB(e),r=(n=e.dom).getBoundingClientRect().height||n.offsetHeight,"border-box"===t?r:nM(e,r,"top","bottom")):nI(e,"height",e.dom.offsetHeight)},rr=function(e,t){return{left:e,top:t,translate:function(n,r){return rr(e+n,t+r)}}},ro=rr,ru=function(e){var t,n=e.dom,r=n.ownerDocument.body;return r===n?ro(r.offsetLeft,r.offsetTop):tr(e)?ro((t=n.getBoundingClientRect()).left,t.top):ro(0,0)},ri={delta:u,positions:function(e){return nX(n$,nK,e)},edge:nG},rc=nL({delta:u,edge:nV,positions:function(e){return nX(nq,nU,e)}},{delta:function(e){return-e},edge:nH,positions:function(e){return nX(nU,nq,e)}}),rl={delta:function(e,t){return rc(t).delta(e,t)},positions:function(e,t){return rc(t).positions(e,t)},edge:function(e){return rc(e).edge(e)}},ra={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},rf=RegExp("^([+-]?(?:"+["Infinity",(nJ="[0-9]+")+"\\."+rs(nJ)+rs(nQ="[eE][+-]?[0-9]+"),"\\."+nJ+rs(nQ),nJ+rs(nQ)].join("|")+"))(.*)$");function rs(e){return"(?:"+e+")?"}function rm(e,t,n){var r=H.from(e.dom.parentElement).map(eL.fromDom).getOrThunk(function(){return to(eX(e))});return t(e)/n(r)*100}function rd(e,t){tT(e,"width",t+"px")}function rg(e,t){tT(e,"width",t+"%")}function rp(e,t){tT(e,"height",t+"px")}function rb(e,t){return tD(e,t).orThunk(function(){return tp(e,t).map(function(e){return e+"px"})})}function rh(e){return rb(e,"width")}function rv(e){return rm(e,nP,n6)}function rw(e){return(iU(e)?nP:function(e){return nk()?nE(e,nB(e)):nI(e,"width",e.dom.offsetWidth)})(e)}function ry(e){var t,n,r;return n=parseFloat(r=rn(e)+"px"),(Q(r,"%")&&"table"!==eq(e)?(t=tN(e).map(function(e){return Math.floor(n/100*rt.get(e))}).getOr(n),rp(e,t),t):n)/tA(e,"rowspan",1)}function rC(e,t,n){tT(e,"width",t+n)}function rS(e){return rm(e,nP,n6)+"%"}function rT(e){return rh(e).getOrThunk(function(){return rw(e)+"px"})}function rx(e){return rb(e,"height").getOrThunk(function(){return ry(e)+"px"})}function rR(e,t,n,r,o,u){return e.filter(r).fold(function(){return u(function(e,t){if(t<0||t>=e.length-1)return H.none();var n=e[t].fold(function(){var n,r;return j((n=e.slice(0,t),(r=V.call(n,0)).reverse(),r),function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return H.some({value:e,delta:0})}),r=e[t+1].fold(function(){return j(e.slice(t+1),function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return H.some({value:e,delta:1})});return n.bind(function(e){return r.map(function(t){var n=t.delta+e.delta;return Math.abs(t.value-e.value)/n})})}(n,t))},function(e){return o(e)})}function rD(e,t,n,r){var o=nz(e),i=nd.hasColumns(e)?R(nd.justColumns(e),function(e){return H.from(e.element)}):o,c=[H.some(rl.edge(t))].concat(R(rl.positions(o,t),function(e){return e.map(function(e){return e.x})})),l=b(tk);return R(i,function(e,t){return rR(e,t,c,l,function(e){var i,a,f;return f=(a=e_().browser).isChrome()||a.isFirefox(),!i$(e)||f?n(e):rR(null!=(i=o[t])?u(i):H.none(),t,c,l,function(e){return r(H.some(nP(e)))},r)},r)})}function rO(e){return e.map(function(e){return e+"px"}).getOr("")}function rA(e,t,n){return rD(e,t,rw,function(e){return e.getOrThunk(n.minCellWidth)})}function rk(e,t,n,r,o){var u=n_(e),i=[H.some(n.edge(t))].concat(R(n.positions(u,t),function(e){return e.map(function(e){return e.y})}));return R(u,function(e,t){return rR(e,t,i,b(tI),r,o)})}function rI(e,t){return function(){return tr(e)?t(e):parseFloat(tD(e,"width").getOr("0"))}}function rB(e){var t=rI(e,function(e){return parseFloat(rS(e))}),n=rI(e,nP);return{width:t,pixelWidth:n,getWidths:function(t,n){return rD(t,e,rv,function(e){return e.fold(function(){return n.minCellWidth()},function(e){return e/n.pixelWidth()*100})})},getCellDelta:function(e){return e/n()*100},singleColumnWidth:function(e,t){return[100-e]},minCellWidth:function(){return nc()/n()*100},setElementWidth:rg,adjustTableWidth:function(n){var r=t();rg(e,r+n/100*r)},isRelative:!0,label:"percent"}}function rM(e){var t=rI(e,nP);return{width:t,pixelWidth:t,getWidths:function(t,n){return rA(t,e,n)},getCellDelta:u,singleColumnWidth:function(e,t){return[Math.max(nc(),e+t)-e]},minCellWidth:nc,setElementWidth:rd,adjustTableWidth:function(n){rd(e,t()+n)},isRelative:!1,label:"pixel"}}function rE(e){return"img"===eq(e)?1:nt(e).fold(function(){return e1(e).length},function(e){return e.length})}function rP(e){return nt(e).filter(function(e){return 0!==e.trim().length||-1<e.indexOf("\xa0")}).isSome()||S(iJ,eq(e))}function rN(e){var t;return(t=function(e){for(var n=0;n<e.childNodes.length;n++){var r=eL.fromDom(e.childNodes[n]);if(rP(r))return H.some(r);var o=t(e.childNodes[n]);if(o.isSome())return o}return H.none()})(e.dom)}function rz(e){return function(){var t=eL.fromTag("td",e.dom);return np(t,eL.fromTag("br",e.dom)),t}}function r_(e){return function(){return eL.fromTag("col",e.dom)}}function rL(e){return function(){return eL.fromTag("colgroup",e.dom)}}function rW(e){return function(){return eL.fromTag("tr",e.dom)}}function rj(e,t,n){var r,o=(t7(r=nO(e,t),e1(nD(e))),r);return ec(n,function(e,t){null===e?nu(o,t):tm(o,t,e)}),o}function rF(e){return e}function rH(e,t,n){function r(e,t){var n=e.element.dom,r=t.dom;tC(n)&&tC(r)&&(r.style.cssText=n.style.cssText),tO(t,"height"),1!==e.colspan&&tO(t,"width")}return{col:function(n){var o=eL.fromTag(eq(n.element),t.dom);return r(n,o),e(n.element,o),o},colgroup:rL(t),row:rW(t),cell:function(o){var u,i,c=eL.fromTag(eq(o.element),t.dom),l=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),a=0<l.length?rN(u=o.element).map(function(e){return k(e2(e,l.join(","),function(e){return eu(e,u)}),function(e,t){var n=nR(t,!1);return nu(n,"contenteditable"),np(e,n),n},c)}).getOr(c):c;return np(a,eL.fromTag("br")),r(o,c),i=o.element,ec(iZ,function(e,t){return tp(i,t).filter(function(t){return S(e,t)}).each(function(e){return tm(c,t,e)})}),e(o.element,c),c},replace:rj,colGap:r_(t),gap:rz(t)}}function rV(e){return{col:r_(e),colgroup:rL(e),row:rW(e),cell:rz(e),replace:rF,colGap:r_(e),gap:rz(e)}}function rq(e){return R(e,eL.fromDom)}function rU(e){return eL.fromDom(e.getBody())}function rG(e){return e.getBoundingClientRect().width}function r$(e){return e.getBoundingClientRect().height}function rK(e){return function(t){return eu(t,rU(e))}}function rX(e){return/^\d+(\.\d+)?$/.test(e)?e+"px":e}function rY(e){function t(e){return nu(e,"data-mce-style")}nu(e,"data-mce-style"),D(tE(e),t),D(tP(e),t),D(tz(e),t)}function rJ(e){return eL.fromDom(e.selection.getStart())}function rQ(e){var t,n;return t=e.get(),n=o([]),t.fold(n,u,_)}function rZ(e,t,n){var r,o,u,i,c;return{element:n,mergable:(o=e.get(),u=H.none,i=function(e){return e.length<=1?H.none():nx(t,i0.firstSelectedSelector,i0.lastSelectedSelector).bind(function(e){function n(e){return eu(t,e)}var r="thead,tfoot,tbody,table",o=tl(e.first,r,n),u=tl(e.last,r,n);return o.bind(function(t){return u.bind(function(n){var r,o,u,i;return eu(t,n)?(r=e.table,o=e.first,u=e.last,tQ(i=ng(r),o,u).bind(function(e){return function(e,t){for(var n=!0,r=p(tJ,t),o=t.startRow;o<=t.finishRow;o++)for(var u=t.startCol;u<=t.finishCol;u++)n=n&&nd.getAt(e,o,u).exists(r);return n?H.some(t):H.none()}(i,e)})):H.none()})})}).map(function(t){return{bounds:t,cells:e}})},c=H.none,o.fold(u,i,c)),unmergable:0<(r=rQ(e)).length&&N(r,function(e){return l(e,"rowspan")||l(e,"colspan")})?H.some(r):H.none(),selection:rQ(e)};function l(e,t){return tp(e,t).exists(function(e){return 1<parseInt(e,10)})}}function r0(e){return function(t,n){var r=eq(t);return tf("col"===r||"colgroup"===r?tN(t).bind(function(e){return nT(e,i0.firstSelectedSelector)}).fold(o(t),function(e){return e[0]}):t,e,n)}}function r1(e,t,n){for(var r=0,o=e;o<t;o++)r+=void 0!==n[o]?n[o]:0;return r}function r9(e,t,n){D(nd.hasColumns(e)?R(nd.justColumns(e),function(e,n){return{element:e.element,width:t[n],colspan:e.colspan}}):R(nd.justCells(e),function(e){var n=r1(e.column,e.column+e.colspan,t);return{element:e.element,width:n,colspan:e.colspan}}),function(e){n.setElementWidth(e.element,e.width)})}function r2(e,t,n,r,u){var i,c,l,a=nd.fromTable(e),f=u.getCellDelta(t),s=u.getWidths(a,u),m=n===a.grid.columns-1,d=r.clampTableDelta(s,n,f,u.minCellWidth(),m),g=(i=s.slice(0),c=0===s.length?i5.none():1===s.length?i5.only(0):0===n?i5.left(0,1):n===s.length-1?i5.right(n-1,n):0<n&&n<s.length-1?i5.middle(n-1,n,n+1):i5.none(),l=o(R(i,o(0))),c.fold(l,function(e){return u.singleColumnWidth(i[e],d)},function(e,t){return r.calcLeftEdgeDeltas(i,e,t,d,u.minCellWidth(),u.isRelative)},function(e,t,n){return r.calcMiddleDeltas(i,e,t,n,d,u.minCellWidth(),u.isRelative)},function(e,t){return r.calcRightEdgeDeltas(i,e,t,d,u.minCellWidth(),u.isRelative)}));r9(a,R(g,function(e,t){return e+s[t]}),u),r.resizeTable(u.adjustTableWidth,d,m)}function r3(e){return R(e,o(0))}function r5(e,t,n,r,o){return o(e.slice(0,t)).concat(r).concat(o(e.slice(n)))}function r4(e){return function(t,n,r,o){if(e(r)){var u=Math.abs(Math.max(o,t[n]-Math.abs(r))-t[n]);return 0<=r?u:-u}return r}}function r7(){function e(e,t,n,r){var o=(100+n)/100,u=Math.max(r,(e[t]+n)/o);return R(e,function(e,n){return(n===t?u:e/o)-e})}function t(t,n,r,o,u,i){var c;return i?e(t,n,o,u):(c=i4(t,n,o,u),r5(t,n,r+1,[c,0],r3))}return{resizeTable:function(e,t){return e(t)},clampTableDelta:i4,calcLeftEdgeDeltas:t,calcMiddleDeltas:function(e,n,r,o,u,i,c){return t(e,r,o,u,i,c)},calcRightEdgeDeltas:function(t,n,r,o,u,i){if(i)return e(t,r,o,u);var c=i4(t,r,o,u);return r3(t.slice(0,r)).concat([c])},calcRedestributedWidths:function(e,t,n,r){if(r){var o=(t+n)/t,u=R(e,function(e){return e/o});return{delta:100*o-100,newSizes:u}}return{delta:n,newSizes:e}}}}function r6(){function e(e,t,n,r,o){var u=i7(e,0<=r?n:t,r,o);return r5(e,t,n+1,[u,-u],r3)}return{resizeTable:function(e,t,n){n&&e(t)},clampTableDelta:function(e,t,n,r,o){return o?0<=n?n:Math.max(-I(e,function(e,t){return e+t-r},0),n):i4(e,t,n,r)},calcLeftEdgeDeltas:e,calcMiddleDeltas:function(t,n,r,o,u,i){return e(t,r,o,u,i)},calcRightEdgeDeltas:function(e,t,n,r,u,i){return i?r3(e):R(e,o(r/e.length))},calcRedestributedWidths:function(e,t,n,r){return{delta:0,newSizes:e}}}}function r8(e,t,n){var r=n.substring(0,n.length-e.length),o=parseFloat(r);return r===o.toString()?t(o):i6.invalid(n)}function oe(e,t,n){var r,u,i=i8.from(n);return ce(N(e,function(e){return"0px"===e})?(r=e.length,u=i.fold(function(){return o("")},function(e){return o(e/r+"px")},function(){return o(100/r+"%")}),x(r,u)):i.fold(function(){return e},function(n){var r;return r=n/t,R(e,function(e){return i8.from(e).fold(function(){return e},function(e){return e*r+"px"},function(e){return e/100*n+"px"})})},function(n){return R(e,function(e){return i8.from(e).fold(function(){return e},function(e){return e/t*100+"%"},function(e){return e+"%"})})}))}function ot(e,t){return 0===e.length?t:k(e,function(e,t){return i8.from(t).fold(o(0),u,u)+e},0)}function on(e){return ct(e).fold(o("px"),o("px"),o("%"))}function or(e,t,n){var r=nd.fromTable(e),o=r.all,u=nd.justCells(r),i=nd.justColumns(r);t.each(function(t){var n=on(t),o=nP(e),c=oe(rD(r,e,rT,rO),o,t);nd.hasColumns(r)?D(i,function(e,t){var r=ot([c[t]],nc());tT(e.element,"width",r+n)}):D(u,function(e){var t=ot(c.slice(e.column,e.colspan+e.column),nc());tT(e.element,"width",t+n)}),tT(e,"width",t)}),n.each(function(t){var n=on(t),i=rt.get(e),c=oe(rk(r,e,ri,rx,rO),i,t);D(u,function(e){var t=ot(c.slice(e.row,e.rowspan+e.row),nl());tT(e.element,"height",t+n)}),D(o,function(e,t){tT(e.element,"height",c[t])}),tT(e,"height",t)})}function oo(e){return nd.fromTable(e).grid}function ou(e){var t=[];return{bind:function(e){if(void 0===e)throw Error("Event bind error: undefined handler");t.push(e)},unbind:function(e){t=A(t,function(t){return t!==e})},trigger:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o={};D(e,function(e,t){o[e]=n[t]}),D(t,function(e){e(o)})}}}function oi(e){return{registry:el(e,function(e){return{bind:e.bind,unbind:e.unbind}}),trigger:el(e,function(e){return e.trigger})}}function oc(e){return e.slice(0).sort()}function ol(e,t){var n=A(t,function(t){return!S(e,t)});0<n.length&&function(){throw Error("Unsupported keys for object: "+oc(n).join(", "))}()}function oa(e){return function(e,t,n){var r;if(0===t.length)throw Error("You must specify at least one required field.");return function(e,t){if(!a(t))throw Error("The "+e+" fields must be an array. Was: "+t+".");D(t,function(t){if(!c(t))throw Error("The value "+t+" in the "+e+" fields was not a string.")})}("required",t),B(r=oc(t),function(e,t){return t<r.length-1&&e===r[t+1]}).each(function(e){throw Error("The field: "+e+" occurs more than once in the combined fields: ["+r.join(", ")+"].")}),function(r){var o=eW(r);N(t,function(e){return S(o,e)})||function(e,t){throw Error("All required keys ("+oc(e).join(", ")+") were not specified. Specified keys were: "+oc(t).join(", ")+".")}(t,o),e(t,o);var u=A(t,function(e){return!n.validate(r[e],e)});return 0<u.length&&function(e,t){throw Error("All values need to be of type: "+t+". Keys ("+oc(e).join(", ")+") were not.")}(u,n.label),r}}(ol,e,{validate:d,label:"function"})}function of(e){function t(){return e.stopPropagation()}function n(){return e.preventDefault()}return{target:eL.fromDom((function(e){if(tt()&&null!=e.target){var t=eL.fromDom(e.target);if(e4(t)&&null!=t.dom.shadowRoot&&e.composed&&e.composedPath){var n=e.composedPath();if(n)return L(n,0)}}return H.from(e.target)})(e).getOr(e.target)),x:e.clientX,y:e.clientY,stop:t,prevent:n,kill:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return n(t.apply(null,e))},raw:e}}function os(e,t,n){var r;return r=function(e){ci(e)&&n(of(e))},e.dom.addEventListener(t,r,!1),{unbind:p(cu,e,t,r,!1)}}function om(e){return void 0!==e.dom.classList}function od(e,t){var n,r;om(e)?e.dom.classList.add(t):tm(e,n="class",(void 0===(r=tg(e,n))||""===r?[]:r.split(" ")).concat([t]).join(" "))}function og(e,t){return om(e)&&e.dom.classList.contains(t)}function op(e){var t=e.replace(/\./g,"-");return{resolve:function(e){return t+"-"+e}}}function ob(e){return tf(e,"[contenteditable]")}function oh(e,t){return void 0===t&&(t=!1),!e_().browser.isIE()&&tr(e)?e.dom.isContentEditable:ob(e).fold(o(t),function(e){return"true"===ca(e)})}function ov(e){D(e5(e.parent(),"."+cs),nb)}function ow(e,t,n){var r=e.origin();D(t,function(t){t.each(function(t){var o=n(r,t);od(o,cs),np(e.parent(),o)})})}function oy(e,t){var n,r,o,u,i,c,l,a,f,s,m,d,g,p,b;ov(e),e.isResizable(t)&&(r=n=nd.fromTable(t),o=n_(n),u=nz(n),c=nF(t),l=e.isResizable,f=0<(a=0<o.length?ri.positions(o,t):[]).length?P(r.all,function(e,t){return l(e.element)?[t]:[]}):[],s=A(a,function(e,t){return T(f,function(e){return t===e})}),i=nN(t),ow(e,s,function(e,t){var n,r,o,u,l=(n=t.row,r=c.left-e.left,o=t.y-e.top,tx(u=eL.fromTag("div"),{position:"absolute",left:r+"px",top:o-3.5+"px",height:"7px",width:i+"px"}),td(u,{"data-row":n,role:"presentation"}),u);return od(l,cm),l}),p=0<(g=0<u.length?rl.positions(u,t):[]).length?(m=[],x(r.grid.columns,function(e){nd.getColumnAt(r,e).map(function(e){return e.element}).forall(l)&&m.push(e)}),A(m,function(e){return N(nd.filterItems(r,function(t){return t.column===e}),function(e){return l(e.element)})})):[],b=A(g,function(e,t){return T(p,function(e){return t===e})}),d=nW(t),ow(e,b,function(e,t){var n,r,o,u,i=(n=t.col,r=t.x-e.left,o=c.top-e.top,tx(u=eL.fromTag("div"),{position:"absolute",left:r-3.5+"px",top:o+"px",height:d+"px",width:"7px"}),td(u,{"data-column":n,role:"presentation"}),u);return od(i,cd),i}))}function oC(e,t){D(e5(e.parent(),"."+cs),t)}function oS(e){oC(e,function(e){tT(e,"display","none")})}function oT(e){oC(e,function(e){tT(e,"display","block")})}function ox(e,t){return e.fire("newrow",{node:t})}function oR(e,t){return e.fire("newcell",{node:t})}function oD(e,t,n){e.fire("TableModified",G(G({},n),{table:t}))}function oO(e){return e.getParam("table_sizing_mode","auto")}function oA(e){return e.getParam("table_responsive_width")}function ok(e){return e.getParam("table_border_widths",cw,"array")}function oI(e){return e.getParam("table_border_styles",cy,"array")}function oB(e){return e.getParam("table_default_attributes",cC,"object")}function oM(e){return e.getParam("table_default_styles",function(e){var t;if(cT(e)){var n=e.dom,r=null!==(t=n.getParent(e.selection.getStart(),n.isBlock))&&void 0!==t?t:e.getBody(),o=n6(eL.fromDom(r));return G(G({},cv),{width:o+"px"})}return cx(e)?ea(cv,function(e,t){return"width"!==t}):cv}(e),"object")}function oE(e){return e.getParam("table_cell_advtab",!0,"boolean")}function oP(e){return e.getParam("table_row_advtab",!0,"boolean")}function oN(e){return e.getParam("table_advtab",!0,"boolean")}function oz(e){return e.getParam("table_style_by_css",!1,"boolean")}function o_(e){return e.getParam("table_cell_class_list",[],"array")}function oL(e){return e.getParam("table_class_list",[],"array")}function oW(e){return"relative"===oO(e)||!0===oA(e)}function oj(e){var t="section",n=e.getParam("table_header_type",t,"string");return S(["section","cells","sectionCells","auto"],n)?n:t}function oF(e){var t=e.getParam("table_column_resizing",cS,"string");return B(["preservetable","resizetable"],function(e){return e===t}).getOr(cS)}function oH(e){return"preservetable"===oF(e)}function oV(e){return"resizetable"===oF(e)}function oq(e){var t=e.getParam("table_clone_elements");return c(t)?H.some(t.split(/[ ,]/)):Array.isArray(t)?H.some(t):H.none()}function oU(e){return e.getParam("table_background_color_map",[],"array")}function oG(e){return e.getParam("table_border_color_map",[],"array")}function o$(e,t){return(oW(e)?iY:cT(e)?iX:iK)(t)}function oK(e){nu(e,"width")}function oX(e){return"false"!==tg(e,"data-mce-resize")}function oY(e,t){return{element:e,offset:t}}function oJ(e,t){return(e.property().isText(t)?e.property().getText(t):e.property().children(t)).length}function oQ(e,t){1===tA(e,"colspan",1)&&rh(e).bind(function(e){var t;return t=["fixed","relative","empty"],H.from(rf.exec(e)).bind(function(e){var n=Number(e[1]),r=e[2];return T(t,function(e){return T(ra[e],function(e){return r===e})})?H.some({value:n,unit:r}):H.none()})}).each(function(n){var r=n.value/2;rC(e,r,n.unit),rC(t,r,n.unit)})}function oZ(e){return N(e,function(e){return cM(e.element)})}function o0(e){var t="thead"===e.section,n=th(cE(e.cells),"th");return t||n?{type:"header",subType:t&&n?"sectionCells":t?"section":"cells"}:"tfoot"===e.section?{type:"footer"}:{type:"body"}}function o1(e,t,n){return eb(n(e.element,t),!0,e.isLocked)}function o9(e,t){return e.section!==t?eh(e.element,e.cells,t,e.isNew):e}function o2(){return{transformRow:o9,transformCell:function(e,t,n){var r,o=n(e.element,t);return eb("td"!==eq(o)?(r=nO(o,"td"),t9(o,r),t7(r,e1(o)),nb(o),r):o,e.isNew,e.isLocked)}}}function o3(){return{transformRow:o9,transformCell:o1}}function o5(){return{transformRow:function(e,t){return o9(e,"thead"===t?"tbody":t)},transformCell:o1}}function o4(e,t,n,r){n===r?nu(e,t):tm(e,t,n)}function o7(e,t,n){W(e3(e,t)).fold(function(){return t3(e,n)},function(e){return t2(e,n)})}function o6(e,t){if(0===e.length)return 0;var n=e[0];return M(e,function(e){return!t(n.element,e.element)}).getOr(e.length)}function o8(e,t,n){var r=[];D(e.colgroups,function(o){for(var u=[],i=0;i<e.grid.columns;i++){var c=nd.getColumnAt(e,i).map(function(e){return eb(e.element,n,!1)}).getOrThunk(function(){return eb(t.colGap(),!0,!1)});u.push(c)}r.push(eh(o.element,u,"colgroup",n))});for(var o=0;o<e.grid.rows;o++){for(var u=[],i=0;i<e.grid.columns;i++){var c=nd.getAt(e,o,i).map(function(e){return eb(e.element,n,e.isLocked)}).getOrThunk(function(){return eb(t.gap(),!0,!1)});u.push(c)}var l=e.all[o],a=eh(l.element,u,l.section,n);r.push(a)}return r}function ue(e){var t;return t=R(e,function(e){return R(e.cells,v)}),R(e,function(n,r){var o=P(n.cells,function(n,o){if(!1!==t[r][o])return[];var u,i,c=(i="colgroup"===(u=e[r]).section,{colspan:o6(u.cells.slice(o),eu),rowspan:i?1:o6(R(e.slice(r),function(e){return tH(e,o)}),eu)});return function(e,n,r,o){for(var u=e;u<e+r;u++)for(var i=n;i<n+o;i++)t[u][i]=!0}(r,o,c.rowspan,c.colspan),[{element:n.element,rowspan:c.rowspan,colspan:c.colspan,isNew:n.isNew}]});return{element:n.element,cells:o,section:n.section,isNew:n.isNew}})}function ut(e,t){return j(e.all,function(e){return B(e.cells,function(e){return eu(t,e.element)})})}function un(e,t,n){var r=tv(R(t.selection,function(t){return tM(t).bind(function(t){return ut(e,t)}).filter(n)}));return ty(0<r.length,r)}function ur(e,t,n,r,o){return function(u,i,c,l,a){var f=nd.fromTable(i),s=H.from(null==a?void 0:a.section).getOrThunk(iW);return t(f,c).map(function(t){var n=e(o8(f,l,!1),t,eu,o(l),s),r=tK(n.grid);return{info:t,grid:ue(n.grid),cursor:n.cursor,lockedColumns:r}}).bind(function(e){var t=function(e,t){function n(t,n){var u;0<t.length?t7((t6(u=ta(e,n).getOrThunk(function(){var t=eL.fromTag(n,eX(e).dom);return"thead"===n?o7(e,"caption,colgroup",t):"colgroup"===n?o7(e,"caption",t):np(e,t),t})),u),("colgroup"===n?function(e){return P(e,function(e){return R(e.cells,function(e){return o4(e.element,"span",e.colspan,1),e.element})})}:function(e){return R(e,function(e){e.isNew&&r.push(e.element);var t=e.element;return t6(t),D(e.cells,function(e){e.isNew&&o.push(e.element),o4(e.element,"colspan",e.colspan,1),o4(e.element,"rowspan",e.rowspan,1),np(t,e.element)}),t})})(t)):ta(e,n).each(nb)}var r=[],o=[],u=[],i=[],c=[],l=[];return D(t,function(e){switch(e.section){case"thead":u.push(e);break;case"tbody":i.push(e);break;case"tfoot":c.push(e);break;case"colgroup":l.push(e)}}),n(l,"colgroup"),n(u,"thead"),n(i,"tbody"),n(c,"tfoot"),{newRows:r,newCells:o}}(i,e.grid),o=H.from(null==a?void 0:a.sizing).getOrThunk(function(){return iK(i)}),c=H.from(null==a?void 0:a.resize).getOrThunk(r6);return n(i,e.grid,e.info,{sizing:o,resize:c,section:s}),r(i),oy(u,i),nu(i,nm),0<e.lockedColumns.length&&tm(i,nm,e.lockedColumns.join(",")),H.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})}}function uo(e,t){return un(e,t,w).map(function(e){return{cells:e,generators:t.generators,clipboard:t.clipboard}})}function uu(e,t){return un(e,t,w)}function ui(e,t){return un(e,t,function(e){return!e.isLocked})}function uc(e,t){return N(t,function(t){return ut(e,t).exists(function(e){return!e.isLocked})})}function ul(e,t){return t.mergable.filter(function(t){return uc(e,t.cells)})}function ua(e,t){return t.unmergable.filter(function(t){return uc(e,t)})}function uf(e,t,n,r){for(var o=tU(e).rows,u=!0,i=0;i<o.length;i++)for(var c=0;c<tq(o[0]);c++){var l=o[i],a=tH(l,c),f=n(a.element,t);!0===f&&!1===u?tF(l,c,eb(r(),!0,a.isLocked)):!0===f&&(u=!1)}return e}function us(e,t){return{rowDelta:0,colDelta:tq(e[0])-tq(t[0])}}function um(e,t){return{rowDelta:e.length-t.length,colDelta:0}}function ud(e,t,n,r){var o="colgroup"===t.section?n.col:n.cell;return x(e,function(e){return eb(o(),!0,r(e))})}function ug(e,t,n,r){var o=e[e.length-1];return e.concat(x(t,function(){var e="colgroup"===o.section?n.colgroup:n.row,t=tG(o,e,u),i=ud(t.cells.length,t,n,function(e){return eH(r,e.toString())});return ns(t,i)}))}function up(e,t,n,r){return R(e,function(e){var o=ud(t,e,n,v);return tj(e,r,o)})}function ub(e,t,n){var r=t.colDelta<0?up:u,o=t.rowDelta<0?ug:u,i=tK(e),c=tq(e[0]),l=T(i,function(e){return e===c-1}),a=r(e,Math.abs(t.colDelta),n,l?c-1:c),f=tK(a);return o(a,Math.abs(t.rowDelta),n,z(f,w))}function uh(e,t,n){return A(n,function(n){return n>=e.column&&n<=tq(t[0])+e.column})}function uv(e,t,n,r,o){var u=r.cell;0<e&&e<t[0].cells.length&&D(t,function(t){var n=t.cells[e-1],r=t.cells[e];o(r.element,n.element)&&tF(t,e,eb(u(),!0,r.isLocked))});var i=ub(n,um(n,t),r);return R(ub(t,um(t,i),r),function(t,n){return tj(t,e,i[n].cells)})}function uw(e,t,n,r,o){u=r.cell,i=tU(t).rows,0<e&&e<i.length&&D(I(i[e-1].cells,function(e,t){return T(e,function(e){return o(e.element,t.element)})?e:e.concat([t])},[]),function(t){for(var n=H.none(),r=e;r<i.length;r++)for(var c=0;c<tq(i[0]);c++)!function(e){var c=i[r],l=tH(c,e);o(l.element,t.element)&&(n=n.isNone()?H.some(u()):n).each(function(t){tF(c,e,eb(t,!0,l.isLocked))})}(c)});var u,i,c=tK(t),l=us(t,n),a=ub(t,G(G({},l),{colDelta:l.colDelta-c.length}),r),f=tU(a),s=f.cols,m=f.rows,d=tK(a),g=us(n,t),p=G(G({},g),{colDelta:g.colDelta+d.length}),b=ub(R(n,function(e){return I(d,function(t,n){return tj(t,n,[ud(1,e,r,w)[0]])},e)}),p,r);return s.concat(m.slice(0,e)).concat(b).concat(m.slice(e,m.length))}function uy(e,t,n,r,o){var u=tU(e),i=u.rows,c=u.cols,l=i.slice(0,t),a=i.slice(t),f=tG(i[n],function(e){return o(e,r)},function(e,n){return 0<t&&t<i.length&&r(tV(i[t-1],n),tV(i[t],n))?tH(i[t],n):eb(o(e.element,r),!0,e.isLocked)});return c.concat(l).concat([f]).concat(a)}function uC(e,t,n,r,o){return R(e,function(e){var u=0<t&&t<tq(e)&&r(tV(e,t-1),tV(e,t)),i="colgroup"!==e.section&&u?tH(e,t):eb(o(tH(e,n).element,r),!0,!1);return tj(e,t,[i])})}function uS(e,t,n,r){var o;return void 0!==tV(e[t],n)&&0<t&&r(tV(e[t-1],n),tV(e[t],n))||(o=e[t],0<n&&r(tV(o,n-1),tV(o,n)))}function uT(e,t,n,r){function o(e){return("row"===e?tI:tk)(t)?e+"group":e}return e?cM(t)?o(n):null:r&&cM(t)?o("row"===n?"col":"row"):null}function ux(e,t,n){return eb(n(e.element,t),!0,e.isLocked)}function uR(e,t,n,r,o,u,i){return R(e,function(e,c){var l,a;return l=function(e,l){if(T(t,function(t){return n(e.element,t.element)})){var a=i(e,c,l)?o(e,n,r):e;return u(a,c,l).each(function(e){var t=a.element;ec({scope:H.from(e)},function(e,n){e.fold(function(){nu(t,n)},function(e){ts(t.dom,n,e)})})}),a}return e},a=R(e.cells,l),eh(e.element,a,e.section,e.isNew)})}function uD(e,t,n){return P(e,function(r,o){return uS(e,o,t,n)?[]:[tH(r,t)]})}function uO(e,t,n,r,o){var i=tU(e).rows,c=P(t,function(e){return uD(i,e,r)}),l=R(e,function(e){return oZ(e.cells)}),a=N(l,u)&&oZ(c)?w:function(e,t,n){return!("th"===eq(e.element)&&l[t])};return uR(e,c,r,o,ux,function(e,t){return H.some(uT(n,e.element,"row",l[t]))},a)}function uA(e,t,n,r){var o=tU(e).rows;return uR(e,R(t,function(e){return tH(o[e.row],e.column)}),n,r,ux,H.none,w)}function uk(e){return I(e,function(e,t){return T(e,function(e){return e.column===t.column})?e:e.concat([t])},[]).sort(function(e,t){return e.column-t.column})}function uI(e){return"tr"===eq(e)||cL(e)}function uB(e){return{element:e,colspan:tA(e,"colspan",1),rowspan:tA(e,"rowspan",1)}}function uM(e){return tp(e,"scope").map(function(e){return e.substr(0,3)})}function uE(e){return S(cW,cj.property().name(e))}function uP(e){return S(["ol","ul"],cj.property().name(e))}function uN(e){return oh(e,!0)}function uz(e){0===tE(e).length&&nb(e)}function u_(e,t){return{grid:e,cursor:t}}function uL(e,t,n){var r,o,u,i=(u=tU(e).rows,H.from(null===(o=null===(r=u[t])||void 0===r?void 0:r.cells[n])||void 0===o?void 0:o.element).filter(uN).orThunk(function(){return j(u,function(e){return j(e.cells,function(e){var t=e.element;return ty(uN(t),t)})})}));return u_(e,i)}function uW(e){return I(e,function(e,t){return T(e,function(e){return e.row===t.row})?e:e.concat([t])},[]).sort(function(e,t){return e.row-t.row})}function uj(e,t){return function(n,r,o,i,c){var l,a,f,s,m,d,g,p,b,h,v;return uL((l=R(uW(r),function(e){return e.row}),a=i.replaceOrInit,s=(f=tU(n)).cols,d=(m=f.rows)[l[0]],g=P(l,function(e){return P(m[e].cells,function(t,n){return uS(m,e,n,o)?[]:[t]})}),p=R(d.cells,function(e,t){return oZ(uD(m,t,o))}),b=$([],m,!0),D(l,function(t){b[t]=c.transformRow(m[t],e)}),h=s.concat(b),v=N(p,u)&&oZ(d.cells)?w:function(e,t,n){return!("th"===eq(e.element)&&p[n])},uR(h,g,o,a,c.transformCell,function(e,n,r){return H.some(uT(t,e.element,"col",p[r]))},v)),r[0].row,r[0].column)}}function uF(e,t,n){var r,o=(r=n.section,t_(e,function(){return r}));return o8(nd.generate(o),t,!0)}function uH(e,t,n,r){var o=r.sizing,u=nd.generate(t);r9(u,o.getWidths(u,o),o)}function uV(e,t,n,r){var o=r.sizing,u=r.resize,i=nd.generate(t),c=o.getWidths(i,o),l=o.pixelWidth(),a=u.calcRedestributedWidths(c,l,n.pixelDelta,o.isRelative),f=a.newSizes,s=a.delta;r9(i,f,o),o.adjustTableWidth(s)}function uq(e,t){return T(t,function(e){return 0===e.column&&e.isLocked})}function uU(e,t){return T(t,function(t){return t.column+t.colspan>=e.grid.columns&&t.isLocked})}function uG(e,t){var n=nz(e);return I(uk(t),function(e,t){return e+n[t.column].map(nN).getOr(0)},0)}function u$(e){return function(t,n){return uu(t,n).filter(function(n){return!(e?uq:uU)(t,n)}).map(function(e){return{details:e,pixelDelta:uG(t,e)}})}}function uK(e){return function(t,n){return uo(t,n).filter(function(n){return!(e?uq:uU)(t,n.cells)})}}function uX(e,t){var n=nd.fromTable(e);return uu(n,t).bind(function(e){var t=e[e.length-1],r=e[0].column,o=t.column+t.colspan;return cE(E(R(n.all,function(e){return A(e.cells,function(e){return e.column>=r&&e.column<o})})))}).getOr("")}function uY(e,t){return uu(nd.fromTable(e),t).bind(cE).getOr("")}function uJ(e,t,n,r){return x(e,function(e){return function(e,t,n,r){for(var o=eL.fromTag("tr"),u=0;u<e;u++){var i=r<t||u<n?eL.fromTag("th"):eL.fromTag("td");u<n&&tm(i,"scope","row"),r<t&&tm(i,"scope","col"),np(i,eL.fromTag("br")),np(o,i)}return o}(t,n,r,e)})}function uQ(e,t){e.selection.select(t.dom,!0),e.selection.collapse(!0)}function uZ(e,t,n,r,o){var u=oM(e),i={styles:u,attributes:oB(e),colGroups:e.getParam("table_use_colgroups",!1,"boolean")};return e.undoManager.ignore(function(){var u=(c=oj(e),void 0===(l=i)&&(l=lr),f=eL.fromTag("table"),s="cells"!==c,tx(f,l.styles),td(f,l.attributes),l.colGroups&&np(f,(a=eL.fromTag("colgroup"),x(t,function(){return np(a,eL.fromTag("col"))}),a)),d=Math.min(n,o),s&&0<o&&(np(f,m=eL.fromTag("thead")),t7(m,uJ(o,t,"sectionCells"===c?d:0,r))),np(f,g=eL.fromTag("tbody")),t7(g,uJ(s?n-d:n,t,s?0:o,r)),f);tm(u,"data-mce-id","__mce");var c,l,a,f,s,m,d,g,p,b=(np(p=eL.fromTag("div"),eL.fromDom(u.dom.cloneNode(!0))),p.dom.innerHTML);e.insertContent(b),e.addVisual()}),eo('table[data-mce-id="__mce"]',rU(e)).map(function(t){var n;return cT(e)?cD(t):cx(e)?cO(t):(oW(e)||c(n=u.width)&&-1!==n.indexOf("%"))&&cR(t),rY(t),nu(t,"data-mce-id"),D(e5(t,"tr"),function(t){ox(e,t.dom),D(e5(t,"th,td"),function(t){oR(e,t.dom)})}),eo("td,th",t).each(p(uQ,e)),t.dom}).getOr(null)}function u0(e,t,n,r,o){if(void 0===r&&(r={}),g(t)&&0<t&&g(u=n)&&0<u){var u,i=r.headerRows||0;return uZ(e,n,t,r.headerColumns||0,i)}return console.error(o),null}function u1(e){return function(){return e().fold(function(){return[]},function(e){return R(e,function(e){return e.dom})})}}function u9(e){return function(t){e(0<t.length?H.some(rq(t)):H.none())}}function u2(e,t,n){var r=tA(e,t,1);1===n||r<=1?nu(e,t):tm(e,t,Math.min(n,r))}function u3(e,t,n){return function(t,r){for(var o=0;o<r.length;o++){var u=e.getStyle(r[o],n);if((t=void 0===t?u:t)!==u)return""}return t}(void 0,e.select("td,th",t))}function u5(e,t,n){n&&e.formatter.apply("align"+n,{},t)}function u4(e,t){lo.each("left center right".split(" "),function(n){e.formatter.remove("align"+n,{},t)})}function u7(e){var t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()}function u6(e){return{value:u7(e.red)+u7(e.green)+u7(e.blue)}}function u8(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}}function ie(e,t,n,r){return u8(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseFloat(r))}function it(e){var t=e;return{get:function(){return t},set:function(e){t=e}}}function ir(e){function t(){return n.get().each(e)}var n=it(H.none());return{clear:function(){t(),n.set(H.none())},isSet:function(){return n.get().isSome()},get:function(){return n.get()},set:function(e){t(),n.set(H.some(e))}}}function io(){var e=ir(r);return G(G({},e),{on:function(t){return e.get().each(t)}})}function iu(e){return ed(e,"menu")}function ii(e,t){return function(n){var r;e.execCommand("mceTableApplyCellStyle",!1,((r={})[t]=n,r))}}function ic(e,t,n,r,o){return function(u){return u(ls(e,t,n,r,o))}}function il(e,t,n){var r=R(t,function(e){var t,n;return{text:e.title,value:"#"+(li.test(n=t=e.value)||lc.test(n)?H.some({value:(eR(n,"#")?n.substring(1):n).toUpperCase()}):H.none()).orThunk(function(){return(function(e){if("transparent"===e)return H.some(u8(0,0,0,0));var t=ll.exec(e);if(null!==t)return H.some(ie(t[1],t[2],t[3],"1"));var n=la.exec(e);return null!==n?H.some(ie(n[1],n[2],n[3],n[4])):H.none()})(t).map(u6)}).getOrThunk(function(){var e=document.createElement("canvas");e.height=1,e.width=1;var n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),n.fillStyle="#FFFFFF",n.fillStyle=t,n.fillRect(0,0,1,1);var r=n.getImageData(0,0,1,1).data;return u6(u8(r[0],r[1],r[2],r[3]))}).value,type:"choiceitem"}});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:0<r.length?r:void 0,allowCustomColors:!1},onAction:function(t){var r,o="remove"===t.value?"":t.value;e.execCommand("mceTableApplyCellStyle",!1,((r={})[n]=o,r))}}]}function ia(e){return function(){var t=e.queryCommandValue("mceTableRowType");e.execCommand("mceTableRowType",!1,{type:"header"===t?"body":"header"})}}function is(e){return function(){var t=e.queryCommandValue("mceTableColType");e.execCommand("mceTableColType",!1,{type:"th"===t?"td":"th"})}}function im(e){var t;return ld.concat((0<(t=lf(o_(e))).length?H.some({name:"class",type:"listbox",label:"Class",items:t}):H.none()).toArray())}function id(e,t){var n=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(lf(oI(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===t?[{name:"borderwidth",type:"input",label:"Border width"}].concat(n):n}}function ig(e){return function(t,n){var r=t.dom;return{setAttrib:function(t,o){e&&!o||r.setAttrib(n,t,o)},setStyle:function(t,o){e&&!o||r.setStyle(n,t,o)},setFormat:function(r,o){e&&!o||(""===o?t.formatter.remove(r,{value:null},n,!0):t.formatter.apply(r,{value:o},n))}}}}function ip(e){return function(t){return eR(t,"rgb")?e.toHex(t):t}}function ib(e,t){var n=eL.fromDom(t);return{borderwidth:tD(n,"border-width").getOr(""),borderstyle:tD(n,"border-style").getOr(""),bordercolor:tD(n,"border-color").map(ip(e)).getOr(""),backgroundcolor:tD(n,"background-color").map(ip(e)).getOr("")}}function ih(e){var t=e[0];return D(e.slice(1),function(e){D(eW(t),function(n){ec(e,function(e,r){var o=t[n];""!==o&&n===r&&o!==e&&(t[n]="")})})}),t}function iv(e,t,n,r){return B(e,function(e){return!m(n.formatter.matchNode(r,t+e))}).getOr("")}function iw(e,t){var n=nd.fromTable(e);return R(A(nd.justCells(n),function(e){return T(t,function(t){return eu(e.element,t)})}),function(e){return{element:e.element.dom,column:nd.getColumnAt(n,e.column).map(function(e){return e.element.dom})}})}function iy(e,t,n,r){var o=r.getData();r.close(),e.undoManager.transact(function(){var r=ea(o,function(e,t){return n[t]!==e});0<es(r)&&1<=t.length&&tN(t[0]).each(function(n){var u,i=iw(n,t),c=0<es(ea(r,function(e,t){return"scope"!==t&&"celltype"!==t})),l=eH(r,"celltype");(c||eH(r,"scope"))&&(u=1===i.length,D(i,function(t){var n,r=t.element,i=u?lg.normal(e,r):lg.ifTruthy(e,r),c=t.column.map(function(t){return u?lg.normal(e,t):lg.ifTruthy(e,t)}).getOr(i);i.setAttrib("scope",o.scope),i.setAttrib("class",o.class),i.setStyle("height",rX(o.height)),c.setStyle("width",rX(o.width)),oE(e)&&(i.setFormat("tablecellbackgroundcolor",o.backgroundcolor),i.setFormat("tablecellbordercolor",o.bordercolor),i.setFormat("tablecellborderstyle",o.borderstyle),i.setFormat("tablecellborderwidth",rX(o.borderwidth))),u&&(u4(e,r),lo.each("top middle bottom".split(" "),function(t){e.formatter.remove("valign"+t,{},r)})),o.halign&&u5(e,r,o.halign),!o.valign||(n=o.valign)&&e.formatter.apply("valign"+n,{},r)})),l&&e.execCommand("mceTableCellType",!1,{type:o.celltype,no_events:!0}),oD(e,n.dom,{structure:l,style:c})}),e.focus()})}function iC(e,t){var n,r,o,u=i2(t);0!==u.length&&(n=ih(tN(u[0]).map(function(t){return R(iw(t,u),function(t){var n,r,o,u,i;return n=t.element,r=oE(e),o=t.column,u=e.dom,i=o.getOr(n),G({width:c(i,"width"),height:c(n,"height"),scope:u.getAttrib(n,"scope"),celltype:n.nodeName.toLowerCase(),class:u.getAttrib(n,"class",""),halign:lp(e,n),valign:lb(e,n)},r?ib(u,n):{});function c(e,t){return u.getStyle(e,t)||u.getAttrib(e,t)}})}).getOrDie()),r={type:"tabpanel",tabs:[{title:"General",name:"general",items:im(e)},id(e,"cell")]},o={type:"panel",items:[{type:"grid",columns:2,items:im(e)}]},e.windowManager.open({title:"Cell Properties",size:"normal",body:oE(e)?r:o,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:n,onSubmit:p(iy,e,u,n)}))}function iS(e){var t;return lh.concat((0<(t=lf(e.getParam("table_row_class_list",[],"array"))).length?H.some({name:"class",type:"listbox",label:"Class",items:t}):H.none()).toArray())}function iT(e,t,n,r){var o=r.getData();r.close(),e.undoManager.transact(function(){var r,u,i,c=ea(o,function(e,t){return n[t]!==e});0<es(c)&&((u=!(r=eH(c,"type"))||1<es(c))&&(i=1===t.length,D(t,function(t){var r=i?lg.normal(e,t):lg.ifTruthy(e,t);r.setAttrib("class",o.class),r.setStyle("height",rX(o.height)),oP(e)&&(r.setStyle("background-color",o.backgroundcolor),r.setStyle("border-color",o.bordercolor),r.setStyle("border-style",o.borderstyle)),o.align!==n.align&&(u4(e,t),u5(e,t,o.align))})),r&&e.execCommand("mceTableRowType",!1,{type:o.type,no_events:!0}),tN(eL.fromDom(t[0])).each(function(t){return oD(e,t.dom,{structure:r,style:u})})),e.focus()})}function ix(e){var t,n,r,o,u,i,c,l=(t=rJ(e),n=i0.selected,o=(r=i9(t)).bind(function(e){return tN(e)}).map(tz),tw(r,o,function(e,t){return A(t,function(t){return T(rq(t.dom.cells),function(t){return"1"===tg(t,n)||eu(t,e)})})}).getOr([]));0!==l.length&&(u=ih(R(l,function(t){var n,r,o;return n=t.dom,r=oP(e),o=e.dom,G({height:o.getStyle(n,"height")||o.getAttrib(n,"height"),class:o.getAttrib(n,"class",""),type:tN(eL.fromDom(n)).map(function(e){return ln(e,{selection:rq(n.cells)})}).getOr(""),align:lp(e,n)},r?ib(o,n):{})})),i={type:"tabpanel",tabs:[{title:"General",name:"general",items:iS(e)},id(e,"row")]},c={type:"panel",items:[{type:"grid",columns:2,items:iS(e)}]},e.windowManager.open({title:"Row Properties",size:"normal",body:oP(e)?i:c,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:u,onSubmit:p(iT,e,R(l,function(e){return e.dom}),u)}))}function iR(e,t,n,r){var o=e.dom,u=r.getData(),i=ea(u,function(e,t){return n[t]!==e});r.close(),""===u.class&&delete u.class,e.undoManager.transact(function(){var n,r,c;t||(t=uZ(e,parseInt(u.cols,10)||1,parseInt(u.rows,10)||1,0,0)),0<es(i)&&(function(e,t,n){var r,o=e.dom,u={},i={};if(u.class=n.class,i.height=rX(n.height),o.getAttrib(t,"width")&&!oz(e)?u.width=(r=n.width)?r.replace(/px$/,""):"":i.width=rX(n.width),oz(e)?(i["border-width"]=rX(n.border),i["border-spacing"]=rX(n.cellspacing)):(u.border=n.border,u.cellpadding=n.cellpadding,u.cellspacing=n.cellspacing),oz(e)&&t.children)for(var c=0;c<t.children.length;c++)lv(o,t.children[c],{"border-width":rX(n.border),padding:rX(n.cellpadding)}),oN(e)&&lv(o,t.children[c],{"border-color":n.bordercolor});oN(e)&&(i["background-color"]=n.backgroundcolor,i["border-color"]=n.bordercolor,i["border-style"]=n.borderstyle),u.style=o.serializeStyle(G(G({},oM(e)),i)),o.setAttribs(t,G(G({},oB(e)),u))}(e,t,u),((n=o.select("caption",t)[0])&&!u.caption||!n&&u.caption)&&e.execCommand("mceTableToggleCaption"),""===u.align?u4(e,t):u5(e,t,u.align)),e.focus(),e.addVisual(),0<es(i)&&(c=!(r=eH(i,"caption"))||1<es(i),oD(e,t,{structure:r,style:c}))})}function iD(e,t){var n,r,o,u,i,c,l,a,f,s,m,d,g,b,h,v=e.dom,w=(r=oN(e),l=oM(e),a=oB(e),f=r?(o=e.dom,{borderstyle:em(l,"border-style").getOr(""),bordercolor:ip(o)(em(l,"border-color").getOr("")),backgroundcolor:ip(o)(em(l,"background-color").getOr(""))}):{},G(G(G(G(G(G({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""}),l),a),f),(c=l["border-width"],oz(e)&&c?{border:c}:em(a,"border").fold(function(){return{}},function(e){return{border:e}}))),(u=em(l,"border-spacing").or(em(a,"cellspacing")).fold(function(){return{}},function(e){return{cellspacing:e}}),i=em(l,"border-padding").or(em(a,"cellpadding")).fold(function(){return{}},function(e){return{cellpadding:e}}),G(G({},u),i))));!1===t?(n=v.getParent(e.selection.getStart(),"table",e.getBody()))?(s=n,m=oN(e),g=e.dom,b=oz(e)?g.getStyle(s,"border-spacing")||g.getAttrib(s,"cellspacing"):g.getAttrib(s,"cellspacing")||g.getStyle(s,"border-spacing"),h=oz(e)?u3(g,s,"padding")||g.getAttrib(s,"cellpadding"):g.getAttrib(s,"cellpadding")||u3(g,s,"padding"),w=G({width:g.getStyle(s,"width")||g.getAttrib(s,"width"),height:g.getStyle(s,"height")||g.getAttrib(s,"height"),cellspacing:b,cellpadding:h,border:(d=tD(eL.fromDom(s),"border-width"),oz(e)&&d.isSome()?d.getOr(""):g.getAttrib(s,"border")||u3(e.dom,s,"border-width")||u3(e.dom,s,"border")),caption:!!g.select("caption",s)[0],class:g.getAttrib(s,"class",""),align:lp(e,s)},m?ib(g,s):{})):oN(e)&&(w.borderstyle="",w.bordercolor="",w.backgroundcolor=""):(w.cols="1",w.rows="1",oN(e)&&(w.borderstyle="",w.bordercolor="",w.backgroundcolor=""));var y=lf(oL(e));0<y.length&&w.class&&(w.class=w.class.replace(/\s*mce\-item\-table\s*/g,""));var C,S,T,x={type:"grid",columns:2,items:(C=t?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],S=e.getParam("table_appearance_options",!0,"boolean")?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],T=0<y.length?[{type:"listbox",name:"class",label:"Class",items:y}]:[],C.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(S).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(T))},R=oN(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[x]},id(e,"table")]}:{type:"panel",items:[x]};e.windowManager.open({title:"Table Properties",size:"normal",body:R,onSubmit:p(iR,e,n,w),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:w})}function iO(e){return i1(rJ(e),rK(e))}function iA(e,t){return tN(e,t).bind(function(t){var n=tE(t);return M(n,function(t){return eu(e,t)}).map(function(e){return{index:e,all:n}})})}function ik(e,t,n){var r=e.document.createRange();return t.fold(function(e){r.setStartBefore(e.dom)},function(e,t){r.setStart(e.dom,t)},function(e){r.setStartAfter(e.dom)}),n.fold(function(e){r.setEndBefore(e.dom)},function(e,t){r.setEnd(e.dom,t)},function(e){r.setEndAfter(e.dom)}),r}function iI(e,t,n,r,o){var u=e.document.createRange();return u.setStart(t.dom,n),u.setEnd(r.dom,o),u}function iB(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}}function iM(e,t,n){return t(eL.fromDom(n.startContainer),n.startOffset,eL.fromDom(n.endContainer),n.endOffset)}function iE(e,t){var n,r=t.match({domRange:function(e){return{ltr:o(e),rtl:H.none}},relative:function(t,n){return{ltr:K(function(){return ik(e,t,n)}),rtl:K(function(){return H.some(ik(e,n,t))})}},exact:function(t,n,r,o){return{ltr:K(function(){return iI(e,t,n,r,o)}),rtl:K(function(){return H.some(iI(e,r,o,t,n))})}}});return(n=r.ltr()).collapsed?r.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return lI.rtl(eL.fromDom(e.endContainer),e.endOffset,eL.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return iM(0,lI.ltr,n)}):iM(0,lI.ltr,n)}function iP(e,t){return iE(e,t).match({ltr:function(t,n,r,o){var u=e.document.createRange();return u.setStart(t.dom,n),u.setEnd(r.dom,o),u},rtl:function(t,n,r,o){var u=e.document.createRange();return u.setStart(r.dom,o),u.setEnd(t.dom,n),u}})}function iN(e,t){return{parent:o(H.from(e.dom.documentElement).map(eL.fromDom).getOr(e)),view:o(e),origin:o(ro(0,0)),isResizable:t}}function iz(e){return rh(e).exists(function(e){return iV.test(e)})}function i_(e){return rh(e).exists(function(e){return iq.test(e)})}function iL(e){return rh(e).isNone()}function iW(){return{transformRow:u,transformCell:o1}}function ij(e,t){function n(n){if(uI(n))return cL((u={element:n}).element)?e.colgroup(u):e.row(u);var o,u,i=c_((o=t(n)).element)?e.col(o):e.cell(o);return r=H.some({item:n,replacement:i}),i}void 0===t&&(t=uB);var r=H.none();return{getOrInit:function(e,t){return r.fold(function(){return n(e)},function(r){return t(e,r.item)?r.replacement:n(e)})}}}function iF(e){return function(t){function n(n){var o=t.replace(n,e,"td"===e?{scope:null}:{});return r.push({item:n,sub:o}),o}var r=[];return{replaceOrInit:function(e,t){return uI(e)||c_(e)?e:B(r,function(n){return t(n.item,e)}).fold(function(){return n(e)},function(r){return t(e,r.item)?r.sub:n(e)})}}}}function iH(e){return{unmerge:function(t){var n=uM(t);return n.each(function(e){return tm(t,"scope",e)}),function(){var r=e.cell({element:t,colspan:1,rowspan:1});return tO(r,"width"),tO(t,"width"),n.each(function(e){return tm(r,"scope",e)}),r}},merge:function(e){return tO(e[0],"width"),(function(){var t=tv(R(e,uM));if(0===t.length)return H.none();var n=t[0],r=["row","col"];return T(t,function(e){return e!==n&&S(r,e)})?H.none():H.from(n)})().fold(function(){return nu(e[0],"scope")},function(t){return tm(e[0],"scope",t+"group")}),o(e[0])}}}var iV=/(\d+(\.\d+)?)%/,iq=/(\d+(\.\d+)?)px|em/,iU=eK("col"),iG=o(iV),i$=eK("col"),iK=function(e){return rh(e).fold(function(){var t,n;return{width:t=rI(e,nP),pixelWidth:t,getWidths:function(t,n){return rA(t,e,n)},getCellDelta:n=o(0),singleColumnWidth:o([0]),minCellWidth:n,setElementWidth:r,adjustTableWidth:r,isRelative:!0,label:"none"}},function(t){return(null!==iG().exec(t)?rB:rM)(e)})},iX=rM,iY=rB,iJ=["img","br"],iQ=function(e,t){var n=function(e){for(var r=e1(e),o=r.length-1;0<=o;o--){var u=r[o];if(t(u))return H.some(u);var i=n(u);if(i.isSome())return i}return H.none()};return n(e)},iZ={scope:["row","col"]},i0={selected:"data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:"data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:"data-mce-last-selected",lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},i1=r0("th,td,caption"),i9=r0("th,td"),i2=rQ,i3=nY([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),i5=G({},i3),i4=r4(function(e){return e<0}),i7=r4(w),i6=nY([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),i8=G(G({},i6),{from:function(e){return Q(e,"%")?r8("%",i6.percent,e):Q(e,"px")?r8("px",i6.pixels,e):i6.invalid(e)}}),ce=function(e){if(0===e.length)return e;var t,n,r=k(e,function(e,t){var n=i8.from(t).fold(function(){return{value:t,remainder:0}},function(e){var t;return{value:(t=Math.floor(e))+"px",remainder:e-t}},function(e){return{value:e+"%",remainder:0}});return{output:[n.value].concat(e.output),remainder:e.remainder+n.remainder}},{output:[],remainder:0}),u=r.output;return u.slice(0,u.length-1).concat([(t=u[u.length-1],n=Math.round(r.remainder),i8.from(t).fold(o(t),function(e){return e+n+"px"},function(e){return e+n+"%"}))])},ct=i8.from,cn=oa(["compare","extract","mutate","sink"]),cr=oa(["element","start","stop","destroy"]),co=oa(["forceDrop","drop","move","delayDrop"]),cu=function(e,t,n,r){e.dom.removeEventListener(t,n,r)},ci=w,cc=op("ephox-dragster").resolve,cl=cn({compare:function(e,t){return ro(t.left-e.left,t.top-e.top)},extract:function(e){return H.some(ro(e.x,e.y))},sink:function(e,t){var n,r,u=(n=G({layerClass:cc("blocker")},t),tm(r=eL.fromTag("div"),"role","presentation"),tx(r,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),od(r,cc("blocker")),od(r,n.layerClass),{element:o(r),destroy:function(){nb(r)}}),i=os(u.element(),"mousedown",e.forceDrop),c=os(u.element(),"mouseup",e.drop),l=os(u.element(),"mousemove",e.move),a=os(u.element(),"mouseout",e.delayDrop);return cr({element:u.element,start:function(e){np(e,u.element())},stop:function(){nb(u.element())},destroy:function(){u.destroy(),c.unbind(),l.unbind(),a.unbind(),i.unbind()}})},mutate:function(e,t){e.mutate(t.left,t.top)}}),ca=function(e){return e.dom.contentEditable},cf=op("ephox-snooker").resolve,cs=cf("resizer-bar"),cm=cf("resizer-rows"),cd=cf("resizer-cols"),cg=cf("resizer-bar-dragging"),cp={structure:!1,style:!0},cb={structure:!0,style:!1},ch={structure:!0,style:!0},cv={"border-collapse":"collapse",width:"100%"},cw=x(5,function(e){var t=e+1+"px";return{title:t,value:t}}),cy=R(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],function(e){return{title:e,value:e.toLowerCase()}}),cC={border:"1"},cS="preservetable",cT=function(e){return"fixed"===oO(e)||!1===oA(e)},cx=function(e){return"responsive"===oO(e)},cR=function(e){var t=rS(e);or(e,H.some(t),H.none()),oK(e)},cD=function(e){var t=nP(e)+"px";or(e,H.some(t),H.none()),oK(e)},cO=function(e){tO(e,"width");var t=tP(e);D(0<t.length?t:tE(e),function(e){tO(e,"width"),oK(e)}),oK(e)},cA="bar-",ck=function(e,t,n){return e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?n(t).bind(function(t){return ck(e,t,n).orThunk(function(){return H.some(t)})}):H.none()},cI=function(e,t){var n=ck(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(n))return oY(n,oJ(e,n));var r=e.property().children(n);return 0<r.length?cI(e,r[r.length-1]):oY(n,oJ(e,n))},cB=nw(),cM=eK("th"),cE=function(e){var t=A(e,function(e){return cM(e.element)});return 0===t.length?H.some("td"):t.length===e.length?H.some("th"):H.none()},cP=function(e){return{isValue:w,isError:v,getOr:o(e),getOrThunk:o(e),getOrDie:o(e),or:function(t){return cP(e)},orThunk:function(t){return cP(e)},fold:function(t,n){return n(e)},map:function(t){return cP(t(e))},mapError:function(t){return cP(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOptional:function(){return H.some(e)}}},cN=function(e){return{isValue:v,isError:w,getOr:u,getOrThunk:function(e){return e()},getOrDie:function(){var t;return t=String(e),function(){throw Error(t)}()},or:u,orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return cN(e)},mapError:function(t){return cN(t(e))},each:r,bind:function(t){return cN(e)},exists:v,forall:w,toOptional:H.none}},cz={value:cP,error:cN},c_=eK("col"),cL=eK("colgroup"),cW=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],cj=nw(),cF=uj("thead",!0),cH=uj("tbody",!1),cV=uj("tfoot",!1),cq=iF("th"),cU=iF("td"),cG=ur(function(e,t,n,r){var o=t[0].row;return uL(k(uW(t),function(e,t){return{grid:uy(e.grid,o,t.row+e.delta,n,r.getOrInit),delta:e.delta+1}},{grid:e,delta:0}).grid,o,t[0].column)},uu,r,r,ij),c$=ur(function(e,t,n,r){var o=uW(t),u=o[o.length-1],i=u.row+u.rowspan;return uL(k(o,function(e,t){return uy(e,i,t.row,n,r.getOrInit)},e),i,t[0].column)},uu,r,r,ij),cK=ur(function(e,t,n,r){var o=t.details,u=uk(o),i=u[0].column;return uL(k(u,function(e,t){return{grid:uC(e.grid,i,t.column+e.delta,n,r.getOrInit),delta:e.delta+1}},{grid:e,delta:0}).grid,o[0].row,i)},u$(!0),uV,r,ij),cX=ur(function(e,t,n,r){var o=t.details,u=o[o.length-1],i=u.column+u.colspan;return uL(k(uk(o),function(e,t){return uC(e,i,t.column,n,r.getOrInit)},e),o[0].row,i)},u$(!1),uV,r,ij),cY=ur(function(e,t,n,r){var o,u=uk(t.details),i=(o=R(u,function(e){return e.column}),P(e,function(e){var t=k(o,function(e,t){return 0<=t&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e},e.cells);return 0<t.length?[eh(e.element,t,e.section,e.isNew)]:[]})),c=0<i.length?i[0].cells.length-1:0;return uL(i,u[0].row,Math.min(u[0].column,c))},function(e,t){return ui(e,t).map(function(t){return{details:t,pixelDelta:-uG(e,t)}})},uV,uz,ij),cJ=ur(function(e,t,n,r){var o,u,i,c,l=uW(t),a=(o=l[0].row,u=l[l.length-1].row,c=(i=tU(e)).rows,i.cols.concat(c.slice(0,o)).concat(c.slice(u+1))),f=0<a.length?a.length-1:0;return uL(a,Math.min(t[0].row,f),t[0].column)},uu,r,uz,ij),cQ=ur(function(e,t,n,r){return uL(uO(e,R(uk(t),function(e){return e.column}),!0,n,r.replaceOrInit),t[0].row,t[0].column)},ui,r,r,cq),cZ=ur(function(e,t,n,r){return uL(uO(e,R(uk(t),function(e){return e.column}),!1,n,r.replaceOrInit),t[0].row,t[0].column)},ui,r,r,cU),c0=ur(cF,ui,r,r,cq),c1=ur(cH,ui,r,r,cU),c9=ur(cV,ui,r,r,cU),c2=ur(function(e,t,n,r){return uL(uA(e,t,n,r.replaceOrInit),t[0].row,t[0].column)},ui,r,r,cq),c3=ur(function(e,t,n,r){return uL(uA(e,t,n,r.replaceOrInit),t[0].row,t[0].column)},ui,r,r,cU),c5=ur(function(e,t,n,r){var o,u,i=t.cells;return u=0===(o=P(i,function(e){var t=e1(e);return N(t,function(e){return"br"===eq(e)||e7(e)&&0===ne(e).trim().length})?[]:t.concat(iQ(e,rP).bind(function(t){var n=e0(t).map(function(e){return!!uE(e)||!!S(["br","img","hr","input"],cj.property().name(e))&&"img"!==eq(e)}).getOr(!1);return eJ(t).map(function(r){var o;return!0===n||"li"===eq(o=r)||tc(o,uP).isSome()||"br"===eq(t)||uE(r)&&!eu(e,r)?[]:[eL.fromTag("br")]})}).getOr([]))})).length?[eL.fromTag("br")]:o,t6(i[0]),t7(i[0],u),u_(function(e,t,n){var r=tU(e).rows;if(0===r.length)return e;for(var o=t.startRow;o<=t.finishRow;o++)for(var u=t.startCol;u<=t.finishCol;u++){var i=r[o],c=tH(i,u).isLocked;tF(i,u,eb(n(),!1,c))}return e}(e,t.bounds,r.merge(i)),H.from(i[0]))},ul,uH,r,iH),c4=ur(function(e,t,n,r){return u_(k(t,function(e,t){return uf(e,t,n,r.unmerge(t))},e),H.from(t[0]))},ua,uH,r,iH),c7=ur(function(e,t,n,r){var o,u,i,c,l,a,f,s,m,d=(s=t.clipboard,m=t.generators,o8(nd.fromTable(s),m,!0));return(o={row:t.row,column:t.column},u=t.generators,c=tK(e),i=tq(e[0]),f=uh(l={row:tU(e).cols.length+o.row,column:B(x(i-o.column,function(e){return e+o.column}),function(e){return N(c,function(t){return t!==e})}).getOr(i-1)},a=tU(d).rows,c),(function(e,t,n){if(e.row>=t.length||e.column>tq(t[0]))return cz.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);var r=t.slice(e.row),o=r[0].cells.slice(e.column),u=tq(n[0]),i=n.length;return cz.value({rowDelta:r.length-i,colDelta:o.length-u})})(l,e,a).map(function(t){var r=ub(e,G(G({},t),{colDelta:t.colDelta-f.length}),u),o=uh(l,a,tK(r));return function(e,t,n,r,o,u){for(var i,c,l,a,f=e.row,s=e.column,m=f+n.length,d=s+tq(n[0])+u.length,g=z(u,w),b=f;b<m;b++)for(var h,v,y,C=0,S=s;S<d;S++)g[S]?C++:(c=S,l=void 0,l=p(o,tH(t[i=b],c).element),a=t[i],1<t.length&&1<tq(a)&&(0<c&&l(tV(a,c-1))||c<a.cells.length-1&&l(tV(a,c+1))||0<i&&l(tV(t[i-1],c))||i<t.length-1&&l(tV(t[i+1],c)))&&uf(t,tV(t[b],S),o,r.cell),v=(h=tH(n[b-f],S-s-C)).element,y=r.replace(v),tF(t[b],S,eb(y,!0,h.isLocked)));return t}(l,r,a,u,n,o)})).fold(function(){return u_(e,H.some(t.element))},function(e){return uL(e,t.row,t.column)})},function(e,t){return tM(t.element).bind(function(n){return ut(e,n).map(function(e){return G(G({},e),{generators:t.generators,clipboard:t.clipboard})})})},uH,r,ij),c6=ur(function(e,t,n,r){var o=tU(e).rows,u=t.cells[0].column,i=o[t.cells[0].row];return uL(uv(u,e,uF(t.clipboard,t.generators,i),t.generators,n),t.cells[0].row,t.cells[0].column)},uK(!0),r,r,ij),c8=ur(function(e,t,n,r){var o=tU(e).rows,u=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,i=o[t.cells[0].row];return uL(uv(u,e,uF(t.clipboard,t.generators,i),t.generators,n),t.cells[0].row,t.cells[0].column)},uK(!1),r,r,ij),le=ur(function(e,t,n,r){var o=tU(e).rows,u=t.cells[0].row,i=o[u];return uL(uw(u,e,uF(t.clipboard,t.generators,i),t.generators,n),t.cells[0].row,t.cells[0].column)},uo,r,r,ij),lt=ur(function(e,t,n,r){var o=tU(e).rows,u=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,i=o[t.cells[0].row];return uL(uw(u,e,uF(t.clipboard,t.generators,i),t.generators,n),t.cells[0].row,t.cells[0].column)},uo,r,r,ij),ln=function(e,t){var n=nd.fromTable(e);return uu(n,t).bind(function(e){var t=e[e.length-1],r=e[0].row,o=t.row+t.rowspan;return function(){var e=R(n.all.slice(r,o),function(e){return o0(e).type}),t=S(e,"header"),u=S(e,"footer");if(t||u){var i=S(e,"body");return!t||i||u?t||i||!u?H.none():H.some("footer"):H.some("header")}return H.some("body")}()}).getOr("")},lr={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},lo=tinymce.util.Tools.resolve("tinymce.util.Tools"),lu=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],li=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,lc=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ll=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,la=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,lf=function(e){return R(e,function(e){var t=e.text||e.title;return iu(e)?{text:t,items:lf(e.menu)}:{text:t,value:e.value}})},ls=function(e,t,n,r,o){return R(n,function(n){var u,i=n.text||n.title;return iu(n)?{type:"nestedmenuitem",text:i,getSubmenuItems:function(){return ls(e,t,n.menu,r,o)}}:{text:i,type:"togglemenuitem",onAction:function(){return o(n.value)},onSetup:(u=n.value,function(n){function o(){function o(t){return e.formatter.match(r,{value:u},t.dom,c)}var l=i2(t);c?(n.setActive(!T(l,o)),i.set(e.formatter.formatChanged(r,function(e){return n.setActive(!e)},!0))):(n.setActive(N(l,o)),i.set(e.formatter.formatChanged(r,n.setActive,!1,{value:u})))}var i=ir(function(e){return e.unbind()}),c=!Z(u);return e.initialized?o():e.on("init",o),i.clear})}})},lm=function(e){return P(e,function(e){return iu(e)?[G(G({},e),{menu:lm(e.menu)})]:Z(e.value)?[e]:[]})},ld=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:lu}],lg={normal:ig(!1),ifTruthy:ig(!0)},lp=p(iv,["left","center","right"],"align"),lb=p(iv,["top","middle","bottom"],"valign"),lh=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],lv=function(e,t,n,r){if("TD"===t.tagName||"TH"===t.tagName)c(n)?e.setStyle(t,n,r):e.setStyle(t,n);else if(t.children)for(var o=0;o<t.children.length;o++)lv(e,t.children[o],n,r)},lw={remove_similar:!0,inherit:!1},ly=G({selector:"td,th"},lw),lC={tablecellbackgroundcolor:G({styles:{backgroundColor:"%value"}},ly),tablecellverticalalign:G({styles:{"vertical-align":"%value"}},ly),tablecellbordercolor:G({styles:{borderColor:"%value"}},ly),tablecellclass:G({classes:["%value"]},ly),tableclass:G({selector:"table",classes:["%value"]},lw),tablecellborderstyle:G({styles:{borderStyle:"%value"}},ly),tablecellborderwidth:G({styles:{borderWidth:"%value"}},ly)},lS=nY([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),lT=G(G({},lS),{none:function(e){return lS.none(e=void 0===e?void 0:e)}}),lx=function(e,t,n,r,o){void 0===o&&(o=w);var u=1===r;if(!u&&n<=0)return lT.first(e[0]);if(u&&n>=e.length-1)return lT.last(e[e.length-1]);var i=n+r,c=e[i];return o(c)?lT.middle(t,c):lx(e,t,i,r,o)},lR=function(e,t,n,r){return{start:e,soffset:t,finish:n,foffset:r}},lD=nY([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),lO={before:lD.before,on:lD.on,after:lD.after,cata:function(e,t,n,r){return e.fold(t,n,r)},getStart:function(e){return e.fold(u,u,u)}},lA=nY([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),lk={domRange:lA.domRange,relative:lA.relative,exact:lA.exact,exactFromRange:function(e){return lA.exact(e.start,e.soffset,e.finish,e.foffset)},getWin:function(e){var t=e.match({domRange:function(e){return eL.fromDom(e.startContainer)},relative:function(e,t){return lO.getStart(e)},exact:function(e,t,n,r){return e}});return eL.fromDom(eY(t).dom.defaultView)},range:lR},lI=nY([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);function lB(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom}function lM(e,t){return t-e.left<e.right-t}function lE(e,t,n){var r=e.dom.createRange();return r.selectNode(t.dom),r.collapse(n),r}function lP(e,t){var n=eq(e);return"input"===n?lO.after(e):S(["br","img"],n)?0===t?lO.before(e):lO.after(e):lO.on(e,t)}function lN(e,t){var n=e.fold(lO.before,lP,lO.after),r=t.fold(lO.before,lP,lO.after);return lk.relative(n,r)}function lz(e,t,n,r){var o=lP(e,t),u=lP(n,r);return lk.relative(o,u)}function l_(e){return H.from(e.getSelection())}function lL(e,t){l_(e).each(function(e){e.removeAllRanges(),e.addRange(t)})}function lW(e,t,n,r,o){lL(e,iI(e,t,n,r,o))}function lj(e,t){return iE(e,t).match({ltr:function(t,n,r,o){lW(e,t,n,r,o)},rtl:function(t,n,r,o){l_(e).each(function(u){if(u.setBaseAndExtent)u.setBaseAndExtent(t.dom,n,r.dom,o);else if(u.extend)try{u.collapse(t.dom,n),u.extend(r.dom,o)}catch(u){lW(e,r,o,t,n)}else lW(e,r,o,t,n)})}})}function lF(e){if(0<e.rangeCount){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return H.some(lR(eL.fromDom(t.startContainer),t.startOffset,eL.fromDom(n.endContainer),n.endOffset))}return H.none()}function lH(e){if(null===e.anchorNode||null===e.focusNode)return lF(e);var t,n,r,o,u=eL.fromDom(e.anchorNode),i=eL.fromDom(e.focusNode);return t=e.anchorOffset,n=e.focusOffset,(r=eX(u).dom.createRange()).setStart(u.dom,t),r.setEnd(i.dom,n),o=eu(u,i)&&t===n,r.collapsed&&!o?H.some(lR(u,e.anchorOffset,i,e.focusOffset)):lF(e)}function lV(e,t,n){lL(e,((n=void 0===n||n)?function(e,t){var n=e.document.createRange();return n.selectNodeContents(t.dom),n}:function(e,t){var n=e.document.createRange();return n.selectNode(t.dom),n})(e,t))}function lq(e){return l_(e).filter(function(e){return 0<e.rangeCount}).bind(lH).map(function(e){return lk.exact(e.start,e.soffset,e.finish,e.foffset)})}function lU(e,t,n){return ag(e,t,iA(n,void 0).fold(function(){return lT.none(n)},function(e){return lx(e.all,n,e.index,1,oh)}))}function lG(e,t){var n=iP(e,t);return lR(eL.fromDom(n.startContainer),n.startOffset,eL.fromDom(n.endContainer),n.endOffset)}function l$(e,t){return{item:e,mode:t}}function lK(e,t,n,r){return void 0===r&&(r=af),e.property().parent(t).map(function(e){return l$(e,r)})}function lX(e){return function(t){return 0===e.property().children(t).length}}function lY(e,t){return ax(aD,e,lX(aD),t)}function lJ(e,t){return aR(aD,e,lX(aD),t)}function lQ(e){return tf(e,"tr")}function lZ(e){return"br"===eq(e)}function l0(e,t){return{left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}}function l1(e,t){return{left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}}function l9(e,t,n){return{left:e.left+t,top:e.top+n,right:e.right+t,bottom:e.bottom+n}}function l2(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function l3(e,t){return H.some(e.getRect(t))}function l5(e,t,n){return e4(t)?l3(e,t).map(l2):e7(t)?(0<=n&&n<rE(t)?e.getRangedRect(t,n,t,n+1):0<n?e.getRangedRect(t,n-1,t,n):H.none()).map(l2):H.none()}function l4(e,t){return e4(t)?l3(e,t).map(l2):e7(t)?e.getRangedRect(t,0,t,rE(t)).map(l2):H.none()}function l7(e,t,n){return ti(function(e,t){return t(e)},tc,t,uE,void 0).fold(v,function(t){return l4(e,t).exists(function(e){return n.left<e.left||1>Math.abs(e.right-n.left)||n.left>e.right})})}function l6(e,t,n){var r=e.move(n,5),o=aM(t,e,n,r,100).getOr(r);return(e.point(o)>t.getInnerHeight()?H.some(e.point(o)-t.getInnerHeight()):0>e.point(o)?H.some(-e.point(o)):H.none()).fold(function(){return t.situsFromPoint(o.left,e.point(o))},function(n){return t.scrollBy(0,n),t.situsFromPoint(o.left,e.point(o)-n)})}function l8(e,t,n,r,o){return tf(r,"td,th",t).bind(function(r){return tf(r,"table",t).bind(function(u){return tc(o,function(e){return eJ(e).exists(function(e){return eu(e,u)})},void 0).isSome()?e.getSelection().bind(function(r){var o,u;return(o=r.finish,u=r.foffset,(lZ(o)?n.traverse(o).orThunk(function(){return aI(o,n.gather,t)}).map(n.relative):e9(o,u).filter(lZ).orThunk(function(){return e9(o,u-1).filter(lZ)}).bind(function(e){return n.traverse(e).fold(function(){return aI(e,n.gather,t).map(n.relative)},function(e){return eJ(e).bind(function(t){var n=e1(t);return ak(n,e).map(function(r){return{parent:t,children:n,element:e,index:r}})}).map(function(e){return lO.on(e.parent,e.index)})})})).map(function(e){return{start:e,finish:e}})).fold(function(){return H.some(oY(r.finish,r.foffset))},function(o){var u=e.fromSitus(o),i=aA.verify(e,r.finish,r.foffset,u.finish,u.foffset,n.failure,t);return aA.cata(i,function(e){return H.none()},function(){return H.none()},function(e){return H.some(oY(e,0))},function(e){return H.some(oY(e,rE(e)))})})}).bind(function(r){return aP(e,t,r.element,r.offset,n,20).map(e.fromSitus)}).bind(function(e){return tf(e.finish,"td,th",t).map(function(t){return{start:r,finish:t,range:e}})}):H.none()})})}function ae(e,t,n,r,o,u){return e_().browser.isIE()?H.none():u(r,t).orThunk(function(){return l8(e,t,n,r,o).map(function(e){var t=e.range;return ab(H.some(av(t.start,t.soffset,t.finish,t.foffset)),!0)})})}function at(e,t){return tf(e,"tr",t).bind(function(e){return tf(e,"table",t).bind(function(n){return eu(e,e5(n,"tr")[0])?ax(aD,n,function(e){return iQ(e,rP).isSome()},t).map(function(e){var t=rE(e);return ab(H.some(av(e,t,e,t)),!0)}):H.none()})})}function an(e,t){return tf(e,"tr",t).bind(function(e){return tf(e,"table",t).bind(function(n){var r=e5(n,"tr");return eu(e,r[r.length-1])?aR(aD,n,function(e){return rN(e).isSome()},t).map(function(e){return ab(H.some(av(e,0,e,0)),!0)}):H.none()})})}function ar(e,t,n,r,o,u,i){return l8(e,n,r,o,u).bind(function(e){return aw(t,n,e.start,e.finish,i)})}function ao(e,t){return tf(e,"td,th",t)}function au(e){return function(t){return t===e}}function ai(e){return 37<=e&&e<=40}function ac(e){return{elementFromPoint:function(t,n){return eL.fromPoint(eL.fromDom(e.document),t,n)},getRect:function(e){return e.dom.getBoundingClientRect()},getRangedRect:function(t,n,r,o){var u,i,c;return 0<(i=0<(c=(u=iP(e,lk.exact(t,n,r,o))).getClientRects()).length?c[0]:u.getBoundingClientRect()).width||0<i.height?H.some(i).map(iB):H.none()},getSelection:function(){return lq(e).map(function(t){return lG(e,t)})},fromSitus:function(t){return lG(e,lk.relative(t.start,t.finish))},situsFromPoint:function(t,n){return am(eL.fromDom(e.document),t,n).map(function(e){return lR(eL.fromDom(e.startContainer),e.startOffset,eL.fromDom(e.endContainer),e.endOffset)}).map(function(e){return ah(e.start,e.soffset,e.finish,e.foffset)})},clearSelection:function(){l_(e).each(function(e){return e.removeAllRanges()})},collapseSelection:function(t){void 0===t&&(t=!1),lq(e).each(function(n){return n.fold(function(e){return e.collapse(t)},function(n,r){var o=t?n:r;lj(e,lN(o,o))},function(n,r,o,u){var i=t?n:o,c=t?r:u;lj(e,lz(i,c,i,c))})})},setSelection:function(t){var n;n=t.start,lj(e,lz(n,t.soffset,t.finish,t.foffset))},setRelativeSelection:function(t,n){lj(e,lN(t,n))},selectNode:function(t){lV(e,t,!1)},selectContents:function(t){lV(e,t)},getInnerHeight:function(){return e.innerHeight},getScrollY:function(){var t=eL.fromDom(e.document),n=void 0!==t?t.dom:document;return ro(n.body.scrollLeft||n.documentElement.scrollLeft,n.body.scrollTop||n.documentElement.scrollTop).top},scrollBy:function(t,n){var r,o=eL.fromDom(e.document);(r=(void 0!==o?o.dom:document).defaultView)&&r.scrollBy(t,n)}}}function al(e,t){return{rows:e,cols:t}}function aa(e){return!1===og(eL.fromDom(e.target),"ephox-snooker-resizer-bar")}function af(e,t,n,r){return void 0===r&&(r=ay),n.sibling(e,t).map(function(e){return l$(e,r)})}lI.ltr,lI.rtl;var as=function(e,t,n,r){var o,u;return e7(t)?((o=e.dom.createRange()).selectNode(t.dom),j(o.getClientRects(),function(e){return lB(e,n,r)?H.some(e):H.none()}).map(function(o){return function(e,t,n,r,o){function u(n){var r=e.dom.createRange();return r.setStart(t.dom,n),r.collapse(!0),r}var i=ne(t).length,c=function(e,t,n,r){if(0===r)return 0;if(e===n)return r-1;for(var o=n,i=1;i<r;i++){var c=u(i).getBoundingClientRect(),l=Math.abs(e-c.left);if(t<=c.bottom){if(t<c.top||o<l)return i-1;o=l}}return 0}(n,r,o.right,i);return u(c)}(e,t,n,r,o)})):(u=e.dom.createRange(),j(e1(t),function(t){return u.selectNode(t.dom),lB(u.getBoundingClientRect(),n,r)?as(e,t,n,r):H.none()}))},am=document.caretPositionFromPoint?function(e,t,n){var r,o;return H.from(null===(o=(r=e.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,t,n)).bind(function(t){if(null===t.offsetNode)return H.none();var n=e.dom.createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),H.some(n)})}:document.caretRangeFromPoint?function(e,t,n){var r,o;return H.from(null===(o=(r=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,t,n))}:function(e,t,n){return eL.fromPoint(e,t,n).bind(function(r){var o,u,i,c,l,a;function f(){return(0===e1(r).length?function(e,t,n){var r=lM(t.dom.getBoundingClientRect(),n);return H.some(lE(e,t,r))}:function(e,t,n){var r=e.dom.createRange();r.selectNode(t.dom);var o=lM(r.getBoundingClientRect(),n);return(!0===o?rN:function(e){return iQ(e,rP)})(t).map(function(t){return lE(e,t,o)})})(e,r,t)}return 0===e1(r).length?f():((o=e.dom.createRange()).selectNode(r.dom),i=Math.max((u=o.getBoundingClientRect()).left,Math.min(u.right,t)),c=Math.max(u.top,Math.min(u.bottom,n)),(l=e.dom.createRange()).selectNode(r.dom),as(e,r,Math.max((a=l.getBoundingClientRect()).left,Math.min(a.right,i)),Math.max(a.top,Math.min(a.bottom,c)))).orThunk(f)})},ad=tinymce.util.Tools.resolve("tinymce.util.VK"),ag=function(e,t,n){return n.fold(H.none,H.none,function(e,t){return rN(t).map(function(e){var t,n;return n=lk.exact(e,0,e,0),iE(t=lk.getWin(n).dom,n.match({domRange:function(e){var t=eL.fromDom(e.startContainer),n=eL.fromDom(e.endContainer);return lz(t,e.startOffset,n,e.endOffset)},relative:lN,exact:lz})).match({ltr:r,rtl:r});function r(e,n,r,o){return iI(t,e,n,r,o)}})},function(n){return e.execCommand("mceTableInsertRowAfter"),lU(e,t,n)})},ap=["table","li","dl"],ab=function(e,t){return{selection:e,kill:t}},ah=function(e,t,n,r){return{start:lO.on(e,t),finish:lO.on(n,r)}},av=ah,aw=function(e,t,n,r,o){return eu(n,r)?H.none():nS(n,r,t).bind(function(t){var r=t.boxes.getOr([]);return 1<r.length?(o(e,r,t.start,t.finish),H.some(ab(H.some(av(n,0,n,rE(n))),!0))):H.none()})},ay=function(e,t,n,r){void 0===r&&(r=ay);var o=e.property().children(t);return n.first(o).map(function(e){return l$(e,r)})},aC=[{current:lK,next:af,fallback:H.none()},{current:af,next:ay,fallback:H.some(lK)},{current:ay,next:ay,fallback:H.some(af)}],aS=function(e,t,n,r,o){return B(o=void 0===o?aC:o,function(e){return e.current===n}).bind(function(n){return n.current(e,t,r,n.next).orThunk(function(){return n.fallback.bind(function(n){return aS(e,t,n,r)})})})},aT=function(e,t,n,r,o,u){return aS(e,t,r,o).bind(function(t){return u(t.item)?H.none():n(t.item)?H.some(t.item):aT(e,t.item,n,t.mode,o,u)})},ax=function(e,t,n,r){return aT(e,t,n,af,{sibling:function(e,t){return e.query().prevSibling(t)},first:function(e){return 0<e.length?H.some(e[e.length-1]):H.none()}},r)},aR=function(e,t,n,r){return aT(e,t,n,af,{sibling:function(e,t){return e.query().nextSibling(t)},first:function(e){return 0<e.length?H.some(e[0]):H.none()}},r)},aD=nw(),aO=nY([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),aA=G(G({},aO),{verify:function(e,t,n,r,o,u,i){return tf(r,"td,th",i).bind(function(n){return tf(t,"td,th",i).map(function(t){return eu(n,t)?eu(r,n)&&rE(n)===o?u(t):aO.none("in same cell"):ny(lQ,[n,t]).fold(function(){var r,o;return r=e.getRect(t),(o=e.getRect(n)).right>r.left&&o.left<r.right?aO.success():u(t)},function(e){return u(t)})})}).getOr(aO.none("default"))},cata:function(e,t,n,r,o){return e.fold(t,n,r,o)}}),ak=function(e,t){return M(e,p(eu,t))},aI=function(e,t,n){return t(e,n).bind(function(e){return e7(e)&&0===ne(e).trim().length?aI(e,t,n):H.some(e)})},aB=nY([{none:[]},{retry:["caret"]}]),aM=function(e,t,n,r,o){var u,i,c;return 0===o?H.some(r):(i=r.left,c=t.point(r),e.elementFromPoint(i,c).filter(function(e){return"table"===eq(e)}).isSome()?(u=o-1,aM(e,t,n,t.move(r,5),u)):e.situsFromPoint(r.left,t.point(r)).bind(function(u){return u.start.fold(H.none,function(u){return l4(e,u).bind(function(i){return t.adjuster(e,u,i,n,r).fold(H.none,function(r){return aM(e,t,n,r,o-1)})}).orThunk(function(){return H.some(r)})},H.none)}))},aE={tryUp:p(l6,{point:function(e){return e.top},adjuster:function(e,t,n,r,o){var u=l1(o,5);return 1>Math.abs(n.top-r.top)||n.bottom<o.top?aB.retry(u):n.bottom===o.top?aB.retry(l1(o,1)):l7(e,t,o)?aB.retry(l9(u,5,0)):aB.none()},move:l1,gather:lY}),tryDown:p(l6,{point:function(e){return e.bottom},adjuster:function(e,t,n,r,o){var u=l0(o,5);return 1>Math.abs(n.bottom-r.bottom)||n.top>o.bottom?aB.retry(u):n.top===o.bottom?aB.retry(l0(o,1)):l7(e,t,o)?aB.retry(l9(u,5,0)):aB.none()},move:l0,gather:lJ}),ieTryUp:function(e,t){return e.situsFromPoint(t.left,t.top-5)},ieTryDown:function(e,t){return e.situsFromPoint(t.left,t.bottom+5)},getJumpSize:o(5)},aP=function(e,t,n,r,o,u){return 0===u?H.none():a_(e,t,n,r,o).bind(function(i){var c=e.fromSitus(i),l=aA.verify(e,n,r,c.finish,c.foffset,o.failure,t);return aA.cata(l,function(){return H.none()},function(){return H.some(i)},function(i){return eu(n,i)&&0===r?aN(e,n,r,l1,o):aP(e,t,i,0,o,u-1)},function(i){return eu(n,i)&&r===rE(i)?aN(e,n,r,l0,o):aP(e,t,i,rE(i),o,u-1)})})},aN=function(e,t,n,r,o){return l5(e,t,n).bind(function(t){return az(e,o,r(t,aE.getJumpSize()))})},az=function(e,t,n){var r=e_().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?t.otherRetry(e,n):r.isIE()?t.ieRetry(e,n):H.none()},a_=function(e,t,n,r,o){return l5(e,n,r).bind(function(t){return az(e,o,t)})},aL={traverse:e0,gather:lJ,relative:lO.before,otherRetry:aE.tryDown,ieRetry:aE.ieTryDown,failure:aA.failedDown},aW={traverse:eZ,gather:lY,relative:lO.before,otherRetry:aE.tryUp,ieRetry:aE.ieTryUp,failure:aA.failedUp},aj=au(38),aF=au(40),aH={isBackward:au(37),isForward:au(39)},aV={isBackward:au(39),isForward:au(37)},aq=tinymce.util.Tools.resolve("tinymce.Env");n4.add("table",function(e){var t,n,i,a,s,m,d,g,h,y=(i=function(){return rU(e)},a=function(){return i9(rJ(e),rK(e))},s=i0.selectedSelector,{get:function(){return nT(i(),s).fold(function(){return a().fold(n2,n5)},function(e){return n3(e)})}}),C=function(e,t){function n(e){return g.forall(function(t){return!t[e]})}function r(){return i1(rJ(e),rK(e)).bind(function(n){return tw(tN(n),i1(eL.fromDom(e.selection.getEnd()),rK(e)).bind(tN),function(e,r){return eu(e,r)?p(n)?H.some({element:n,mergable:H.none(),unmergable:H.none(),selection:[n]}):H.some(rZ(t,e,n)):H.none()}).bind(u)})}function o(e){return tN(e.element).map(function(t){var n=nd.fromTable(t),r=I(uu(n,e).getOr([]),function(e,t){return t.isLocked&&(e.onAny=!0,0===t.column?e.onFirst=!0:t.column+t.colspan>=n.grid.columns&&(e.onLast=!0)),e},{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:ul(n,e).isSome(),unmergeable:ua(n,e).isSome(),locked:r}})}function i(){m.set(K(r)()),g=m.get().bind(o),D(d.get(),function(e){return e()})}function c(e){return e(),d.set(d.get().concat([e])),function(){d.set(A(d.get(),function(t){return t!==e}))}}function l(e,t){return c(function(){return m.get().fold(function(){e.setDisabled(!0)},function(n){e.setDisabled(t(n))})})}function a(e,t,n){return c(function(){return m.get().fold(function(){e.setDisabled(!0),e.setActive(!1)},function(r){e.setDisabled(t(r)),e.setActive(n(r))})})}function f(e){return g.exists(function(t){return t.locked[e]})}function s(t,n){return function(r){return a(r,function(e){return p(e.element)},function(){return e.queryCommandValue(t)===n})}}var m=it(H.none()),d=it([]),g=H.none(),p=eK("caption"),b=s("mceTableRowType","header"),h=s("mceTableColType","th");return e.on("NodeChange ExecCommand TableSelectorChange",i),{onSetupTable:function(e){return l(e,function(e){return!1})},onSetupCellOrRow:function(e){return l(e,function(e){return p(e.element)})},onSetupColumn:function(e){return function(t){return l(t,function(t){return p(t.element)||f(e)})}},onSetupPasteable:function(e){return function(t){return l(t,function(t){return p(t.element)||e().isNone()})}},onSetupPasteableColumn:function(e,t){return function(n){return l(n,function(n){return p(n.element)||e().isNone()||f(t)})}},onSetupMergeable:function(e){return l(e,function(e){return n("mergeable")})},onSetupUnmergeable:function(e){return l(e,function(e){return n("unmergeable")})},resetTargets:i,onSetupTableWithCaption:function(t){return a(t,v,function(t){return tN(t.element,rK(e)).exists(function(e){return ta(e,"caption").isSome()})})},onSetupTableRowHeaders:b,onSetupTableColumnHeaders:h,targets:m.get}}(e,y),T=function(e){function t(e){return"TABLE"===e.nodeName}function n(){return(oH(e)?r6:r7)()}var u,i,l=H.none(),a=H.none(),s=H.none();return e.on("init",function(){var t,u,i,m,d,g,b,h=e.inline?(m=rU(e),tx(d=eL.fromTag("div"),{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),np(to(eL.fromDom(document)),d),{parent:o(d),view:o(m),origin:o(ro(0,0)),isResizable:oX}):iN(eL.fromDom(e.getDoc()),oX);s=H.some(h),(c(i=e.getParam("object_resizing",!0))?"table"===i:i)&&e.getParam("table_resize_bars",!0,"boolean")&&(t=n(),g=function(e){function t(e,t){return H.from(tg(e,t))}var n,o,u,i,c,l=(u=oi({drag:ou(["xDelta","yDelta","target"])}),i=H.none(),(c={mutate:function(e,t){o.trigger.drag(e,t)},events:(o=oi({drag:ou(["xDelta","yDelta"])})).registry}).events.drag.bind(function(e){i.each(function(t){u.trigger.drag(e.xDelta,e.yDelta,t)})}),{assign:function(e){i=H.some(e)},get:function(){return i},mutate:c.mutate,events:u.registry}),a=function(e,t,n){function o(){v.stop(),g.isOn()&&(g.off(),d.trigger.stop())}var u,i,c,l,a,s,m=!1,d=oi({start:ou([]),stop:ou([])}),g=(c={onEvent:r,reset:r,events:oi({move:ou(["info"])}).registry},u=H.none(),l={onEvent:function(e,t){t.extract(e).each(function(e){var n=u.map(function(n){return t.compare(n,e)});u=H.some(e),n.each(function(e){i.trigger.move(e)})})},reset:function(){u=H.none()},events:(i=oi({move:ou(["info"])})).registry},a=c,{on:function(){a.reset(),a=l},off:function(){a.reset(),a=c},isOn:function(){return a===l},onEvent:function(e,t){a.onEvent(e,t)},events:l.events}),p=(s=null,{cancel:b,throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];b(),s=setTimeout(function(){s=null,o.apply(null,e)},200)}});function b(){f(s)||(clearTimeout(s),s=null)}function h(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];m&&e.apply(null,t)}}g.events.move.bind(function(n){t.mutate(e,n.info)});var v=t.sink(co({forceDrop:o,drop:h(o),move:h(function(e){p.cancel(),g.onEvent(e,t)}),delayDrop:h(p.throttle)}),n);return{element:v.element,go:function(e){v.start(e),g.on(),d.trigger.start()},on:function(){m=!0},off:function(){m=!1},destroy:function(){v.destroy()},events:d.registry}}(l,void 0!==(n={}).mode?n.mode:cl,n),s=H.none();function m(e,t){return tB(e,t)-tA(e,"data-initial-"+t,0)}function d(t,n){v.trigger.startAdjust(),l.assign(t),tm(t,"data-initial-"+n,tB(t,n)),od(t,cg),tT(t,"opacity","0.2"),a.go(e.parent())}function g(t){return eu(t,e.view())}l.events.drag.bind(function(e){t(e.target,"data-row").each(function(t){var n=tB(e.target,"top");tT(e.target,"top",n+e.yDelta+"px")}),t(e.target,"data-column").each(function(t){var n=tB(e.target,"left");tT(e.target,"left",n+e.xDelta+"px")})}),a.events.stop.bind(function(){l.get().each(function(n){s.each(function(r){t(n,"data-row").each(function(e){var t=m(n,"top");nu(n,"data-initial-top"),v.trigger.adjustHeight(r,t,parseInt(e,10))}),t(n,"data-column").each(function(e){var t=m(n,"left");nu(n,"data-initial-left"),v.trigger.adjustWidth(r,t,parseInt(e,10))}),oy(e,r)})})});var b=os(e.parent(),"mousedown",function(e){og(e.target,cm)&&d(e.target,"top"),og(e.target,cd)&&d(e.target,"left")}),h=os(e.view(),"mouseover",function(t){tf(t.target,"table",g).filter(oh).fold(function(){tr(t.target)&&ov(e)},function(t){s=H.some(t),oy(e,t)})}),v=oi({adjustHeight:ou(["table","delta","row"]),adjustWidth:ou(["table","delta","column"]),startAdjust:ou([])});return{destroy:function(){b.unbind(),h.unbind(),a.destroy(),ov(e)},refresh:function(t){oy(e,t)},on:a.on,off:a.off,hideBars:p(oS,e),showBars:p(oT,e),events:v.registry}}(h),b=oi({beforeResize:ou(["table","type"]),afterResize:ou(["table","type"]),startDrag:ou([])}),g.events.adjustHeight.bind(function(e){var t=e.table;b.trigger.beforeResize(t,"row");var n,r,o,u,i=ri.delta(e.delta,t);n=e.row,o=R(rk(r=nd.fromTable(t),t,ri,ry,function(e){return e.getOrThunk(nl)}),function(e,t){return n===t?Math.max(i+e,nl()):e}),u=R(nd.justCells(r),function(e){var t=r1(e.row,e.row+e.rowspan,o);return{element:e.element,height:t,rowspan:e.rowspan}}),D(R(r.all,function(e,t){return{element:e.element,height:o[t]}}),function(e){rp(e.element,e.height)}),D(u,function(e){rp(e.element,e.height)}),rp(t,k(o,function(e,t){return e+t},0)),b.trigger.afterResize(t,"row")}),g.events.startAdjust.bind(function(e){b.trigger.startDrag()}),g.events.adjustWidth.bind(function(n){var r=n.table;b.trigger.beforeResize(r,"col");var o=rl.delta(n.delta,r),u=o$(e,r);r2(r,o,n.column,t,u),b.trigger.afterResize(r,"col")}),(u={on:g.on,off:g.off,hideBars:g.hideBars,showBars:g.showBars,destroy:g.destroy,events:b.registry}).on(),u.events.startDrag.bind(function(t){l=H.some(e.selection.getRng())}),u.events.beforeResize.bind(function(t){var n=t.table.dom,r=rG(n),o=r$(n),u=cA+t.type;e.fire("ObjectResizeStart",{target:n,width:r,height:o,origin:u})}),u.events.afterResize.bind(function(t){var n,r,o,u=t.table,i=u.dom;rY(u),l.each(function(t){e.selection.setRng(t),e.focus()}),n=rG(i),r=r$(i),o=cA+t.type,e.fire("ObjectResized",{target:i,width:n,height:r,origin:o}),e.undoManager.add()}),a=H.some(u))}),e.on("ObjectResizeStart",function(n){var r,o,c=n.target;t(c)&&(r=eL.fromDom(c),D(e.dom.select(".mce-clonedresizable"),function(t){e.dom.addClass(t,"mce-"+oF(e)+"-columns")}),!i_(r)&&cT(e)?cD(r):!iz(r)&&oW(e)&&cR(r),iL(r)&&eR(n.origin,cA)&&cR(r),u=n.width,i=cx(e)?"":(o=e.dom.getStyle(c,"width")||e.dom.getAttrib(c,"width"),H.from(o).filter(Z).getOr("")))}),e.on("ObjectResized",function(r){var o,c,l,a,f,s,m,d,g=r.target;t(g)&&(o=eL.fromDom(g),eR(c=r.origin,"corner-")&&(l=r.width,d=Q(c,"e"),""===i&&cR(o),l!==u&&""!==i?(tT(o,"width",i),a=n(),f=o$(e,o),s=oH(e)||d?oo(o).columns-1:0,r2(o,l-u,s,a,f)):/^(\d+(\.\d+)?)%$/.test(i)&&tT(o,"width",l*parseFloat(i.replace("%",""))/u+"%"),/^(\d+(\.\d+)?)px$/.test(i)&&(m=nd.fromTable(o),nd.hasColumns(m)||D(tE(o),function(e){tT(e,"width",tR(e,"width")),nu(e,"width")}))),rY(o),oD(e,o.dom,cp))}),e.on("SwitchMode",function(){a.each(function(t){e.mode.isReadOnly()?t.hideBars():t.showBars()})}),{lazyResize:function(){return a},lazyWire:function(){return s.getOr(iN(eL.fromDom(e.getBody()),oX))},destroy:function(){a.each(function(e){e.destroy()}),s.each(function(t){e.inline&&nb(t.parent())})}}}(e),x=(t=T.lazyResize,n=function(e,t,n){function r(t){nu(t,e.selected),nu(t,e.firstSelected),nu(t,e.lastSelected)}function o(t){tm(t,e.selected,"1")}function u(e){i(e),n()}function i(t){D(e5(t,e.selectedSelector+","+e.firstSelectedSelector+","+e.lastSelectedSelector),r)}return{clearBeforeUpdate:i,clear:u,selectRange:function(n,r,i,c){u(n),D(r,o),tm(i,e.firstSelected,"1"),tm(c,e.lastSelected,"1"),t(r,i,c)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}}(i0,function(t,n,o){C.targets().each(function(u){tN(n).each(function(i){var c,l=oq(e),a=rH(r,eL.fromDom(e.getDoc()),l),f=uu(c=nd.fromTable(i),u).map(function(e){var t=o8(c,a,!1);return{upOrLeftCells:P(ue(t.slice(0,e[e.length-1].row+1)),function(t){return R(t.cells.slice(0,e[e.length-1].column+1),function(e){return e.element})}),downOrRightCells:P(ue(t.slice(e[0].row+e[0].rowspan-1,t.length)),function(t){return R(t.cells.slice(e[0].column+e[0].colspan-1,t.cells.length),function(e){return e.element})})}});e.fire("TableSelectionChange",{cells:t,start:n,finish:o,otherCells:f})})})},function(){e.fire("TableSelectionClear")}),e.on("init",function(o){var u,i,c,l,a,f,s,m,d,g,b,h,v=e.getWin(),w=rU(e),y=rK(e),C=(u=ac(v),{clearstate:(i={clearstate:h=(b=io()).clear,mousedown:function(e){n.clear(w),ao(e.target,y).each(b.set)},mouseover:function(e){R(e)},mouseup:function(e){R(e),h()}}).clearstate,mousedown:i.mousedown,mouseover:i.mouseover,mouseup:i.mouseup}),S=(g=ac(v),{keydown:function(e,t,n,r,o,u){var i=e.raw,c=i.which,l=!0===i.shiftKey;return nT(s,d.selectedSelector).fold(function(){return ai(c)&&!l&&d.clearBeforeUpdate(s),aF(c)&&l?p(ar,g,s,m,aL,r,t,d.selectRange):aj(c)&&l?p(ar,g,s,m,aW,r,t,d.selectRange):aF(c)?p(ae,g,m,aL,r,t,an):aj(c)?p(ae,g,m,aW,r,t,at):H.none},function(e){function t(t){return function(){return j(t,function(t){var n,r,o,u,i,c;return n=t.rows,r=t.cols,o=s,(i=(u=d).firstSelectedSelector,c=u.lastSelectedSelector,B(e,function(e){return en(e,c)}).bind(function(e){return tN(e).bind(function(t){var o=ng(t);return nd.findItem(o,e,eu).bind(function(e){var t=0<n?e.row+e.rowspan-1:e.row,u=0<r?e.column+e.colspan-1:e.column;return nd.getAt(o,t+n,u+r).map(function(e){return e.element})})}).bind(function(e){return tl(e,"table").bind(function(t){return eo(i,t).bind(function(t){return nS(t,e).bind(function(e){return e.boxes.map(function(t){return{boxes:t,start:e.start,finish:e.finish}})})})})})})).map(function(e){return u.clearBeforeUpdate(o),u.selectRange(o,e.boxes,e.start,e.finish),e.boxes})}).fold(function(){return nx(s,d.firstSelectedSelector,d.lastSelectedSelector).map(function(e){var t=aF(c)||u.isForward(c)?lO.after:lO.before;return g.setRelativeSelection(lO.on(e.first,0),t(e.table)),d.clear(s),ab(H.none(),!0)})},function(e){return H.some(ab(H.none(),!0))})}}return aF(c)&&l?t([al(1,0)]):aj(c)&&l?t([al(-1,0)]):u.isBackward(c)&&l?t([al(0,-1),al(-1,0)]):u.isForward(c)&&l?t([al(0,1),al(1,0)]):ai(c)&&!l?x:H.none})()},keyup:function(e,t,n,r,o){return nT(s,d.selectedSelector).fold(function(){var u,i,c,l=e.raw,a=l.which;return!0===l.shiftKey&&ai(a)?(u=s,i=m,c=d.selectRange,eu(t,r)&&n===o?H.none():tf(t,"td,th",i).bind(function(e){return tf(r,"td,th",i).bind(function(t){return aw(u,i,e,t,c)})})):H.none()},H.none)}}),T=(c=s=w,l=m=y,a=d=n,f=ac(v),function(e,t){a.clearBeforeUpdate(c),nS(e,t,l).each(function(e){var n=e.boxes.getOr([]);a.selectRange(c,n,e.start,e.finish),f.selectContents(t),f.collapseSelection()})});function x(){return d.clear(s),H.none()}function R(e){b.on(function(t){n.clearBeforeUpdate(w),ao(e.target,y).each(function(r){nS(t,r,y).each(function(t){var o,i,c,l=t.boxes.getOr([]);1===l.length?(i="false"===ca(o=l[0]),c=th(ob(e.target),o,eu),i&&c&&(n.selectRange(w,l,o,o),u.selectContents(o))):1<l.length&&(n.selectRange(w,l,t.start,t.finish),u.selectContents(r))})})})}function D(t,n){!0===t.raw.shiftKey&&(n.kill&&t.kill(),n.selection.each(function(t){var n=iP(v,lk.relative(t.start,t.finish));e.selection.setRng(n)}))}function O(e){return 0===e.button}e.on("TableSelectorChange",function(e){return T(e.start,e.finish)});var A,k,I=(A=it(eL.fromDom(w)),k=it(0),{touchEnd:function(e){var t,n,r=eL.fromDom(e.target);"td"!==eq(r)&&"th"!==eq(r)||(t=A.get(),n=k.get(),eu(t,r)&&e.timeStamp-n<300&&(e.preventDefault(),T(r,r))),A.set(r),k.set(e.timeStamp)}});e.on("dragstart",function(e){C.clearstate()}),e.on("mousedown",function(e){O(e)&&aa(e)&&C.mousedown(of(e))}),e.on("mouseover",function(e){(void 0===e.buttons||aq.browser.isEdge()&&0===e.buttons||0!=(1&e.buttons))&&aa(e)&&C.mouseover(of(e))}),e.on("mouseup",function(e){O(e)&&aa(e)&&C.mouseup(of(e))}),e.on("touchend",I.touchEnd),e.on("keyup",function(t){var n,r,o,u=of(t);u.raw.shiftKey&&ai(u.raw.which)&&(n=e.selection.getRng(),r=eL.fromDom(n.startContainer),o=eL.fromDom(n.endContainer),S.keyup(u,r,n.startOffset,o,n.endOffset).each(function(e){D(u,e)}))}),e.on("keydown",function(n){var r=of(n);t().each(function(e){return e.hideBars()});var o=e.selection.getRng(),u=eL.fromDom(o.startContainer),i=eL.fromDom(o.endContainer),c=nL(aH,aV)(eL.fromDom(e.selection.getStart()));S.keydown(r,u,o.startOffset,i,o.endOffset,c).each(function(e){D(r,e)}),t().each(function(e){return e.showBars()})}),e.on("NodeChange",function(){var t=e.selection;ny(tN,[eL.fromDom(t.getStart()),eL.fromDom(t.getEnd())]).fold(function(){return n.clear(w)},r)})}),{clear:n.clear}),O=function(e,t,n){function o(e){return"table"===eq(rU(e))}function u(n,r,o,u,c){return function(l,a,f){void 0===f&&(f=!1),rY(l);var s=u(),m=rH(o,eL.fromDom(e.getDoc()),i),d={sizing:o$(e,l),resize:(oV(e)?r7:r6)(),section:function(t){switch(oj(e)){case"section":return o2();case"sectionCells":return o3();case"cells":return o5();default:return function(e,t){switch(j(nd.fromTable(e).all,function(e){var t=o0(e);return"header"===t.type?H.from(t.subType):H.none()}).getOr(t)){case"section":return o2();case"sectionCells":return o3();case"cells":return o5()}}(t,"section")}}(l)};return r(l)?n(s,l,a,m,d).bind(function(n){D(n.newRows,function(t){ox(e,t.dom)}),D(n.newCells,function(t){oR(e,t.dom)});var r=n.cursor.fold(function(){return L(tE(l),0).filter(tr).map(function(n){t.clear(l);var r=e.dom.createRng();return r.selectNode(n.dom),e.selection.setRng(r),tm(n,"data-mce-selected","1"),r})},function(n){var r=cI(cB,n),o=e.dom.createRng();return o.setStart(r.element.dom,r.offset),o.setEnd(r.element.dom,r.offset),e.selection.setRng(o),t.clear(l),H.some(o)});return tr(l)&&(rY(l),f||oD(e,l.dom,c)),r.map(function(e){return{rng:e,effect:c}})}):H.none()}}var i=oq(e),c=oV(e)?r:oQ;return{deleteRow:u(cJ,function(t){return!1===o(e)||1<oo(t).rows},r,n,cb),deleteColumn:u(cY,function(t){return!1===o(e)||1<oo(t).columns},r,n,cb),insertRowsBefore:u(cG,w,r,n,cb),insertRowsAfter:u(c$,w,r,n,cb),insertColumnsBefore:u(cK,w,c,n,cb),insertColumnsAfter:u(cX,w,c,n,cb),mergeCells:u(c5,w,r,n,cb),unmergeCells:u(c4,w,r,n,cb),pasteColsBefore:u(c6,w,r,n,cb),pasteColsAfter:u(c8,w,r,n,cb),pasteRowsBefore:u(le,w,r,n,cb),pasteRowsAfter:u(lt,w,r,n,cb),pasteCells:u(c7,w,r,n,ch),makeCellsHeader:u(c2,w,r,n,cb),unmakeCellsHeader:u(c3,w,r,n,cb),makeColumnsHeader:u(cQ,w,r,n,cb),unmakeColumnsHeader:u(cZ,w,r,n,cb),makeRowsHeader:u(c0,w,r,n,cb),makeRowsBody:u(c1,w,r,n,cb),makeRowsFooter:u(c9,w,r,n,cb),getTableRowType:ln,getTableCellType:uY,getTableColType:uX}}(e,x,T.lazyWire),M=(m=io(),d=io(),{getRows:m.get,setRows:function(e){e.fold(m.clear,m.set),d.clear()},clearRows:m.clear,getColumns:d.get,setColumns:function(e){e.fold(d.clear,d.set),m.clear()},clearColumns:d.clear});return function(e,t,n,o,u){function i(t){return i9(rJ(e),rK(e)).bind(function(e){return tN(e,h).map(function(n){return t(n,e)})})}function a(t){e.focus()}function f(e,t){return void 0===t&&(t=!1),i(function(n,r){var u=rZ(o,n,r);e(n,u,t).each(a)})}function s(){return i(function(t,n){var u,i=rZ(o,t,n),c=rH(r,eL.fromDom(e.getDoc()),H.none());return uu(u=nd.fromTable(t),i).bind(function(e){var t=ue(P(tU(o8(u,c,!1)).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),function(e){var t=A(e.cells,function(e){return!e.isLocked});return 0<t.length?[G(G({},e),{cells:t})]:[]}));return ty(0<t.length,t)}).map(function(e){return R(e,function(e){var t=nR(e.element,!1);return D(e.cells,function(e){var n=nD(e.element);o4(n,"colspan",e.colspan,1),o4(n,"rowspan",e.rowspan,1),np(t,n)}),t})})})}function m(){return i(function(e,t){var n,r=rZ(o,e,t);return ui(n=nd.fromTable(e),r).map(function(e){var t=e[e.length-1],r=e[0].column,o=t.column+t.colspan,u=function(e,t,n){if(nd.hasColumns(e)){var r=R(A(nd.justColumns(e),function(e){return e.column>=t&&e.column<n}),function(e){var r=nD(e.element);return u2(r,"span",n-t),r}),o=eL.fromTag("colgroup");return t7(o,r),[o]}return[]}(n,r,o),i=R(n.all,function(e){var t=R(A(e.cells,function(e){return e.column>=r&&e.column<o}),function(e){var t=nD(e.element);return u2(t,"colspan",o-r),t}),n=eL.fromTag("tr");return t7(n,t),n});return $($([],u,!0),i,!0)})})}function d(t,n){return n().each(function(n){var r=R(n,nD);i(function(n,u){var i=rV(eL.fromDom(e.getDoc()));t(n,{selection:rQ(o),clipboard:r,generators:i}).each(a)})})}function g(e){return function(t,n){return em(n,"type").each(function(t){f(e(t),n.no_events)})}}var h=rK(e);ec({mceTableSplitCells:function(){return f(t.unmergeCells)},mceTableMergeCells:function(){return f(t.mergeCells)},mceTableInsertRowBefore:function(){return f(t.insertRowsBefore)},mceTableInsertRowAfter:function(){return f(t.insertRowsAfter)},mceTableInsertColBefore:function(){return f(t.insertColumnsBefore)},mceTableInsertColAfter:function(){return f(t.insertColumnsAfter)},mceTableDeleteCol:function(){return f(t.deleteColumn)},mceTableDeleteRow:function(){return f(t.deleteRow)},mceTableCutCol:function(){return m().each(function(e){u.setColumns(e),f(t.deleteColumn)})},mceTableCutRow:function(){return s().each(function(e){u.setRows(e),f(t.deleteRow)})},mceTableCopyCol:function(){return m().each(function(e){return u.setColumns(e)})},mceTableCopyRow:function(){return s().each(function(e){return u.setRows(e)})},mceTablePasteColBefore:function(){return d(t.pasteColsBefore,u.getColumns)},mceTablePasteColAfter:function(){return d(t.pasteColsAfter,u.getColumns)},mceTablePasteRowBefore:function(){return d(t.pasteRowsBefore,u.getRows)},mceTablePasteRowAfter:function(){return d(t.pasteRowsAfter,u.getRows)},mceTableDelete:function(){return iO(e).each(function(t){tN(t,h).filter(b(h)).each(function(t){var n,r=eL.fromText("");t2(t,r),nb(t),e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):((n=e.dom.createRng()).setStart(r.dom,0),n.setEnd(r.dom,0),e.selection.setRng(n),e.nodeChanged())})})},mceTableCellToggleClass:function(t,n){i(function(t){var r=i2(o),u=N(r,function(t){return e.formatter.match("tablecellclass",{value:n},t.dom)})?e.formatter.remove:e.formatter.apply;D(r,function(e){return u("tablecellclass",{value:n},e.dom)}),oD(e,t.dom,cp)})},mceTableToggleClass:function(t,n){i(function(t){e.formatter.toggle("tableclass",{value:n},t.dom),oD(e,t.dom,cp)})},mceTableToggleCaption:function(){iO(e).each(function(t){tN(t,h).each(function(n){ta(n,"caption").fold(function(){var t=eL.fromTag("caption");np(t,eL.fromText("Caption")),e9(n,0).fold(function(){np(n,t)},function(e){t9(e,t)}),e.selection.setCursorLocation(t.dom,0)},function(r){eK("caption")(t)&&eo("td",n).each(function(t){return e.selection.setCursorLocation(t.dom,0)}),nb(r)}),oD(e,n.dom,cb)})})},mceTableSizingMode:function(t,n){return iO(e).each(function(t){cx(e)||cT(e)||oW(e)||tN(t,h).each(function(t){"relative"!==n||iz(t)?"fixed"!==n||i_(t)?"responsive"!==n||iL(t)||cO(t):cD(t):cR(t),rY(t),oD(e,t.dom,cb)})})},mceTableCellType:g(function(e){return"th"===e?t.makeCellsHeader:t.unmakeCellsHeader}),mceTableColType:g(function(e){return"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader}),mceTableRowType:g(function(e){switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}})},function(t,n){return e.addCommand(n,t)}),ec({mceTableProps:p(iD,e,!1),mceTableRowProps:p(ix,e),mceTableCellProps:p(iC,e,o)},function(t,n){return e.addCommand(n,function(){return t()})}),e.addCommand("mceInsertTable",function(t,n){l(n)&&0<eW(n).length?u0(e,n.rows,n.columns,n.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):iD(e,!0)}),e.addCommand("mceTableApplyCellStyle",function(t,n){var r,u;function i(e){return"tablecell"+e.toLowerCase().replace("-","")}!l(n)||0!==(r=i2(o)).length&&(function(e){for(var t in e)if(ej.call(e,t))return;return 1}(u=ea(n,function(t,n){return e.formatter.has(i(n))&&c(t)}))||(ec(u,function(t,n){D(r,function(r){lg.normal(e,r.dom).setFormat(i(n),t)})}),tN(r[0],h).each(function(t){return oD(e,t.dom,cp)})))})}(e,O,0,y,M),h=rK(e),ec({mceTableRowType:function(){return E(O.getTableRowType)},mceTableCellType:function(){return E(O.getTableCellType)},mceTableColType:function(){return E(O.getTableColType)}},function(t,n){return e.addQueryValueHandler(n,t)}),e.on("BeforeGetContent",function(t){var n,o;!0===t.selection&&(n=y.get(),o=function(n){t.preventDefault(),tN(n[0]).map(function(e){var t=function(e,t){function n(e){return en(e.element,t)}var r,o,u,i,c,l,a,f,s=nD(e),m=tW(s),d=iK(e),g=nd.generate(m),p=(r=g.grid.columns,o=g.grid.rows,u=r,c=i=0,l=[],a=[],ec(g.access,function(e){var t,r,f,s;l.push(e),n(e)&&(a.push(e),r=(t=e.row)+e.rowspan-1,s=(f=e.column)+e.colspan-1,t<o?o=t:i<r&&(i=r),f<u?u=f:c<s&&(c=s))}),{minRow:o,minCol:u,maxRow:i,maxCol:c,allCells:l,selectedCells:a}),b="th:not("+t+"),td:not("+t+")";return D(na(s,"th,td",function(e){return en(e,b)}),nb),function(e,t,n,r){for(var o,u,i,c=t.grid.columns,l=t.grid.rows,a=0;a<l;a++)for(var f=!1,s=0;s<c;s++)a<n.minRow||a>n.maxRow||s<n.minCol||s>n.maxCol||(nd.getAt(t,a,s).filter(r).isNone()?(o=f,u=e[a].element,np(i=eL.fromTag("td"),eL.fromTag("br")),(o?np:t3)(u,i)):f=!0)}(m,g,p,n),f=function(e,t,n,r){if(0===r.minCol&&t.grid.columns===r.maxCol+1)return 0;var o=rA(t,e,n),u=I(o,function(e,t){return e+t},0),i=I(o.slice(r.minCol,r.maxCol+1),function(e,t){return e+t},0)/u*n.pixelWidth()-n.pixelWidth();return n.getCellDelta(i)}(e,nd.fromTable(e),d,p),ec(g.columns,function(e){(e.column<p.minCol||e.column>p.maxCol)&&nb(e.element)}),D(A(na(s,"tr",w),function(e){return 0===e.dom.childElementCount}),nb),p.minCol!==p.maxCol&&p.minRow!==p.maxRow||D(na(s,"th,td",w),function(e){nu(e,"rowspan"),nu(e,"colspan")}),nu(s,nm),nu(s,"data-snooker-col-series"),iK(s).adjustTableWidth(f),s}(e,"[data-mce-selected]");return rY(t),[t]}).each(function(n){t.content="text"===t.format?R(n,function(e){return e.dom.innerText}).join(""):R(n,function(t){return e.selection.serializer.serialize(t.dom,{})}).join("")})},n.fold(r,o,r))}),e.on("BeforeSetContent",function(t){!0===t.selection&&!0===t.paste&&L(i2(y),0).each(function(n){tN(n).each(function(r){var o,u,i,c,l=A((o=t.content,(u=document.createElement("div")).innerHTML=o,e1(eL.fromDom(u))),function(e){return"meta"!==eq(e)}),a=eK("table");1===l.length&&a(l[0])&&(t.preventDefault(),i=rV(eL.fromDom(e.getDoc())),c={element:n,clipboard:l[0],generators:i},O.pasteCells(r,c).each(function(){e.focus()}))})})}),function(e,t,n,r){function u(t){return function(){return e.execCommand(t)}}function i(t){e.execCommand("mceInsertTable",!1,{rows:t.numRows,columns:t.numColumns})}var c={text:"Table properties",onSetup:n.onSetupTable,onAction:u("mceTableProps")},l={text:"Delete table",icon:"table-delete-table",onSetup:n.onSetupTable,onAction:u("mceTableDelete")};e.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:u("mceTableInsertRowBefore"),onSetup:n.onSetupCellOrRow}),e.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:u("mceTableInsertRowAfter"),onSetup:n.onSetupCellOrRow}),e.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:u("mceTableDeleteRow"),onSetup:n.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:u("mceTableRowProps"),onSetup:n.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:u("mceTableCutRow"),onSetup:n.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:u("mceTableCopyRow"),onSetup:n.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:u("mceTablePasteRowBefore"),onSetup:n.onSetupPasteable(r.getRows)}),e.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:u("mceTablePasteRowAfter"),onSetup:n.onSetupPasteable(r.getRows)});var a={type:"nestedmenuitem",text:"Row",getSubmenuItems:o("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")};e.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:u("mceTableInsertColBefore"),onSetup:n.onSetupColumn("onFirst")}),e.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:u("mceTableInsertColAfter"),onSetup:n.onSetupColumn("onLast")}),e.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:u("mceTableDeleteCol"),onSetup:n.onSetupColumn("onAny")}),e.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:u("mceTableCutCol"),onSetup:n.onSetupColumn("onAny")}),e.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:u("mceTableCopyCol"),onSetup:n.onSetupColumn("onAny")}),e.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:u("mceTablePasteColBefore"),onSetup:n.onSetupPasteableColumn(r.getColumns,"onFirst")}),e.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:u("mceTablePasteColAfter"),onSetup:n.onSetupPasteableColumn(r.getColumns,"onLast")});var f={type:"nestedmenuitem",text:"Column",getSubmenuItems:o("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")};e.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:u("mceTableCellProps"),onSetup:n.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:u("mceTableMergeCells"),onSetup:n.onSetupMergeable}),e.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:u("mceTableSplitCells"),onSetup:n.onSetupUnmergeable});var s={type:"nestedmenuitem",text:"Cell",getSubmenuItems:o("tablecellprops tablemergecells tablesplitcells")};!1===e.getParam("table_grid",!0,"boolean")?e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:u("mceInsertTable")}):e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:i}]}}),e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:u("mceInsertTable")}),e.ui.registry.addMenuItem("tableprops",c),e.ui.registry.addMenuItem("deletetable",l),e.ui.registry.addNestedMenuItem("row",a),e.ui.registry.addNestedMenuItem("column",f),e.ui.registry.addNestedMenuItem("cell",s),e.ui.registry.addContextMenu("table",{update:function(){return n.resetTargets(),n.targets().fold(o(""),function(e){return"caption"===eq(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}});var m=lm(oL(e));0!==m.length&&e.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return ls(e,t,m,"tableclass",function(t){return e.execCommand("mceTableToggleClass",!1,t)})},onSetup:n.onSetupTable});var d=lm(o_(e));0!==d.length&&e.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return ls(e,t,d,"tablecellclass",function(t){return e.execCommand("mceTableCellToggleClass",!1,t)})},onSetup:n.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return ls(e,t,lu,"tablecellverticalalign",ii(e,"vertical-align"))},onSetup:n.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return ls(e,t,ok(e),"tablecellborderwidth",ii(e,"border-width"))},onSetup:n.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return ls(e,t,oI(e),"tablecellborderstyle",ii(e,"border-style"))},onSetup:n.onSetupCellOrRow}),e.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:u("mceTableToggleCaption"),onSetup:n.onSetupTableWithCaption}),e.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return il(e,oU(e),"background-color")},onSetup:n.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return il(e,oG(e),"border-color")},onSetup:n.onSetupCellOrRow}),e.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:ia(e),onSetup:n.onSetupTableRowHeaders}),e.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:is(e),onSetup:n.onSetupTableColumnHeaders})}(e,y,C,M),function(e,t,n,r){function o(t){return function(){return e.execCommand(t)}}e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(e){return e("inserttable | cell row column | advtablesort | tableprops deletetable")}}),e.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:o("mceTableProps"),icon:"table",onSetup:n.onSetupTable}),e.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:o("mceTableDelete"),icon:"table-delete-table",onSetup:n.onSetupTable}),e.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:o("mceTableCellProps"),icon:"table-cell-properties",onSetup:n.onSetupCellOrRow}),e.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:o("mceTableMergeCells"),icon:"table-merge-cells",onSetup:n.onSetupMergeable}),e.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:o("mceTableSplitCells"),icon:"table-split-cells",onSetup:n.onSetupUnmergeable}),e.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:o("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:n.onSetupCellOrRow}),e.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:o("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:n.onSetupCellOrRow}),e.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:o("mceTableDeleteRow"),icon:"table-delete-row",onSetup:n.onSetupCellOrRow}),e.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:o("mceTableRowProps"),icon:"table-row-properties",onSetup:n.onSetupCellOrRow}),e.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:o("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:n.onSetupColumn("onFirst")}),e.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:o("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:n.onSetupColumn("onLast")}),e.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:o("mceTableDeleteCol"),icon:"table-delete-column",onSetup:n.onSetupColumn("onAny")}),e.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:n.onSetupCellOrRow}),e.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:n.onSetupCellOrRow}),e.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:n.onSetupPasteable(r.getRows)}),e.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:n.onSetupPasteable(r.getRows)}),e.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:n.onSetupColumn("onAny")}),e.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:n.onSetupColumn("onAny")}),e.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:n.onSetupPasteableColumn(r.getColumns,"onFirst")}),e.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:n.onSetupPasteableColumn(r.getColumns,"onLast")}),e.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:o("mceInsertTable"),icon:"table"});var u=lm(oL(e));0!==u.length&&e.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:ic(e,t,u,"tableclass",function(t){return e.execCommand("mceTableToggleClass",!1,t)}),onSetup:n.onSetupTable});var i=lm(o_(e));0!==i.length&&e.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:ic(e,t,i,"tablecellclass",function(t){return e.execCommand("mceTableCellToggleClass",!1,t)}),onSetup:n.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:ic(e,t,lu,"tablecellverticalalign",ii(e,"vertical-align")),onSetup:n.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:ic(e,t,ok(e),"tablecellborderwidth",ii(e,"border-width")),onSetup:n.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:ic(e,t,oI(e),"tablecellborderstyle",ii(e,"border-style")),onSetup:n.onSetupCellOrRow}),e.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:o("mceTableToggleCaption"),icon:"table-caption",onSetup:n.onSetupTableWithCaption}),e.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(t){return t(il(e,oU(e),"background-color"))},onSetup:n.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(t){return t(il(e,oG(e),"border-color"))},onSetup:n.onSetupCellOrRow}),e.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:ia(e),onSetup:n.onSetupTableRowHeaders}),e.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:is(e),onSetup:n.onSetupTableColumnHeaders})}(e,y,C,M),0<(g=e.getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol")).length&&e.ui.registry.addContextToolbar("table",{predicate:function(t){return e.dom.is(t,"table")&&e.getBody().contains(t)},items:g,scope:"node",position:"node"}),e.on("PreInit",function(){e.serializer.addTempAttr(i0.firstSelected),e.serializer.addTempAttr(i0.lastSelected),e.formatter.register(lC)}),e.getParam("table_tab_navigation",!0,"boolean")&&e.on("keydown",function(t){var n,r,o;t.keyCode===ad.TAB&&(n=rU(e),r=function(e){var t=eq(e);return eu(e,n)||S(ap,t)},o=e.selection.getRng(),tM(eL.fromDom(t.shiftKey?o.startContainer:o.endContainer),r).each(function(n){t.preventDefault(),tN(n,r).each(x.clear),e.selection.collapse(t.shiftKey),(t.shiftKey?function(e,t,n){return ag(e,t,iA(n,void 0).fold(function(){return lT.none()},function(e){return lx(e.all,n,e.index,-1,oh)}))}:lU)(e,r,n).each(function(t){e.selection.setRng(t)})}))}),e.on("remove",function(){T.destroy()}),{insertTable:function(t,n,r){var o=u0(e,n,t,r=void 0===r?{}:r,"Invalid values for insertTable - rows and columns values are required to insert a table.");return e.undoManager.add(),o},setClipboardRows:u9(M.setRows),getClipboardRows:u1(M.getRows),setClipboardCols:u9(M.setColumns),getClipboardCols:u1(M.getColumns),resizeHandler:T,selectionTargets:C};function E(t){return i9(rJ(e)).bind(function(e){return tN(e,h).map(function(n){var r=rZ(y,n,e);return t(n,r)})}).getOr("")}})}();