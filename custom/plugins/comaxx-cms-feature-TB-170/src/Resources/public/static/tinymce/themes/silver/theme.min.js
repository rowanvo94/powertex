!function(){"use strict";function t(t){return function(e){var n;return n=typeof e,(null===e?"null":"object"==n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n)===t}}function e(t){return function(e){return typeof e===t}}function n(t){return function(e){return t===e}}function o(t,e){if(f(t)){for(var n=0,o=t.length;n<o;++n)if(!e(t[n]))return;return 1}}function r(){}function i(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t(e.apply(null,n))}}function u(t){return function(){return t}}function a(t){return t}function c(t,e){return t===e}var s=t("string"),l=t("object"),f=t("array"),d=n(null),m=e("boolean"),g=n(void 0),p=function(t){return null!=t},h=e("function"),v=e("number");function b(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r=e.concat(n);return t.apply(null,r)}}function y(t){return function(e){return!t(e)}}function x(t){return function(){throw Error(t)}}var w=u(!1),S=u(!0),k=tinymce.util.Tools.resolve("tinymce.ThemeManager"),C=function(){return(C=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function O(t,e){var n={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)0>e.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function _(t,e,n){if(n||2==arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||((o=o||Array.prototype.slice.call(e,0,r))[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function T(){return E}var E={fold:function(t,e){return t()},isSome:w,isNone:S,getOr:a,getOrThunk:D,getOrDie:function(t){throw Error(t||"error: getOrDie called on none.")},getOrNull:u(null),getOrUndefined:u(void 0),or:a,orThunk:D,map:T,each:r,bind:T,exists:w,forall:S,filter:function(){return E},toArray:function(){return[]},toString:u("none()")};function D(t){return t()}function A(t,e){for(var n=0,o=t.length;n<o;n++)if(e(t[n],n))return!0;return!1}function B(t,e){for(var n=[],o=0;o<t;o++)n.push(e(o));return n}function M(t,e){for(var n=[],o=0;o<t.length;o+=e){var r=tp.call(t,o,o+e);n.push(r)}return n}function F(t,e){for(var n=t.length,o=Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r)}return o}function I(t,e){for(var n=[],o=[],r=0,i=t.length;r<i;r++){var u=t[r];(e(u,r)?n:o).push(u)}return{pass:n,fail:o}}function R(t,e){for(var n=[],o=0,r=t.length;o<r;o++){var i=t[o];e(i,o)&&n.push(i)}return n}function N(t,e,n){return function(t){for(var o,r=t.length-1;0<=r;r--)o=t[r],n=e(n,o,r)}(t),n}function P(t,e,n){return ty(t,function(t,o){n=e(n,t,o)}),n}function V(t,e){return function(t,e,n){for(var o=0,r=t.length;o<r;o++){var i=t[o];if(e(i,o))return tg.some(i);if(n(i,o))break}return tg.none()}(t,e,w)}function H(t,e){for(var n=0,o=t.length;n<o;n++)if(e(t[n],n))return tg.some(n);return tg.none()}function L(t){for(var e=[],n=0,o=t.length;n<o;++n){if(!f(t[n]))throw Error("Arr.flatten item "+n+" was not an array, input: "+t);tv.apply(e,t[n])}return e}function z(t,e){return L(F(t,e))}function U(t,e){for(var n=0,o=t.length;n<o;++n)if(!0!==e(t[n],n))return!1;return!0}function j(t){var e=tp.call(t,0);return e.reverse(),e}function W(t,e){return R(t,function(t){return!tb(e,t)})}function G(t,e){for(var n={},o=0,r=t.length;o<r;o++){var i=t[o];n[String(i)]=e(i,o)}return n}function X(t){return[t]}function Y(t,e){var n=tp.call(t,0);return n.sort(e),n}function q(t,e){return 0<=e&&e<t.length?tg.some(t[e]):tg.none()}function K(t){return q(t,0)}function J(t){return q(t,t.length-1)}function $(t,e){for(var n=0;n<t.length;n++){var o=e(t[n],n);if(o.isSome())return o}return tg.none()}function Q(t,e){for(var n=tw(t),o=0,r=n.length;o<r;o++){var i=n[o];e(t[i],i)}}function Z(t,e){return tk(t,function(t,n){return{k:n,v:e(t,n)}})}function tt(t,e){var n=[];return Q(t,function(t,o){n.push(e(t,o))}),n}function te(t,e){for(var n=tw(t),o=0,r=n.length;o<r;o++){var i=n[o],u=t[i];if(e(u,i,t))return tg.some(u)}return tg.none()}function tn(t,e){return tC(t,e)?tg.from(t[e]):tg.none()}function to(t,e){return tC(t,e)&&void 0!==t[e]&&null!==t[e]}function tr(t,e,n){return void 0===n&&(n=c),t.exists(function(t){return n(t,e)})}function ti(t){for(var e=[],n=function(t){e.push(t)},o=0;o<t.length;o++)t[o].each(n);return e}function tu(t,e){return t?tg.some(e):tg.none()}function ta(t,e,n){return""===e||t.length>=e.length&&t.substr(n,n+e.length)===e}function tc(t,e){return -1!==t.indexOf(e)}function ts(t){return 0<t.length}function tl(t){return void 0!==t.style&&h(t.style.getPropertyValue)}function tf(t){if(null==t)throw Error("Node cannot be null or undefined");return{dom:t}}var td,tm=function(t){function e(){return r}function n(e){return e(t)}var o=u(t),r={fold:function(e,n){return n(t)},isSome:S,isNone:w,getOr:o,getOrThunk:o,getOrDie:o,getOrNull:o,getOrUndefined:o,or:e,orThunk:e,map:function(e){return tm(e(t))},each:function(e){e(t)},bind:n,exists:n,forall:n,filter:function(e){return e(t)?r:E},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return r},tg={some:tm,none:T,from:function(t){return null==t?E:tm(t)}},tp=Array.prototype.slice,th=Array.prototype.indexOf,tv=Array.prototype.push,tb=function(t,e){return -1<th.call(t,e)},ty=function(t,e){for(var n=0,o=t.length;n<o;n++)e(t[n],n)},tx=h(Array.from)?Array.from:function(t){return tp.call(t)},tw=Object.keys,tS=Object.hasOwnProperty,tk=function(t,e){var n={};return Q(t,function(t,o){var r=e(t,o);n[r.k]=r.v}),n},tC=function(t,e){return tS.call(t,e)},tO=function(t,e,n){return t.isSome()&&e.isSome()?tg.some(n(t.getOrDie(),e.getOrDie())):tg.none()},t_=function(t,e){return ta(t,e,t.length-e.length)},tT=(td=/^\s+|\s+$/g,function(t){return t.replace(td,"")}),tE={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",t),Error("HTML must have a single root node");return tf(n.childNodes[0])},fromTag:function(t,e){return tf((e||document).createElement(t))},fromText:function(t,e){return tf((e||document).createTextNode(t))},fromDom:tf};function tD(t){return t.dom.nodeName.toLowerCase()}function tA(t){return function(e){return e.dom.nodeType===t}}function tB(t){var e,n=!1;return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];return n||(n=!0,e=t.apply(null,o)),e}}function tM(t,e){var n=String(e).toLowerCase();return V(t,function(t){return t.search(n)})}function tF(t){return function(e){return tc(e,t)}}function tI(t){return window.matchMedia(t).matches}function tR(t,e){var n=t.dom;if(1!==n.nodeType)return!1;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw Error("Browser lacks native selectors")}function tN(t){return 1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount}function tP(t,e){return t.dom===e.dom}function tV(t,e){var n,o;return eX().browser.isIE()?0!=(t.dom.compareDocumentPosition(e.dom)&Node.DOCUMENT_POSITION_CONTAINED_BY):(n=t.dom)!==(o=e.dom)&&n.contains(o)}function tH(t){return tE.fromDom(t.dom.ownerDocument)}function tL(t){return eM(t)?t:tH(t)}function tz(t){return tE.fromDom(tL(t).dom.documentElement)}function tU(t){return tE.fromDom(tL(t).dom.defaultView)}function tj(t){return tg.from(t.dom.parentNode).map(tE.fromDom)}function tW(t){return tg.from(t.dom.offsetParent).map(tE.fromDom)}function tG(t){return F(t.dom.childNodes,tE.fromDom)}function tX(t,e){var n=t.dom.childNodes;return tg.from(n[e]).map(tE.fromDom)}function tY(t,e){return{element:t,offset:e}}function tq(t,e){var n=tG(t);return 0<n.length&&e<n.length?tY(n[e],0):tY(t,e)}function tK(t){return eF(t)&&p(t.dom.host)}function tJ(t){return tK(t)?t:tE.fromDom(tL(t).dom.body)}function t$(t,e,n){if(!(s(n)||m(n)||v(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),Error("Attribute value was not simple");t.setAttribute(e,n+"")}function tQ(t,e,n){t$(t.dom,e,n)}function tZ(t,e){var n=t.dom;Q(e,function(t,e){t$(n,e,t)})}function t0(t,e){var n=t.dom.getAttribute(e);return null===n?void 0:n}function t1(t,e){return tg.from(t0(t,e))}function t2(t,e){var n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)}function t5(t,e){t.dom.removeAttribute(e)}function t3(t,e,n){if(!s(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),Error("CSS value must be a string: "+n);tl(t)&&t.style.setProperty(e,n)}function t9(t,e){tl(t)&&t.style.removeProperty(e)}function t4(t,e,n){t3(t.dom,e,n)}function t6(t,e){var n=t.dom;Q(e,function(t,e){t3(n,e,t)})}function t8(t,e){var n=t.dom;Q(e,function(t,e){t.fold(function(){t9(n,e)},function(t){t3(n,e,t)})})}function t7(t,e){var n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||eQ(t)?o:e1(n,e)}function et(t,e){var n=e1(t.dom,e);return tg.from(n).filter(function(t){return 0<t.length})}function ee(t,e,n){var o=tE.fromTag(t);return t4(o,e,n),et(o,e).isSome()}function en(t,e){t9(t.dom,e),tr(t1(t,"style").map(tT),"")&&t5(t,"style")}function eo(t){return t.dom.offsetWidth}function er(t,e){function n(n){var o=e(n);return o<=0||null===o?parseFloat(t7(n,t))||0:o}function o(t,e){return P(e,function(e,n){var o=t7(t,n),r=void 0===o?0:parseInt(o,10);return isNaN(r)?e:e+r},0)}return{set:function(e,n){if(!v(n)&&!n.match(/^[0-9]+$/))throw Error(t+".set accepts only positive integer values. Value was "+n);var o=e.dom;tl(o)&&(o.style[t]=n+"px")},get:n,getOuter:n,aggregate:o,max:function(t,e,n){var r=o(t,n);return r<e?e-r:0}}}function ei(t){return e2.get(t)}function eu(t){return e2.getOuter(t)}function ea(t,e){return void 0!==t?t:void 0!==e?e:0}function ec(t){var e=t.dom.ownerDocument,n=e.body,o=e.defaultView,r=e.documentElement;if(n===t.dom)return e3(n.offsetLeft,n.offsetTop);var i=ea(null==o?void 0:o.pageYOffset,r.scrollTop),u=ea(null==o?void 0:o.pageXOffset,r.scrollLeft),a=ea(r.clientTop,n.clientTop),c=ea(r.clientLeft,n.clientLeft);return e9(t).translate(u-c,i-a)}function es(t){return e4.get(t)}function el(t){return e4.getOuter(t)}function ef(t){function e(){return t.stopPropagation()}function n(){return t.preventDefault()}var o=i(n,e);return{target:tE.fromDom((function(t){if(eq()&&p(t.target)){var e=tE.fromDom(t.target);if(eA(e)&&e$(e)&&t.composed&&t.composedPath){var n=t.composedPath();if(n)return K(n)}}return tg.from(t.target)})(t).getOr(t.target)),x:t.clientX,y:t.clientY,stop:e,prevent:n,kill:o,raw:t}}function ed(t,e,n,o,r){var i=function(t){n(t)&&o(ef(t))};return t.dom.addEventListener(e,i,r),{unbind:b(e6,t,e,i,r)}}function em(t,e){tj(t).each(function(n){n.dom.insertBefore(e.dom,t.dom)})}function eg(t,e){tg.from(t.dom.nextSibling).map(tE.fromDom).fold(function(){tj(t).each(function(t){e8(t,e)})},function(t){em(t,e)})}function ep(t,e){tX(t,0).fold(function(){e8(t,e)},function(n){t.dom.insertBefore(e.dom,n.dom)})}function eh(t,e){ty(e,function(e){e8(t,e)})}function ev(t){t.dom.textContent="",ty(tG(t),function(t){e7(t)})}function eb(t){var e=tG(t);0<e.length&&ty(e,function(e){em(t,e)}),e7(t)}function ey(t){var e=void 0!==t?t.dom:document;return e3(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)}function ex(t,e,n){var o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(t,e)}function ew(t,e,n,o){return{x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}}function eS(t){var e=void 0===t?window:t,n=e.document,o=ey(tE.fromDom(n));return(eX().browser.isFirefox()?tg.none():tg.from((void 0===e?window:e).visualViewport)).fold(function(){var t=e.document.documentElement,n=t.clientWidth,r=t.clientHeight;return ew(o.left,o.top,n,r)},function(t){return ew(Math.max(t.pageLeft,o.left),Math.max(t.pageTop,o.top),t.width,t.height)})}function ek(t){var e=ey(tE.fromDom(document)),n=ne.owner(t),o=nt(ne,n);return tg.some(o).fold(b(ec,t),function(n){var o=e9(t),r=N(n,function(t,e){var n=e9(e);return{left:t.left+n.left,top:t.top+n.top}},{left:0,top:0});return e3(r.left+o.left+e.left,r.top+o.top+e.top)})}function eC(t){var e=ek(t),n=el(t),o=eu(t);return nn(e.left,e.top,n,o)}function eO(){return eI(0,0)}function e_(t){function e(t){return function(){return n===t}}var n=t.current;return{current:n,version:t.version,isEdge:e("Edge"),isChrome:e("Chrome"),isIE:e("IE"),isOpera:e("Opera"),isFirefox:e(eV),isSafari:e("Safari")}}function eT(t){function e(t){return function(){return n===t}}var n=t.current;return{current:n,version:t.version,isWindows:e(eL),isiOS:e("iOS"),isAndroid:e(ez),isOSX:e("OSX"),isLinux:e("Linux"),isSolaris:e(eU),isFreeBSD:e(ej),isChromeOS:e(eW)}}"undefined"!=typeof window||Function("return this;")();var eE,eD,eA=tA(1),eB=tA(3),eM=tA(9),eF=tA(11),eI=function(t,e){return{major:t,minor:e}},eR=function(t,e){var n,o,r=String(e).toLowerCase();return 0===t.length?eI(0,0):(o=function(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(o.test(e))return o}}(t,n=r))?eI(i(1),i(2)):{major:0,minor:0};function i(t){return Number(n.replace(o,"$"+t))}},eN=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,eP={browsers:u([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return tc(t,"edge/")&&tc(t,"chrome")&&tc(t,"safari")&&tc(t,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,eN],search:function(t){return tc(t,"chrome")&&!tc(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return tc(t,"msie")||tc(t,"trident")}},{name:"Opera",versionRegexes:[eN,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:tF("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:tF("firefox")},{name:"Safari",versionRegexes:[eN,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(tc(t,"safari")||tc(t,"mobile/"))&&tc(t,"applewebkit")}}]),oses:u([{name:"Windows",search:tF("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return tc(t,"iphone")||tc(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:tF("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:tF("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:tF("linux"),versionRegexes:[]},{name:"Solaris",search:tF("sunos"),versionRegexes:[]},{name:"FreeBSD",search:tF("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:tF("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},eV="Firefox",eH=function(){return e_({current:void 0,version:eI(0,0)})},eL=(u("Edge"),u("Chrome"),u("IE"),u("Opera"),u(eV),u("Safari"),"Windows"),ez="Android",eU="Solaris",ej="FreeBSD",eW="ChromeOS",eG=function(){return eT({current:void 0,version:eI(0,0)})},eX=(u(eL),u("iOS"),u(ez),u("Linux"),u("OSX"),u(eU),u(ej),u(eW),tB(function(){var t,e,n,o,r,i,a,c,s,l,f,d,m;return t=navigator.userAgent,e=tg.from(navigator.userAgentData),l=eP.browsers(),f=eP.oses(),{browser:d=e.bind(function(t){return $(t.brands,function(t){var e=t.brand.toLowerCase();return V(l,function(t){var n;return e===(null===(n=t.brand)||void 0===n?void 0:n.toLowerCase())}).map(function(e){return{current:e.name,version:eI(parseInt(t.version,10),0)}})})}).orThunk(function(){return tM(l,t).map(function(e){var n=eR(e.versionRegexes,t);return{current:e.name,version:n}})}).fold(eH,e_),os:m=tM(f,t).map(function(e){var n=eR(e.versionRegexes,t);return{current:e.name,version:n}}).fold(eG,eT),deviceType:(n=m.isiOS()&&!0===/ipad/i.test(t),o=m.isiOS()&&!n,i=(r=m.isiOS()||m.isAndroid())||tI("(pointer:coarse)"),a=n||!o&&r&&tI("(min-device-width:768px)"),c=o||r&&!a,s=d.isSafari()&&m.isiOS()&&!1===/safari/i.test(t),{isiPad:u(n),isiPhone:u(o),isTablet:u(a),isPhone:u(c),isTouch:u(i),isAndroid:m.isAndroid,isiOS:m.isiOS,isWebView:u(s),isDesktop:u(!c&&!a&&!s)})}})),eY=h(Element.prototype.attachShadow)&&h(Node.prototype.getRootNode),eq=u(eY),eK=eY?function(t){return tE.fromDom(t.dom.getRootNode())}:tL,eJ=function(t){var e=eK(t);return tK(e)?tg.some(e):tg.none()},e$=function(t){return p(t.dom.shadowRoot)},eQ=function(t){var e=eB(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;var n=e.ownerDocument;return eJ(tE.fromDom(e)).fold(function(){return n.body.contains(e)},function(t){return eQ(tE.fromDom(t.dom.host))})},eZ=function(){return e0(tE.fromDom(document))},e0=function(t){var e=t.dom.body;if(null==e)throw Error("Body is not available yet");return tE.fromDom(e)},e1=function(t,e){return tl(t)?t.style.getPropertyValue(e):""},e2=er("height",function(t){var e=t.dom;return eQ(t)?e.getBoundingClientRect().height:e.offsetHeight}),e5=function(t,e){return{left:t,top:e,translate:function(n,o){return e5(t+n,e+o)}}},e3=e5,e9=function(t){var e,n=t.dom,o=n.ownerDocument.body;return o===n?e3(o.offsetLeft,o.offsetTop):eQ(t)?e3((e=n.getBoundingClientRect()).left,e.top):e3(0,0)},e4=er("width",function(t){return t.dom.offsetWidth}),e6=function(t,e,n,o){t.dom.removeEventListener(e,n,o)},e8=function(t,e){t.dom.appendChild(e.dom)},e7=function(t){var e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},nt=function(t,e){return t.view(e).fold(u([]),function(e){var n=t.owner(e);return[e].concat(nt(t,n))})},ne=Object.freeze({__proto__:null,view:function(t){var e;return(t.dom===document?tg.none():tg.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(tE.fromDom)},owner:tH}),nn=function(t,e,n,o){return{x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}},no=function(t){var e=ec(t),n=el(t),o=eu(t);return nn(e.left,e.top,n,o)},nr=function(){return eS(window)},ni=function(t){return{isValue:S,isError:w,getOr:u(t),getOrThunk:u(t),getOrDie:u(t),or:function(e){return ni(t)},orThunk:function(e){return ni(t)},fold:function(e,n){return n(t)},map:function(e){return ni(e(t))},mapError:function(e){return ni(t)},each:function(e){e(t)},bind:function(e){return e(t)},exists:function(e){return e(t)},forall:function(e){return e(t)},toOptional:function(){return tg.some(t)}}},nu=function(t){return{isValue:w,isError:S,getOr:a,getOrThunk:function(t){return t()},getOrDie:function(){return x(String(t))()},or:a,orThunk:function(t){return t()},fold:function(e,n){return e(t)},map:function(e){return nu(t)},mapError:function(e){return nu(e(t))},each:r,bind:function(e){return nu(t)},exists:w,forall:S,toOptional:tg.none}},na={value:ni,error:nu};function nc(t,e,n){return t.stype===eE.Error?e(t.serror):n(t.svalue)}function ns(t){return{stype:eE.Value,svalue:t}}function nl(t){return{stype:eE.Error,serror:t}}function nf(t,e,n,o){return{tag:"field",key:t,newKey:e,presence:n,prop:o}}function nd(t,e,n){switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}}function nm(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0===e.length)throw Error("Can't merge zero objects");for(var o={},r=0;r<e.length;r++){var i,u=e[r];for(i in u)tC(u,i)&&(o[i]=t(o[i],u[i]))}return o}}function ng(){return{tag:"required",process:{}}}function np(t){return{tag:"defaultedThunk",process:t}}function nh(){return{tag:"option",process:{}}}function nv(t){return{tag:"mergeWithThunk",process:t}}function nb(t){return l(t)&&100<tw(t).length?" removed due to size":JSON.stringify(t,null,2)}function ny(t,e){return n2([{path:t,getErrorInfo:e}])}function nx(t){return{extract:function(e,n){return n3(t(n),function(t){return ny(e,u(t))})},toString:u("val")}}function nw(t,e,n,o){return o(tn(t,e).getOrThunk(function(){return n(t)}))}function nS(t){return{extract:function(e,n){return t().extract(e,n)},toString:function(){return t().toString()}}}function nk(t){var e=ot(t),n=N(t,function(t,e){return nd(e,function(e){var n;return n4(t,((n={})[e]=!0,n))},u(t))},{});return{extract:function(t,o){var i,u,a,c=R(m(o)?[]:tw((u=i={},a=function(t,e){u[e]=t},Q(o,function(t,e){(p(t,e)?a:r)(t,e)}),i)),function(t){return!to(n,t)});return 0===c.length?e.extract(t,o):ny(t,function(){return"There are unsupported fields: ["+c.join(", ")+"] specified"})},toString:e.toString}}function nC(t){return{extract:function(e,n){return n8(F(n,function(n,o){return t.extract(e.concat(["["+o+"]"]),n)}))},toString:function(){return"array("+t.toString()+")"}}}function nO(t){return{extract:function(e,n){for(var o=[],r=0;r<t.length;r++){var i=t[r].extract(e,n);if(i.stype===eE.Value)return i;o.push(i)}return n8(o)},toString:function(){return"oneOf("+F(t,function(t){return t.toString()}).join(", ")+")"}}}function n_(t,e){return nx(function(n){var o=typeof n;return t(n)?n1(n):n2("Expected type: "+e+" but got: "+o)})}function nT(t,e){return{extract:function(n,o){return tn(o,t).fold(function(){return ny(n,function(){return'Choice schema did not contain choice key: "'+t+'"'})},function(t){return tn(e,t).fold(function(){return ny(n,function(){return'The chosen schema: "'+t+'" did not exist in branches: '+nb(e)})},function(e){return e.extract(n.concat(["branch: "+t]),o)})})},toString:function(){return"chooseOn("+t+"). Possible values: "+tw(e)}}}function nE(t){return nx(function(e){return t(e).fold(n2,n1)})}function nD(t,e){var n;return n=function(e){return t(e).fold(nl,ns)},{extract:function(t,o){var r=tw(o);return n5(nC(nx(n)).extract(t,r),function(n){return ot(F(n,function(t){return nf(t,t,ng(),e)})).extract(t,o)})},toString:function(){return"setOf("+e.toString()+")"}}}function nA(t,e,n){return n0(n9(e.extract([t],n),function(t){return{input:n,errors:t}}))}function nB(t){return t.fold(function(t){throw Error(os(t))},a)}function nM(t,e,n){return nB(nA(t,e,n))}function nF(t,e){return nT(t,Z(e,ot))}function nI(t){return nE(function(e){return tb(t,e)?na.value(e):na.error('Unsupported value: "'+e+'", choose one of "'+t.join(", ")+'".')})}function nR(t){return ol(t,t,ng(),on())}function nN(t,e){return ol(t,t,ng(),e)}function nP(t){return nN(t,or)}function nV(t,e){return ol(t,t,ng(),nI(e))}function nH(t){return nN(t,ou)}function nL(t,e){return ol(t,t,ng(),ot(e))}function nz(t,e){return ol(t,t,ng(),oe(e))}function nU(t,e){return ol(t,t,ng(),nC(e))}function nj(t){return ol(t,t,nh(),on())}function nW(t,e){return ol(t,t,nh(),e)}function nG(t){return nW(t,or)}function nX(t,e){return nW(t,ot(e))}function nY(t,e){return ol(t,t,np(u(e)),on())}function nq(t,e,n){return ol(t,t,np(u(e)),n)}function nK(t,e,n){return nq(t,e,nI(n))}function nJ(t,e){return nq(t,e,oi)}function n$(t,e){return nq(t,e,ou)}function nQ(t){var e=t;return{get:function(){return e},set:function(t){e=t}}}function nZ(t){if(!f(t))throw Error("cases must be an array");if(0===t.length)throw Error("there must be at least one case");var e=[],n={};return ty(t,function(o,r){var i=tw(o);if(1!==i.length)throw Error("one and only one name per case");var u=i[0],a=o[u];if(void 0!==n[u])throw Error("duplicate key detected:"+u);if("cata"===u)throw Error("cannot have a case named cata (sorry)");if(!f(a))throw Error("case arguments must be an array");e.push(u),n[u]=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=n.length;if(i!==a.length)throw Error("Wrong number of arguments to case "+u+". Expected "+a.length+" ("+a+"), got "+i);return{fold:function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];if(e.length!==t.length)throw Error("Wrong number of arguments to fold. Expected "+t.length+", got "+e.length);return e[r].apply(null,n)},match:function(t){var o=tw(t);if(e.length!==o.length)throw Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+o.join(","));if(!U(e,function(t){return tb(o,t)}))throw Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+e.join(", "));return t[u].apply(null,n)},log:function(t){console.log(t,{constructors:e,constructor:u,params:n})}}}}),n}(eD=eE={})[eD.Error=0]="Error",eD[eD.Value=1]="Value";var n0=function(t){return nc(t,na.error,na.value)},n1=ns,n2=nl,n5=function(t,e){return t.stype===eE.Value?e(t.svalue):t},n3=function(t,e){return t.stype===eE.Error?e(t.serror):t},n9=function(t,e){return t.stype===eE.Error?{stype:eE.Error,serror:e(t.serror)}:t},n4=nm(function(t,e){return l(t)&&l(e)?n4(t,e):e}),n6=nm(function(t,e){return e}),n8=function(t){var e,n,o=(e=[],n=[],ty(t,function(t){nc(t,function(t){return n.push(t)},function(t){return e.push(t)})}),{values:e,errors:n});return 0<o.errors.length?i(n2,L)(o.errors):n1(o.values)},n7=nx(n1),ot=function(t){return{extract:function(e,n){for(var o={},r=[],i=0;i<t.length;i++)nd(t[i],function(t,i,a,c){nc(function(t,e,n,o,r){var i;function a(t){return r.extract(e.concat([o]),t)}function c(t){return t.fold(function(){return n1(tg.none())},function(t){var n,i;return n=r.extract(e.concat([o]),t),i=tg.some,n.stype===eE.Value?{stype:eE.Value,svalue:i(n.svalue)}:n})}switch(t.tag){case"required":return tn(n,o).fold(function(){return ny(e,function(){return'Could not find valid *required* value for "'+o+'" in '+nb(n)})},a);case"defaultedThunk":return nw(n,o,t.process,a);case"option":return c(tn(n,o));case"defaultedOptionThunk":return i=t.process,c(tn(n,o).map(function(t){return!0===t?i(n):t}));case"mergeWithThunk":return nw(n,o,u({}),function(e){return a(n4(t.process(n),e))})}}(a,e,n,t,c),function(t){r.push.apply(r,t)},function(t){o[i]=t})},function(t,e){o[t]=e(n)});return 0<r.length?n2(r):n1(o)},toString:function(){return"obj{\n"+F(t,function(t){return nd(t,function(t,e,n,o){return t+" -> "+o.toString()},function(t,e){return"state("+t+")"})}).join("\n")+"}"}}},oe=i(nC,ot),on=u(n7),oo=n_(v,"number"),or=n_(s,"string"),oi=n_(m,"boolean"),ou=n_(h,"function"),oa=function(t){if(Object(t)!==t)return!0;switch(({}).toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(function(e){return oa(t[e])});default:return!1}},oc=nx(function(t){return oa(t)?n1(t):n2("Expected value to be acceptable for sending via postMessage")}),os=function(t){var e;return"Errors: \n"+F(10<(e=t.errors).length?e.slice(0,10).concat([{path:[],getErrorInfo:u("... (only showing first ten failures)")}]):e,function(t){return"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()}).join("\n")+"\n\nInput object: "+nb(t.input)},ol=nf,of=function(t,e){return{tag:"custom",newKey:t,instantiator:e}};function od(t,e){var n;return(n={})[t]=e,n}function om(t){var e;return e={},ty(t,function(t){e[t.key]=t.value}),e}function og(t,e,n){for(var o=t.dom,r=h(n)?n:w;o.parentNode;){var o=o.parentNode,i=tE.fromDom(o),u=e(i);if(u.isSome())return u;if(r(i))break}return tg.none()}function op(t,e,n){var o=e(t),r=h(n)?n:w;return o.orThunk(function(){return r(t)?tg.none():og(t,e,r)})}function oh(t,e){return tP(t.element,e.event.target)}function ov(t){if(!to(t,"can")&&!to(t,"abort")&&!to(t,"run"))throw Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return C(C({},o2),t)}function ob(t){return u("alloy."+t)}function oy(t,e){rH(t,t.element,e,{})}function ox(t,e,n){rH(t,t.element,e,n)}function ow(t){oy(t,rb())}function oS(t,e,n,o){t.getSystem().triggerEvent(n,e,o.event)}function ok(t,e){return{key:t,value:ov({abort:e})}}function oC(t){return{key:t,value:ov({run:function(t,e){e.event.prevent()}})}}function oO(t,e){return{key:t,value:ov({run:e})}}function o_(t,e,n){return{key:t,value:ov({run:function(t,o){e.apply(void 0,[t,o].concat(n))}})}}function oT(t){return function(e){return{key:t,value:ov({run:function(t,n){oh(t,n)&&e(t,n)}})}}}function oE(t,e,n){var o=e.partUids[n];return oO(t,function(e,n){e.getSystem().getByUid(o).each(function(e){oS(e,e.element,t,n)})})}function oD(t,e){return oO(t,function(t,n){var o=n.event,r=t.getSystem().getByDom(o.target).getOrThunk(function(){return op(o.target,function(e){return t.getSystem().getByDom(e).toOptional()},w).getOr(t)});e(t,r,n)})}function oA(t){return oO(t,function(t,e){e.cut()})}function oB(t){return t.dom.innerHTML}function oM(t,e){var n,o=tH(t).dom,r=tE.fromDom(o.createDocumentFragment());eh(r,((n=(o||document).createElement("div")).innerHTML=e,tG(tE.fromDom(n)))),ev(t),e8(t,r)}function oF(t){if(tK(t))return"#shadow-root";var e=tE.fromDom(t.dom.cloneNode(!1)),n=tE.fromTag("div");return e8(n,tE.fromDom(e.dom.cloneNode(!0))),oB(n)}function oI(t){var e=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++rG+String(e)}function oR(t){var e=eA(t)?t.dom[rK]:null;return tg.from(e)}function oN(t){function e(e){return"The component must be in a context to execute: "+e+(t?"\n"+oF(t().element)+" is not in context.":"")}function n(t){return function(){throw Error(e(t))}}function o(t){return function(){console.warn(e(t))}}return{debugInfo:u("fake"),triggerEvent:o("triggerEvent"),triggerFocus:o("triggerFocus"),triggerEscape:o("triggerEscape"),broadcast:o("broadcast"),broadcastOn:o("broadcastOn"),broadcastEvent:o("broadcastEvent"),build:n("build"),addToWorld:n("addToWorld"),removeFromWorld:n("removeFromWorld"),addToGui:n("addToGui"),removeFromGui:n("removeFromGui"),getByUid:n("getByUid"),getByDom:n("getByDom"),isConnected:w}}function oP(t,e){var n=t.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,o-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:e,parameters:rQ(i)}},t}function oV(t){return od(rZ,t)}function oH(t){var e,n,o,r,i;return e=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return t.apply(void 0,_([e.getApis(),e],n,!1))},o=(n=t.toString()).indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,o-1).split(/,\s*/),e.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:rQ(i.slice(1))}},e}function oL(t,e){var n={};return Q(t,function(t,o){Q(t,function(t,r){var i=tn(n,r).getOr([]);n[r]=i.concat([e(o,t)])})}),n}function oz(t){return{classes:g(t.classes)?[]:t.classes,attributes:g(t.attributes)?{}:t.attributes,styles:g(t.styles)?{}:t.styles}}function oU(t){return t.cHandler}function oj(t,e){return{name:t,handler:e}}function oW(t,e){var n=t0(t,e);return void 0===n||""===n?[]:n.split(" ")}function oG(t){return void 0!==t.dom.classList}function oX(t,e){var n;oG(t)?t.dom.classList.add(e):(n=oW(t,"class").concat([e]),tQ(t,"class",n.join(" ")))}function oY(t,e){var n;oG(t)?t.dom.classList.remove(e):0<(n=R(oW(t,"class"),function(t){return t!==e})).length?tQ(t,"class",n.join(" ")):t5(t,"class"),0===(oG(t)?t.dom.classList:oW(t,"class")).length&&t5(t,"class")}function oq(t,e){return oG(t)&&t.dom.classList.contains(e)}function oK(t,e){ty(e,function(e){oX(t,e)})}function oJ(t,e){ty(e,function(e){oY(t,e)})}function o$(t){return t.dom.value}function oQ(t,e){if(void 0===e)throw Error("Value.set was undefined");t.dom.value=e}function oZ(t){return r9({element:tE.fromText(t)})}nZ([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var o0,o1,o2={can:S,abort:w,run:r},o5=u("touchstart"),o3=u("touchmove"),o9=u("touchend"),o4=u("touchcancel"),o6=u("mousedown"),o8=u("mousemove"),o7=u("mouseout"),rt=u("mouseup"),re=u("mouseover"),rn=u("focusin"),ro=u("focusout"),rr=u("keydown"),ri=u("keyup"),ru=u("input"),ra=u("change"),rc=u("click"),rs=u("transitioncancel"),rl=u("transitionend"),rf=u("transitionstart"),rd=u("selectstart"),rm={tap:ob("tap")},rg=ob("focus"),rp=ob("blur.post"),rh=ob("paste.post"),rv=ob("receive"),rb=ob("execute"),ry=ob("focus.item"),rx=rm.tap,rw=ob("longpress"),rS=ob("sandbox.close"),rk=ob("typeahead.cancel"),rC=ob("system.init"),rO=ob("system.touchmove"),r_=ob("system.touchend"),rT=ob("system.scroll"),rE=ob("system.resize"),rD=ob("system.attached"),rA=ob("system.detached"),rB=ob("system.dismissRequested"),rM=ob("system.repositionRequested"),rF=ob("focusmanager.shifted"),rI=ob("slotcontainer.visibility"),rR=ob("change.tab"),rN=ob("dismiss.tab"),rP=ob("highlight"),rV=ob("dehighlight"),rH=function(t,e,n,o){var r=C({target:e},o);t.getSystem().triggerEvent(n,e,r)},rL=oT(rD()),rz=oT(rA()),rU=oT(rC()),rj=(o0=rb(),function(t){return oO(o0,t)}),rW=Object.freeze({__proto__:null,events:om([{key:rg(),value:ov({can:function(t,e){var n=e.event,o=n.originator,r=n.target;return!(tP(o,t.element)&&!tP(o,r)&&(console.warn(rg()+" did not get interpreted by the desired target. \nOriginator: "+oF(o)+"\nTarget: "+oF(r)+"\nCheck the "+rg()+" event handlers"),1))}})}])}),rG=0,rX=u("alloy-id-"),rY=u("data-alloy-id"),rq=rX(),rK=rY(),rJ=function(t,e){Object.defineProperty(t.dom,rK,{value:e,writable:!0})},r$=oN(),rQ=function(t){return F(t,function(t){return t_(t,"/*")?t.substring(0,t.length-2):t})},rZ=oI("alloy-premade"),r0={init:function(){return r1({readState:u("No State required")})}},r1=function(t){return t},r2=function(t,e){var n,o,r,i,u,a=tt(t,function(t,n){var o;return(1===t.length?na.value(t[0].handler):(o=e[n])?(function(t,e,n){try{var o=Y(e,function(e,o){var r=e.name,i=o.name,u=n.indexOf(r),a=n.indexOf(i);if(-1===u)throw Error("The ordering for "+t+" does not have an entry for "+r+".\nOrder specified: "+JSON.stringify(n,null,2));if(-1===a)throw Error("The ordering for "+t+" does not have an entry for "+i+".\nOrder specified: "+JSON.stringify(n,null,2));return u<a?-1:a<u?1:0});return na.value(o)}catch(t){return na.error([t])}})("Event: "+n,t,o).map(function(t){var e,n,o=F(t,function(t){return t.handler});return{can:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return P(e,function(e,n){return e&&n.can.apply(void 0,t)},!0)},abort:(n=e=o,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return P(n,function(e,n){return e||n.abort.apply(void 0,t)},!1)}),run:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ty(o,function(e){e.run.apply(void 0,t)})}}}):na.error(["The event ("+n+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(F(t,function(t){return t.name}),null,2)])).map(function(o){var r,i=(r=h(o)?{can:S,abort:w,run:o}:o,function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var i=[t,e].concat(n);r.abort.apply(void 0,i)?e.stop():r.can.apply(void 0,i)&&r.run.apply(void 0,i)}),u=1<t.length?R(e[n],function(e){return A(t,function(t){return t.name===e})}).join(" > "):t[0].name;return od(n,{handler:i,purpose:u})})});return n=[],o=[],ty(a,function(t){t.fold(function(t){n.push(t)},function(t){o.push(t)})}),0<(u={errors:n,values:o}).errors.length?na.error(L(u.errors)):(i={},0===(r=u.values).length?na.value(i):na.value(n4(i,n6.apply(void 0,r))))},r5="alloy.base.behaviour",r3=ot([ol("dom","dom",ng(),ot([nR("tag"),nY("styles",{}),nY("classes",[]),nY("attributes",{}),nj("value"),nj("innerHtml")])),nR("components"),nR("uid"),nY("events",{}),nY("apis",{}),ol("eventOrder","eventOrder",((o1={})[rb()]=["disabling",r5,"toggling","typeaheadevents"],o1[rg()]=[r5,"focusing","keying"],o1[rC()]=[r5,"disabling","toggling","representing"],o1[ru()]=[r5,"representing","streaming","invalidating"],o1[rA()]=[r5,"representing","item-events","tooltipping"],o1[o6()]=["focusing",r5,"item-type-events"],o1[o5()]=["focusing",r5,"item-type-events"],o1[re()]=["item-type-events","tooltipping"],o1[rv()]=["receiving","reflecting","tooltipping"],nv(u(o1))),on()),nj("domModification")]),r9=function(t){var e=nM("external.component",nk([nR("element"),nj("uid")]),t),n=nQ(oN()),o=e.uid.getOrThunk(function(){return oI("external")});rJ(e.element,o);var i={uid:o,getSystem:n.get,config:tg.none,hasConfigured:w,connect:function(t){n.set(t)},disconnect:function(){n.set(oN(function(){return i}))},getApis:function(){return{}},element:e.element,spec:t,readState:u("No state"),syncComponents:r,components:u([]),events:{}};return oV(i)},r4=function(t){return tn(t,rZ).getOrThunk(function(){return(function(t){var e,n,o,r,i,c,s,l,f,d,m,g,v,b,y,x,w,S,k,_=a(t),T=_.events,E=O(_,["events"]),D=F(tn(E,"components").getOr([]),r4),A=C(C({},E),{events:C(C({},rW),T),components:D});return na.value((g=nQ(r$),v=nB(nA("custom.definition",r3,A)),n=F(o=z(tw(e=tn(A,"behaviours").getOr({})),function(t){var n=e[t];return p(n)?[n.me]:[]}),function(t){return nX(t.name(),[nR("config"),nY("state",r0)])}),y=(b={list:o,data:Z(nA("component.behaviours",ot(n),A.behaviours).fold(function(t){throw Error(os(t)+"\nComplete spec:\n"+JSON.stringify(A,null,2))},a),function(t){return u(t.map(function(t){return{config:t.config,state:t.state.init(t.config)}}))})}).list,x=b.data,r=C(C({},v.dom),{uid:v.uid,domChildren:F(v.components,function(t){return t.element})}),i=v.domModification.fold(function(){return oz({})},oz),c=0<y.length?function(t,e,n,o){var r=C({},e);function i(t){return N(t,function(t,e){return C(C({},e.modification),t)},{})}ty(n,function(e){r[e.name()]=e.exhibit(t,o)});var u=oL(r,function(t,e){return{name:t,modification:e}});return oz({classes:N(u.classes,function(t,e){return e.modification.concat(t)},[]),attributes:i(u.attributes),styles:i(u.styles)})}(x,{"alloy.base.modification":i},y,r):i,s=C(C({},r),{attributes:C(C({},r.attributes),c.attributes),styles:C(C({},r.styles),c.styles),classes:r.classes.concat(c.classes)}),tZ(l=tE.fromTag(s.tag),s.attributes),oK(l,s.classes),t6(l,s.styles),s.innerHtml.each(function(t){return oM(l,t)}),eh(l,s.domChildren),s.value.each(function(t){oQ(l,t)}),s.uid,rJ(l,s.uid),d={"alloy.base.behaviour":v.events},m=v.eventOrder,w=r2(oL(C(C({},d),(f={},ty(y,function(t){f[t.name()]=t.handlers(x)}),f)),oj),m).getOrDie(),S=nQ(v.components),k={uid:A.uid,getSystem:g.get,config:function(t){return(h(x[t.name()])?x[t.name()]:function(){throw Error("Could not find "+t.name()+" in "+JSON.stringify(A,null,2))})()},hasConfigured:function(t){return h(x[t.name()])},spec:A,readState:function(t){return x[t]().map(function(t){return t.state.readState()}).getOr("not enabled")},getApis:function(){return v.apis},connect:function(t){g.set(t)},disconnect:function(){g.set(oN(B))},element:l,syncComponents:function(){var t=z(tG(l),function(t){return g.get().getByDom(t).fold(function(){return[]},X)});S.set(t)},components:S.get,events:w}));function B(){return k}})(tC(t,"uid")?t:C({uid:oI("")},t)).getOrDie()})};function r6(t,e,n,o,r){return t(n,o)?tg.some(n):h(r)&&r(n)?tg.none():e(n,o,r)}function r8(t,e,n){for(var o=t.dom,r=h(n)?n:w;o.parentNode;){var o=o.parentNode,i=tE.fromDom(o);if(e(i))return tg.some(i);if(r(i))break}return tg.none()}function r7(t,e,n){return r6(function(t,e){return e(t)},r8,t,e,n)}function it(t,e,n){return r7(t,e,n).isSome()}function ie(t,e,n){return r8(t,function(t){return tR(t,e)},n)}function io(t,e){var n;return tN(n=void 0===t?document:t.dom)?tg.none():tg.from(n.querySelector(e)).map(tE.fromDom)}function ir(t,e,n){return r6(tR,ie,t,e,n)}function ii(){var t=oI("aria-owns");return{id:t,link:function(e){tQ(e,"aria-owns",t)},unlink:function(t){t5(t,"aria-owns")}}}var iu,ia,ic=function(t,e){return it(e,function(e){return tP(e,t.element)},w)||r7(e,function(t){if(!eA(t))return!1;var e=t0(t,"id");return void 0!==e&&-1<e.indexOf("aria-owns")}).bind(function(t){var e=t0(t,"id");return io(eK(t),'[aria-owns="'+e+'"]')}).exists(function(e){return ic(t,e)})};function is(t,e,n){var o,r;switch(tn(il.get(),t).orThunk(function(){return $(tw(il.get()),function(e){return -1<t.indexOf(e)?tg.some(il.get()[e]):tg.none()})}).getOr(iu.NORMAL)){case iu.NORMAL:return n(im());case iu.LOGGING:var i=(o=[],r=(new Date).getTime(),{logEventCut:function(t,e,n){o.push({outcome:"cut",target:e,purpose:n})},logEventStopped:function(t,e,n){o.push({outcome:"stopped",target:e,purpose:n})},logNoParent:function(t,e,n){o.push({outcome:"no-parent",target:e,purpose:n})},logEventNoHandlers:function(t,e){o.push({outcome:"no-handlers-left",target:e})},logEventResponse:function(t,e,n){o.push({outcome:"response",purpose:n,target:e})},write:function(){var n=(new Date).getTime();tb(["mousemove","mouseover","mouseout",rC()],t)||console.log(t,{event:t,time:n-r,target:e.dom,sequence:F(o,function(t){return tb(["cut","stopped","response"],t.outcome)?"{"+t.purpose+"} "+t.outcome+" at ("+oF(t.target)+")":t.outcome})})}}),u=n(i);return i.write(),u;case iu.STOP:return!0}}(ia=iu=iu||{})[ia.STOP=0]="STOP",ia[ia.NORMAL=1]="NORMAL",ia[ia.LOGGING=2]="LOGGING";var il=nQ({}),id=["alloy/data/Fields","alloy/debugging/Debugging"],im=u({logEventCut:r,logEventStopped:r,logNoParent:r,logEventNoHandlers:r,logEventResponse:r,write:r}),ig=u([nR("menu"),nR("selectedMenu")]),ip=u([nR("item"),nR("selectedItem")]);function ih(){return nL("markers",[nR("backgroundMenu")].concat(ig()).concat(ip()))}function iv(t){return nL("markers",F(t,nR))}function ib(t,e,n){var o;return void 0!==(o=Error()).stack&&V(o.stack.split("\n"),function(t){return 0<t.indexOf("alloy")&&!A(id,function(e){return -1<t.indexOf(e)})}).getOr("unknown"),ol(e,e,n,nE(function(t){return na.value(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(void 0,e)})}))}function iy(t){return ib(0,t,np(u(r)))}function ix(t){return ib(0,t,np(u(tg.none)))}function iw(t){return ib(0,t,ng())}function iS(t){return ib(0,t,ng())}function ik(t,e){return of(t,u(e))}function iC(t,e,n,o,r,i,u,a){return{x:t,y:e,bubble:n,direction:o,placement:r,restriction:i,label:u+"-"+r,alwaysFit:a=void 0!==a&&a}}function iO(t,e,n,o){var r=t+e;return o<r?n:r<n?o:r}function i_(t,e){return G(["left","right","top","bottom"],function(n){return tn(e,n).map(function(e){return function(t){switch(e){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}}(t)})})}function iT(t,e){return t.x+t.width/2-e.width/2}function iE(t,e){return t.x+t.width-e.width}function iD(t,e){return t.y-e.height}function iA(t){return t.y+t.height}function iB(t,e){return t.y+t.height/2-e.height/2}function iM(t,e,n){return iC(t.x+t.width,iB(t,e),n.east(),ut(),"east",i_(t,{left:0}),uo)}function iF(t,e,n){return iC(t.x-e.width,iB(t,e),n.west(),ue(),"west",i_(t,{right:1}),uo)}function iI(){return[ur,ui,uu,ua,us,uc,iM,iF]}function iR(){return[ui,ur,ua,uu,us,uc,iM,iF]}function iN(){return[uu,ua,ur,ui,uc,us]}function iP(){return[ua,uu,ui,ur,uc,us]}function iV(){return[ur,ui,uu,ua,us,uc]}function iH(){return[ui,ur,ua,uu,us,uc]}function iL(t,e,n){return rU(function(o,r){n(o,t,e)})}function iz(t){return{key:t,value:void 0}}function iU(t){var e,n,o,r,i,u,a=nM("Creating behaviour: "+t.name,um,t);return e=a.fields,n=a.name,o=a.active,r=a.apis,i=a.extra,u=a.state,ud(nk(e),nX(n,[nW("config",nk(e))]),n,o,r,i,u)}function ij(t){var e=nM("Creating behaviour: "+t.name,ug,t),n=nF(e.branchKey,e.branches),o=e.name,r=e.active,i=e.apis,u=e.extra,a=e.state,c=nX(o,[nW("config",n)]);return ud(n,c,o,r,i,u,a)}function iW(){return tE.fromDom(document)}function iG(t){return t.dom.focus()}function iX(t){var e=eK(t).dom;return t.dom===e.activeElement}function iY(t){return void 0===t&&(t=iW()),tg.from(t.dom.activeElement).map(tE.fromDom)}function iq(t){return iY(eK(t)).filter(function(e){return t.dom.contains(e.dom)})}function iK(t,e){var n=eK(e),o=iY(n).bind(function(t){var n;return tP(t,e)?tg.some(e):(n=function(e){for(var o=0;o<e.childNodes.length;o++){var r=tE.fromDom(e.childNodes[o]);if(tP(t,r))return tg.some(r);var i=n(e.childNodes[o]);if(i.isSome())return i}return tg.none()})(e.dom)}),i=t(e);return o.each(function(t){iY(n).filter(function(e){return tP(e,t)}).fold(function(){iG(t)},r)}),i}function iJ(t,e,n,o,r){function i(t){return t+"px"}return{position:t,left:e.map(i),top:n.map(i),right:o.map(i),bottom:r.map(i)}}function i$(t,e){t8(t,C(C({},e),{position:tg.some(e.position)}))}function iQ(t,e,n,o,r,i){var u=e.rect,a=u.x-n,c=u.y-o,s=r-(a+u.width),l=i-(c+u.height),f=tg.some(a),d=tg.some(c),m=tg.some(s),g=tg.some(l),p=tg.none();return e.direction.fold(function(){return iJ(t,f,d,p,p)},function(){return iJ(t,p,d,m,p)},function(){return iJ(t,f,p,p,g)},function(){return iJ(t,p,p,m,g)},function(){return iJ(t,f,d,p,p)},function(){return iJ(t,f,p,p,g)},function(){return iJ(t,f,d,p,p)},function(){return iJ(t,p,d,m,p)})}function iZ(t,e){return t.fold(function(){var t=e.rect;return iJ("absolute",tg.some(t.x),tg.some(t.y),tg.none(),tg.none())},function(t,n,o,r){return iQ("absolute",e,t,n,o,r)},function(t,n,o,r){return iQ("fixed",e,t,n,o,r)})}function i0(t,e){var n=b(ek,e),o=t.fold(n,n,function(){var t=ey();return ek(e).translate(-t.left,-t.top)}),r=el(e),i=eu(e);return nn(o.left,o.top,r,i)}u(ot(ip().concat(ig())));var i1=u(ot(ip())),i2=u(nL("initSize",[nR("numColumns"),nR("numRows")])),i5=nZ([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),i3=i5.southeast,i9=i5.southwest,i4=i5.northeast,i6=i5.northwest,i8=i5.south,i7=i5.north,ut=i5.east,ue=i5.west,un=function(t,e,n){return Math.min(Math.max(t,e),n)},uo="layout",ur=function(t,e,n){return iC(t.x,iA(t),n.southeast(),i3(),"southeast",i_(t,{left:1,top:3}),uo)},ui=function(t,e,n){return iC(iE(t,e),iA(t),n.southwest(),i9(),"southwest",i_(t,{right:0,top:3}),uo)},uu=function(t,e,n){return iC(t.x,iD(t,e),n.northeast(),i4(),"northeast",i_(t,{left:1,bottom:2}),uo)},ua=function(t,e,n){return iC(iE(t,e),iD(t,e),n.northwest(),i6(),"northwest",i_(t,{right:0,bottom:2}),uo)},uc=function(t,e,n){return iC(iT(t,e),iD(t,e),n.north(),i7(),"north",i_(t,{bottom:2}),uo)},us=function(t,e,n){return iC(iT(t,e),iA(t),n.south(),i8(),"south",i_(t,{top:3}),uo)},ul=Object.freeze({__proto__:null,events:function(t){return om([oO(rv(),function(e,n){var o=t.channels,r=tw(o);ty(n.universal?r:R(r,function(t){return tb(n.channels,t)}),function(t){var r=o[t],i=r.schema,u=nM("channel["+t+"] data\nReceiver: "+oF(e.element),i,n.data);r.onReceive(e,u)})})])}}),uf=[nN("channels",nD(na.value,nk([iw("onReceive"),nY("schema",on())])))],ud=function(t,e,n,o,r,i,a){function c(t){return to(t,n)?t[n]():tg.none()}var s=Z(r,function(t,e){var o,r,i,a,c,s,l,f;return i=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var a=[t].concat(e);return t.config({name:u(n)}).fold(function(){throw Error("We could not find any behaviour configuration for: "+n+". Using API: "+r)},function(e){var n=Array.prototype.slice.call(a,1);return o.apply(void 0,[t,e.config,e.state].concat(n))})},a=r=e,s=(c=(o=t).toString()).indexOf(")")+1,l=c.indexOf("("),f=c.substring(l+1,s-1).split(/,\s*/),i.toFunctionAnnotation=function(){return{name:a,parameters:rQ(f.slice(0,1).concat(f.slice(3)))}},i}),l=Z(i,oP),f=C(C(C({},l),s),{revoke:b(iz,n),config:function(e){var o=nM(n+"-config",t,e);return{key:n,value:{config:o,me:f,configAsRaw:tB(function(){return nM(n+"-config",t,e)}),initialConfig:e,state:a}}},schema:u(e),exhibit:function(t,e){return tO(c(t),tn(o,"exhibit"),function(t,n){return n(e,t.config,t.state)}).getOrThunk(function(){return oz({})})},name:u(n),handlers:function(t){return c(t).map(function(t){return tn(o,"events").getOr(function(){return{}})(t.config,t.state)}).getOr({})}});return f},um=nk([nR("fields"),nR("name"),nY("active",{}),nY("apis",{}),nY("state",r0),nY("extra",{})]),ug=nk([nR("branchKey"),nR("branches"),nR("name"),nY("active",{}),nY("apis",{}),nY("state",r0),nY("extra",{})]),up=u(void 0),uh=iU({fields:uf,name:"receiving",active:ul}),uv=Object.freeze({__proto__:null,exhibit:function(t,e){return oz({classes:[],styles:e.useFixed()?{}:{position:"relative"}})}}),ub=nZ([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),uy=function(t,e,n){var o=e3(e,n);return t.fold(u(o),u(o),function(){var t=ey();return o.translate(-t.left,-t.top)})};function ux(t){function e(){return n.get().each(t)}var n=nQ(tg.none());return{clear:function(){e(),n.set(tg.none())},isSet:function(){return n.get().isSome()},get:function(){return n.get()},set:function(t){e(),n.set(tg.some(t))}}}function uw(){return ux(function(t){return t.destroy()})}function uS(){return ux(function(t){return t.unbind()})}function uk(){var t=ux(r);return C(C({},t),{on:function(e){return t.get().each(e)}})}function uC(t,e,n){return ed(t,e,uN,n,!1)}function uO(t,e,n){return ed(t,e,uN,n,!0)}function u_(t,e){t4(t,"max-height",e2.max(t,Math.floor(e),["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"])+"px")}function uT(t,e,n){return void 0===t[e]?n:t[e]}function uE(t,e,n,o){function r(t){return tn(n,t).getOr([])}function i(t,e,n){var o=W(uU,n);return{offset:e3(t,e),classesOn:z(n,r),classesOff:z(o,r)}}var u=t*(o=void 0===o?1:o),a=e*o;return{southeast:function(){return i(-t,e,["top","alignLeft"])},southwest:function(){return i(t,e,["top","alignRight"])},south:function(){return i(-t/2,e,["top","alignCentre"])},northeast:function(){return i(-t,-e,["bottom","alignLeft"])},northwest:function(){return i(t,-e,["bottom","alignRight"])},north:function(){return i(-t/2,-e,["bottom","alignCentre"])},east:function(){return i(t,-e/2,["valignCentre","left"])},west:function(){return i(-t,-e/2,["valignCentre","right"])},insetNortheast:function(){return i(u,a,["top","alignLeft","inset"])},insetNorthwest:function(){return i(-u,a,["top","alignRight","inset"])},insetNorth:function(){return i(-u/2,a,["top","alignCentre","inset"])},insetSoutheast:function(){return i(u,-a,["bottom","alignLeft","inset"])},insetSouthwest:function(){return i(-u,-a,["bottom","alignRight","inset"])},insetSouth:function(){return i(-u/2,-a,["bottom","alignCentre","inset"])},insetEast:function(){return i(-u,-a/2,["valignCentre","right","inset"])},insetWest:function(){return i(u,-a/2,["valignCentre","left","inset"])}}}function uD(){return uE(0,0,{})}function uA(t,e){return function(n){return"rtl"===uj(n)?e:t}}ub.none;var uB,uM=ub.relative,uF=ub.fixed,uI="data-alloy-placement",uR=nZ([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),uN=S,uP=["top","bottom","right","left"],uV="data-alloy-transition-timer",uH=u(function(t,e){u_(t,e),t6(t,{"overflow-x":"hidden","overflow-y":"auto"})}),uL=u(function(t,e){u_(t,e)}),uz=function(t,e,n,o){var r,i=function(t,e,n,o){en(e,"max-height"),en(e,"max-width");var r,i,c,s,l={width:el(e),height:eu(e)};return r=o.preference,i=o.bounds,c=l.width,s=l.height,P(r,function(t,e){var n=b(f,e);return t.fold(u(t),n)},uR.nofit({rect:t,maxHeight:l.height,maxWidth:l.width,direction:i3(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:t.y},-1,-1,!1)).fold(a,a);function f(o,r,a,f,d){var m=function(t,e,n,o){var r,i,a,c,s,l,f,d,m,g,p,h,v,b,y,x,w,S,k,C,O,_,T,E,D,A,B,M,F,I=t.bubble,R=I.offset,N=(B=t.restriction,nn(M=q("left",o.x),F=q("top",o.y),q("right",o.right)-M,q("bottom",o.bottom)-F)),P=t.x+R.left,V=t.y+R.top,H=nn(P,V,e,n),L=(r=N.x,i=N.y,a=N.right,c=N.bottom,s=H.x,l=H.y,f=H.right,d=H.bottom,{originInBounds:r<=s&&s<=a&&i<=l&&l<=c,sizeInBounds:f<=a&&r<=f&&d<=c&&i<=d,visibleW:Math.min(H.width,r<=s?a-s:f-r),visibleH:Math.min(H.height,i<=l?c-l:d-i)}),z=L.visibleW,U=L.visibleH,j=L.originInBounds&&L.sizeInBounds,W=j?H:(m=N.x,g=N.y,p=N.right,h=N.bottom,v=H.x,b=H.y,y=H.width,x=H.height,w=Math.max(m,p-y),S=Math.max(g,h-x),nn(k=un(v,m,w),C=un(b,g,S),Math.min(k+y,p)-k,Math.min(C+x,h)-C)),G=0<W.width&&0<W.height,X=(O=t.direction,_=u(W.bottom-o.y),T=u(o.bottom-W.y),E=O.fold(T,T,_,_,T,_,T,T),D=u(W.right-o.x),A=u(o.right-W.x),{maxWidth:O.fold(A,D,A,D,A,A,A,D),maxHeight:E}),Y={rect:W,maxHeight:X.maxHeight,maxWidth:X.maxWidth,direction:t.direction,placement:t.placement,classes:{on:I.classesOn,off:I.classesOff},layout:t.label,testY:V};function q(t,e){return B[t].map(function(n){var r="top"===t||"bottom"===t,i=r?R.top:R.left,u=("left"===t||"top"===t?Math.max:Math.min)(n,e)+i;return r?un(u,o.y,o.bottom):un(u,o.x,o.right)}).getOr(e)}return j||t.alwaysFit?uR.fit(Y):uR.nofit(Y,z,U,G)}(o(t,l,n,e,i),c,s,i);return m.fold(u(m),function(t,e,n,o){return(d===o?f<n||a<e:!d&&o)?m:uR.nofit(r,a,f,d)})}}(t,e,n,o),l=iZ(o.origin,i);return o.transition.each(function(t){(function(t,e,n,o,r,i){var u,a,l,f=i.exists(function(t){var e=o.mode;return"all"===e||t[e]!==r[e]});function d(t){return parseFloat(t).toFixed(3)}f||U(o.classes,function(e){return oq(t,e)})?(t4(t,"position",n.position),u=i0(e,t),a=iZ(e,C(C({},r),{rect:u})),te(l=G(uP,function(t){return a[t]}),function(t,e){var o,r=n[e].map(d),i=t.map(d);return!tO(r,i,o=void 0===o?c:o).getOr(r.isNone()&&i.isNone())}).isSome()&&(t8(t,l),f&&(oK(t,o.classes),t1(t,uV).each(function(e){clearTimeout(parseInt(e,10)),t5(t,uV)}),function(t,e){function n(e){var n,o=null!==(n=e.raw.pseudoElement)&&void 0!==n?n:"";return tP(e.target,t)&&!ts(o)&&tb(uP,e.raw.propertyName)}function o(o){var r;(null==o||n(o))&&(a.clear(),c.clear(),(null==(r=null==o?void 0:o.raw.type)||r===rl())&&(clearTimeout(i),t5(t,uV),oJ(t,e.classes)))}function r(){a.set(uC(t,rl(),o)),c.set(uC(t,rs(),o))}var i,u,a=uS(),c=uS();"ontransitionstart"in t.dom?u=uC(t,rf(),function(t){n(t)&&(u.unbind(),r())}):r();var l,f=(l=d("transition-delay"),P(d("transition-duration"),function(t,e,n){return Math.max(t,m(l[n])+m(e))},0));function d(e){var n=t7(t,e);return R(s(n)?n.split(/\s*,\s*/):[],ts)}function m(t){if(s(t)&&/^[\d.]+/.test(t)){var e=parseFloat(t);return t_(t,"ms")?e:1e3*e}return 0}requestAnimationFrame(function(){tQ(t,uV,i=setTimeout(o,f+17))})}(t,o)),eo(t))):oJ(t,o.classes)})(e,o.origin,l,t,i,o.lastPlacement)}),i$(e,l),tQ(e,uI,i.placement),oJ(e,(r=i.classes).off),oK(e,r.on),(0,o.maxHeightFunction)(e,i.maxHeight),(0,o.maxWidthFunction)(e,i.maxWidth),{layout:i.layout,placement:i.placement}},uU=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],uj=function(t){return"rtl"===t7(t,"direction")?"rtl":"ltr"};function uW(t){return it(t,function(t){return eA(t)&&t0(t,"data-alloy-vertical-dir")===uB.BottomToTop})}function uG(){return nX("layouts",[nR("onLtr"),nR("onRtl"),nj("onBottomLtr"),nj("onBottomRtl")])}function uX(t,e,n,o,r,i,u){var a=u.map(uW).getOr(!1),c=e.layouts.map(function(e){return e.onLtr(t)}),s=e.layouts.map(function(e){return e.onRtl(t)});return uA(a?e.layouts.bind(function(e){return e.onBottomLtr.map(function(e){return e(t)})}).or(c).getOr(r):c.getOr(n),a?e.layouts.bind(function(e){return e.onBottomRtl.map(function(e){return e(t)})}).or(s).getOr(i):s.getOr(o))(t)}function uY(t){return t.fold(a,function(t,e,n){return t.translate(-e,-n)})}function uq(t){return t.fold(a,a)}function uK(t){return P(t,function(t,e){return t.translate(e.left,e.top)},e3(0,0))}function uJ(t,e,n){var o,r=ey(tH(t.element));return u7((o=tU(n.root).dom,tg.from(o.frameElement).map(tE.fromDom).filter(function(e){return tP(tH(e),tH(t.element))}).map(ec).getOr(r)),r.left,r.top)}function u$(t,e,n,o){var r=u8(e3(t,e));return tg.some({point:r,width:n,height:o})}function uQ(t,e,n,o,r){return t.map(function(t){var i=[e,t.point],u=o.fold(function(){return uK(F(i,uq))},function(){return uK(F(i,uq))},function(){return uK(F(i,uY))}),c={x:u.left,y:u.top,width:t.width,height:t.height},s=(n.showAbove?iN:iV)(),l=(n.showAbove?iP:iH)(),f=uX(r,n,s,l,s,l,tg.none());return a({anchorBox:c,bubble:n.bubble.getOr(uD()),overrides:n.overrides,layouts:f,placer:tg.none()})})}function uZ(t,e,n){var o=t.document.createRange();return e.fold(function(t){o.setStartBefore(t.dom)},function(t,e){o.setStart(t.dom,e)},function(t){o.setStartAfter(t.dom)}),n.fold(function(t){o.setEndBefore(t.dom)},function(t,e){o.setEnd(t.dom,e)},function(t){o.setEndAfter(t.dom)}),o}function u0(t,e,n,o,r){var i=t.document.createRange();return i.setStart(e.dom,n),i.setEnd(o.dom,r),i}function u1(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}}function u2(t,e,n){return e(tE.fromDom(n.startContainer),n.startOffset,tE.fromDom(n.endContainer),n.endOffset)}function u5(t,e){var n,o;return((n=(o=e.match({domRange:function(t){return{ltr:u(t),rtl:tg.none}},relative:function(e,n){return{ltr:tB(function(){return uZ(t,e,n)}),rtl:tB(function(){return tg.some(uZ(t,n,e))})}},exact:function(e,n,o,r){return{ltr:tB(function(){return u0(t,e,n,o,r)}),rtl:tB(function(){return tg.some(u0(t,o,r,e,n))})}}})).ltr()).collapsed?o.rtl().filter(function(t){return!1===t.collapsed}).map(function(t){return au.rtl(tE.fromDom(t.endContainer),t.endOffset,tE.fromDom(t.startContainer),t.startOffset)}).getOrThunk(function(){return u2(0,au.ltr,n)}):u2(0,au.ltr,n)).match({ltr:function(e,n,o,r){var i=t.document.createRange();return i.setStart(e.dom,n),i.setEnd(o.dom,r),i},rtl:function(e,n,o,r){var i=t.document.createRange();return i.setStart(o.dom,r),i.setEnd(e.dom,n),i}})}(uB=uB||{}).TopToBottom="toptobottom",uB.BottomToTop="bottomtotop";var u3="data-alloy-vertical-dir",u9=[nR("hotspot"),nj("bubble"),nY("overrides",{}),uG(),ik("placement",function(t,e,n){var o=i0(n,e.hotspot.element),r=uX(t.element,e,iV(),iH(),iN(),iP(),tg.some(e.hotspot.element));return tg.some(a({anchorBox:o,bubble:e.bubble.getOr(uD()),overrides:e.overrides,layouts:r,placer:tg.none()}))})],u4=[nR("x"),nR("y"),nY("height",0),nY("width",0),nY("bubble",uD()),nY("overrides",{}),uG(),ik("placement",function(t,e,n){var o=uy(n,e.x,e.y),r=nn(o.left,o.top,e.width,e.height),i=uX(t.element,e,iI(),iR(),iI(),iR(),tg.none());return tg.some(a({anchorBox:r,bubble:e.bubble,overrides:e.overrides,layouts:i,placer:tg.none()}))})],u6=nZ([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),u8=u6.screen,u7=u6.absolute,at=[nR("node"),nR("root"),nj("bubble"),uG(),nY("overrides",{}),nY("showAbove",!1),ik("placement",function(t,e,n){var o=uJ(t,0,e);return e.node.filter(eQ).bind(function(r){var i=r.dom.getBoundingClientRect(),u=u$(i.left,i.top,i.width,i.height),a=e.node.getOr(t.element);return uQ(u,o,e,n,a)})})],ae=function(t,e,n,o){return{start:t,soffset:e,finish:n,foffset:o}},an=nZ([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ao=(an.before,an.on,an.after,function(t){return t.fold(a,a,a)}),ar=nZ([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ai={domRange:ar.domRange,relative:ar.relative,exact:ar.exact,exactFromRange:function(t){return ar.exact(t.start,t.soffset,t.finish,t.foffset)},getWin:function(t){return tU(t.match({domRange:function(t){return tE.fromDom(t.startContainer)},relative:function(t,e){return ao(t)},exact:function(t,e,n,o){return t}}))},range:ae},au=nZ([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);function aa(t){return cE.getOption(t)}function ac(t,e){var n;return tN(n=void 0===t?document:t.dom)?[]:F(n.querySelectorAll(e),tE.fromDom)}function as(t){if(0<t.rangeCount){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return tg.some(ae(tE.fromDom(e.startContainer),e.startOffset,tE.fromDom(n.endContainer),n.endOffset))}return tg.none()}function al(t){if(null===t.anchorNode||null===t.focusNode)return as(t);var e,n,o,r,i=tE.fromDom(t.anchorNode),u=tE.fromDom(t.focusNode);return e=t.anchorOffset,n=t.focusOffset,(o=tH(i).dom.createRange()).setStart(i.dom,e),o.setEnd(u.dom,n),r=tP(i,u)&&e===n,o.collapsed&&!r?tg.some(ae(i,t.anchorOffset,u,t.focusOffset)):as(t)}function af(t,e){var n,o,r=(n=u5(t,e)).getClientRects();return 0<(o=0<r.length?r[0]:n.getBoundingClientRect()).width||0<o.height?tg.some(o).map(u1):tg.none()}function ad(t,e){return{element:t,offset:e}}function am(t,e){return(eB(t)?ad:function(t,e){var n=tG(t);if(0===n.length)return ad(t,e);if(e<n.length)return ad(n[e],0);var o=n[n.length-1];return ad(o,(eB(o)?cE.get(o):tG(o)).length)})(t,e)}function ag(t,e){return e.getSelection.getOrThunk(function(){return function(){return tg.from(t.getSelection()).filter(function(t){return 0<t.rangeCount}).bind(al)}})().map(function(t){var e=am(t.start,t.soffset),n=am(t.finish,t.foffset);return ai.range(e.element,e.offset,n.element,n.offset)})}function ap(t,e){return t.y-e.height+t.height}function ah(t,e,n){return iC(t.x+t.width,t.y,n.southeast(),i3(),"southeast",i_(t,{left:0,top:2}),cB)}function av(t,e,n){return iC(t.x-e.width,t.y,n.southwest(),i9(),"southwest",i_(t,{right:1,top:2}),cB)}function ab(t,e,n){return iC(t.x+t.width,ap(t,e),n.northeast(),i4(),"northeast",i_(t,{left:0,bottom:3}),cB)}function ay(t,e,n){return iC(t.x-e.width,ap(t,e),n.northwest(),i6(),"northwest",i_(t,{right:1,bottom:3}),cB)}function ax(t,e,n,o,i,u,a){var c,s,l,f,d,m,g,p,h={anchorBox:n.anchorBox,origin:e};return c=i.element,s=n.bubble,l=n.layouts,d=uT(f=n.overrides,"maxHeightFunction",uH()),m=uT(f,"maxWidthFunction",r),g=h.anchorBox,p=h.origin,uz(g,c,s,{bounds:o.fold(function(){return p.fold(nr,nr,nn)},function(t){return p.fold(t,t,function(){var e=t(),n=uy(p,e.x,e.y);return nn(n.left,n.top,e.width,e.height)})}),origin:p,preference:l,maxHeightFunction:d,maxWidthFunction:m,lastPlacement:u,transition:a})}function aw(t,e){e8(t.element,e.element)}function aS(t,e){var n=t.components();ty(t.components(),function(t){return e7(t.element)}),ev(t.element),t.syncComponents(),ty(W(n,e),function(e){cV(e),t.getSystem().removeFromWorld(e)}),ty(e,function(e){e.getSystem().isConnected()?aw(t,e):(t.getSystem().addToWorld(e),aw(t,e),eQ(t.element)&&cH(e)),t.syncComponents()})}function ak(t){cV(t),e7(t.element),t.getSystem().removeFromWorld(t)}function aC(t){var e=tj(t.element).bind(function(e){return t.getSystem().getByDom(e).toOptional()});ak(t),e.each(function(t){t.syncComponents()})}function aO(t){ty(t.components(),ak),ev(t.element),t.syncComponents()}function a_(t){ty(tG(t.element),function(e){t.getByDom(e).each(cV)}),e7(t.element)}function aT(t,e,n,o){n.get().each(function(e){aO(t)}),cL(e.getAttachPoint(t),t,e8);var r=t.getSystem().build(o);return cL(t,r,e8),n.set(r),r}function aE(t,e,n,o){var r=aT(t,e,n,o);return e.onOpen(t,r),r}function aD(t,e,n){n.get().each(function(o){aO(t),aC(t),e.onClose(t,o),n.clear()})}function aA(t,e,n){return n.isOpen()}function aB(t){var e=nM("Dismissal",cq,t),n={};return n[cG()]={schema:nk([nR("target")]),onReceive:function(t,n){cW.isOpen(t)&&(cW.isPartOf(t,n.target)||e.isExtraPart(t,n.target)||e.fireEventInstead.fold(function(){return cW.close(t)},function(e){return oy(t,e.event)}))}},n}function aM(t){var e=nM("Reposition",cK,t),n={};return n[cX()]={onReceive:function(t){cW.isOpen(t)&&e.fireEventInstead.fold(function(){return e.doReposition(t)},function(e){return oy(t,e.event)})}},n}function aF(t,e,n){e.store.manager.onLoad(t,e,n)}function aI(t,e,n){e.store.manager.onUnload(t,e,n)}function aR(){var t=nQ(null);return r1({set:t.set,get:t.get,isNotSet:function(){return null===t.get()},clear:function(){t.set(null)},readState:function(){return{mode:"memory",value:t.get()}}})}function aN(){var t=nQ({}),e=nQ({});return r1({readState:function(){return{mode:"dataset",dataByValue:t.get(),dataByText:e.get()}},lookup:function(n){return tn(t.get(),n).orThunk(function(){return tn(e.get(),n)})},update:function(n){var o=t.get(),r=e.get(),i={},u={};ty(n,function(t){tn(i[t.value]=t,"meta").each(function(e){tn(e,"text").each(function(e){u[e]=t})})}),t.set(C(C({},o),i)),e.set(C(C({},r),u))},clear:function(){t.set({}),e.set({})}})}function aP(t,e,n,o){var r=e.store;n.update([o]),r.setValue(t,o),e.onSetValue(t,o)}function aV(t,e){return nq(t,{},ot(F(e,function(e){var n,o;return n=e.name(),o="Cannot configure "+e.name()+" for "+t,ol(n,n,nh(),nx(function(t){return n2("The field: "+n+" is forbidden. "+o)}))}).concat([of("dump",a)])))}function aH(t,e){return C(C({},om(e)),t.dump)}function aL(t){return tC(t,"uiType")}function az(t){return t.fold(tg.some,tg.none,tg.some,tg.some)}function aU(t){function e(t){return t.name}return t.fold(e,e,e,e)}function aj(t,e){return function(n){return t(nM("Converting part type",e,n))}}function aW(t,e,n,o){return n4(e.defaults(t,n,o),n,{uid:t.partUids[e.name]},e.overrides(t,n,o))}function aG(t,e){var n={};return ty(e,function(e){az(e).each(function(e){var o=sh(t,e.pname);n[e.name]=function(n){var r=nM("Part: "+e.name+" in "+t,ot(e.schema),n);return C(C({},o),{config:n,validated:r})}})}),n}function aX(t,e,n){return{uiType:c6(),owner:t,name:e,config:n,validated:{}}}function aY(t){return z(t,function(t){return t.fold(tg.none,tg.some,tg.none,tg.none).map(function(t){return nL(t.name,t.schema.concat([of(sg(),a)]))}).toArray()})}function aq(t){return F(t,aU)}function aK(t,e,n){var o,r;return o={},r={},ty(n,function(t){t.fold(function(t){o[t.pname]=c9(!0,function(e,n,o){return t.factory.sketch(aW(e,t,n,o))})},function(t){var n=e.parts[t.name];r[t.name]=u(t.factory.sketch(aW(e,t,n[sg()]),n))},function(t){o[t.pname]=c9(!1,function(e,n,o){return t.factory.sketch(aW(e,t,n,o))})},function(t){o[t.pname]=c4(!0,function(e,n,o){return F(e[t.name],function(n){return t.factory.sketch(n4(t.defaults(e,n,o),n,t.overrides(e,n)))})})})}),{internals:u(o),externals:u(r)}}function aJ(t,e,n){var o,r,i,a;return o=tg.some(t),r=e.components,i=Z(n,function(t,e){var n;return n=!1,{name:u(e),required:function(){return t.fold(function(t,e){return t},function(t,e){return t})},used:function(){return n},replace:function(){if(n)throw Error("Trying to use the same placeholder more than once: "+e);return n=!0,t}}}),a=z(r,function(t){return c3(o,e,t,i)}),Q(i,function(t){if(!1===t.used()&&t.required())throw Error("Placeholder: "+t.name()+" was not found in components list\nNamespace: "+o.getOr("none")+"\nComponents: "+JSON.stringify(e.components,null,2))}),a}function a$(t,e,n){var o=e.partUids[n];return t.getSystem().getByUid(o).toOptional()}function aQ(t,e,n){return a$(t,e,n).getOrDie("Could not find part: "+n)}function aZ(t,e,n){var o={},r=e.partUids,i=t.getSystem();return ty(n,function(t){o[t]=u(i.getByUid(r[t]))}),o}function a0(t,e){var n=t.getSystem();return Z(e.partUids,function(t,e){return u(n.getByUid(t))})}function a1(t){return tw(t.partUids)}function a2(t,e,n){var o={},r=e.partUids,i=t.getSystem();return ty(n,function(t){o[t]=u(i.getByUid(r[t]).getOrDie())}),o}function a5(t,e){return om(F(aq(e),function(e){return{key:e,value:t+"-"+e}}))}function a3(t){return ol("partUids","partUids",nv(function(e){return a5(e.uid,t)}),on())}function a9(t,e,n,o,r){return nM(t+" [SpecSchema]",nk((0<o.length?[nL("parts",o)]:[]).concat([nR("uid"),nY("dom",{}),nY("components",[]),of("originalSpec",a),nY("debug.sketcher",{})]).concat(r).concat(e)),n)}function a4(t,e,n,o,r){var i=sb(r),u=a9(t,e,i,aY(n),[a3(n)]),a=aK(0,u,n);return o(u,aJ(t,u,a.internals()),i,a.externals())}function a6(t){var e=nM("Sketcher for "+t.name,sy,t),n=Z(e.apis,oH),o=Z(e.extraApis,oP);return C(C({name:e.name,configFields:e.configFields,sketch:function(t){var n,o,r;return n=e.name,o=e.configFields,(0,e.factory)(a9(n,o,r=sb(t),[],[]),r)}},n),o)}function a8(t){var e=nM("Sketcher for "+t.name,sx,t),n=aG(e.name,e.partFields),o=Z(e.apis,oH),r=Z(e.extraApis,oP);return C(C({name:e.name,partFields:e.partFields,configFields:e.configFields,sketch:function(t){return a4(e.name,e.configFields,e.partFields,e.factory,t)},parts:n},o),r)}function a7(t){return"input"===tD(t)&&"radio"!==t0(t,"type")||"textarea"===tD(t)}function ct(t,e,n){(e.disabled()?sC:sO)(t,e)}function ce(t,e){return!0===e.useNative&&tb(sk,tD(t.element))}function cn(t,e){return ce(t,e)?t2(t.element,"disabled"):"true"===t0(t.element,"aria-disabled")}function co(t,e,n,o){ty(ac(t.element,"."+e.highlightClass),function(n){A(o,function(t){return t.element===n})||(oY(n,e.highlightClass),t.getSystem().getByDom(n).each(function(n){e.onDehighlight(t,n),oy(n,rV())}))})}function cr(t,e,n,o){co(t,e,0,[o]),cw(0,e,0,o)||(oX(o.element,e.highlightClass),e.onHighlight(t,o),oy(o,rP()))}function ci(t,e,n,o){var r=ac(t.element,"."+e.itemClass);return H(r,function(t){return oq(t,e.highlightClass)}).bind(function(e){var n=iO(e,o,0,r.length-1);return t.getSystem().getByDom(r[n]).toOptional()})}function cu(t,e,n){var o=j(t.slice(0,e)),r=j(t.slice(e+1));return V(o.concat(r),n)}function ca(t,e,n){return V(j(t.slice(0,e)),n)}function cc(t,e,n){var o=t.slice(0,e);return V(t.slice(e+1).concat(o),n)}function cs(t,e,n){return V(t.slice(e+1),n)}function cl(t){return function(e){return tb(t,e.raw.which)}}function cf(t){return function(e){return U(t,function(t){return t(e)})}}function cd(t){return!0===t.raw.shiftKey}function cm(t){return!0===t.raw.ctrlKey}function cg(t,e){return{matches:t,classification:e}}function cp(t,e,n){e.exists(function(t){return n.exists(function(e){return tP(e,t)})})||ox(t,rF(),{prevFocus:e,newFocus:n})}function ch(){function t(t){return iq(t.element)}return{get:t,set:function(e,n){var o=t(e);e.getSystem().triggerFocus(n,e.element),cp(e,o,t(e))}}}function cv(){function t(t){return sA.getHighlighted(t).map(function(t){return t.element})}return{get:t,set:function(e,n){var o=t(e);e.getSystem().getByDom(n).fold(r,function(t){sA.highlight(e,t)});var i=t(e);cp(e,o,i)}}}function cb(t,e,n,o,r,i){return cN(t,e,n,o,r,i.map(no))}function cy(t,e,n){var o,r,i=e.getAttachPoint(t);t4(t.element,"position",cP.getMode(i)),r=e.cloakVisibilityAttr,et(t.element,o="visibility").fold(function(){t5(t.element,r)},function(e){tQ(t.element,r,e)}),t4(t.element,o,"hidden")}function cx(t,e,n){var o,r,i=t.element;A(["top","left","right","bottom"],function(t){return et(i,t).isSome()})||en(t.element,"position"),o="visibility",r=e.cloakVisibilityAttr,t1(t.element,r).fold(function(){return en(t.element,o)},function(e){return t4(t.element,o,e)})}function cw(t,e,n,o){return oq(o.element,e.highlightClass)}function cS(t,e,n){return io(t.element,"."+e.itemClass).bind(function(e){return t.getSystem().getByDom(e).toOptional()})}function ck(t,e,n){var o=ac(t.element,"."+e.itemClass);return(0<o.length?tg.some(o[o.length-1]):tg.none()).bind(function(e){return t.getSystem().getByDom(e).toOptional()})}function cC(t,e,n){return ti(F(ac(t.element,"."+e.itemClass),function(e){return t.getSystem().getByDom(e).toOptional()}))}au.ltr,au.rtl;var cO,c_,cT,cE={get:function(t){if(!eB(t))throw Error("Can only get text value of a text node");return cO(t).getOr("")},getOption:cO=function(t){return eB(t)?tg.from(t.dom.nodeValue):tg.none()},set:function(t,e){if(!eB(t))throw Error("Can only set raw text value of a text node");t.dom.nodeValue=e}},cD=["img","br"],cA=[nj("getSelection"),nR("root"),nj("bubble"),uG(),nY("overrides",{}),nY("showAbove",!1),ik("placement",function(t,e,n){var o=tU(e.root).dom,r=uJ(t,0,e);return uQ(ag(o,e).bind(function(t){var e;return(0<(e=u5(o,ai.exactFromRange(t)).getBoundingClientRect()).width||0<e.height?tg.some(e).map(u1):tg.none()).orThunk(function(){var e=tE.fromText("\uFEFF");em(t.start,e);var n=af(o,ai.exact(e,0,e,1));return e7(e),n}).bind(function(t){return u$(t.left,t.top,t.width,t.height)})}),r,e,n,ag(o,e).bind(function(t){return eA(t.start)?tg.some(t.start):tj(t.start)}).getOr(t.element))})],cB="link-layout",cM=nF("type",{selection:cA,node:at,hotspot:u9,submenu:[nR("item"),uG(),nY("overrides",{}),ik("placement",function(t,e,n){var o=i0(n,e.item.element),r=uX(t.element,e,[ah,av,ab,ay],[av,ah,ay,ab],[ah,av,ab,ay],[av,ah,ay,ab],tg.none());return tg.some(a({anchorBox:o,bubble:uD(),overrides:e.overrides,layouts:r,placer:tg.none()}))})],makeshift:u4}),cF=[nU("classes",or),nK("mode","all",["all","layout","placement"])],cI=[nY("useFixed",w),nj("getBounds")],cR=[nN("anchor",cM),nX("transition",cF)],cN=function(t,e,n,o,r,i){var a=nM("placement.info",ot(cR),r),c=a.anchor,s=o.element,l=n.get(o.uid);iK(function(){t4(s,"position","fixed");var r=et(s,"visibility");t4(s,"visibility","hidden");var f,d,m,g=e.useFixed()?uF(0,0,(m=document.documentElement).clientWidth,m.clientHeight):(f=ec(t.element),d=t.element.dom.getBoundingClientRect(),uM(f.left,f.top,d.width,d.height)),p=c.placement,h=i.map(u).or(e.getBounds);p(t,c,g).each(function(e){var r=e.placer.getOr(ax)(t,g,e,h,o,l,a.transition);n.set(o.uid,r)}),r.fold(function(){en(s,"visibility")},function(t){t4(s,"visibility",t)}),et(s,"left").isNone()&&et(s,"top").isNone()&&et(s,"right").isNone()&&et(s,"bottom").isNone()&&tr(et(s,"position"),"fixed")&&en(s,"position")},s)},cP=iU({fields:cI,name:"positioning",active:uv,apis:Object.freeze({__proto__:null,position:function(t,e,n,o,r){cb(t,e,n,o,r,tg.none())},positionWithin:cb,positionWithinBounds:cN,getMode:function(t,e,n){return e.useFixed()?"fixed":"absolute"},reset:function(t,e,n,o){var r=o.element;ty(["position","left","right","top","bottom"],function(t){return en(r,t)}),t5(r,uI),n.clear(o.uid)}}),state:Object.freeze({__proto__:null,init:function(){var t={};return r1({readState:function(){return t},clear:function(e){p(e)?delete t[e]:t={}},set:function(e,n){t[e]=n},get:function(e){return tn(t,e)}})}})}),cV=function(t){oy(t,rA()),ty(t.components(),cV)},cH=function(t){ty(t.components(),cH),oy(t,rD())},cL=function(t,e,n){t.getSystem().addToWorld(e),n(t.element,e.element),eQ(t.element)&&cH(e),t.syncComponents()},cz=function(t,e,n){n(t,e.element),ty(tG(e.element),function(t){e.getByDom(t).each(cH)})},cU=Object.freeze({__proto__:null,cloak:cy,decloak:cx,open:aE,openWhileCloaked:function(t,e,n,o,r){cy(t,e),aE(t,e,n,o),r(),cx(t,e)},close:aD,isOpen:aA,isPartOf:function(t,e,n,o){return aA(0,0,n)&&n.get().exists(function(n){return e.isPartOf(t,n,o)})},getState:function(t,e,n){return n.get()},setContent:function(t,e,n,o){return n.get().map(function(){return aT(t,e,n,o)})}}),cj=Object.freeze({__proto__:null,events:function(t,e){return om([oO(rS(),function(n,o){aD(n,t,e)})])}}),cW=iU({fields:[iy("onOpen"),iy("onClose"),nR("isPartOf"),nR("getAttachPoint"),nY("cloakVisibilityAttr","data-precloak-visibility")],name:"sandboxing",active:cj,apis:cU,state:Object.freeze({__proto__:null,init:function(){var t=uk();return r1({readState:u("not-implemented"),isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}})}),cG=u("dismiss.popups"),cX=u("reposition.popups"),cY=u("mouse.released"),cq=nk([nY("isExtraPart",w),nX("fireEventInstead",[nY("event",rB())])]),cK=nk([nX("fireEventInstead",[nY("event",rM())]),nH("doReposition")]),cJ=Object.freeze({__proto__:null,onLoad:aF,onUnload:aI,setValue:function(t,e,n,o){e.store.manager.setValue(t,e,n,o)},getValue:function(t,e,n){return e.store.manager.getValue(t,e,n)},getState:function(t,e,n){return n}}),c$=Object.freeze({__proto__:null,events:function(t,e){return om(t.resetOnDom?[rL(function(n,o){aF(n,t,e)}),rz(function(n,o){aI(n,t,e)})]:[iL(t,e,aF)])}}),cQ=Object.freeze({__proto__:null,memory:aR,dataset:aN,manual:function(){return r1({readState:r})},init:function(t){return t.store.manager.state(t)}}),cZ=[nj("initialValue"),nR("getFallbackEntry"),nR("getDataKey"),nR("setValue"),ik("manager",{setValue:aP,getValue:function(t,e,n){var o=e.store,r=o.getDataKey(t);return n.lookup(r).getOrThunk(function(){return o.getFallbackEntry(r)})},onLoad:function(t,e,n){e.store.initialValue.each(function(o){aP(t,e,n,o)})},onUnload:function(t,e,n){n.clear()},state:aN})],c0=[nR("getValue"),nY("setValue",r),nj("initialValue"),ik("manager",{setValue:function(t,e,n,o){e.store.setValue(t,o),e.onSetValue(t,o)},getValue:function(t,e,n){return e.store.getValue(t)},onLoad:function(t,e,n){e.store.initialValue.each(function(n){e.store.setValue(t,n)})},onUnload:r,state:r0.init})],c1=iU({fields:[nq("store",{mode:"memory"},nF("mode",{memory:[nj("initialValue"),ik("manager",{setValue:function(t,e,n,o){n.set(o),e.onSetValue(t,o)},getValue:function(t,e,n){return n.get()},onLoad:function(t,e,n){e.store.initialValue.each(function(t){n.isNotSet()&&n.set(t)})},onUnload:function(t,e,n){n.clear()},state:aR})],manual:c0,dataset:cZ})),iy("onSetValue"),nY("resetOnDom",!1)],name:"representing",active:c$,apis:cJ,extra:{setValueFrom:function(t,e){var n=c1.getValue(e);c1.setValue(t,n)}},state:cQ}),c2="placeholder",c5=nZ([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),c3=function(t,e,n,o){return(aL(n)&&n.uiType===c2?t.exists(function(t){return t!==n.owner})?c5.single(!0,u(n)):tn(o,n.name).fold(function(){throw Error("Unknown placeholder component: "+n.name+"\nKnown: ["+tw(o)+"]\nNamespace: "+t.getOr("none")+"\nSpec: "+JSON.stringify(n,null,2))},function(t){return t.replace()}):c5.single(!1,u(n))).fold(function(r,i){var u=aL(n)?i(e,n.config,n.validated):i(e),a=z(tn(u,"components").getOr([]),function(n){return c3(t,e,n,o)});return[C(C({},u),{components:a})]},function(t,o){if(aL(n)){var r=o(e,n.config,n.validated);return n.validated.preprocess.getOr(a)(r)}return o(e)})},c9=c5.single,c4=c5.multiple,c6=u(c2),c8=nZ([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),c7=nY("factory",{sketch:a}),st=nY("schema",[]),se=nR("name"),sn=ol("pname","pname",np(function(t){return"<alloy."+oI(t.name)+">"}),on()),so=of("schema",function(){return[nj("preprocess")]}),sr=nY("defaults",u({})),si=nY("overrides",u({})),su=ot([c7,st,se,sn,sr,si]),sa=ot([c7,st,se,sr,si]),sc=ot([c7,st,se,sn,sr,si]),ss=ot([c7,so,se,nR("unit"),sn,sr,si]),sl=aj(c8.required,su),sf=aj(c8.external,sa),sd=aj(c8.optional,sc),sm=aj(c8.group,ss),sg=u("entirety"),sp=Object.freeze({__proto__:null,required:sl,external:sf,optional:sd,group:sm,asNamedPart:az,name:aU,asCommon:function(t){return t.fold(a,a,a,a)},original:sg}),sh=function(t,e){return{uiType:c6(),owner:t,name:e}},sv=Object.freeze({__proto__:null,generate:aG,generateOne:aX,schemas:aY,names:aq,substitutes:aK,components:aJ,defaultUids:a5,defaultUidsSchema:a3,getAllParts:a0,getAllPartNames:a1,getPart:a$,getPartOrDie:aQ,getParts:aZ,getPartsOrDie:a2}),sb=function(t){return tC(t,"uid")?t:C(C({},t),{uid:oI("uid")})},sy=nk([nR("name"),nR("factory"),nR("configFields"),nY("apis",{}),nY("extraApis",{})]),sx=nk([nR("name"),nR("factory"),nR("configFields"),nR("partFields"),nY("apis",{}),nY("extraApis",{})]),sw=Object.freeze({__proto__:null,getCurrent:function(t,e,n){return e.find(t)}}),sS=iU({fields:[nR("find")],name:"composing",apis:sw}),sk=["input","button","textarea","select"],sC=function(t,e,n){e.disableClass.each(function(e){oX(t.element,e)}),(ce(t,e)?function(t){tQ(t.element,"disabled","disabled")}:function(t){tQ(t.element,"aria-disabled","true")})(t),e.onDisabled(t)},sO=function(t,e,n){e.disableClass.each(function(e){oY(t.element,e)}),(ce(t,e)?function(t){t5(t.element,"disabled")}:function(t){tQ(t.element,"aria-disabled","false")})(t),e.onEnabled(t)},s_=Object.freeze({__proto__:null,enable:sO,disable:sC,isDisabled:cn,onLoad:ct,set:function(t,e,n,o){(o?sC:sO)(t,e)}}),sT=Object.freeze({__proto__:null,exhibit:function(t,e){return oz({classes:e.disabled()?e.disableClass.toArray():[]})},events:function(t,e){return om([ok(rb(),function(e,n){return cn(e,t)}),iL(t,e,ct)])}}),sE=iU({fields:[n$("disabled",w),nY("useNative",!0),nj("disableClass"),iy("onDisabled"),iy("onEnabled")],name:"disabling",active:sT,apis:s_}),sD=Object.freeze({__proto__:null,dehighlightAll:function(t,e,n){return co(t,e,0,[])},dehighlight:function(t,e,n,o){cw(0,e,0,o)&&(oY(o.element,e.highlightClass),e.onDehighlight(t,o),oy(o,rV()))},highlight:cr,highlightFirst:function(t,e,n){cS(t,e).each(function(n){cr(t,e,0,n)})},highlightLast:function(t,e,n){ck(t,e).each(function(n){cr(t,e,0,n)})},highlightAt:function(t,e,n,o){var r;r=ac(t.element,"."+e.itemClass),tg.from(r[o]).fold(function(){return na.error(Error("No element found with index "+o))},t.getSystem().getByDom).fold(function(t){throw t},function(n){cr(t,e,0,n)})},highlightBy:function(t,e,n,o){V(cC(t,e),o).each(function(n){cr(t,e,0,n)})},isHighlighted:cw,getHighlighted:function(t,e,n){return io(t.element,"."+e.highlightClass).bind(function(e){return t.getSystem().getByDom(e).toOptional()})},getFirst:cS,getLast:ck,getPrevious:function(t,e,n){return ci(t,e,0,-1)},getNext:function(t,e,n){return ci(t,e,0,1)},getCandidates:cC}),sA=iU({fields:[nR("highlightClass"),nR("itemClass"),iy("onHighlight"),iy("onDehighlight")],name:"highlighting",apis:sD}),sB=[9],sM=[13],sF=[27],sI=[32],sR=[37],sN=[38],sP=[39],sV=[40],sH=y(cd);function sL(t,e,n,o,r){function i(t,e,n,o,r){var i=n(t,e,o,r),u=e.event;return V(i,function(t){return t.matches(u)}).map(function(t){return t.classification}).bind(function(n){return n(t,e,o,r)})}var u={schema:function(){return t.concat([nY("focusManager",ch()),nq("focusInside","onFocus",nE(function(t){return tb(["onFocus","onEnterOrSpace","onApi"],t)?na.value(t):na.error("Invalid value for focusInside")})),ik("handler",u),ik("state",e),ik("sendFocusIn",r)])},processKey:i,toEvents:function(t,e){var u=t.focusInside!==c_.OnFocusMode?tg.none():r(t).map(function(n){return oO(rg(),function(o,r){n(o,t,e),r.stop()})}),a=[oO(rr(),function(o,u){i(o,u,n,t,e).fold(function(){var n=cl(sI.concat(sM))(u.event);t.focusInside===c_.OnEnterOrSpaceMode&&n&&oh(o,u)&&r(t).each(function(n){n(o,t,e),u.stop()})},function(t){u.stop()})}),oO(ri(),function(n,r){i(n,r,o,t,e).each(function(t){r.stop()})})];return om(u.toArray().concat(a))}};return u}function sz(t){function e(t,e){return 0<ei(t.visibilitySelector.bind(function(t){return ir(e,t)}).getOr(e))}function n(t,n,o){var r=R(ac(t.element,n.selector),function(t){return e(n,t)});tg.from(r[n.firstTabstop]).each(function(e){n.focusManager.set(t,e)})}function o(t,n,o,r){var i=ac(t.element,o.selector);return o.focusManager.get(t).bind(function(t){return ir(t,o.selector)}).bind(function(n){return H(i,b(tP,n)).bind(function(n){return r(i,n,function(t){return e(o,t)&&o.useTabstopAt(t)}).fold(function(){return o.cyclic?tg.some(!0):tg.none()},function(e){return o.focusManager.set(t,e),tg.some(!0)})})})}var r=[nj("onEscape"),nj("onEnter"),nY("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),nY("firstTabstop",0),nY("useTabstopAt",S),nj("visibilitySelector")].concat([t]),i=u([cg(cf([cd,cl(sB)]),function(t,e,n){return o(t,0,n,n.cyclic?cu:ca)}),cg(cl(sB),function(t,e,n){return o(t,0,n,n.cyclic?cc:cs)}),cg(cl(sF),function(t,e,n){return n.onEscape.bind(function(n){return n(t,e)})}),cg(cf([sH,cl(sM)]),function(t,e,n){return n.onEnter.bind(function(n){return n(t,e)})})]),a=u([]);return sL(r,r0.init,i,a,function(){return tg.some(n)})}function sU(t,e,n){return a7(n)&&cl(sI)(e.event)?tg.none():(rH(t,n,rb(),{}),tg.some(!0))}function sj(t,e){return tg.some(!0)}function sW(t,e,n){return n.execute(t,e,t.element)}function sG(){var t=uk();return r1({readState:function(){return t.get().map(function(t){return{numRows:String(t.numRows),numColumns:String(t.numColumns)}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(e,n){t.set({numRows:e,numColumns:n})},getNumRows:function(){return t.get().map(function(t){return t.numRows})},getNumColumns:function(){return t.get().map(function(t){return t.numColumns})}})}function sX(t){return function(e,n,o,r){return lK(t(e.element),e,n,o,r)}}function sY(t){return function(e,n,o,r){return lK(t,e,n,o,r)}}function sq(t){var e;return!((e=t.dom).offsetWidth<=0&&e.offsetHeight<=0)}function sK(t,e,n){var o=R(ac(t,n),sq);return H(o,function(t){return tP(t,e)}).map(function(t){return{index:t,candidates:o}})}function sJ(t,e){return H(t,function(t){return tP(e,t)})}function s$(t,e,n,o){return o(Math.floor(e/n),e%n).bind(function(e){var o=e.row*n+e.column;return 0<=o&&o<t.length?tg.some(t[o]):tg.none()})}function sQ(t,e,n,o,r){return s$(t,e,o,function(e,i){var u=iO(i,r,0,(e===n-1?t.length-e*o:o)-1);return tg.some({row:e,column:u})})}function sZ(t,e,n,o,r){return s$(t,e,o,function(e,i){var u=iO(e,r,0,n-1),a=un(i,0,(u===n-1?t.length-u*o:o)-1);return tg.some({row:u,column:a})})}function s0(t,e,n){io(t.element,e.selector).each(function(n){e.focusManager.set(t,n)})}function s1(t){return function(e,n,o,r){return sK(e,n,o.selector).bind(function(e){return t(e.candidates,e.index,r.getNumRows().getOr(o.initSize.numRows),r.getNumColumns().getOr(o.initSize.numColumns))})}}function s2(t,e,n){return n.captureTab?tg.some(!0):tg.none()}function s5(t,e,n,o){var r=function(t,e,n){var i,u=iO(e,o,0,n.length-1);return u===t?tg.none():"button"===tD(i=n[u])&&"disabled"===t0(i,"disabled")?r(t,u,n):tg.from(n[u])};return sK(t,n,e).bind(function(t){var e=t.index;return r(e,e,t.candidates)})}function s3(t,e,n){return n.focusManager.get(t).bind(function(t){return ir(t,n.selector)}).bind(function(o){return n.execute(t,e,o)})}function s9(t,e,n){e.getInitial(t).orThunk(function(){return io(t.element,e.selector)}).each(function(n){e.focusManager.set(t,n)})}function s4(t,e,n){return s5(t,n.selector,e,-1)}function s6(t,e,n){return s5(t,n.selector,e,1)}function s8(t){return function(e,n,o,r){return t(e,n,o,r).bind(function(){return o.executeOnMove?s3(e,n,o):tg.some(!0)})}}function s7(t,e,n){return n.onEscape(t,e)}function lt(t,e,n){return tg.from(t[e]).bind(function(t){return tg.from(t[n]).map(function(t){return{rowIndex:e,columnIndex:n,cell:t}})})}function le(t,e,n,o){return lt(t,e,iO(n,o,0,t[e].length-1))}function ln(t,e,n,o){var r=iO(n,o,0,t.length-1),i=t[r].length;return lt(t,r,un(e,0,i-1))}function lo(t,e,n,o){var r=t[e].length;return lt(t,e,un(n+o,0,r-1))}function lr(t,e,n,o){var r=un(n+o,0,t.length-1),i=t[r].length;return lt(t,r,un(e,0,i-1))}function li(t,e,n){e.previousSelector(t).orThunk(function(){var n=e.selectors;return io(t.element,n.cell)}).each(function(n){e.focusManager.set(t,n)})}function lu(t,e){return function(n,o,r){var i=r.cycles?t:e;return ir(o,r.selectors.row).bind(function(t){return sJ(ac(t,r.selectors.cell),o).bind(function(e){var o=ac(n,r.selectors.row);return sJ(o,t).bind(function(t){return i(F(o,function(t){return ac(t,r.selectors.cell)}),t,e).map(function(t){return t.cell})})})})}}function la(t,e,n){return n.focusManager.get(t).bind(function(o){return n.execute(t,e,o)})}function lc(t,e,n){io(t.element,e.selector).each(function(n){e.focusManager.set(t,n)})}function ls(t,e,n){return s5(t,n.selector,e,-1)}function ll(t,e,n){return s5(t,n.selector,e,1)}function lf(t,e,n,o){var r=t.getSystem().build(o);cL(t,r,n)}function ld(t,e,n,o){V(fc(t),function(t){return tP(o.element,t.element)}).each(aC)}function lm(t,e,n,o,r){var i=fc(t);return tg.from(i[o]).map(function(e){return ld(t,0,0,e),r.each(function(e){lf(t,0,function(t,e){tX(t,o).fold(function(){e8(t,e)},function(t){em(t,e)})},e)}),e})}function lg(t,e){var n;return{key:t,value:{config:{},me:(n=om(e),iU({fields:[nR("enabled")],name:t,active:{events:u(n)}})),configAsRaw:u({}),initialConfig:{},state:r0}}}function lp(t,e){e.ignore||(iG(t.element),e.onFocus(t))}function lh(t,e,n){var o=e.aria;o.update(t,o,n.get())}function lv(t,e,n){e.toggleClass.each(function(e){(n.get()?oX:oY)(t.element,e)})}function lb(t,e,n){lU(t,e,n,!n.get())}function ly(t,e,n){n.set(!0),lv(t,e,n),lh(t,e,n)}function lx(t,e,n){n.set(!1),lv(t,e,n),lh(t,e,n)}function lw(t,e,n){lU(t,e,n,e.selected)}function lS(){function t(t,e){e.stop(),ow(t)}return[oO(rc(),t),oO(rx(),t),oA(o5()),oA(o6())]}function lk(t){return om(L([t.map(function(t){return rj(function(e,n){t(e),n.stop()})}).toArray(),lS()]))}function lC(t){(iq(t.element).isNone()||fd.isFocused(t))&&(fd.isFocused(t)||fd.focus(t),ox(t,fh,{item:t}))}function lO(t){ox(t,fv,{item:t})}function l_(t,e){return t.x+t.width/2-e.width/2}function lT(t,e){return t.x+t.width-e.width}function lE(t,e){return t.y+t.height-e.height}function lD(t,e){return t.y+t.height/2-e.height/2}function lA(t,e,n){return iC(lT(t,e),lE(t,e),n.insetSouthwest(),i6(),"southwest",i_(t,{right:0,bottom:3}),fI)}function lB(t,e,n){return iC(t.x,lE(t,e),n.insetSoutheast(),i4(),"southeast",i_(t,{left:1,bottom:3}),fI)}function lM(t,e,n){return iC(lT(t,e),t.y,n.insetNorthwest(),i9(),"northwest",i_(t,{right:0,top:2}),fI)}function lF(t,e,n){return iC(t.x,t.y,n.insetNortheast(),i3(),"northeast",i_(t,{left:1,top:2}),fI)}function lI(t,e,n){return iC(lT(t,e),lD(t,e),n.insetEast(),ue(),"east",i_(t,{right:0}),fI)}function lR(t,e,n){return iC(t.x,lD(t,e),n.insetWest(),ut(),"west",i_(t,{left:1}),fI)}function lN(t){switch(t){case"north":return fR;case"northeast":return lF;case"northwest":return lM;case"south":return fN;case"southeast":return lB;case"southwest":return lA;case"east":return lI;case"west":return lR}}function lP(t,e,n,o,r){return t1(o,uI).map(lN).getOr(fR)(t,e,n,o,r)}function lV(t){switch(t){case"north":return fN;case"northeast":return lB;case"northwest":return lA;case"south":return fR;case"southeast":return lF;case"southwest":return lM;case"east":return lR;case"west":return lI}}function lH(t,e,n,o,r){return t1(o,uI).map(lV).getOr(fR)(t,e,n,o,r)}function lL(t){var e=tE.fromHtml(t),n=tG(e),o=P(void 0!==e.dom.attributes?e.dom.attributes:[],function(t,e){var n;return"class"===e.name?t:C(C({},t),((n={})[e.name]=e.value,n))},{}),r=Array.prototype.slice.call(e.dom.classList,0),i=0===n.length?{}:{innerHtml:oB(e)};return C({tag:tD(e),classes:r,attributes:o},i)}function lz(t){var e=void 0!==t.uid&&to(t,"uid")?t.uid:oI("memento");return{get:function(t){return t.getSystem().getByUid(e).getOrDie()},getOpt:function(t){return t.getSystem().getByUid(e).toOptional()},asSpec:function(){return C(C({},t),{uid:e})}}}function lU(t,e,n,o){(o?ly:lx)(t,e,n)}function lj(t,e,n){tQ(t.element,"aria-expanded",n)}function lW(t){return"prepared"===t.type?tg.some(t.menu):tg.none()}(cT=c_=c_||{}).OnFocusMode="onFocus",cT.OnEnterOrSpaceMode="onEnterOrSpace",cT.OnApiMode="onApi";var lG=sz(of("cyclic",w)),lX=sz(of("cyclic",S)),lY=sL([nY("execute",sU),nY("useSpace",!1),nY("useEnter",!0),nY("useControlEnter",!1),nY("useDown",!1)],r0.init,function(t,e,n,o){var r=n.useSpace&&!a7(t.element)?sI:[],i=n.useEnter?sM:[],u=n.useDown?sV:[];return[cg(cl(r.concat(i).concat(u)),sW)].concat(n.useControlEnter?[cg(cf([cm,cl(sM)]),sW)]:[])},function(t,e,n,o){return n.useSpace&&!a7(t.element)?[cg(cl(sI),sj)]:[]},function(){return tg.none()}),lq=Object.freeze({__proto__:null,flatgrid:sG,init:function(t){return t.state(t)}}),lK=function(t,e,n,o,r){return o.focusManager.get(e).bind(function(n){return t(e.element,n,o,r)}).map(function(t){return o.focusManager.set(e,t),!0})},lJ=s1(function(t,e,n,o){return sQ(t,e,n,o,-1)}),l$=s1(function(t,e,n,o){return sQ(t,e,n,o,1)}),lQ=s1(function(t,e,n,o){return sZ(t,e,n,o,-1)}),lZ=s1(function(t,e,n,o){return sZ(t,e,n,o,1)}),l0=sL([nR("selector"),nY("execute",sU),ix("onEscape"),nY("captureTab",!1),i2()],sG,u([cg(cl(sR),sX(uA(lJ,l$))),cg(cl(sP),sX(uA(l$,lJ))),cg(cl(sN),sY(lQ)),cg(cl(sV),sY(lZ)),cg(cf([cd,cl(sB)]),s2),cg(cf([sH,cl(sB)]),s2),cg(cl(sF),function(t,e,n){return n.onEscape(t,e)}),cg(cl(sI.concat(sM)),function(t,e,n,o){return n.focusManager.get(t).bind(function(t){return ir(t,n.selector)}).bind(function(o){return n.execute(t,e,o)})})]),u([cg(cl(sI),sj)]),function(){return tg.some(s0)}),l1=[nR("selector"),nY("getInitial",tg.none),nY("execute",sU),ix("onEscape"),nY("executeOnMove",!1),nY("allowVertical",!0)],l2=u([cg(cl(sI),sj)]),l5=sL(l1,r0.init,function(t,e,n,o){var r=sR.concat(n.allowVertical?sN:[]),i=sP.concat(n.allowVertical?sV:[]);return[cg(cl(r),s8(sX(uA(s4,s6)))),cg(cl(i),s8(sX(uA(s6,s4)))),cg(cl(sM),s3),cg(cl(sI),s3),cg(cl(sF),s7)]},l2,function(){return tg.some(s9)}),l3=[nL("selectors",[nR("row"),nR("cell")]),nY("cycles",!0),nY("previousSelector",tg.none),nY("execute",sU)],l9=lu(function(t,e,n){return le(t,e,n,-1)},function(t,e,n){return lo(t,e,n,-1)}),l4=lu(function(t,e,n){return le(t,e,n,1)},function(t,e,n){return lo(t,e,n,1)}),l6=lu(function(t,e,n){return ln(t,n,e,-1)},function(t,e,n){return lr(t,n,e,-1)}),l8=lu(function(t,e,n){return ln(t,n,e,1)},function(t,e,n){return lr(t,n,e,1)}),l7=u([cg(cl(sR),sX(uA(l9,l4))),cg(cl(sP),sX(uA(l4,l9))),cg(cl(sN),sY(l6)),cg(cl(sV),sY(l8)),cg(cl(sI.concat(sM)),function(t,e,n){return iq(t.element).bind(function(o){return n.execute(t,e,o)})})]),ft=u([cg(cl(sI),sj)]),fe=sL(l3,r0.init,l7,ft,function(){return tg.some(li)}),fn=[nR("selector"),nY("execute",sU),nY("moveOnTab",!1)],fo=u([cg(cl(sN),sY(ls)),cg(cl(sV),sY(ll)),cg(cf([cd,cl(sB)]),function(t,e,n,o){return n.moveOnTab?sY(ls)(t,e,n,o):tg.none()}),cg(cf([sH,cl(sB)]),function(t,e,n,o){return n.moveOnTab?sY(ll)(t,e,n,o):tg.none()}),cg(cl(sM),la),cg(cl(sI),la)]),fr=u([cg(cl(sI),sj)]),fi=sL(fn,r0.init,fo,fr,function(){return tg.some(lc)}),fu=sL([ix("onSpace"),ix("onEnter"),ix("onShiftEnter"),ix("onLeft"),ix("onRight"),ix("onTab"),ix("onShiftTab"),ix("onUp"),ix("onDown"),ix("onEscape"),nY("stopSpaceKeyup",!1),nj("focusIn")],r0.init,function(t,e,n){return[cg(cl(sI),n.onSpace),cg(cf([sH,cl(sM)]),n.onEnter),cg(cf([cd,cl(sM)]),n.onShiftEnter),cg(cf([cd,cl(sB)]),n.onShiftTab),cg(cf([sH,cl(sB)]),n.onTab),cg(cl(sN),n.onUp),cg(cl(sV),n.onDown),cg(cl(sR),n.onLeft),cg(cl(sP),n.onRight),cg(cl(sI),n.onSpace),cg(cl(sF),n.onEscape)]},function(t,e,n){return n.stopSpaceKeyup?[cg(cl(sI),sj)]:[]},function(t){return t.focusIn}),fa=ij({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:lG.schema(),cyclic:lX.schema(),flow:l5.schema(),flatgrid:l0.schema(),matrix:fe.schema(),execution:lY.schema(),menu:fi.schema(),special:fu.schema()}),name:"keying",active:{events:function(t,e){return t.handler.toEvents(t,e)}},apis:{focusIn:function(t,e,n){e.sendFocusIn(e).fold(function(){t.getSystem().triggerFocus(t.element,t.element)},function(o){o(t,e,n)})},setGridSize:function(t,e,n,o,r){to(n,"setGridSize")?n.setGridSize(o,r):console.error("Layout does not support setGridSize")}},state:lq}),fc=function(t,e){return t.components()},fs=iU({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(t,e,n,o){lf(t,0,e8,o)},prepend:function(t,e,n,o){lf(t,0,ep,o)},remove:ld,replaceAt:lm,replaceBy:function(t,e,n,o,r){return H(fc(t),o).bind(function(e){return lm(t,0,0,e,r)})},set:function(t,e,n,o){iK(function(){var e=F(o,t.getSystem().build);aS(t,e)},t.element)},contents:fc})}),fl=Object.freeze({__proto__:null,focus:lp,blur:function(t,e){e.ignore||t.element.dom.blur()},isFocused:function(t){return iX(t.element)}}),ff=Object.freeze({__proto__:null,exhibit:function(t,e){return oz(e.ignore?{}:{attributes:{tabindex:"-1"}})},events:function(t){return om([oO(rg(),function(e,n){lp(e,t),n.stop()})].concat(t.stopMousedown?[oO(o6(),function(t,e){e.event.prevent()})]:[]))}}),fd=iU({fields:[iy("onFocus"),nY("stopMousedown",!1),nY("ignore",!1)],name:"focusing",active:ff,apis:fl}),fm=Object.freeze({__proto__:null,onLoad:lw,toggle:lb,isOn:function(t,e,n){return n.get()},on:ly,off:lx,set:lU}),fg=Object.freeze({__proto__:null,exhibit:function(){return oz({})},events:function(t,e){var n=rj(function(n){lb(n,t,e)}),o=iL(t,e,lw);return om(L([t.toggleOnExecute?[n]:[],[o]]))}}),fp=iU({fields:[nY("selected",!1),nj("toggleClass"),nY("toggleOnExecute",!0),nq("aria",{mode:"none"},nF("mode",{pressed:[nY("syncWithExpanded",!1),ik("update",function(t,e,n){tQ(t.element,"aria-pressed",n),e.syncWithExpanded&&lj(t,0,n)})],checked:[ik("update",function(t,e,n){tQ(t.element,"aria-checked",n)})],expanded:[ik("update",lj)],selected:[ik("update",function(t,e,n){tQ(t.element,"aria-selected",n)})],none:[ik("update",r)]}))],name:"toggling",active:fg,apis:fm,state:{init:function(){var t=nQ(!1);return{get:function(){return t.get()},set:function(e){return t.set(e)},clear:function(){return t.set(!1)},readState:function(){return t.get()}}}}}),fh="alloy.item-hover",fv="alloy.item-focus",fb=u(fh),fy=u(fv),fx=[nR("data"),nR("components"),nR("dom"),nY("hasSubmenu",!1),nj("toggling"),aV("itemBehaviours",[fp,fd,fa,c1]),nY("ignoreFocus",!1),nY("domModification",{}),ik("builder",function(t){return{dom:t.dom,domModification:C(C({},t.domModification),{attributes:C(C(C({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:aH(t.itemBehaviours,[t.toggling.fold(fp.revoke,function(t){return fp.config(C({aria:{mode:"checked"}},t))}),fd.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(t){lO(t)}}),fa.config({mode:"execution"}),c1.config({store:{mode:"memory",initialValue:t.data}}),lg("item-type-events",_(_([],lS(),!0),[oO(re(),lC),oO(ry(),fd.focus)],!1))]),components:t.components,eventOrder:t.eventOrder}}),nY("eventOrder",{})],fw=[nR("dom"),nR("components"),ik("builder",function(t){return{dom:t.dom,components:t.components,events:om([oO(ry(),function(t,e){e.stop()})])}})],fS=u("item-widget"),fk=u([sl({name:"widget",overrides:function(t){return{behaviours:om([c1.config({store:{mode:"manual",getValue:function(e){return t.data},setValue:r}})])}}})]),fC=nF("type",{widget:[nR("uid"),nR("data"),nR("components"),nR("dom"),nY("autofocus",!1),nY("ignoreFocus",!1),aV("widgetBehaviours",[c1,fd,fa]),nY("domModification",{}),a3(fk()),ik("builder",function(t){function e(e){return a$(e,t,"widget").map(function(t){return fa.focusIn(t),t})}function n(e,n){return a7(n.event.target)||t.autofocus&&n.setSource(e.element),tg.none()}var o=aK(fS(),t,fk()),r=aJ(fS(),t,o.internals());return{dom:t.dom,components:r,domModification:t.domModification,events:om([rj(function(t,n){e(t).each(function(t){n.stop()})}),oO(re(),lC),oO(ry(),function(n,o){t.autofocus?e(n):fd.focus(n)})]),behaviours:aH(t.widgetBehaviours,[c1.config({store:{mode:"memory",initialValue:t.data}}),fd.config({ignore:t.ignoreFocus,onFocus:function(t){lO(t)}}),fa.config({mode:"special",focusIn:t.autofocus?function(t){e(t)}:up(),onLeft:n,onRight:n,onEscape:function(e,n){return fd.isFocused(e)||t.autofocus?(t.autofocus&&n.setSource(e.element),tg.none()):(fd.focus(e),tg.some(!0))}})])}})],item:fx,separator:fw}),fO=u([sm({factory:{sketch:function(t){var e=nM("menu.spec item",fC,t);return e.builder(e)}},name:"items",unit:"item",defaults:function(t,e){return tC(e,"uid")?e:C(C({},e),{uid:oI("item")})},overrides:function(t,e){return{type:e.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),f_=u([nR("value"),nR("items"),nR("dom"),nR("components"),nY("eventOrder",{}),aV("menuBehaviours",[sA,c1,sS,fa]),nq("movement",{mode:"menu",moveOnTab:!0},nF("mode",{grid:[i2(),ik("config",function(t,e){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:e.initSize.numColumns,numRows:e.initSize.numRows},focusManager:t.focusManager}})],matrix:[ik("config",function(t,e){return{mode:"matrix",selectors:{row:e.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}}),nR("rowSelector")],menu:[nY("moveOnTab",!0),ik("config",function(t,e){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:e.moveOnTab,focusManager:t.focusManager}})]})),nN("markers",i1()),nY("fakeFocus",!1),nY("focusManager",ch()),iy("onHighlight")]),fT=u("alloy.menu-focus"),fE=a8({name:"Menu",configFields:f_(),partFields:fO(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:aH(t.menuBehaviours,[sA.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),c1.config({store:{mode:"memory",initialValue:t.value}}),sS.config({find:tg.some}),fa.config(t.movement.config(t,t.movement))]),events:om([oO(fy(),function(t,e){var n=e.event;t.getSystem().getByDom(n.target).each(function(n){sA.highlight(t,n),e.stop(),ox(t,fT(),{menu:t,item:n})})}),oO(fb(),function(t,e){var n=e.event.item;sA.highlight(t,n)})]),components:e,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}}}),fD=function(t,e,n,o){return tn(n,o).bind(function(o){return tn(t,o).bind(function(o){var r=fD(t,e,n,o);return tg.some([o].concat(r))})}).getOr([])},fA=function(){function t(t){return a(t).bind(lW)}function e(t){return tn(n.get(),t)}var n=nQ({}),o=nQ({}),r=nQ({}),i=uk(),u=nQ({}),a=function(t){return tn(o.get(),t)};return{setMenuBuilt:function(t,e){var n;o.set(C(C({},o.get()),((n={})[t]={type:"prepared",menu:e},n)))},setContents:function(t,e,a,c){i.set(t),n.set(a),o.set(e),u.set(c);var s,l,f,d=(s={},Q(c,function(t,e){ty(t,function(t){s[t]=e})}),f=Z(l=tk(a,function(t,e){return{k:t,v:e}}),function(t,e){return[e].concat(fD(s,a,l,e))}),Z(s,function(t){return tn(f,t).getOr([t])}));r.set(d)},expand:function(t){return tn(n.get(),t).map(function(e){return[e].concat(tn(r.get(),t).getOr([]))})},refresh:function(t){return tn(r.get(),t)},collapse:function(t){return tn(r.get(),t).bind(function(t){return 1<t.length?tg.some(t.slice(1)):tg.none()})},lookupMenu:a,lookupItem:e,otherMenus:function(t){return W(tw(u.get()),t)},getPrimary:function(){return i.get().bind(t)},getMenus:function(){return o.get()},clear:function(){n.set({}),o.set({}),r.set({}),i.clear()},isClear:function(){return i.get().isNone()},getTriggeringPath:function(o,u){var a=R(e(o).toArray(),function(e){return t(e).isSome()});return tn(r.get(),o).bind(function(e){var o=j(a.concat(e));return function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n];if(!o.isSome())return tg.none();e.push(o.getOrDie())}return tg.some(e)}(z(o,function(e,r){var a;return a=o.slice(0,r+1),t(e).bind(function(t){return te(n.get(),function(t,n){return t===e}).bind(function(e){return u(e).map(function(e){return{triggeredMenu:t,triggeringItem:e,triggeringPath:a}})})}).fold(function(){return tr(i.get(),e)?[]:[tg.none()]},function(t){return[tg.some(t)]})}))})}}},fB=u("collapse-item"),fM=a6({name:"TieredMenu",configFields:[iS("onExecute"),iS("onEscape"),iw("onOpenMenu"),iw("onOpenSubmenu"),iy("onRepositionMenu"),iy("onCollapseMenu"),nY("highlightImmediately",!0),nL("data",[nR("primary"),nR("menus"),nR("expansions")]),nY("fakeFocus",!1),iy("onHighlight"),iy("onHover"),ih(),nR("dom"),nY("navigateOnHover",!0),nY("stayInDom",!1),aV("tmenuBehaviours",[fa,sA,sS,fs]),nY("eventOrder",{})],apis:{collapseMenu:function(t,e){t.collapseMenu(e)},highlightPrimary:function(t,e){t.highlightPrimary(e)},repositionMenus:function(t,e){t.repositionMenus(e)}},factory:function(t,e){function n(t){return c1.getValue(t).value}function o(t,e){sA.highlight(t,e),sA.getHighlighted(e).orThunk(function(){return sA.getFirst(e)}).each(function(e){rH(t,e.element,ry(),{})})}function i(t,e){return ti(F(e,function(e){return t.lookupMenu(e).bind(function(t){return"prepared"===t.type?tg.some(t.menu):tg.none()})}))}function u(e,n,o){ty(i(n,n.otherMenus(o)),function(n){oJ(n.element,[t.markers.backgroundMenu]),t.stayInDom||fs.remove(e,n)})}function c(e,o){Q(d.get().getOrThunk(function(){var o={};return ty(R(ac(e.element,"."+t.markers.item),function(t){return"true"===t0(t,"aria-haspopup")}),function(t){e.getSystem().getByDom(t).each(function(t){o[n(t)]=t})}),d.set(o),o}),function(t,e){var n=tb(o,e);tQ(t.element,"aria-expanded",n)})}function s(e,n,r){return tg.from(r[0]).bind(function(a){return n.lookupMenu(a).bind(function(a){if("notbuilt"===a.type)return tg.none();var c=a.menu;return ty(i(n,r.slice(1)),function(e){oX(e.element,t.markers.backgroundMenu)}),eQ(c.element)||fs.append(e,oV(c)),oJ(c.element,[t.markers.backgroundMenu]),o(e,c),u(e,n,r),tg.some(c)})})}var l,f,d=uk(),m=fA();function g(e,o,r){if(void 0===r&&(r=l.HighlightSubmenu),o.hasConfigured(sE)&&sE.isDisabled(o))return tg.some(o);var i=n(o);return m.expand(i).bind(function(n){return c(e,n),tg.from(n[0]).bind(function(i){return m.lookupMenu(i).bind(function(u){var a=function(t,e,n){if("notbuilt"!==n.type)return n.menu;var o=t.getSystem().build(n.nbMenu());return m.setMenuBuilt(e,o),o}(e,i,u);return eQ(a.element)||fs.append(e,oV(a)),t.onOpenSubmenu(e,o,a,j(n)),r===l.HighlightSubmenu?(sA.highlightFirst(a),s(e,m,n)):(sA.dehighlightAll(a),tg.some(o))})})})}function p(e,o){var r=n(o);return m.collapse(r).bind(function(n){return c(e,n),s(e,m,n).map(function(n){return t.onCollapseMenu(e,o,n),n})})}function h(e){return function(n,o){return ir(o.getSource(),"."+t.markers.item).bind(function(t){return n.getSystem().getByDom(t).toOptional().bind(function(t){return e(n,t).map(S)})})}}function v(t){return sA.getHighlighted(t).bind(sA.getHighlighted)}(f=l={})[f.HighlightSubmenu=0]="HighlightSubmenu",f[f.HighlightParent=1]="HighlightParent";var b=om([oO(fT(),function(t,e){var o=e.event.item;m.lookupItem(n(o)).each(function(){var o=e.event.menu;sA.highlight(t,o);var r=n(e.event.item);m.refresh(r).each(function(e){return u(t,m,e)})})}),rj(function(e,o){var i=o.event.target;e.getSystem().getByDom(i).each(function(o){0===n(o).indexOf("collapse-item")&&p(e,o),g(e,o,l.HighlightSubmenu).fold(function(){t.onExecute(e,o)},r)})}),rL(function(e,n){var r,i,u;(r=t.data.primary,i=Z(t.data.menus,function(n,o){function i(){return fE.sketch(C(C({},n),{value:o,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:t.onHighlight,focusManager:(t.fakeFocus?cv:ch)()}))}return o===r?{type:"prepared",menu:e.getSystem().build(i())}:{type:"notbuilt",nbMenu:i}}),u=Z(t.data.menus,function(t,e){return z(t.items,function(t){return"separator"===t.type?[]:[t.data.value]})}),m.setContents(t.data.primary,i,t.data.expansions,u),m.getPrimary()).each(function(n){fs.append(e,oV(n)),t.onOpenMenu(e,n),t.highlightImmediately&&o(e,n)})})].concat(t.navigateOnHover?[oO(fb(),function(e,o){var r=o.event.item,i=n(r);m.refresh(i).bind(function(t){return c(e,t),s(e,m,t)}),g(e,r,l.HighlightParent),t.onHover(e,r)})]:[]));return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:aH(t.tmenuBehaviours,[fa.config({mode:"special",onRight:h(function(t,e){return a7(e.element)?tg.none():g(t,e,l.HighlightSubmenu)}),onLeft:h(function(t,e){return a7(e.element)?tg.none():p(t,e)}),onEscape:h(function(e,n){return p(e,n).orThunk(function(){return t.onEscape(e,n).map(function(){return e})})}),focusIn:function(t,e){m.getPrimary().each(function(e){rH(t,e.element,ry(),{})})}}),sA.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),sS.config({find:function(t){return sA.getHighlighted(t)}}),fs.config({})]),eventOrder:t.eventOrder,apis:{collapseMenu:function(t){v(t).each(function(e){p(t,e)})},highlightPrimary:function(t){m.getPrimary().each(function(e){o(t,e)})},repositionMenus:function(e){m.getPrimary().bind(function(t){return v(e).bind(function(t){var e=n(t),o=ti(F(tt(m.getMenus(),a),lW));return m.getTriggeringPath(e,function(t){return $(o,function(e){return e.getSystem().isConnected()?V(sA.getCandidates(e),function(e){return n(e)===t}):tg.none()})})}).map(function(e){return{primary:t,triggeringPath:e}})}).fold(function(){tg.from(e.components()[0]).filter(function(t){return"menu"===t0(t.element,"role")}).each(function(n){t.onRepositionMenu(e,n,[])})},function(n){var o=n.primary,r=n.triggeringPath;t.onRepositionMenu(e,o,r)})}},events:b}},extraApis:{tieredData:function(t,e,n){return{primary:t,menus:e,expansions:n}},singleData:function(t,e){return{primary:t,menus:od(t,e),expansions:{}}},collapseItem:function(t){return{value:oI(fB()),meta:{text:t}}}}}),fF=a6({name:"InlineView",configFields:[nR("lazySink"),iy("onShow"),iy("onHide"),nW("onEscape",ou),aV("inlineBehaviours",[cW,c1,uh]),nX("fireDismissalEventInstead",[nY("event",rB())]),nX("fireRepositionEventInstead",[nY("event",rM())]),nY("getRelated",tg.none),nY("isExtraPart",w),nY("eventOrder",tg.none)],factory:function(t,e){function n(e){cW.isOpen(e)&&c1.getValue(e).each(function(n){switch(n.mode){case"menu":cW.getState(e).each(fM.repositionMenus);break;case"position":var o=t.lazySink(e).getOrDie();cP.positionWithinBounds(o,e,n.config,n.getBounds())}})}function o(t,e,n,o){i(t,e,n,function(){return o.map(function(t){return no(t)})})}function r(e,n,o,r){var i,u=(i="horizontal"===o.type?{layouts:{onLtr:iV,onRtl:iH}}:{},fM.sketch({dom:{tag:"div"},data:o.data,markers:o.menu.markers,highlightImmediately:o.menu.highlightImmediately,onEscape:function(){return cW.close(e),t.onEscape.map(function(t){return t(e)}),tg.some(!0)},onExecute:function(){return tg.some(!0)},onOpenMenu:function(t,e){cP.positionWithinBounds(a().getOrDie(),e,n,r())},onOpenSubmenu:function(t,e,n,o){var r=a().getOrDie();cP.position(r,n,{anchor:C({type:"submenu",item:e},c(o))})},onRepositionMenu:function(t,e,o){var i=a().getOrDie();cP.positionWithinBounds(i,e,n,r()),ty(o,function(t){var e=c(t.triggeringPath);cP.position(i,t.triggeredMenu,{anchor:C({type:"submenu",item:t.triggeringItem},e)})})}}));function a(){return t.lazySink(e)}function c(t){return 2===t.length?i:{}}cW.open(e,u),c1.setValue(e,tg.some({mode:"menu",menu:u}))}var i=function(e,n,o,r){var i=t.lazySink(e).getOrDie();cW.openWhileCloaked(e,n,function(){return cP.positionWithinBounds(i,e,o,r())}),c1.setValue(e,tg.some({mode:"position",config:o,getBounds:r}))},u={setContent:function(t,e){cW.setContent(t,e)},showAt:function(t,e,n){o(t,e,n,tg.none())},showWithin:o,showWithinBounds:i,showMenuAt:function(t,e,n){r(t,e,n,tg.none)},showMenuWithinBounds:r,hide:function(t){cW.isOpen(t)&&(c1.setValue(t,tg.none()),cW.close(t))},getContent:function(t){return cW.getState(t)},reposition:n,isOpen:cW.isOpen};return{uid:t.uid,dom:t.dom,behaviours:aH(t.inlineBehaviours,[cW.config({isPartOf:function(e,n,o){return ic(n,o)||t.getRelated(e).exists(function(t){return ic(t,o)})},getAttachPoint:function(e){return t.lazySink(e).getOrDie()},onOpen:function(e){t.onShow(e)},onClose:function(e){t.onHide(e)}}),c1.config({store:{mode:"memory",initialValue:tg.none()}}),uh.config({channels:C(C({},aB(C({isExtraPart:e.isExtraPart},t.fireDismissalEventInstead.map(function(t){return{fireEventInstead:{event:t.event}}}).getOr({})))),aM(C(C({},t.fireRepositionEventInstead.map(function(t){return{fireEventInstead:{event:t.event}}}).getOr({})),{doReposition:n})))})]),eventOrder:t.eventOrder,apis:u}},apis:{showAt:function(t,e,n,o){t.showAt(e,n,o)},showWithin:function(t,e,n,o,r){t.showWithin(e,n,o,r)},showWithinBounds:function(t,e,n,o,r){t.showWithinBounds(e,n,o,r)},showMenuAt:function(t,e,n,o){t.showMenuAt(e,n,o)},showMenuWithinBounds:function(t,e,n,o,r){t.showMenuWithinBounds(e,n,o,r)},hide:function(t,e){t.hide(e)},isOpen:function(t,e){return t.isOpen(e)},getContent:function(t,e){return t.getContent(e)},setContent:function(t,e,n){t.setContent(e,n)},reposition:function(t,e){t.reposition(e)}}}),fI="layout-inset",fR=function(t,e,n){return iC(l_(t,e),t.y,n.insetNorth(),i8(),"north",i_(t,{top:2}),fI)},fN=function(t,e,n){return iC(l_(t,e),lE(t,e),n.insetSouth(),i7(),"south",i_(t,{bottom:3}),fI)},fP=tinymce.util.Tools.resolve("tinymce.util.Delay"),fV=a6({name:"Button",factory:function(t){function e(e){return tn(t.dom,"attributes").bind(function(t){return tn(t,e)})}var n=lk(t.action),o=t.dom.tag;return{uid:t.uid,dom:t.dom,components:t.components,events:n,behaviours:aH(t.buttonBehaviours,[fd.config({}),fa.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"!==o)return{role:e("role").getOr("button")};var t=e("type").getOr("button"),n=e("role").map(function(t){return{role:t}}).getOr({});return C({type:t},n)}()},eventOrder:t.eventOrder}},configFields:[nY("uid",void 0),nR("dom"),nY("components",[]),aV("buttonBehaviours",[fd,fa]),nj("action"),nj("role"),nY("eventOrder",{})]});function fH(t){return(fH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fL(t,e){return(fL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fz(t,e,n){return(fz=!function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch(t){return}}}()?function(t,e,n){var o=[null];o.push.apply(o,e);var r=new(Function.bind.apply(t,o));return n&&fL(r,n.prototype),r}:Reflect.construct).apply(null,arguments)}function fU(t){return function(t){if(Array.isArray(t))return fj(t)}(t)||function(){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}()||function(t){if(t){if("string"==typeof t)return fj(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?fj(t,void 0):void 0}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fj(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var fW,fG=Object.hasOwnProperty,fX=Object.setPrototypeOf,fY=Object.isFrozen,fq=Object.getPrototypeOf,fK=Object.getOwnPropertyDescriptor,fJ=Object.freeze,f$=Object.seal,fQ=Object.create,fZ="undefined"!=typeof Reflect&&Reflect,f0=fZ.apply||function(t,e,n){return t.apply(e,n)},fJ=fJ||function(t){return t},f$=f$||function(t){return t},f1=fZ.construct||function(t,e){return fz(t,fU(e))},f2=dn(Array.prototype.forEach),f5=dn(Array.prototype.pop),f3=dn(Array.prototype.push),f9=dn(String.prototype.toLowerCase),f4=dn(String.prototype.match),f6=dn(String.prototype.replace),f8=dn(String.prototype.indexOf),f7=dn(String.prototype.trim),dt=dn(RegExp.prototype.test),de=(fW=TypeError,function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return f1(fW,e)});function dn(t){return function(e){for(var n=arguments.length,o=Array(1<n?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return f0(t,e,o)}}function dr(t,e){fX&&fX(t,null);for(var n=e.length;n--;){var o,r=e[n];"string"!=typeof r||(o=f9(r))!==r&&(fY(e)||(e[n]=o),r=o),t[r]=!0}return t}function di(t){var e,n=fQ(null);for(e in t)f0(fG,t,[e])&&(n[e]=t[e]);return n}function du(t,e){for(;null!==t;){var n=fK(t,e);if(n){if(n.get)return dn(n.get);if("function"==typeof n.value)return dn(n.value)}t=fq(t)}return function(t){return console.warn("fallback value for",t),null}}var da=fJ(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),dc=fJ(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ds=fJ(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),dl=fJ(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),df=fJ(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),dd=fJ(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),dm=fJ(["#text"]),dg=fJ(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),dp=fJ(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),dh=fJ(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),dv=fJ(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),db=f$(/\{\{[\w\W]*|[\w\W]*\}\}/gm),dy=f$(/<%[\w\W]*|[\w\W]*%>/gm),dx=f$(/^data-[\-\w.\u00B7-\uFFFF]/),dw=f$(/^aria-[\-\w]+$/),dS=f$(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),dk=f$(/^(?:\w+script|data):/i),dC=f$(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),dO=f$(/^html$/i);function d_(t){return dF().sanitize(t)}function dT(t){return function(){return tn(t,dN).getOr("!not found!")}}function dE(t,e){var n=t.toLowerCase();if(dI.isRtl()){var o=t_(n,"-rtl")?n:n+"-rtl";return tC(e,o)?o:n}return n}function dD(t,e){var n=e();return tn(n,dE(t,n)).getOrThunk(dT(n))}function dA(){return lg("add-focusable",[rL(function(t){V(t.element.dom.childNodes,function(t){return tR(tE.fromDom(t),"svg")}).map(tE.fromDom).each(function(t){return tQ(t,"focusable","false")})})])}function dB(t,e,n,o){var r,i,u=dI.isRtl()&&tC(dR,e)?["tox-icon--flip"]:[],a=tn(n,dE(e,n)).or(o).getOrThunk(dT(n));return{dom:{tag:t.tag,attributes:null!==(r=t.attributes)&&void 0!==r?r:{},classes:t.classes.concat(u),innerHtml:a},behaviours:om(_(_([],null!==(i=t.behaviours)&&void 0!==i?i:[],!0),[dA()],!1))}}function dM(t,e,n,o){return void 0===o&&(o=tg.none()),dB(e,t,n(),o)}var dF=function t(e){function n(e){return t(e)}var o=0<arguments.length&&void 0!==e?e:"undefined"==typeof window?null:window;if(n.version="2.3.8",n.removed=[],!o||!o.document||9!==o.document.nodeType)return n.isSupported=!1,n;var r,i=o.document,u=o.document,a=o.DocumentFragment,c=o.HTMLTemplateElement,s=o.Node,l=o.Element,f=o.NodeFilter,d=o.NamedNodeMap,m=void 0===d?o.NamedNodeMap||o.MozNamedAttrMap:d,g=o.HTMLFormElement,p=o.DOMParser,h=o.trustedTypes,v=l.prototype,b=du(v,"cloneNode"),y=du(v,"nextSibling"),x=du(v,"childNodes"),w=du(v,"parentNode");"function"!=typeof c||(r=u.createElement("template")).content&&r.content.ownerDocument&&(u=r.content.ownerDocument);var S=function(t,e){if("object"!==fH(t)||"function"!=typeof t.createPolicy)return null;var n=null,o="data-tt-policy-suffix",r="dompurify"+((n=e.currentScript&&e.currentScript.hasAttribute(o)?e.currentScript.getAttribute(o):n)?"#"+n:"");try{return t.createPolicy(r,{createHTML:function(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(h,i),k=S?S.createHTML(""):"",C=u,O=C.implementation,_=C.createNodeIterator,T=C.createDocumentFragment,E=C.getElementsByTagName,D=i.importNode,A={};try{A=di(u).documentMode?u.documentMode:{}}catch(t){}var B={};function M(t){return t instanceof RegExp||t instanceof Function}function F(t){th&&th===t||(H="ALLOWED_TAGS"in(t=di(t=t&&"object"===fH(t)?t:{}))?dr({},t.ALLOWED_TAGS):L,z="ALLOWED_ATTR"in t?dr({},t.ALLOWED_ATTR):U,ts="ADD_URI_SAFE_ATTR"in t?dr(di(tl),t.ADD_URI_SAFE_ATTR):tl,ta="ADD_DATA_URI_TAGS"in t?dr(di(tc),t.ADD_DATA_URI_TAGS):tc,ti="FORBID_CONTENTS"in t?dr({},t.FORBID_CONTENTS):tu,W="FORBID_TAGS"in t?dr({},t.FORBID_TAGS):{},G="FORBID_ATTR"in t?dr({},t.FORBID_ATTR):{},I="USE_PROFILES"in t&&t.USE_PROFILES,X=!1!==t.ALLOW_ARIA_ATTR,Y=!1!==t.ALLOW_DATA_ATTR,q=t.ALLOW_UNKNOWN_PROTOCOLS||!1,K=t.SAFE_FOR_TEMPLATES||!1,J=t.WHOLE_DOCUMENT||!1,Z=t.RETURN_DOM||!1,tt=t.RETURN_DOM_FRAGMENT||!1,te=t.RETURN_TRUSTED_TYPE||!1,Q=t.FORCE_BODY||!1,tn=!1!==t.SANITIZE_DOM,to=!1!==t.KEEP_CONTENT,tr=t.IN_PLACE||!1,V=t.ALLOWED_URI_REGEXP||V,tg=t.NAMESPACE||tm,t.CUSTOM_ELEMENT_HANDLING&&M(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(j.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&M(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(j.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(j.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),N="application/xhtml+xml"===(R=-1===tp.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE)?function(t){return t}:f9,K&&(Y=!1),tt&&(Z=!0),I&&(H=dr({},fU(dm)),z=[],!0===I.html&&(dr(H,da),dr(z,dg)),!0===I.svg&&(dr(H,dc),dr(z,dp),dr(z,dv)),!0===I.svgFilters&&(dr(H,ds),dr(z,dp),dr(z,dv)),!0===I.mathMl&&(dr(H,df),dr(z,dh),dr(z,dv))),t.ADD_TAGS&&dr(H=H===L?di(H):H,t.ADD_TAGS),t.ADD_ATTR&&dr(z=z===U?di(z):z,t.ADD_ATTR),t.ADD_URI_SAFE_ATTR&&dr(ts,t.ADD_URI_SAFE_ATTR),t.FORBID_CONTENTS&&dr(ti=ti===tu?di(ti):ti,t.FORBID_CONTENTS),to&&(H["#text"]=!0),J&&dr(H,["html","head","body"]),H.table&&(dr(H,["tbody"]),delete W.tbody),fJ&&fJ(t),th=t)}n.isSupported="function"==typeof w&&O&&void 0!==O.createHTMLDocument&&9!==A;var I,R,N,P,V=dS,H=null,L=dr({},[].concat(fU(da),fU(dc),fU(ds),fU(df),fU(dm))),z=null,U=dr({},[].concat(fU(dg),fU(dp),fU(dh),fU(dv))),j=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),W=null,G=null,X=!0,Y=!0,q=!1,K=!1,J=!1,$=!1,Q=!1,Z=!1,tt=!1,te=!1,tn=!0,to=!0,tr=!1,ti=null,tu=dr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ta=null,tc=dr({},["audio","video","img","source","image","track"]),ts=null,tl=dr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),tf="http://www.w3.org/1998/Math/MathML",td="http://www.w3.org/2000/svg",tm="http://www.w3.org/1999/xhtml",tg=tm,tp=["application/xhtml+xml","text/html"],th=null,tv=u.createElement("form"),tb=dr({},["mi","mo","mn","ms","mtext"]),ty=dr({},["foreignobject","desc","title","annotation-xml"]),tx=dr({},["title","style","font","a","script"]),tw=dr({},dc);dr(tw,ds),dr(tw,dl);var tS=dr({},df);function tk(t){f3(n.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=k}catch(e){t.remove()}}}function tC(t,e){try{f3(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){f3(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!z[t]){if(Z||tt)try{tk(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}}}function tO(t){Q?t="<remove></remove>"+t:o=(n=f4(t,/^[\r\n\t ]+/))&&n[0],"application/xhtml+xml"===R&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var e,n,o,r=S?S.createHTML(t):t;if(tg===tm)try{e=(new p).parseFromString(r,R)}catch(t){}if(!e||!e.documentElement){e=O.createDocument(tg,"template",null);try{e.documentElement.innerHTML=P?"":r}catch(t){}}var i=e.body||e.documentElement;return t&&o&&i.insertBefore(u.createTextNode(o),i.childNodes[0]||null),tg===tm?E.call(e,J?"html":"body")[0]:J?e.documentElement:i}function t_(t){return _.call(t.ownerDocument||t,t,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT,null,!1)}function tT(t){return"object"===fH(s)?t instanceof s:t&&"object"===fH(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName}function tE(t,e,o){B[t]&&f2(B[t],function(t){t.call(n,e,o,th)})}function tD(t){if(tE("beforeSanitizeElements",t,null),t instanceof g&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof m)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore)||dt(/[\u0080-\uFFFF]/,t.nodeName))return tk(t),1;var e,o,r,i,u=N(t.nodeName);if(tE("uponSanitizeElement",t,{tagName:u,allowedTags:H}),t.hasChildNodes()&&!tT(t.firstElementChild)&&(!tT(t.content)||!tT(t.content.firstElementChild))&&dt(/<[/\w]/g,t.innerHTML)&&dt(/<[/\w]/g,t.textContent)||"select"===u&&dt(/<template/i,t.innerHTML))return tk(t),1;if(H[u]&&!W[u])return t instanceof l&&((e=w(t))&&e.tagName||(e={namespaceURI:tm,tagName:"template"}),o=f9(t.tagName),r=f9(e.tagName),t.namespaceURI===td?e.namespaceURI===tm?"svg"!==o:e.namespaceURI===tf?!("svg"===o&&("annotation-xml"===r||tb[r])):!tw[o]:t.namespaceURI===tf?e.namespaceURI===tm?"math"!==o:e.namespaceURI===td?"math"!==o||!ty[r]:!tS[o]:!(t.namespaceURI===tm&&(e.namespaceURI!==td||ty[r])&&(e.namespaceURI!==tf||tb[r])&&!tS[o]&&(tx[o]||!tw[o])))||("noscript"===u||"noembed"===u)&&dt(/<\/no(script|embed)/i,t.innerHTML)?(tk(t),1):(K&&3===t.nodeType&&(i=f6(i=t.textContent,db," "),i=f6(i,dy," "),t.textContent!==i&&(f3(n.removed,{element:t.cloneNode()}),t.textContent=i)),tE("afterSanitizeElements",t,null),0);if(!(!W[u]&&tM(u)&&(j.tagNameCheck instanceof RegExp&&dt(j.tagNameCheck,u)||j.tagNameCheck instanceof Function&&j.tagNameCheck(u)))){if(to&&!ti[u]){var a=w(t)||t.parentNode,c=x(t)||t.childNodes;if(c&&a)for(var s=c.length-1;0<=s;--s)a.insertBefore(b(c[s],!0),y(t))}return tk(t),1}}function tA(t,e,n){if(tn&&("id"===e||"name"===e)&&(n in u||n in tv))return!1;if((!Y||G[e]||!dt(dx,e))&&(!X||!dt(dw,e))){if(!z[e]||G[e]){if(!(tM(t)&&(j.tagNameCheck instanceof RegExp&&dt(j.tagNameCheck,t)||j.tagNameCheck instanceof Function&&j.tagNameCheck(t))&&(j.attributeNameCheck instanceof RegExp&&dt(j.attributeNameCheck,e)||j.attributeNameCheck instanceof Function&&j.attributeNameCheck(e))||"is"===e&&j.allowCustomizedBuiltInElements&&(j.tagNameCheck instanceof RegExp&&dt(j.tagNameCheck,n)||j.tagNameCheck instanceof Function&&j.tagNameCheck(n))))return!1}else if(!ts[e]&&!dt(V,f6(n,dC,""))&&("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==f8(n,"data:")||!ta[t])&&(!q||dt(dk,f6(n,dC,"")))&&n)return!1}return!0}function tB(t){tE("beforeSanitizeAttributes",t,null);var e=t.attributes;if(e){for(var o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z},r=e.length;r--;){var i,u=(i=e[r]).name,a=i.namespaceURI,c="value"===u?i.value:f7(i.value),s=N(u);if(o.attrName=s,o.attrValue=c,o.keepAttr=!0,o.forceKeepAttr=void 0,tE("uponSanitizeAttribute",t,o),c=o.attrValue,!o.forceKeepAttr&&(tC(u,t),o.keepAttr)){if(dt(/\/>/i,c))tC(u,t);else if(K&&(c=f6(c,db," "),c=f6(c,dy," ")),tA(N(t.nodeName),s,c))try{a?t.setAttributeNS(a,u,c):t.setAttribute(u,c),f5(n.removed)}catch(t){}}}tE("afterSanitizeAttributes",t,null)}}dr(tS,dd);var tM=function(t){return 0<t.indexOf("-")};return n.sanitize=function(t,e){if("string"!=typeof(t=(P=!t)?"\x3c!--\x3e":t)&&!tT(t)){if("function"!=typeof t.toString)throw de("toString is not a function");if("string"!=typeof(t=t.toString()))throw de("dirty is not a string, aborting")}if(!n.isSupported){if("object"===fH(o.toStaticHTML)||"function"==typeof o.toStaticHTML){if("string"==typeof t)return o.toStaticHTML(t);if(tT(t))return o.toStaticHTML(t.outerHTML)}return t}if($||F(e),n.removed=[],tr="string"!=typeof t&&tr){if(t.nodeName){var r,u,c,l,f,d=N(t.nodeName);if(!H[d]||W[d])throw de("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof s)1===(u=(r=tO("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===u.nodeName||"HTML"===u.nodeName?r=u:r.appendChild(u);else{if(!Z&&!K&&!J&&-1===t.indexOf("<"))return S&&te?S.createHTML(t):t;if(!(r=tO(t)))return Z?null:te?k:""}r&&Q&&tk(r.firstChild);for(var m=t_(tr?t:r);c=m.nextNode();)3===c.nodeType&&c===l||tD(c)||(c.content instanceof a&&function t(e){var n,o=t_(e);for(tE("beforeSanitizeShadowDOM",e,null);n=o.nextNode();)tE("uponSanitizeShadowNode",n,null),tD(n)||(n.content instanceof a&&t(n.content),tB(n));tE("afterSanitizeShadowDOM",e,null)}(c.content),tB(c),l=c);if(l=null,tr)return t;if(Z){if(tt)for(f=T.call(r.ownerDocument);r.firstChild;)f.appendChild(r.firstChild);else f=r;return z.shadowroot?D.call(i,f,!0):f}var g=J?r.outerHTML:r.innerHTML;return J&&H["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&dt(dO,r.ownerDocument.doctype.name)&&(g="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+g),K&&(g=f6(g,db," "),g=f6(g,dy," ")),S&&te?S.createHTML(g):g},n.setConfig=function(t){F(t),$=!0},n.clearConfig=function(){th=null,$=!1},n.isValidAttribute=function(t,e,n){return th||F({}),tA(N(t),N(e),n)},n.addHook=function(t,e){"function"==typeof e&&(B[t]=B[t]||[],f3(B[t],e))},n.removeHook=function(t){if(B[t])return f5(B[t])},n.removeHooks=function(t){B[t]&&(B[t]=[])},n.removeAllHooks=function(){B={}},n}(),dI=tinymce.util.Tools.resolve("tinymce.util.I18n"),dR={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},dN="temporary-placeholder",dP={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},dV=a6({name:"Notification",factory:function(t){function e(t){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+t+"%"}}}}function n(t){return{dom:{tag:"div",classes:["tox-text"],innerHtml:t+"%"}}}var o,r=lz({dom:lL("<p>"+d_(t.translationProvider(t.text))+"</p>"),behaviours:om([fs.config({})])}),i=lz({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[e(0)]},n(0)],behaviours:om([fs.config({})])}),u=L([t.icon.toArray(),t.level.toArray(),t.level.bind(function(t){return tg.from(dP[t])}).toArray()]),a=lz(fV.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[dM("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:function(e){t.onAction(e)}})),c=[(o=(0,t.iconProvider)(),dB({tag:"div",classes:["tox-notification__icon"]},V(u,function(t){return tC(o,dE(t,o))}).getOr(dN),o,tg.none())),{dom:{tag:"div",classes:["tox-notification__body"]},components:[r.asSpec()],behaviours:om([fs.config({})])}];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(function(t){return["tox-notification","tox-notification--in","tox-notification--"+t]}).getOr(["tox-notification","tox-notification--in"])},behaviours:om([fd.config({}),lg("notification-events",[oO(rn(),function(t){a.getOpt(t).each(fd.focus)})])]),components:c.concat(t.progress?[i.asSpec()]:[]).concat(t.closeButton?[a.asSpec()]:[]),apis:{updateProgress:function(t,o){t.getSystem().isConnected()&&i.getOpt(t).each(function(t){fs.set(t,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[e(o)]},n(o)])})},updateText:function(t,e){var n;t.getSystem().isConnected()&&(n=r.get(t),fs.set(n,[oZ(e)]))}}}},configFields:[nj("level"),nR("progress"),nR("icon"),nR("onAction"),nR("text"),nR("iconProvider"),nR("translationProvider"),nJ("closeButton",!0)],apis:{updateProgress:function(t,e,n){t.updateProgress(e,n)},updateText:function(t,e,n){t.updateText(e,n)}}});function dH(t,e){function n(){d(o)||(clearTimeout(o),o=null)}var o=null;return{cancel:n,throttle:function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];n(),o=setTimeout(function(){o=null,t.apply(null,r)},e)}}}function dL(t,e,n,o,r){var i=d$(t,function(e){return t.isBlock(e)||tb(["BR","IMG","HR","INPUT"],e.nodeName)||"false"===t.getContentEditable(e)});return tg.from(i.backwards(e,n,o,r))}function dz(t){return t.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")}function dU(t){return""!==t&&-1!==" \xa0\f\n\r	\v".indexOf(t)}function dj(t,e){return t.substring(e.length)}function dW(t,e,n,o){return void 0===o&&(o=0),dQ(tE.fromDom(e.startContainer)).fold(function(){return function(t,e,n,o){if(void 0===o&&(o=0),!e.collapsed||3!==e.startContainer.nodeType)return tg.none();var r=t.getParent(e.startContainer,t.isBlock)||t.getRoot();return dL(t,e.startContainer,e.startOffset,function(t,e,o){return(function(t,n){for(var o=e-1;0<=o;o--){var r=t.charAt(o);if(dU(r))return tg.none();if(r===n)break}return tg.some(o)})(o,n).getOr(e)},r).bind(function(t){var r=e.cloneRange();if(r.setStart(t.container,t.offset),r.setEnd(e.endContainer,e.endOffset),r.collapsed)return tg.none();var i=dz(r);return 0!==i.lastIndexOf(n)||dj(i,n).length<o?tg.none():tg.some({text:dj(i,n),range:r,triggerChar:n})})}(t,e,n,o)},function(e){var o=t.createRng();o.selectNode(e.dom);var r=dz(o);return tg.some({range:o,text:dj(r,n),triggerChar:n})})}function dG(t,e){return{container:t,offset:e}}function dX(t){return nA("toolbarbutton",d4,t)}function dY(t){return nA("ToggleButton",d8,t)}function dq(t,e,n,o){void 0===o&&(o={});var r=e(),i=t.selection.getRng().startContainer.nodeValue,u=R(r.lookupByChar(n.triggerChar),function(e){return n.text.length>=e.minChars&&e.matches.getOrThunk(function(){var e;return e=t.dom,function(t){var n=d1(t.startContainer,t.startOffset);return!dL(e,n.container,n.offset,function(t,e){return 0===e?-1:e},e.getRoot()).filter(function(t){return!dU(t.container.data.charAt(t.offset-1))}).isSome()}})(n.range,i,n.text)});if(0===u.length)return tg.none();var a=dZ.all(F(u,function(t){return t.fetch(n.text,t.maxResults,o).then(function(e){return{matchText:n.text,items:e,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn}})}));return tg.some({lookupData:a,context:n})}var dK,dJ,d$=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),dQ=function(t){return ir(t,"[data-mce-autocompleter]")},dZ=tinymce.util.Tools.resolve("tinymce.util.Promise"),d0=function(t){if(3===t.nodeType)return dG(t,t.data.length);var e=t.childNodes;return 0<e.length?d0(e[e.length-1]):dG(t,e.length)},d1=function(t,e){var n=t.childNodes;return 0<n.length&&e<n.length?d1(n[e],0):0<n.length&&1===t.nodeType&&n.length===e?d0(n[n.length-1]):dG(t,e)},d2=ot([nP("type"),nG("text")]),d5=ot([nY("type","autocompleteitem"),nY("active",!1),nY("disabled",!1),nY("meta",{}),nP("value"),nG("text"),nG("icon")]),d3=ot([nP("type"),nP("ch"),nq("minChars",1,oo),nY("columns",1),nq("maxResults",10,oo),nW("matches",ou),nH("fetch"),nH("onAction"),nq("highlightOn",[],nC(or))]),d9=[nJ("disabled",!1),nG("tooltip"),nG("icon"),nG("text"),n$("onSetup",function(){return r})],d4=ot([nP("type"),nH("onAction")].concat(d9)),d6=[nJ("active",!1)].concat(d9),d8=ot(d6.concat([nP("type"),nH("onAction")])),d7=[n$("predicate",w),nK("scope","node",["node","editor"]),nK("position","selection",["node","selection","line"])],mt=d9.concat([nY("type","contextformbutton"),nY("primary",!1),nH("onAction"),of("original",a)]),me=d6.concat([nY("type","contextformbutton"),nY("primary",!1),nH("onAction"),of("original",a)]),mn=d9.concat([nY("type","contextformbutton")]),mo=d6.concat([nY("type","contextformtogglebutton")]),mr=nF("type",{contextformbutton:mt,contextformtogglebutton:me}),mi=ot([nY("type","contextform"),n$("initValue",u("")),nG("label"),nU("commands",mr),nW("launch",nF("type",{contextformbutton:mn,contextformtogglebutton:mo}))].concat(d7)),mu=ot([nY("type","contexttoolbar"),nP("items")].concat(d7));function ma(t){return tn(mI,t).getOr(mM)}function mc(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:"color"===t?"tox-swatches":"tox-menu",tieredMenu:"tox-tiered-menu"}}function ms(t){var e=mc(t);return{backgroundMenu:e.backgroundMenu,selectedMenu:e.selectedMenu,menu:e.menu,selectedItem:e.selectedItem,item:ma(t)}}function ml(t,e,n){return{dom:{tag:"div",classes:L([[mc(n).tieredMenu]])},markers:ms(n)}}function mf(t,e){return function(n){return F(M(n,e),function(e){return{dom:t,components:e}})}}function md(t,e){var n=[],o=[];return ty(t,function(t,r){e(t,r)?(0<o.length&&n.push(o),o=[],tC(t.dom,"innerHtml")&&o.push(t)):o.push(t)}),0<o.length&&n.push(o),F(n,function(t){return{dom:{tag:"div",classes:["tox-collection__group"]},components:t}})}function mm(t,e){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===t?["tox-collection--list"]:["tox-collection--grid"])},components:[fE.parts.items({preprocess:function(n){return"auto"!==t&&1<t?mf({tag:"div",classes:["tox-collection__group"]},t)(n):md(n,function(t,n){return"separator"===e[n].type})}})]}}function mg(t){return A(t,function(t){return"icon"in t&&void 0!==t.icon})}function mp(t){return console.error(os(t)),console.log(t),tg.none()}function mh(t,e,n,o,r){var i,u;return"color"===r?{value:t,dom:(i={dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[fE.parts.items({preprocess:"auto"!==o?mf({tag:"div",classes:["tox-swatches__row"]},o):a})]}]}).dom,components:i.components,items:n}:"normal"===r&&"auto"===o?{value:t,dom:(i=mm(o,n)).dom,components:i.components,items:n}:"normal"===r&&1===o?{value:t,dom:(i=mm(1,n)).dom,components:i.components,items:n}:"normal"===r?{value:t,dom:(i=mm(o,n)).dom,components:i.components,items:n}:"listpreview"!==r||"auto"===o?{value:t,dom:{tag:"div",classes:L([[(u=mc(r)).menu,"tox-menu-"+o+"-column"],e?[u.hasIcons]:[]])},components:mU,items:n}:{value:t,dom:(i={dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[fE.parts.items({preprocess:mf({tag:"div",classes:["tox-collection__group"]},o)})]}).dom,components:i.components,items:n}}function mv(t,e,n){var o=ac(t.element,"."+n);if(0<o.length){var r=H(o,function(t){return Math.abs(t.dom.getBoundingClientRect().top-o[0].dom.getBoundingClientRect().top)>e}).getOr(o.length);return tg.some({numColumns:r,numRows:Math.ceil(o.length/r)})}return tg.none()}function mb(t,e,n){t.getSystem().broadcastOn([m2],{})}function my(t){return t.getParam("height",Math.max(t.getElement().offsetHeight,200))}function mx(t){return t.getParam("width",m8.DOM.getStyle(t.getElement(),"width"))}function mw(t){return tg.from(t.getParam("min_width")).filter(v)}function mS(t){return tg.from(t.getParam("min_height")).filter(v)}function mk(t){return tg.from(t.getParam("max_width")).filter(v)}function mC(t){return tg.from(t.getParam("max_height")).filter(v)}function mO(t){return!1!==t.getParam("menubar",!0,"boolean")}function m_(t){var e=t.getParam("toolbar",!0),n=!0===e,o=s(e),r=f(e)&&0<e.length;return!gt(t)&&(r||o||n)}function mT(t){var e=R(B(9,function(e){return t.getParam("toolbar"+(e+1),!1,"string")}),function(t){return"string"==typeof t});return 0<e.length?tg.some(e):tg.none()}(dJ=dK={})[dJ.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",dJ[dJ.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX";var mE,mD,mA,mB,mM="tox-menu-nav__js",mF="tox-collection__item",mI={normal:mM,color:"tox-swatch"},mR="tox-collection__item--enabled",mN="tox-collection__item-icon",mP="tox-collection__item-label",mV="tox-collection__item-caret",mH="tox-collection__item--active",mL="tox-collection__item-container",mz="tox-collection__item-container--row",mU=[fE.parts.items({})],mj=ot([nP("type"),nP("src"),nG("alt"),nq("classes",[],nC(or))]),mW=ot([nP("type"),nP("text"),nG("name"),nq("classes",["tox-collection__item-label"],nC(or))]),mG=nS(function(){return nT("type",{cardimage:mj,cardtext:mW,cardcontainer:mX})}),mX=ot([nP("type"),nq("direction","horizontal",or),nq("align","left",or),nq("valign","middle",or),nU("items",mG)]),mY=[nJ("disabled",!1),nG("text"),nG("shortcut"),ol("value","value",np(function(){return oI("menuitem-value")}),on()),nY("meta",{})],mq=ot([nP("type"),nG("label"),nU("items",mG),n$("onSetup",function(){return r}),n$("onAction",r)].concat(mY)),mK=ot([nP("type"),nJ("active",!1),nG("icon")].concat(mY)),mJ=[nP("type"),nP("fancytype"),n$("onAction",r)],m$=nF("fancytype",{inserttable:[nY("initData",{})].concat(mJ),colorswatch:[nq("initData",{},ot([nJ("allowCustomColors",!0),nW("colors",nC(on()))]))].concat(mJ)}),mQ=ot([nP("type"),n$("onSetup",function(){return r}),n$("onAction",r),nG("icon")].concat(mY)),mZ=ot([nP("type"),nH("getSubmenuItems"),n$("onSetup",function(){return r}),nG("icon")].concat(mY)),m0=ot([nP("type"),nG("icon"),nJ("active",!1),n$("onSetup",function(){return r}),nH("onAction")].concat(mY)),m1=function(t){return om([lg(oI("unnamed-events"),t)])},m2=oI("tooltip.exclusive"),m5=oI("tooltip.show"),m3=oI("tooltip.hide"),m9=Object.freeze({__proto__:null,hideAllExclusive:mb,setComponents:function(t,e,n,o){n.getTooltip().each(function(t){t.getSystem().isConnected()&&fs.set(t,o)})}}),m4=Object.freeze({__proto__:null,events:function(t,e){function n(n){e.getTooltip().each(function(o){aC(o),t.onHide(n,o),e.clearTooltip()}),e.clearTimer()}return om(L([[oO(m5,function(n){e.resetTimer(function(){var o,r;e.isShowing()||(mb(n),o=t.lazySink(n).getOrDie(),r=n.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:om("normal"===t.mode?[oO(re(),function(t){oy(n,m5)}),oO(o7(),function(t){oy(n,m3)})]:[]),behaviours:om([fs.config({})])}),e.setTooltip(r),cL(o,r,e8),t.onShow(n,r),cP.position(o,r,{anchor:t.anchor(n)}))},t.delay)}),oO(m3,function(o){e.resetTimer(function(){n(o)},t.delay)}),oO(rv(),function(t,e){e.universal||tb(e.channels,m2)&&n(t)}),rz(function(t){n(t)})],"normal"===t.mode?[oO(rn(),function(t){oy(t,m5)}),oO(rp(),function(t){oy(t,m3)}),oO(re(),function(t){oy(t,m5)}),oO(o7(),function(t){oy(t,m3)})]:[oO(rP(),function(t,e){oy(t,m5)}),oO(rV(),function(t){oy(t,m3)})]]))}}),m6=iU({fields:[nR("lazySink"),nR("tooltipDom"),nY("exclusive",!0),nY("tooltipComponents",[]),nY("delay",300),nK("mode","normal",["normal","follow-highlight"]),nY("anchor",function(t){return{type:"hotspot",hotspot:t,layouts:{onLtr:u([us,uc,ur,uu,ui,ua]),onRtl:u([us,uc,ur,uu,ui,ua])}}}),iy("onHide"),iy("onShow")],name:"tooltipping",active:m4,state:Object.freeze({__proto__:null,init:function(){function t(){e.on(clearTimeout)}var e=uk(),n=uk(),o=u("not-implemented");return r1({getTooltip:n.get,isShowing:n.isSet,setTooltip:n.set,clearTooltip:n.clear,clearTimer:t,resetTimer:function(n,o){t(),e.set(setTimeout(n,o))},readState:o})}}),apis:m9}),m8=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),m7=tinymce.util.Tools.resolve("tinymce.EditorManager"),gt=function(t){return mT(t).fold(function(){return 0<t.getParam("toolbar",[],"string[]").length},S)};function ge(t){return t.getParam("toolbar_mode","","string")}function gn(t){return t.getParam("toolbar_location",mA.auto,"string")}function go(t){return gn(t)===mA.bottom}function gr(t){if(!t.inline)return tg.none();var e=t.getParam("fixed_toolbar_container","","string");if(0<e.length)return io(eZ(),e);var n=t.getParam("fixed_toolbar_container_target");return p(n)?tg.some(tE.fromDom(n)):tg.none()}function gi(t){return t.inline&&gr(t).isSome()}function gu(t){return gr(t).getOrThunk(function(){return tJ(eK(tE.fromDom(t.getElement())))})}function ga(t){return t.inline&&!mO(t)&&!m_(t)&&!gt(t)}function gc(t){return(t.getParam("toolbar_sticky",!1,"boolean")||t.inline)&&!gi(t)&&!ga(t)}function gs(t,e){var n=t.outerContainer.element;e&&(t.mothership.broadcastOn([cG()],{target:n}),t.uiMothership.broadcastOn([cG()],{target:n})),t.mothership.broadcastOn([gU],{readonly:e}),t.uiMothership.broadcastOn([gU],{readonly:e})}function gl(t,e){t.on("init",function(){t.mode.isReadOnly()&&gs(e,!0)}),t.on("SwitchMode",function(){return gs(e,t.mode.isReadOnly())}),t.getParam("readonly",!1,"boolean")&&t.setMode("readonly")}function gf(){var t;return uh.config({channels:((t={})[gU]={schema:gj,onReceive:function(t,e){sE.set(t,e.readonly)}},t)})}function gd(t,e){var n=t.getApi(e);return function(t){t(n)}}function gm(t,e){return rL(function(n){gd(t,n)(function(n){var o=t.onSetup(n);h(o)&&e.set(o)})})}function gg(t,e){return rz(function(n){return gd(t,n)(e.get())})}function gp(t,e,n,o){var i=nQ(r);return{type:"item",dom:e.dom,components:gY(e.optComponents),data:t.data,eventOrder:gX,hasSubmenu:t.triggersSubmenu,itemBehaviours:om([lg("item-events",[rj(function(e,o){gd(t,e)(t.onAction),t.triggersSubmenu||n!==dK.CLOSE_ON_EXECUTE||(oy(e,rS()),o.stop())}),gm(t,i),gg(t,i)]),sE.config({disabled:function(){return t.disabled||o.isDisabled()},disableClass:"tox-collection__item--state-disabled"}),gf(),fs.config({})].concat(t.itemBehaviours))}}function gh(t){return{value:t.value,meta:C({text:t.text.getOr("")},t.meta)}}function gv(t,e,n){return dM(t,{tag:"div",classes:n=void 0===n?[mN]:n},e)}function gb(t){return{dom:{tag:"div",classes:[mP]},components:[oZ(dI.translate(t))]}}function gy(t,e){return{dom:{tag:"div",classes:e,innerHtml:t}}}function gx(t,e){return{dom:{tag:"div",classes:[mP]},components:[{dom:{tag:t.tag,styles:t.styles},components:[oZ(dI.translate(e))]}]}}function gw(t){var e,n;return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:(e=gq.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},n=F(t.split("+"),function(t){var n=t.toLowerCase().trim();return tC(e,n)?e[n]:t}),gq.mac?n.join(""):n.join("+"))}}}function gS(t){return gv("checkmark",t,["tox-collection__item-checkmark"])}function gk(t){var e=t.map(function(t){return{attributes:{title:dI.translate(t)}}}).getOr({});return C({tag:"div",classes:[mM,mF]},e)}function gC(t,e,n,o){var r,i,u,a,c,s,l,f,d,m,g;return void 0===o&&(o=tg.none()),"color"===t.presets?(r=o,a=t.ariaLabel,c=t.value,{dom:(i=t.iconContent.map(function(t){var n,o;return tn(o=n=(0,e.icons)(),dE(t,o)).or(r).getOrThunk(dT(n))}).getOr(""),u={tag:"div",attributes:a.map(function(t){return{title:e.translate(t)}}).getOr({}),classes:["tox-swatch"]},C(C({},u),"custom"===c?{tag:"button",classes:_(_([],u.classes,!0),["tox-swatches__picker-btn"],!1),innerHtml:i}:"remove"===c?{classes:_(_([],u.classes,!0),["tox-swatch--remove"],!1),innerHtml:i}:{attributes:C(C({},u.attributes),{"data-mce-color":c}),styles:{"background-color":c}})),optComponents:[]}):(s=o,l={tag:"div",classes:[mN]},f=n?t.iconContent.map(function(t){return dM(t,l,e.icons,s)}).orThunk(function(){return tg.some({dom:l})}):tg.none(),d=t.checkMark,m=tg.from(t.meta).fold(function(){return gb},function(t){return tC(t,"style")?b(gx,t.style):gb}),g=t.htmlContent.fold(function(){return t.textContent.map(m)},function(t){return tg.some(gy(t,[mP]))}),{dom:gk(t.ariaLabel),optComponents:[f,g,t.shortcutContent.map(gw),d,t.caret]})}function gO(t,e){return tn(t,"tooltipWorker").map(function(t){return[m6.config({lazySink:e.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(t){return{type:"submenu",item:t,overrides:{maxHeightFunction:uL}}},mode:"follow-highlight",onShow:function(e,n){t(function(t){m6.setComponents(e,[r9({element:tE.fromDom(t)})])})}})]}).getOr([])}function g_(t,e){var n=dI.translate(t),o=m8.DOM.encode(n);if(0<e.length){var r=RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");return o.replace(r,function(t){return'<span class="tox-autocompleter-highlight">'+t+"</span>"})}return o}function gT(t){return g$.test(t)||gQ.test(t)}function gE(t){var e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()}function gD(t){return{value:gE(t.red)+gE(t.green)+gE(t.blue)}}function gA(t,e,n,o){return{red:t,green:e,blue:n,alpha:o}}function gB(t){var e=parseInt(t,10);return e.toString()===t&&0<=e&&e<=255}function gM(t){var e,n,o,r=(t.hue||0)%360,i=t.saturation/100,u=t.value/100,i=g0(0,gZ(i,1)),u=g0(0,gZ(u,1));if(0===i)return gA(e=n=o=g1(255*u),n,o,1);var a=r/60,c=u*i,s=c*(1-Math.abs(a%2-1)),l=u-c;switch(Math.floor(a)){case 0:e=c,n=s,o=0;break;case 1:e=s,n=c,o=0;break;case 2:e=0,n=c,o=s;break;case 3:e=0,n=s,o=c;break;case 4:e=s,n=0,o=c;break;case 5:e=c,n=0,o=s;break;default:e=n=o=0}return gA(e=g1(255*(e+l)),n=g1(255*(n+l)),o=g1(255*(o+l)),1)}function gF(t){var e,n=null===(e=gQ.exec({value:t.value.replace(g$,function(t,e,n,o){return e+e+n+n+o+o})}.value))?["FFFFFF","FF","FF","FF"]:e;return gA(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),1)}function gI(t,e,n,o){return gA(parseInt(t,10),parseInt(e,10),parseInt(n,10),parseFloat(o))}function gR(t){if("transparent"===t)return tg.some(gA(0,0,0,0));var e=g2.exec(t);if(null!==e)return tg.some(gI(e[1],e[2],e[3],"1"));var n=g5.exec(t);return null!==n?tg.some(gI(n[1],n[2],n[3],n[4])):tg.none()}function gN(t){return"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")"}function gP(t,e){return t.fire("ResizeContent",e)}function gV(t,e,n){return{hue:t,saturation:e,value:n}}function gH(t){var e=0,n=t.red/255,o=t.green/255,r=t.blue/255,i=Math.min(n,Math.min(o,r)),u=Math.max(n,Math.max(o,r));return i===u?gV(0,0,100*(e=i)):(e=u,gV(Math.round(60*((n===i?3:r===i?1:5)-(n===i?o-r:r===i?n-o:r-n)/(u-i))),Math.round((u-i)/u*100),Math.round(100*e)))}function gL(t){return sE.config({disabled:t,disableClass:"tox-tbtn--disabled"})}(mD=mE=mE||{}).default="wrap",mD.floating="floating",mD.sliding="sliding",mD.scrolling="scrolling",(mB=mA=mA||{}).auto="auto",mB.top="top",mB.bottom="bottom";var gz,gU="silver.readonly",gj=ot([nN("readonly",oi)]),gW=function(t){return sE.config({disabled:t})},gG=function(t){return sE.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},gX=((gz={})[rb()]=["disabling","alloy.base.behaviour","toggling","item-events"],gz),gY=ti,gq=tinymce.util.Tools.resolve("tinymce.Env"),gK=function(t,e){return F(t,function(t){switch(t.type){case"cardcontainer":return o=gK(t.items,e),{dom:{tag:"div",classes:[mL,"vertical"===t.direction?"tox-collection__item-container--column":mz,"left"===t.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right",function(){switch(t.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}}()]},components:o};case"cardimage":return n=t.src,{dom:{tag:"img",classes:t.classes,attributes:{src:n,alt:t.alt.getOr("")}}};case"cardtext":var n,o,r=t.name.exists(function(t){return tb(e.cardText.highlightOn,t)})?tg.from(e.cardText.matchText).getOr(""):"";return gy(g_(t.text,r),t.classes)}})},gJ=aG(fS(),fk()),g$=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,gQ=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,gZ=Math.min,g0=Math.max,g1=Math.round,g2=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,g5=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,g3=gA(255,0,0,1),g9=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),g4="tinymce-custom-colors";function g6(t){return!1!==t.getParam("custom_colors")}function g8(t){var e=t.getParam("color_map");return void 0!==e?function(t){for(var e=[],n=0;n<t.length;n+=2)e.push({text:t[n+1],value:"#"+function(t){return(gT(t)?tg.some({value:(ta(t,"#",0)?t.substring(1):t).toUpperCase()}):tg.none()).orThunk(function(){return gR(t).map(gD)}).getOrThunk(function(){var e=document.createElement("canvas");e.height=1,e.width=1;var n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),n.fillStyle="#FFFFFF",n.fillStyle=t,n.fillRect(0,0,1,1);var o=n.getImageData(0,0,1,1).data;return gD(gA(o[0],o[1],o[2],o[3]))})}(t[n]).value,type:"choiceitem"});return e}(e):pd}function g7(t){var e=Math.max(5,Math.ceil(Math.sqrt(g8(t).length)));return t.getParam("color_cols",e,"number")}function pt(t){var e="choiceitem",n={type:e,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[n,{type:e,text:"Custom color",icon:"color-picker",value:"custom"}]:[n]}function pe(t,e,n,o){"custom"===n?pp(t)(function(n){n.each(function(n){pm.add(n),t.execCommand("mceApplyTextcolor",e,n),o(n)})},pg):"remove"===n?(o(""),t.execCommand("mceRemoveTextcolor",e)):(o(n),t.execCommand("mceApplyTextcolor",e,n))}function pn(t,e){return t.concat(F(pm.state(),function(t){return{type:pf,text:t,value:t}}).concat(pt(e)))}function po(t,e){return function(n){n(pn(t,e))}}function pr(t,e,n){t.setIconFill("forecolor"===e?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",n)}function pi(t,e,n,o,i){t.ui.registry.addSplitButton(e,{tooltip:o,presets:"color",icon:"forecolor"===e?"text-color":"highlight-bg-color",select:function(e){var o;return t.dom.getParents(t.selection.getStart(),function(t){var e;(e=t.style["forecolor"===n?"color":"background-color"])&&(o=o||e)}),tg.from(o).bind(function(t){return gR(t).map(function(t){var n=gD(t).value;return tc(e.toLowerCase(),n)})}).getOr(!1)},columns:g7(t),fetch:po(g8(t),g6(t)),onAction:function(e){pe(t,n,i.get(),r)},onItemAction:function(o,r){pe(t,n,r,function(n){i.set(n),t.fire("TextColorChange",{name:e,color:n})})},onSetup:function(n){function o(t){t.name===e&&pr(n,t.name,t.color)}return pr(n,e,i.get()),t.on("TextColorChange",o),function(){t.off("TextColorChange",o)}}})}function pu(t,e,n,o){t.ui.registry.addNestedMenuItem(e,{text:o,icon:"forecolor"===e?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(e){pe(t,n,e.value,r)}}]}})}function pa(t,e,n,o,r,i,u,a){return mh(t,mg(e),ph(e,n,o,"color"!==r?"normal":"color",i,u,a),o,r)}function pc(t,e){var n=ms(e);return 1===t?{mode:"menu",moveOnTab:!0}:"auto"===t?{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===e?"tox-swatches__row":"tox-collection__group")}}var ps,pl,pf="choiceitem",pd=[{type:pf,text:"Light Green",value:"#BFEDD2"},{type:pf,text:"Light Yellow",value:"#FBEEB8"},{type:pf,text:"Light Red",value:"#F8CAC6"},{type:pf,text:"Light Purple",value:"#ECCAFA"},{type:pf,text:"Light Blue",value:"#C2E0F4"},{type:pf,text:"Green",value:"#2DC26B"},{type:pf,text:"Yellow",value:"#F1C40F"},{type:pf,text:"Red",value:"#E03E2D"},{type:pf,text:"Purple",value:"#B96AD9"},{type:pf,text:"Blue",value:"#3598DB"},{type:pf,text:"Dark Turquoise",value:"#169179"},{type:pf,text:"Orange",value:"#E67E23"},{type:pf,text:"Dark Red",value:"#BA372A"},{type:pf,text:"Dark Purple",value:"#843FA1"},{type:pf,text:"Dark Blue",value:"#236FA1"},{type:pf,text:"Light Gray",value:"#ECF0F1"},{type:pf,text:"Medium Gray",value:"#CED4D9"},{type:pf,text:"Gray",value:"#95A5A6"},{type:pf,text:"Dark Gray",value:"#7E8C8D"},{type:pf,text:"Navy Blue",value:"#34495E"},{type:pf,text:"Black",value:"#000000"},{type:pf,text:"White",value:"#ffffff"}],pm=function(t){function e(t){r.splice(t,1)}void 0===t&&(t=10);var n=g9.getItem(g4),o=s(n)?JSON.parse(n):[],r=t-o.length<0?o.slice(0,t):o;return{add:function(n){var o;(-1===(o=th.call(r,n))?tg.none():tg.some(o)).each(e),r.unshift(n),r.length>t&&r.pop(),g9.setItem(g4,JSON.stringify(r))},state:function(){return r.slice(0)}}}(10),pg="#000000",pp=function(t){return function(e,n){var o=!1;t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{colorpicker:n},onAction:function(t,e){"hex-valid"===e.name&&(o=e.value)},onSubmit:function(n){var r=n.getData().colorpicker;o?(e(tg.from(r)),n.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",r]))},onClose:r,onCancel:function(){e(tg.none())}})}},ph=function(t,e,n,o,i,u,a){return ti(F(t,function(c){return"choiceitem"===c.type?nA("choicemenuitem",mK,c).fold(mp,function(s){var l,f,d,m;return tg.some((l=1===n,f=u(c.value),void 0===(d=mg(t))&&(d=!0),m=gC({presets:o,textContent:l?s.text:tg.none(),htmlContent:tg.none(),ariaLabel:s.text,iconContent:s.icon,shortcutContent:l?s.shortcut:tg.none(),checkMark:l?tg.some(gS(a.icons)):tg.none(),caret:tg.none(),value:s.value},a,d),n4(gp({data:gh(s),disabled:s.disabled,getApi:function(t){return{setActive:function(e){fp.set(t,e)},isActive:function(){return fp.isOn(t)},isDisabled:function(){return sE.isDisabled(t)},setDisabled:function(e){return sE.set(t,e)}}},onAction:function(t){return e(s.value)},onSetup:function(t){return t.setActive(f),r},triggersSubmenu:!1,itemBehaviours:[]},m,i,a),{toggling:{toggleClass:mR,toggleOnExecute:!1,selected:s.active}})))}):tg.none()}))},pv=oI("cell-over"),pb=oI("cell-execute"),py={inserttable:function(t){var e=oI("size-label"),n=function(t){for(var e=[],n=0;n<10;n++){for(var o=[],r=0;r<10;r++)o.push(function(t,e,n){var o;function r(n){return ox(n,pb,{row:t,col:e})}function i(t,e){e.stop(),r(t)}return r4({dom:{tag:"div",attributes:((o={role:"button"})["aria-labelledby"]=n,o)},behaviours:om([lg("insert-table-picker-cell",[oO(re(),fd.focus),oO(rb(),r),oO(rc(),i),oO(rx(),i)]),fp.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),fd.config({onFocus:function(n){return ox(n,pv,{row:t,col:e})}})])})}(n,r,t));e.push(o)}return e}(e),o=oZ("0x0"),r=lz({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:e}},components:[o],behaviours:om([fs.config({})])});return{type:"widget",data:{value:oI("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[gJ.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:z(n,function(t){return F(t,oV)}).concat(r.asSpec()),behaviours:om([lg("insert-table-picker",[rL(function(t){fs.set(r.get(t),[o])}),oD(pv,function(t,e,o){var i=o.event,u=i.row,a=i.col;!function(t,e,n){for(var o=0;o<10;o++)for(var r=0;r<10;r++)fp.set(t[o][r],o<=e&&r<=n)}(n,u,a),fs.set(r.get(t),[oZ(a+1+"x"+(u+1))])}),oD(pb,function(e,n,o){var r=o.event,i=r.row,u=r.col;t.onAction({numRows:i+1,numColumns:u+1}),oy(e,rS())})]),fa.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function(t,e){var n,o=(n=t.initData.allowCustomColors&&e.colorinput.hasCustomColors(),t.initData.colors.fold(function(){return pn(e.colorinput.getColors(),n)},function(t){return t.concat(pt(n))})),r=e.colorinput.getColorCols(),i=pa(oI("menu-value"),o,function(e){t.onAction({value:e})},r,"color",dK.CLOSE_ON_EXECUTE,w,e.shared.providers),u=C(C({},i),{markers:ms("color"),movement:pc(r,"color")});return{type:"widget",data:{value:oI("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[gJ.widget(fE.sketch(u))]}}},px=function(t){var e=t.text.fold(function(){return{}},function(t){return{innerHtml:t}});return{type:"separator",dom:C({tag:"div",classes:[mF,"tox-collection__group-heading"]},e),components:[]}},pw=function(t,e,n,o){void 0===o&&(o=!0);var r=gC({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:tg.none(),ariaLabel:t.text,caret:tg.none(),checkMark:tg.none(),shortcutContent:t.shortcut},n,o);return gp({data:gh(t),getApi:function(t){return{isDisabled:function(){return sE.isDisabled(t)},setDisabled:function(e){return sE.set(t,e)}}},disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,e,n)},pS=function(t,e,n,o,i){void 0===o&&(o=!0);var u=(i=void 0!==i&&i)?gv("chevron-down",n.icons,[mV]):gv("chevron-right",n.icons,[mV]),a=gC({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:tg.none(),ariaLabel:t.text,caret:tg.some(u),checkMark:tg.none(),shortcutContent:t.shortcut},n,o);return gp({data:gh(t),getApi:function(t){return{isDisabled:function(){return sE.isDisabled(t)},setDisabled:function(e){return sE.set(t,e)}}},disabled:t.disabled,onAction:r,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},a,e,n)},pk=function(t,e,n,o){void 0===o&&(o=!0);var r=gC({iconContent:t.icon,textContent:t.text,htmlContent:tg.none(),ariaLabel:t.text,checkMark:tg.some(gS(n.icons)),caret:tg.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},n,o);return n4(gp({data:gh(t),disabled:t.disabled,getApi:function(t){return{setActive:function(e){fp.set(t,e)},isActive:function(){return fp.isOn(t)},isDisabled:function(){return sE.isDisabled(t)},setDisabled:function(e){return sE.set(t,e)}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,e,n),{toggling:{toggleClass:mR,toggleOnExecute:!1,selected:t.active}})};function pC(t,e,n,o,r){var i=mg(e),u=ti(F(e,function(t){var e;return function(t,e,n,o,r){function i(t){return r?C(C({},t),{shortcut:tg.none(),icon:t.text.isSome()?tg.none():t.icon}):t}var u=n.shared.providers;switch(t.type){case"menuitem":return nA("menuitem",mQ,t).fold(mp,function(t){return tg.some(pw(i(t),e,u,o))});case"nestedmenuitem":return nA("nestedmenuitem",mZ,t).fold(mp,function(t){return tg.some(pS(i(t),e,u,o,r))});case"togglemenuitem":return nA("togglemenuitem",m0,t).fold(mp,function(t){return tg.some(pk(i(t),e,u,o))});case"separator":return nA("separatormenuitem",d2,t).fold(mp,function(t){return tg.some(px(t))});case"fancymenuitem":return nA("fancymenuitem",m$,t).fold(mp,function(t){var e;return tn(py,(e=i(t)).fancytype).map(function(t){return t(e,n)})});default:return console.error("Unknown item in general menu",t),tg.none()}}(e="nestedmenuitem"===t.type&&t.getSubmenuItems().length<=0?C(C({},t),{disabled:!0}):t,n,o,r?!tC(e,"text"):i,r)}));return(r?function(t,e,n,o,r){var i={dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[fE.parts.items({preprocess:function(t){return md(t,function(t,e){return"separator"===n[e].type})}})]};return{value:t,dom:i.dom,components:i.components,items:n}}:mh)(t,i,u,1,"normal")}function pO(t){return fM.singleData(t.value,t)}function p_(t,e,n){return ir(t,e,n).isSome()}function pT(t,e){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},schedule:function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];n=setTimeout(function(){t.apply(null,o),n=null},e)}}}function pE(t){var e=t.raw;return void 0===e.touches||1!==e.touches.length?tg.none():tg.some(e.touches[0])}function pD(){return eX().browser.isFirefox()}function pA(t,e){return nQ(tn(t,"target").getOr(e))}function pB(t,e,n,o,r,i){var u,a,c=t(e,o),s=(u=nQ(!1),a=nQ(!1),{stop:function(){u.set(!0)},cut:function(){a.set(!0)},isStopped:u.get,isCut:a.get,event:n,setSource:r.set,getSource:r.get});return c.fold(function(){return i.logEventNoHandlers(e,o),pP.complete()},function(t){var n=t.descHandler;return oU(n)(s),s.isStopped()?(i.logEventStopped(e,t.element,n.purpose),pP.stopped()):s.isCut()?(i.logEventCut(e,t.element,n.purpose),pP.complete()):tj(t.element).fold(function(){return i.logNoParent(e,t.element,n.purpose),pP.complete()},function(o){return i.logEventResponse(e,t.element,n.purpose),pP.resume(o)})})}function pM(t){function e(e){return tj(t.element).fold(S,function(t){return tP(e,t)})}function n(t,n){return T.find(e,t,n)}function o(t){ty(T.filter(rv()),function(e){oU(e.descHandler)(t)})}var i,a,c,s,l,f,d,m,g,p,h,v,y,k,O,_,T=function(){function t(t){oR(t.element).each(function(t){delete o[t],n.unregisterId(t)})}var e,n=(e={},{registerId:function(t,n,o){Q(o,function(o,r){var i=void 0!==e[r]?e[r]:{};i[n]={cHandler:b.apply(void 0,[o.handler].concat(t)),purpose:o.purpose},e[r]=i})},unregisterId:function(t){Q(e,function(e,n){tC(e,t)&&delete e[t]})},filterByType:function(t){return tn(e,t).map(function(t){return tt(t,function(t,e){return{id:e,descHandler:t}})}).getOr([])},find:function(t,n,o){return tn(e,n).bind(function(e){return op(o,function(t){return oR(t).bind(function(t){return tn(e,t)}).map(function(e){return{element:t,descHandler:e}})},t)})}}),o={};return{find:function(t,e,o){return n.find(t,e,o)},filter:function(t){return n.filterByType(t)},register:function(e){var r=oR(e.element).getOrThunk(function(){var t;return rJ(e.element,t=oI(rq+"uid-")),t});to(o,r)&&function(e){var n=o[r];if(n!==e)throw Error('The tagId "'+r+'" is already used by: '+oF(n.element)+"\nCannot use it for: "+oF(e.element)+"\nThe conflicting element is"+(eQ(n.element)?" ":" not ")+"already in the DOM");t(e)}(e),n.registerId([e],r,e.events),o[r]=e},unregister:t,getById:function(t){return tn(o,t)}}}(),E=(i=t.element,m=C({stopBackspace:!0},{triggerEvent:function(t,e){return is(t,e.target,function(o){return pH(n,t,e,e.target,o)})}}),s=uk(),l=nQ(!1),f=pT(function(t){m.triggerEvent(rw(),t),l.set(!0)},400),d=om([{key:o5(),value:function(t){return pE(t).each(function(e){f.cancel();var n={x:e.clientX,y:e.clientY,target:t.target};f.schedule(t),l.set(!1),s.set(n)}),tg.none()}},{key:o3(),value:function(t){return f.cancel(),pE(t).each(function(t){s.on(function(e){(5<Math.abs(t.clientX-e.x)||5<Math.abs(t.clientY-e.y))&&s.clear()})}),tg.none()}},{key:o9(),value:function(t){return f.cancel(),s.get().filter(function(e){return tP(e.target,t.target)}).map(function(e){return l.get()?(t.prevent(),!1):m.triggerEvent(rx(),t)})}}]),g={fireIfReady:function(t,e){return tn(d,e).bind(function(e){return e(t)})}},p=F(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(t){return uC(i,t,function(e){g.fireIfReady(e,t).each(function(t){t&&e.kill()}),m.triggerEvent(t,e)&&e.kill()})}),h=uk(),v=uC(i,"paste",function(t){g.fireIfReady(t,"paste").each(function(e){e&&t.kill()}),m.triggerEvent("paste",t)&&t.kill(),h.set(setTimeout(function(){m.triggerEvent(rh(),t)},0))}),y=uC(i,"keydown",function(t){var e;m.triggerEvent("keydown",t)?t.kill():!m.stopBackspace||8!==(e=t).raw.which||tb(["input","textarea"],tD(e.target))||p_(e.target,'[contenteditable="true"]')||t.prevent()}),a=function(t){m.triggerEvent("focusin",t)&&t.kill()},k=pD()?uO(i,"focus",a):uC(i,"focusin",a),c=function(t){m.triggerEvent("focusout",t)&&t.kill(),(O=uk()).set(setTimeout(function(){m.triggerEvent(rp(),t)},0))},_=pD()?uO(i,"blur",c):uC(i,"focusout",c),{unbind:function(){ty(p,function(t){t.unbind()}),y.unbind(),k.unbind(),_.unbind(),v.unbind(),h.on(clearTimeout),O.on(clearTimeout)}}),D={debugInfo:u("real"),triggerEvent:function(t,e,o){is(t,e,function(r){return pH(n,t,o,e,r)})},triggerFocus:function(t,e){oR(t).fold(function(){iG(t)},function(o){is(rg(),t,function(o){var i,u=rg(),a=pA(i={originator:e,kill:r,prevent:r,target:t},t);return pB(n,u,i,t,a,o),!1})})},triggerEscape:function(t,e){D.triggerEvent("keydown",t.element,e.event)},getByUid:function(t){return V(t)},getByDom:function(t){return H(t)},build:r4,addToGui:function(t){M(t)},removeFromGui:function(t){I(t)},addToWorld:function(t){A(t)},removeFromWorld:function(t){B(t)},broadcast:function(t){R(t)},broadcastOn:function(t,e){N(t,e)},broadcastEvent:function(t,e){P(t,e)},isConnected:S},A=function(t){t.connect(D),eB(t.element)||(T.register(t),ty(t.components(),A),D.triggerEvent(rC(),t.element,{target:t.element}))},B=function(t){eB(t.element)||(ty(t.components(),B),T.unregister(t)),t.disconnect()},M=function(e){cL(t,e,e8)},I=function(t){aC(t)},R=function(t){o({universal:!0,data:t})},N=function(t,e){o({universal:!1,channels:t,data:e})},P=function(t,e){var n,o,i=T.filter(t);return o={stop:function(){n.set(!0)},cut:r,isStopped:(n=nQ(!1)).get,isCut:w,event:e,setSource:x("Cannot set source of a broadcasted event"),getSource:x("Cannot get source of a broadcasted event")},ty(i,function(t){oU(t.descHandler)(o)}),o.isStopped()},V=function(t){return T.getById(t).fold(function(){return na.error(Error('Could not find component with uid: "'+t+'" in system.'))},na.value)},H=function(t){return V(oR(t).getOr("not found"))};return A(t),{root:t,element:t.element,destroy:function(){E.unbind(),e7(t.element)},add:M,remove:I,getByUid:V,getByDom:H,addToWorld:A,removeFromWorld:B,broadcast:R,broadcastOn:N,broadcastEvent:P}}function pF(t,e,n,o){var r=pY(t,e,n,o);return pj.sketch(r)}function pI(t,e){return pj.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}})}function pR(t){return om([fd.config({onFocus:t.selectOnFocus?function(t){var e=t.element,n=o$(e);e.dom.setSelectionRange(0,n.length)}:r})])}function pN(t){return{tag:t.tag,attributes:C({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}}(pl=ps={})[pl.ContentFocus=0]="ContentFocus",pl[pl.UiFocus=1]="UiFocus";var pP=nZ([{stopped:[]},{resume:["element"]},{complete:[]}]),pV=function(t,e,n,o,r,i){return pB(t,e,n,o,r,i).fold(S,function(o){return pV(t,e,n,o,r,i)},w)},pH=function(t,e,n,o,r){var i=pA(n,o);return pV(t,e,n,o,i,r)},pL=a6({name:"Container",factory:function(t){var e=t.dom,n=e.attributes,o=O(e,["attributes"]);return{uid:t.uid,dom:C({tag:"div",attributes:C({role:"presentation"},n)},o),components:t.components,behaviours:t.containerBehaviours.dump,events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[nY("components",[]),aV("containerBehaviours",[]),nY("events",{}),nY("domModification",{}),nY("eventOrder",{})]}),pz=u([nY("prefix","form-field"),aV("fieldBehaviours",[sS,c1])]),pU=u([sd({schema:[nR("dom")],name:"label"}),sd({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[nR("text")],name:"aria-descriptor"}),sl({factory:{sketch:function(t){var e,n,o=(e=["factory"],n={},Q(t,function(t,o){tb(e,o)||(n[o]=t)}),n);return t.factory.sketch(o)}},schema:[nR("factory")],name:"field"})]),pj=a8({name:"FormField",configFields:pz(),partFields:pU(),factory:function(t,e,n,o){var r=aH(t.fieldBehaviours,[sS.config({find:function(e){return a$(e,t,"field")}}),c1.config({store:{mode:"manual",getValue:function(t){return sS.getCurrent(t).bind(c1.getValue)},setValue:function(t,e){sS.getCurrent(t).each(function(t){c1.setValue(t,e)})}}})]),i=om([rL(function(e,n){var o=aZ(e,t,["label","field","aria-descriptor"]);o.field().each(function(e){var n=oI(t.prefix);o.label().each(function(t){tQ(t.element,"for",n),tQ(e.element,"id",n)}),o["aria-descriptor"]().each(function(n){var o=oI(t.prefix);tQ(n.element,"id",o),tQ(e.element,"aria-describedby",o)})})})]);return{uid:t.uid,dom:t.dom,components:e,behaviours:r,events:i,apis:{getField:function(e){return a$(e,t,"field")},getLabel:function(e){return a$(e,t,"label")}}}},apis:{getField:function(t,e){return t.getField(e)},getLabel:function(t,e){return t.getLabel(e)}}}),pW=Object.freeze({__proto__:null,exhibit:function(t,e){return oz({attributes:om([{key:e.tabAttr,value:"true"}])})}}),pG=iU({fields:[nY("tabAttr","data-alloy-tabstop")],name:"tabstopping",active:pW}),pX=tinymce.util.Tools.resolve("tinymce.html.Entities"),pY=function(t,e,n,o){return{dom:pq(n),components:t.toArray().concat([e]),fieldBehaviours:om(o)}},pq=function(t){return{tag:"div",classes:["tox-form__group"].concat(t)}},pK=oI("form-component-change"),pJ=oI("form-close"),p$=oI("form-cancel"),pQ=oI("form-action"),pZ=oI("form-submit"),p0=oI("form-block"),p1=oI("form-unblock"),p2=oI("form-tabchange"),p5=oI("form-resize"),p3=u([nj("data"),nY("inputAttributes",{}),nY("inputStyles",{}),nY("tag","input"),nY("inputClasses",[]),iy("onSetValue"),nY("styles",{}),nY("eventOrder",{}),aV("inputBehaviours",[c1,fd]),nY("selectOnFocus",!0)]),p9=a6({name:"Input",configFields:p3(),factory:function(t,e){return{uid:t.uid,dom:pN(t),components:[],behaviours:C(C({},pR(t)),aH(t.inputBehaviours,[c1.config({store:C(C({mode:"manual"},t.data.map(function(t){return{initialValue:t}}).getOr({})),{getValue:function(t){return o$(t.element)},setValue:function(t,e){o$(t.element)!==e&&oQ(t.element,e)}}),onSetValue:t.onSetValue})])),eventOrder:t.eventOrder}}}),p4={},p6={exports:p4};function p8(t){setTimeout(function(){throw t},0)}function p7(t,e){oY(e.getRoot(t).getOr(t.element),e.invalidClass),e.notify.each(function(e){tb(hl,tD(t.element))&&tQ(t.element,"aria-invalid",!1),e.getContainer(t).each(function(t){oM(t,e.validHtml)}),e.onValid(t)})}function ht(t,e,n,o){oX(e.getRoot(t).getOr(t.element),e.invalidClass),e.notify.each(function(e){tb(hl,tD(t.element))&&tQ(t.element,"aria-invalid",!0),e.getContainer(t).each(function(t){oM(t,o)}),e.onInvalid(t,o)})}function he(t,e,n){return e.validator.fold(function(){return hs(na.value(!0))},function(e){return e.validate(t)})}function hn(t,e,n){return e.notify.each(function(e){e.onValidate(t)}),he(t,e).map(function(n){return t.getSystem().isConnected()?n.fold(function(n){return ht(t,e,0,n),na.error(n)},function(n){return p7(t,e),na.value(n)}):na.error("No longer in system")})}!function(){var t=this,e=function(){var t,e,n={exports:{}};function o(){}function r(t){if("object"!=typeof this)throw TypeError("Promises must be constructed via new");if("function"!=typeof t)throw TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function i(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,r._immediateFn(function(){var n,o=1===t._state?e.onFulfilled:e.onRejected;if(null!==o){try{n=o(t._value)}catch(t){return void a(e.promise,t)}u(e.promise,n)}else(1===t._state?u:a)(e.promise,t._value)})):t._deferreds.push(e)}function u(t,e){try{if(e===t)throw TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof r)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void l(function(){n.apply(e,arguments)},t)}t._state=1,t._value=e,c(t)}catch(e){a(t,e)}}function a(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&r._immediateFn(function(){t._handled||r._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)i(t,t._deferreds[e]);t._deferreds=null}function s(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function l(t,e){var n=!1;try{t(function(t){n||(n=!0,u(e,t))},function(t){n||(n=!0,a(e,t))})}catch(t){if(n)return;n=!0,a(e,t)}}t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=setTimeout,r.prototype.catch=function(t){return this.then(null,t)},r.prototype.then=function(t,e){var n=new this.constructor(o);return i(this,new s(t,e,n)),n},r.all=function(t){var e=Array.prototype.slice.call(t);return new r(function(t,n){if(0===e.length)return t([]);for(var o=e.length,r=0;r<e.length;r++)!function r(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var a=u.then;if("function"==typeof a)return a.call(u,function(t){r(i,t)},n),0}e[i]=u,0==--o&&t(e)}catch(t){n(t)}}(r,e[r])})},r.resolve=function(t){return t&&"object"==typeof t&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(t){return new r(function(e,n){n(t)})},r.race=function(t){return new r(function(e,n){for(var o=0,r=t.length;o<r;o++)t[o].then(e,n)})},r._immediateFn="function"==typeof setImmediate?function(t){setImmediate(t)}:function(t){e(t,0)},r._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},r._setImmediateFn=function(t){r._immediateFn=t},r._setUnhandledRejectionFn=function(t){r._unhandledRejectionFn=t},n.exports?n.exports=r:t.Promise||(t.Promise=r);var f=n.exports;return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||f}};"object"==typeof p4&&void 0!==p6?p6.exports=e():(t="undefined"!=typeof globalThis?globalThis:t||self).EphoxContactWrapper=e()}();var ho,hr,hi=p6.exports.boltExport,hu=function(t){function e(t){r()?i(t):o.push(t)}var n=tg.none(),o=[],r=function(){return n.isSome()},i=function(t){n.each(function(e){setTimeout(function(){t(e)},0)})};return t(function(t){r()||(n=tg.some(t),ty(o,i),o=[])}),{get:e,map:function(t){return hu(function(n){e(function(e){n(t(e))})})},isReady:r}},ha=function(t){function e(e){t().then(e,p8)}return{map:function(e){return ha(function(){return t().then(e)})},bind:function(e){return ha(function(){return t().then(function(t){return e(t).toPromise()})})},anonBind:function(e){return ha(function(){return t().then(function(){return e.toPromise()})})},toLazy:function(){return hu(e)},toCached:function(){var e=null;return ha(function(){return e=null===e?t():e})},toPromise:t,get:e}},hc=function(t){return ha(function(){return new hi(t)})},hs=function(t){return ha(function(){return hi.resolve(t)})},hl=["input","textarea"],hf=Object.freeze({__proto__:null,markValid:p7,markInvalid:ht,query:he,run:hn,isInvalid:function(t,e){return oq(e.getRoot(t).getOr(t.element),e.invalidClass)}}),hd=Object.freeze({__proto__:null,events:function(t,e){return t.validator.map(function(e){return om([oO(e.onEvent,function(e){hn(e,t).get(a)})].concat(e.validateOnLoad?[rL(function(e){hn(e,t).get(r)})]:[]))}).getOr({})}}),hm=iU({fields:[nR("invalidClass"),nY("getRoot",tg.none),nX("notify",[nY("aria","alert"),nY("getContainer",tg.none),nY("validHtml",""),iy("onValid"),iy("onInvalid"),iy("onValidate")]),nX("validator",[nR("validate"),nY("onEvent","input"),nY("validateOnLoad",!0)])],name:"invalidating",active:hd,apis:hf,extra:{validation:function(t){return function(e){return hs(t(c1.getValue(e)))}}}}),hg=Object.freeze({__proto__:null,getCoupled:function(t,e,n,o){return n.getOrCreate(t,e,o)}}),hp=iU({fields:[nN("others",nD(na.value,on()))],name:"coupling",apis:hg,state:Object.freeze({__proto__:null,init:function(){var t={};return r1({readState:u({}),getOrCreate:function(e,n,o){var r=tw(n.others);if(r)return tn(t,o).getOrThunk(function(){var r=tn(n.others,o).getOrDie("No information found for coupled component: "+o)(e),i=e.getSystem().build(r);return t[o]=i});throw Error("Cannot find coupled component: "+o+". Known coupled components: "+JSON.stringify(r,null,2))}})}})}),hh=u("sink"),hv=u(sd({name:hh(),overrides:u({dom:{tag:"div"},behaviours:om([cP.config({useFixed:S})]),events:om([oA(rr()),oA(o6()),oA(rc())])})}));function hb(t,e){var n=t.getHotspot(e).getOr(e),o=t.getAnchorOverrides();return t.layouts.fold(function(){return{type:"hotspot",hotspot:n,overrides:o}},function(t){return{type:"hotspot",hotspot:n,overrides:o,layouts:t}})}function hy(t,e,n,o,r,i,u){var a=hb(t,n),c=(0,t.fetch)(n).map(e),s=v0(n,t);return c.map(function(t){return t.bind(function(t){return tg.from(fM.sketch(C(C({},r.menu()),{uid:oI(""),data:t,highlightImmediately:u===ho.HighlightFirst,onOpenMenu:function(t,e){var n=s().getOrDie();cP.position(n,e,{anchor:a}),cW.decloak(o)},onOpenSubmenu:function(t,e,n){var r=s().getOrDie();cP.position(r,n,{anchor:{type:"submenu",item:e}}),cW.decloak(o)},onRepositionMenu:function(t,e,n){var o=s().getOrDie();cP.position(o,e,{anchor:a}),ty(n,function(t){cP.position(o,t.triggeredMenu,{anchor:{type:"submenu",item:t.triggeringItem}})})},onEscape:function(){return fd.focus(n),cW.close(o),tg.some(!0)}})))})}).map(function(t){return t.fold(function(){cW.isOpen(o)&&cW.close(o)},function(t){cW.cloak(o),cW.open(o,t),i(o)}),o})}function hx(t,e,n,o,r,i){var u=hp.getCoupled(n,"sandbox");return(cW.isOpen(u)?function(t,e,n,o,r,i,u){return cW.close(o),hs(o)}:hy)(t,e,n,u,o,r,i)}function hw(t){cW.getState(t).each(function(t){fM.repositionMenus(t)})}function hS(t,e,n){var o=ii(),r=v0(e,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:o.id,role:"listbox"}},behaviours:aH(t.sandboxBehaviours,[c1.config({store:{mode:"memory",initialValue:e}}),cW.config({onOpen:function(r,i){var u,a,c,s,l,f=hb(t,e);o.link(e.element),t.matchWidth&&(u=f.hotspot,a=t.useMinWidth,s=sS.getCurrent(i).getOr(i),l=es(u.element),a?t4(s.element,"min-width",l+"px"):(c=s.element,e4.set(c,l))),t.onOpen(f,r,i),void 0!==n&&void 0!==n.onOpen&&n.onOpen(r,i)},onClose:function(t,r){o.unlink(e.element),void 0!==n&&void 0!==n.onClose&&n.onClose(t,r)},isPartOf:function(t,n,o){return ic(n,o)||ic(e,o)},getAttachPoint:function(){return r().getOrDie()}}),sS.config({find:function(t){return cW.getState(t).bind(function(t){return sS.getCurrent(t)})}}),uh.config({channels:C(C({},aB({isExtraPart:w})),aM({doReposition:hw}))})])}}function hk(t){hw(hp.getCoupled(t,"sandbox"))}function hC(){return[nY("sandboxClasses",[]),aV("sandboxBehaviours",[sS,uh,cW,c1])]}function hO(t){return sd({name:t+"-edge",overrides:function(e){return e.model.manager.edgeActions[t].fold(function(){return{}},function(t){return{events:om([o_(o5(),function(e,n,o){return t(e,o)},[e]),o_(o6(),function(e,n,o){return t(e,o)},[e]),o_(o8(),function(e,n,o){o.mouseIsDown.get()&&t(e,o)},[e])])}})}})}function h_(t){var e=t.event.raw;return -1===e.type.indexOf("touch")?void 0!==e.clientX?tg.some(e).map(function(t){return e3(t.clientX,t.clientY)}):tg.none():void 0!==e.touches&&1===e.touches.length?tg.some(e.touches[0]).map(function(t){return e3(t.clientX,t.clientY)}):tg.none()}function hT(t){return t.model.minX}function hE(t){return t.model.minY}function hD(t){return t.model.minX-1}function hA(t){return t.model.minY-1}function hB(t){return t.model.maxX}function hM(t){return t.model.maxY}function hF(t){return t.model.maxX+1}function hI(t){return t.model.maxY+1}function hR(t){return hB(t)-hT(t)}function hN(t){return hM(t)-hE(t)}function hP(t){return t.stepSize}function hV(t){return t.snapToGrid}function hH(t,e){return void 0!==t[e+"-edge"]}function hL(t){return hH(t,"right")}function hz(t){return hH(t,"bottom")}function hU(t){return t.model.value.get()}function hj(t,e){return{x:t,y:e}}function hW(t,e){ox(t,ba(),{value:e})}function hG(t,e,n,o){return t<e?t:n<t?n:t===e?e-1:Math.max(e,t-o)}function hX(t,e,n,o){return n<t?t:t<e?e:t===n?n+1:Math.min(n,t+o)}function hY(t,e,n){return Math.max(e,Math.min(n,t))}function hq(t){var e=t.min,n=t.max,o=t.range,r=t.value,i=t.step,u=t.snap,a=t.snapStart,c=t.rounded,s=t.hasMinEdge,l=t.hasMaxEdge,f=t.minBound,d=t.maxBound,m=t.screenRange,g=s?e-1:e,p=l?n+1:n;if(r<f)return g;if(d<r)return p;var h=hY((Math.min(d,Math.max(r,f))-f)/m*o+e,g,p);return u&&e<=h&&h<=n?a.fold(function(){var t=Math.round((h-e)/i)*i;return hY(e+t,e-1,n+1)},function(t){var e=Math.floor((n-t)/i);return Math.max(t,t+Math.min(e,Math.floor((h-t)/i)+Math.round((h-t)%i/i))*i)}):c?Math.round(h):h}function hK(t){var e=t.min,n=t.max,o=t.range,r=t.value,i=t.hasMinEdge,u=t.hasMaxEdge,a=t.maxBound,c=t.maxOffset,s=t.centerMinEdge,l=t.centerMaxEdge;return r<e?i?0:s:n<r?u?a:l:(r-e)/o*c}function hJ(t){return t.element.dom.getBoundingClientRect()}function h$(t){return hJ(t).top}function hQ(t,e){var n=hJ(t),o=hJ(e);return(n[bc]+n.right)/2-o[bc]}function hZ(t,e){var n=hJ(t),o=hJ(e);return(n.top+n.bottom)/2-o.top}function h0(t,e){ox(t,ba(),{value:e})}function h1(t,e,n){return hq({min:hT(e),max:hB(e),range:hR(e),value:n,step:hP(e),snap:hV(e),snapStart:e.snapStart,rounded:e.rounded,hasMinEdge:hH(e,"left"),hasMaxEdge:hL(e),minBound:hJ(t)[bc],maxBound:hJ(t).right,screenRange:hJ(t).width})}function h2(t){return function(e,n){var o;return h0(e,{x:o=(0<t?hX:hG)(hU(n).x,hT(n),hB(n),hP(n))}),tg.some(o).map(S)}}function h5(t,e,n,o,r,i){var u,a,c,s=(u=hJ(e).width,a=o.bind(function(t){return tg.some(hQ(t,e))}).getOr(0),c=r.bind(function(t){return tg.some(hQ(t,e))}).getOr(u),hK({min:hT(i),max:hB(i),range:hR(i),value:n,hasMinEdge:hH(i,"left"),hasMaxEdge:hL(i),minBound:hJ(e)[bc],minOffset:0,maxBound:hJ(e).right,maxOffset:u,centerMinEdge:a,centerMaxEdge:c}));return hJ(e)[bc]-hJ(t)[bc]+s}function h3(t,e){ox(t,ba(),{value:e})}function h9(t,e,n){return hq({min:hE(e),max:hM(e),range:hN(e),value:n,step:hP(e),snap:hV(e),snapStart:e.snapStart,rounded:e.rounded,hasMinEdge:hH(e,"top"),hasMaxEdge:hz(e),minBound:h$(t),maxBound:hJ(t).bottom,screenRange:hJ(t).height})}function h4(t){return function(e,n){var o;return h3(e,{y:o=(0<t?hX:hG)(hU(n).y,hE(n),hM(n),hP(n))}),tg.some(o).map(S)}}function h6(t,e,n,o,r,i){var u,a,c,s=(u=hJ(e).height,a=o.bind(function(t){return tg.some(hZ(t,e))}).getOr(0),c=r.bind(function(t){return tg.some(hZ(t,e))}).getOr(u),hK({min:hE(i),max:hM(i),range:hN(i),value:n,hasMinEdge:hH(i,"top"),hasMaxEdge:hz(i),minBound:h$(e),minOffset:0,maxBound:hJ(e).bottom,maxOffset:u,centerMinEdge:a,centerMaxEdge:c}));return h$(e)-h$(t)+s}function h8(t,e){ox(t,ba(),{value:e})}function h7(t,e){return function(n,o){var r,i;return r=0<t?hX:hG,h8(n,{x:i=e?hU(o).x:r(hU(o).x,hT(o),hB(o),hP(o)),y:e?r(hU(o).y,hE(o),hM(o),hP(o)):hU(o).y}),tg.some(i).map(S)}}function vt(t){return"<alloy.field."+t+">"}function ve(t){return bk[t]}function vn(t,e,n){return c1.config(n4({store:{mode:"manual",getValue:e,setValue:n}},t.map(function(t){return{store:{initialValue:t}}}).getOr({})))}function vo(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:om([fd.config({ignore:!0}),pG.config({})])}}function vr(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[vo([bD]),t,vo([bA])],behaviours:om([bS(1)])}}function vi(t,e){ox(t,rr(),{raw:{which:9,shiftKey:e}})}function vu(t,e){var n=e.element;oq(n,bD)?vi(t,!0):oq(n,bA)&&vi(t,!1)}function va(t){return p_(t,["."+bD,"."+bA].join(","),w)}function vc(t,e){return bF(document.createElement("canvas"),t,e)}function vs(t){var e=vc(t.width,t.height);return bM(e).drawImage(t,0,0),e}function vl(t){return t.naturalWidth||t.width}function vf(t){return t.naturalHeight||t.height}function vd(t,e,n){var o;return e=e||"image/png",h(HTMLCanvasElement.prototype.toBlob)?new hi(function(o,r){t.toBlob(function(t){t?o(t):r()},e,n)}):(o=t.toDataURL(e,n),new hi(function(t,e){(function(){var t=o.split(","),e=/data:([^;]+)/.exec(t[0]);if(!e)return tg.none();for(var n=e[1],r=t[1],i=atob(r),u=i.length,a=Math.ceil(u/1024),c=Array(a),s=0;s<a;++s){for(var l=1024*s,f=Math.min(1024+l,u),d=Array(f-l),m=l,g=0;m<f;++g,++m)d[g]=i[m].charCodeAt(0);c[s]=new Uint8Array(d)}return tg.some(new Blob(c,{type:n}))})().fold(function(){e("uri is not base64: "+o)},t)}))}function vm(t,e,n){function o(e,n){return t.then(function(t){return t.toDataURL(e||"image/png",n)})}return{getType:u(e.type),toBlob:function(){return hi.resolve(e)},toDataURL:u(n),toBase64:function(){return n.split(",")[1]},toAdjustedBlob:function(e,n){return t.then(function(t){return vd(t,e,n)})},toAdjustedDataURL:o,toAdjustedBase64:function(t,e){return o(t,e).then(function(t){return t.split(",")[1]})},toCanvas:function(){return t.then(vs)}}}function vg(t,e){return vd(t,e).then(function(e){return vm(hi.resolve(t),e,t.toDataURL())})}function vp(t,e,n){var o="string"==typeof t?parseFloat(t):t;return n<o?o=n:o<e&&(o=e),o}function vh(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]}function vv(t,e){for(var n=[],o=Array(25),r=0;r<5;r++){for(var i=0;i<5;i++)n[i]=e[i+5*r];for(i=0;i<5;i++){for(var u=0,a=0;a<5;a++)u+=t[i+5*a]*n[a];o[i+5*r]=u}}return o}function vb(t,e){return t.toCanvas().then(function(n){return bN(n,t.getType(),e)})}function vy(t){return function(e,n){return vb(e,t(vh(),n))}}function vx(t,e){void 0===e&&(e=2);var n=Math.pow(10,e);return Math.ceil(Math.round(t*n)/n)}function vw(t){return bP(t)}function vS(t){return bL(t)}function vk(t,e){return bz(t,e)}function vC(t,e){return bV(t,e)}function vO(t,e){return bH(t,e)}function v_(t,e){return t.toCanvas().then(function(n){return bG(n,t.getType(),e)})}function vT(t,e){return t.toCanvas().then(function(n){return bW(n,t.getType(),e)})}function vE(t,e,n){return dM(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:n},e)}function vD(t,e){return vE(t,e,[fs.config({})])}function vA(t,e,n){return{dom:{tag:"span",innerHtml:n.translate(t),classes:[e+"__select-label"]},behaviours:om([fs.config({})])}}function vB(t,e,n){function o(t,e){var n=c1.getValue(t);return fd.focus(n),ox(n,"keydown",{raw:e.event.raw}),v5.close(n),tg.some(!0)}var i=nQ(r),u=t.text.map(function(t){return lz(vA(t,e,n.providers))}),a=t.icon.map(function(t){return lz(vD(t,n.providers.icons))}),c=t.role.fold(function(){return{}},function(t){return{role:t}}),s=t.tooltip.fold(function(){return{}},function(t){var e=n.providers.translate(t);return{title:e,"aria-label":e}}),l=dM("chevron-down",{tag:"div",classes:[e+"__select-chevron"]},n.providers.icons);return lz(v5.sketch(C(C(C({},t.uid?{uid:t.uid}:{}),c),{dom:{tag:"button",classes:[e,e+"--select"].concat(F(t.classes,function(t){return e+"--"+t})),attributes:C({},s)},components:gY([a.map(function(t){return t.asSpec()}),u.map(function(t){return t.asSpec()}),tg.some(l)]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:om(_(_([],t.dropdownBehaviours,!0),[gW(function(){return t.disabled||n.providers.isDisabled()}),gf(),v3.config({}),fs.config({}),lg("dropdown-events",[gm(t,i),gg(t,i)]),lg("menubutton-update-display-text",[oO(bK,function(t,e){u.bind(function(e){return e.getOpt(t)}).each(function(t){fs.set(t,[oZ(n.providers.translate(e.event.text))])})}),oO(bJ,function(t,e){a.bind(function(e){return e.getOpt(t)}).each(function(t){fs.set(t,[vD(e.event.icon,n.providers.icons)])})})])],!1)),eventOrder:n4(bq,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:om([fa.config({mode:"special",onLeft:o,onRight:o})]),lazySink:n.getSink,toggleClass:e+"--active",parts:{menu:ml(0,t.columns,t.presets)},fetch:function(e){return hc(b(t.fetch,e))}}))).asSpec()}function vM(t){return"separator"===t.type}function vF(t,e,n,o){var r=oI("primary-menu"),i=bQ(t,n.shared.providers.menuItems());if(0===i.items.length)return tg.none();var u=pC(r,i.items,e,n,o),a=n4(Z(i.menus,function(t,o){return pC(o,t,e,n,!1)}),od(r,u));return tg.from(fM.tieredData(r,a,i.expansions))}function vI(t){return{isDisabled:function(){return sE.isDisabled(t)},setDisabled:function(e){return sE.set(t,e)},setActive:function(e){var n=t.element;e?(oX(n,"tox-tbtn--enabled"),tQ(n,"aria-pressed",!0)):(oY(n,"tox-tbtn--enabled"),t5(n,"aria-pressed"))},isActive:function(){return oq(t.element,"tox-tbtn--enabled")}}}function vR(t,e,n,o){return vB({text:t.text,icon:t.icon,tooltip:t.tooltip,role:o,fetch:function(e,o){t.fetch(function(t){o(vF(t,dK.CLOSE_ON_EXECUTE,n,!1))})},onSetup:t.onSetup,getApi:vI,columns:1,presets:"normal",classes:[],dropdownBehaviours:[pG.config({})]},e,n.shared)}function vN(t,e,n,o,r,i){void 0===n&&(n=[]);var u=e.fold(function(){return{}},function(t){return{action:t}}),a=n4(C({buttonBehaviours:om([gW(function(){return t.disabled||i.isDisabled()}),gf(),pG.config({}),lg("button press",[oC("click"),oC("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},u),{dom:o});return n4(a,{components:r})}function vP(t,e,n,o){void 0===o&&(o=[]);var r={tag:"button",classes:["tox-tbtn"],attributes:t.tooltip.map(function(t){return{"aria-label":n.translate(t),title:n.translate(t)}}).getOr({})},i=t.icon.map(function(t){return vE(t,n.icons,[])});return vN(t,e,o,r,gY([i]),n)}function vV(t,e,n,o){void 0===o&&(o=[]);var r=vP(t,tg.some(e),n,o);return fV.sketch(r)}function vH(t,e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=n.translate(t.text),u=t.icon?t.icon.map(function(t){return vE(t,n.icons,[])}):tg.none(),a=u.isSome()?gY([u]):[],c=u.isSome()?{}:{innerHtml:i},s=_(_(_(_([],t.primary||t.borderless?["tox-button"]:["tox-button","tox-button--secondary"],!0),u.isSome()?["tox-button--icon"]:[],!0),t.borderless?["tox-button--naked"]:[],!0),r,!0);return vN(t,e,o,C(C({tag:"button",classes:s},c),{attributes:{title:i}}),a,n)}function vL(t,e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=vH(t,tg.some(e),n,o,r);return fV.sketch(i)}function vz(t,e){return function(n){"custom"===e?ox(n,pQ,{name:t,value:{}}):"submit"===e?oy(n,pZ):"cancel"===e?oy(n,p$):console.error("Unknown button type: ",e)}}function vU(t,e,n){if("menu"===e){var o,i=lz(vR(C(C({},t),{onSetup:function(e){return e.setDisabled(t.disabled),r},fetch:(o=t.items,function(t){t(F(o,function(t){var e,o,r=t.text.fold(function(){return{}},function(t){return{text:t}});return C(C({type:t.type,active:!1},r),{onAction:function(t){var e=!t.isActive();t.setActive(e),o.storage.set(e),n.shared.getSink().each(function(t){i.getOpt(t).each(function(t){iG(t.element),ox(t,pQ,{name:o.name,value:o.storage.get()})})})},onSetup:(e=o=t,function(t){t.setActive(e.storage.get())})})}))})}),"tox-tbtn",n,tg.none()));return i.asSpec()}if("custom"===e||"cancel"===e||"submit"===e){var u=vz(t.name,e);return vL(C(C({},t),{borderless:!1}),u,n.shared.providers,[])}console.error("Unknown footer button type: ",e)}function vj(t,e){return sl({factory:pj,name:t,overrides:function(t){return{fieldBehaviours:om([lg("coupled-input-behaviour",[oO(ru(),function(n){a$(n,t,e).bind(sS.getCurrent).each(function(e){a$(n,t,"lock").each(function(o){fp.isOn(o)&&t.onLockedChange(n,e,o)})})})])])}}})}function vW(t){var e=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(null===e)return na.error(t);var n=parseFloat(e[1]),o=e[2];return na.value({value:n,unit:o})}function vG(t,e){var n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1};return t.unit===e?tg.some(t.value):tC(n,t.unit)&&tC(n,e)?n[t.unit]===n[e]?tg.some(t.value):tg.some(t.value/n[t.unit]*n[e]):tg.none()}function vX(t){return tg.none()}function vY(t,e){function n(t){return dM(t,{tag:"span",classes:["tox-icon","tox-lock-icon__"+t]},e.icons)}function o(t){return{dom:{tag:"div",classes:["tox-form__group"]},components:t}}function r(n){return pj.parts.field({factory:p9,inputClasses:["tox-textfield"],inputBehaviours:om([sE.config({disabled:function(){return t.disabled||e.isDisabled()}}),gf(),pG.config({}),lg("size-input-events",[oO(rn(),function(t,e){ox(t,a,{isField1:n})}),oO(ra(),function(e,n){ox(e,pK,{name:t.name})})])]),selectOnFocus:!1})}function i(t){return{dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}}}var u=vX,a=oI("ratio-event"),c=b1.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:e.translate(t.label.getOr("Constrain proportions"))}},components:[n("lock"),n("unlock")],buttonBehaviours:om([sE.config({disabled:function(){return t.disabled||e.isDisabled()}}),gf(),pG.config({})])}),s=b1.parts.field1(o([pj.parts.label(i("Width")),r(!0)])),l=b1.parts.field2(o([pj.parts.label(i("Height")),r(!1)]));return b1.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[s,l,o([i("&nbsp;"),c])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(t,e,n){vW(c1.getValue(t)).each(function(t){u(t).each(function(t){var n,o,r;c1.setValue(e,(r=-1!==(r=t.value.toFixed((n=t.unit)in(o={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4})?o[n]:1)).indexOf(".")?r.replace(/\.?0*$/,""):r)+t.unit)})})},coupledFieldBehaviours:om([sE.config({disabled:function(){return t.disabled||e.isDisabled()},onDisabled:function(t){b1.getField1(t).bind(pj.getField).each(sE.disable),b1.getField2(t).bind(pj.getField).each(sE.disable),b1.getLock(t).each(sE.disable)},onEnabled:function(t){b1.getField1(t).bind(pj.getField).each(sE.enable),b1.getField2(t).bind(pj.getField).each(sE.enable),b1.getLock(t).each(sE.enable)}}),gf(),lg("size-input-events2",[oO(a,function(t,e){var n=e.event.isField1,o=n?b1.getField1(t):b1.getField2(t),r=n?b1.getField2(t):b1.getField1(t),i=o.map(c1.getValue).getOr(""),a=r.map(c1.getValue).getOr("");u=tO(vW(i).toOptional(),vW(a).toOptional(),function(t,e){return vG(t,e.unit).map(function(t){return e.value/t}).map(function(t){var n;return n=e.unit,function(e){return vG(e,n).map(function(e){return{value:e*t,unit:n}})}}).getOr(vX)}).getOr(vX)})])])})}function vq(t){if(p(t.changedTouches))for(var e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]}function vK(t,e){return{uid:t.uid,dom:t.dom,components:e,behaviours:aH(t.formBehaviours,[c1.config({store:{mode:"manual",getValue:function(e){return Z(a0(e,t),function(t,e){return t().bind(function(t){var n=sS.getCurrent(t),o=Error("Cannot find a current component to extract the value from for form part '"+e+"': "+oF(t.element));return n.fold(function(){return na.error(o)},na.value)}).map(c1.getValue)})},setValue:function(e,n){Q(n,function(n,o){a$(e,t,o).each(function(t){sS.getCurrent(t).each(function(t){c1.setValue(t,n)})})})}}})]),apis:{getField:function(e,n){return a$(e,t,n).bind(sS.getCurrent)}}}}function vJ(){return sS.config({find:tg.some})}(hr=ho=ho||{})[hr.HighlightFirst=0]="HighlightFirst",hr[hr.HighlightNone=1]="HighlightNone";var v$,vQ,vZ,v0=function(t,e){return t.getSystem().getByUid(e.uid+"-"+hh()).map(function(t){return function(){return na.value(t)}}).getOrThunk(function(){return e.lazySink.fold(function(){return function(){return na.error(Error("No internal sink is specified, nor could an external sink be found"))}},function(e){return function(){return e(t)}})})},v1=u([nR("dom"),nR("fetch"),iy("onOpen"),ix("onExecute"),nY("getHotspot",tg.some),nY("getAnchorOverrides",u({})),uG(),aV("dropdownBehaviours",[fp,hp,fa,fd]),nR("toggleClass"),nY("eventOrder",{}),nj("lazySink"),nY("matchWidth",!1),nY("useMinWidth",!1),nj("role")].concat(hC())),v2=u([sf({schema:[ih()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),hv()]),v5=a8({name:"Dropdown",configFields:v1(),partFields:v2(),factory:function(t,e,n,o){function i(t){cW.getState(t).each(function(t){fM.highlightPrimary(t)})}function u(t,e){return ow(t),tg.some(!0)}var c,s={expand:function(e){fp.isOn(e)||hx(t,a,e,o,r,ho.HighlightNone).get(r)},open:function(e){fp.isOn(e)||hx(t,a,e,o,r,ho.HighlightFirst).get(r)},isOpen:fp.isOn,close:function(e){fp.isOn(e)&&hx(t,a,e,o,r,ho.HighlightFirst).get(r)},repositionMenus:function(t){fp.isOn(t)&&hk(t)}};return{uid:t.uid,dom:t.dom,components:e,behaviours:aH(t.dropdownBehaviours,[fp.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),hp.config({others:{sandbox:function(e){return hS(t,e,{onOpen:function(){return fp.on(e)},onClose:function(){return fp.off(e)}})}}}),fa.config({mode:"special",onSpace:u,onEnter:u,onDown:function(t,e){return v5.isOpen(t)?i(hp.getCoupled(t,"sandbox")):v5.open(t),tg.some(!0)},onEscape:function(t,e){return v5.isOpen(t)?(v5.close(t),tg.some(!0)):tg.none()}}),fd.config({})]),events:lk(tg.some(function(e){hx(t,a,e,o,i,ho.HighlightFirst).get(r)})),eventOrder:C(C({},t.eventOrder),((c={})[rb()]=["disabling","toggling","alloy.base.behaviour"],c)),apis:s,domModification:{attributes:C(C({"aria-haspopup":"true"},t.role.fold(function(){return{}},function(t){return{role:t}})),"button"===t.dom.tag?{type:tn(t.dom,"attributes").bind(function(t){return tn(t,"type")}).getOr("button")}:{})}}},apis:{open:function(t,e){return t.open(e)},expand:function(t,e){return t.expand(e)},close:function(t,e){return t.close(e)},isOpen:function(t,e){return t.isOpen(e)},repositionMenus:function(t,e){return t.repositionMenus(e)}}}),v3=iU({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:function(){return om([ok(rd(),S)])},exhibit:function(){return oz({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),v9=oI("color-input-change"),v4=oI("color-swatch-change"),v6=oI("color-picker-cancel"),v8=sd({schema:[nR("dom")],name:"label"}),v7=hO("top-left"),bt=hO("top"),be=hO("top-right"),bn=hO("right"),bo=hO("bottom-right"),br=hO("bottom"),bi=hO("bottom-left"),bu=[v8,hO("left"),bn,bt,br,v7,be,bi,bo,sl({name:"thumb",defaults:u({dom:{styles:{position:"absolute"}}}),overrides:function(t){return{events:om([oE(o5(),t,"spectrum"),oE(o3(),t,"spectrum"),oE(o9(),t,"spectrum"),oE(o6(),t,"spectrum"),oE(o8(),t,"spectrum"),oE(rt(),t,"spectrum")])}}}),sl({schema:[of("mouseIsDown",function(){return nQ(!1)})],name:"spectrum",overrides:function(t){function e(e,o){return n.getValueFromEvent(o).map(function(o){return n.setValueFrom(e,t,o)})}var n=t.model.manager;return{behaviours:om([fa.config({mode:"special",onLeft:function(e){return n.onLeft(e,t)},onRight:function(e){return n.onRight(e,t)},onUp:function(e){return n.onUp(e,t)},onDown:function(e){return n.onDown(e,t)}}),fd.config({})]),events:om([oO(o5(),e),oO(o3(),e),oO(o6(),e),oO(o8(),function(n,o){t.mouseIsDown.get()&&e(n,o)})])}}})],ba=u("slider.change.value"),bc="left",bs=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=h1(t,e,n);return h0(t,{x:o}),o},setToMin:function(t,e){h0(t,{x:hT(e)})},setToMax:function(t,e){h0(t,{x:hB(e)})},findValueOfOffset:h1,getValueFromEvent:function(t){return h_(t).map(function(t){return t.left})},findPositionOfValue:h5,setPositionFromValue:function(t,e,n,o){var r=hU(n),i=h5(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),n),u=es(e.element)/2;t4(e.element,"left",i-u+"px")},onLeft:h2(-1),onRight:h2(1),onUp:tg.none,onDown:tg.none,edgeActions:{"top-left":tg.none(),top:tg.none(),"top-right":tg.none(),right:tg.some(function(t,e){hW(t,{x:hF(e)})}),"bottom-right":tg.none(),bottom:tg.none(),"bottom-left":tg.none(),left:tg.some(function(t,e){hW(t,{x:hD(e)})})}}),bl=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=h9(t,e,n);return h3(t,{y:o}),o},setToMin:function(t,e){h3(t,{y:hE(e)})},setToMax:function(t,e){h3(t,{y:hM(e)})},findValueOfOffset:h9,getValueFromEvent:function(t){return h_(t).map(function(t){return t.top})},findPositionOfValue:h6,setPositionFromValue:function(t,e,n,o){var r=hU(n),i=h6(t,o.getSpectrum(t),r.y,o.getTopEdge(t),o.getBottomEdge(t),n),u=ei(e.element)/2;t4(e.element,"top",i-u+"px")},onLeft:tg.none,onRight:tg.none,onUp:h4(-1),onDown:h4(1),edgeActions:{"top-left":tg.none(),top:tg.some(function(t,e){hW(t,{y:hA(e)})}),"top-right":tg.none(),right:tg.none(),"bottom-right":tg.none(),bottom:tg.some(function(t,e){hW(t,{y:hI(e)})}),"bottom-left":tg.none(),left:tg.none()}}),bf=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o={x:h1(t,e,n.left),y:h9(t,e,n.top)};return h8(t,o),o},setToMin:function(t,e){h8(t,{x:hT(e),y:hE(e)})},setToMax:function(t,e){h8(t,{x:hB(e),y:hM(e)})},getValueFromEvent:h_,setPositionFromValue:function(t,e,n,o){var r=hU(n),i=h5(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),n),u=h6(t,o.getSpectrum(t),r.y,o.getTopEdge(t),o.getBottomEdge(t),n),a=es(e.element)/2,c=ei(e.element)/2;t4(e.element,"left",i-a+"px"),t4(e.element,"top",u-c+"px")},onLeft:h7(-1,!1),onRight:h7(1,!1),onUp:h7(-1,!0),onDown:h7(1,!0),edgeActions:{"top-left":tg.some(function(t,e){hW(t,hj(hD(e),hA(e)))}),top:tg.some(function(t,e){hW(t,hj(hR(e)/2,hA(e)))}),"top-right":tg.some(function(t,e){hW(t,hj(hF(e),hA(e)))}),right:tg.some(function(t,e){hW(t,hj(hF(e),hN(e)/2))}),"bottom-right":tg.some(function(t,e){hW(t,hj(hF(e),hI(e)))}),bottom:tg.some(function(t,e){hW(t,hj(hR(e)/2,hI(e)))}),"bottom-left":tg.some(function(t,e){hW(t,hj(hD(e),hI(e)))}),left:tg.some(function(t,e){hW(t,hj(hD(e),hN(e)/2))})}}),bd=a8({name:"Slider",configFields:[nY("stepSize",1),nY("onChange",r),nY("onChoose",r),nY("onInit",r),nY("onDragStart",r),nY("onDragEnd",r),nY("snapToGrid",!1),nY("rounded",!0),nj("snapStart"),nN("model",nF("mode",{x:[nY("minX",0),nY("maxX",100),of("value",function(t){return nQ(t.mode.minX)}),nR("getInitialValue"),ik("manager",bs)],y:[nY("minY",0),nY("maxY",100),of("value",function(t){return nQ(t.mode.minY)}),nR("getInitialValue"),ik("manager",bl)],xy:[nY("minX",0),nY("maxX",100),nY("minY",0),nY("maxY",100),of("value",function(t){return nQ({x:t.mode.minX,y:t.mode.minY})}),nR("getInitialValue"),ik("manager",bf)]})),aV("sliderBehaviours",[fa,c1]),of("mouseIsDown",function(){return nQ(!1)})],partFields:bu,factory:function(t,e,n,o){function r(e){return aQ(e,t,"thumb")}function i(e){return aQ(e,t,"spectrum")}function u(e){return a$(e,t,"left-edge")}function a(e){return a$(e,t,"right-edge")}function c(e){return a$(e,t,"top-edge")}function s(e){return a$(e,t,"bottom-edge")}function l(e,n){v.setPositionFromValue(e,n,t,{getLeftEdge:u,getRightEdge:a,getTopEdge:c,getBottomEdge:s,getSpectrum:i})}function f(t,e){h.value.set(e),l(t,r(t))}function d(e){var n=t.mouseIsDown.get();t.mouseIsDown.set(!1),n&&a$(e,t,"thumb").each(function(n){var o=h.value.get();t.onChoose(e,n,o)})}function m(e,n){n.stop(),t.mouseIsDown.set(!0),t.onDragStart(e,r(e))}function g(e,n){n.stop(),t.onDragEnd(e,r(e)),d(e)}var p,h=t.model,v=h.manager;return{uid:t.uid,dom:t.dom,components:e,behaviours:aH(t.sliderBehaviours,[fa.config({mode:"special",focusIn:function(e){return a$(e,t,"spectrum").map(fa.focusIn).map(S)}}),c1.config({store:{mode:"manual",getValue:function(t){return h.value.get()}}}),uh.config({channels:((p={})[cY()]={onReceive:d},p)})]),events:om([oO(ba(),function(e,n){var o,i;f(e,o=n.event.value),i=r(e),t.onChange(e,i,o),tg.some(!0)}),rL(function(e,n){var o=h.getInitialValue();h.value.set(o);var u=r(e);l(e,u);var a=i(e);t.onInit(e,u,a,h.value.get())}),oO(o5(),m),oO(o9(),g),oO(o6(),m),oO(rt(),g)]),apis:{resetToMin:function(e){v.setToMin(e,t)},resetToMax:function(e){v.setToMax(e,t)},setValue:f,refresh:l},domModification:{styles:{position:"relative"}}}},apis:{setValue:function(t,e,n){t.setValue(e,n)},resetToMin:function(t,e){t.resetToMin(e)},resetToMax:function(t,e){t.resetToMax(e)},refresh:function(t,e){t.refresh(e)}}}),bm=oI("rgb-hex-update"),bg=oI("slider-update"),bp=oI("palette-update"),bh=[aV("formBehaviours",[c1])],bv={getField:oH(function(t,e,n){return t.getField(e,n)}),sketch:function(t){var e,n={field:function(t,n){return e.push(t),aX("form",vt(t),n)},record:u(e=[])},o=t(n);return a4("form",bh,F(n.record(),function(t){return sl({name:t,pname:vt(t)})}),vK,o)}},bb=oI("valid-input"),by=oI("invalid-input"),bx=oI("validating-input"),bw="colorcustom.rgb.",bS=function(t){return sS.config({find:function(e){return tX(e.element,t).bind(function(t){return e.getSystem().getByDom(t).toOptional()})}})},bk={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},bC=tinymce.util.Tools.resolve("tinymce.Resource"),bO=tinymce.util.Tools.resolve("tinymce.util.Tools"),b_=ot([nY("preprocess",a),nY("postprocess",a)]),bT=function(t,e){var n=nM("RepresentingConfigs.memento processors",b_,e);return c1.config({store:{mode:"manual",getValue:function(e){var o=t.get(e),r=c1.getValue(o);return n.postprocess(r)},setValue:function(e,o){var r=n.preprocess(o),i=t.get(e);c1.setValue(i,r)}}})},bE=function(t){return c1.config({store:{mode:"memory",initialValue:t}})},bD=oI("alloy-fake-before-tabstop"),bA=oI("alloy-fake-after-tabstop"),bB=!(eX().browser.isIE()||eX().browser.isEdge()),bM=function(t){return t.getContext("2d")},bF=function(t,e,n){return t.width=e,t.height=n,t},bI=function(t){URL.revokeObjectURL(t.src)},bR=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],bN=function(t,e,n){var o=bM(t),r=function(t){for(var e,o,r,i,u=t.data,a=n[0],c=n[1],s=n[2],l=n[3],f=n[4],d=n[5],m=n[6],g=n[7],p=n[8],h=n[9],v=n[10],b=n[11],y=n[12],x=n[13],w=n[14],S=n[15],k=n[16],C=n[17],O=n[18],_=n[19],T=0;T<u.length;T+=4)e=u[T],o=u[T+1],r=u[T+2],i=u[T+3],u[T]=e*a+o*c+r*s+i*l+f,u[T+1]=e*d+o*m+r*g+i*p+h,u[T+2]=e*v+o*b+r*y+i*x+w,u[T+3]=e*S+o*k+r*C+i*O+_;return t}(o.getImageData(0,0,t.width,t.height));return o.putImageData(r,0,0),vg(t,e)},bP=(v$=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1],function(t){return vb(t,v$)}),bV=vy(function(t,e){return vv(t,[1,0,0,0,e=vp(255*e,-255,255),0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1])}),bH=vy(function(t,e){var n;return vv(t,[(n=(e=100*vp(e,-1,1))<0?127+e/100*127:127*(0==(n=e%1)?bR[e]:bR[Math.floor(e)]*(1-n)+bR[Math.floor(e)+1]*n)+127)/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])}),bL=(vQ=[0,-1,0,-1,5,-1,0,-1,0],function(t){return t.toCanvas().then(function(e){var n,o,r;return n=t.getType(),r=function(t,e,n){for(var o=function(t,e,n){return n<t?t=n:t<e&&(t=e),t},r=Math.round(Math.sqrt(n.length)),i=Math.floor(r/2),u=t.data,a=e.data,c=t.width,s=t.height,l=0;l<s;l++)for(var f=0;f<c;f++){for(var d=0,m=0,g=0,p=0;p<r;p++)for(var h=0;h<r;h++){var v=4*(o(l+p-i,0,s-1)*c+o(f+h-i,0,c-1)),b=n[p*r+h];d+=u[v]*b,m+=u[1+v]*b,g+=u[2+v]*b}var y=4*(l*c+f);a[y]=o(d,0,255),a[1+y]=o(m,0,255),a[2+y]=o(g,0,255)}return e}((o=bM(e)).getImageData(0,0,e.width,e.height),o.getImageData(0,0,e.width,e.height),vQ),o.putImageData(r,0,0),vg(e,n)})}),bz=function(t,e){return t.toCanvas().then(function(n){return function(t,e,n){for(var o=bM(t),r=Array(256),i=0;i<r.length;i++)r[i]=255*Math.pow(i/255,1-n);var u=function(t,e){for(var n=t.data,o=0;o<n.length;o+=4)n[o]=e[n[o]],n[o+1]=e[n[o+1]],n[o+2]=e[n[o+2]];return t}(o.getImageData(0,0,t.width,t.height),r);return o.putImageData(u,0,0),vg(t,e)}(n,t.getType(),e)})},bU=function(t,e,n){var o=vl(t),r=vf(t),i=e/o,u=n/r,a=!1;(i<.5||2<i)&&(i=i<.5?.5:2,a=!0),(u<.5||2<u)&&(u=u<.5?.5:2,a=!0);var c=bj(t,i,u);return a?c.then(function(t){return bU(t,e,n)}):c},bj=function(t,e,n){return new hi(function(o){var r=vl(t),i=vf(t),u=Math.floor(r*e),a=Math.floor(i*n),c=vc(u,a);bM(c).drawImage(t,0,0,r,i,0,0,u,a),o(c)})},bW=function(t,e,n){var o=(n<0?360+n:n)*Math.PI/180,r=t.width,i=t.height,u=Math.sin(o),a=Math.cos(o),c=vx(Math.abs(r*a)+Math.abs(i*u)),s=vx(Math.abs(r*u)+Math.abs(i*a)),l=vc(c,s),f=bM(l);return f.translate(c/2,s/2),f.rotate(o),f.drawImage(t,-r/2,-i/2),vg(l,e)},bG=function(t,e,n){var o=vc(t.width,t.height),r=bM(o);return"v"===n?(r.scale(1,-1),r.drawImage(t,0,-o.height)):(r.scale(-1,1),r.drawImage(t,-o.width,0)),vg(o,e)},bX=function(t,e,n,o,r,i){var u=vc(r,i);return bM(u).drawImage(t,-n,-o),vg(u,e)},bY=oI("toolbar.button.execute"),bq=((vZ={})[rb()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],vZ),bK=oI("update-menu-text"),bJ=oI("update-menu-icon"),b$={type:"separator"},bQ=function(t,e){var n;return N((0<(n=P(s(t)?t.split(" "):t,function(t,n){return s(n)?""===n?t:"|"===n?0<t.length&&!vM(t[t.length-1])?t.concat([b$]):t:tC(e,n.toLowerCase())?t.concat([e[n.toLowerCase()]]):t:t.concat([n])},[])).length&&vM(n[n.length-1])&&n.pop(),n),function(t,n){var o,r=vM(n)?n:n4({value:tn(n,"value").getOrThunk(function(){return oI("generated-menu-item")})},n),i=tC(r,"getSubmenuItems")?(o=bQ(r.getSubmenuItems(),e),{item:r,menus:n4(o.menus,od(r.value,o.items)),expansions:n4(o.expansions,od(r.value,r.value))}):{item:r,menus:{},expansions:{}};return{menus:n4(t.menus,i.menus),items:[i.item].concat(t.items),expansions:n4(t.expansions,i.expansions)}},{menus:{},expansions:{},items:[]})},bZ=u([nY("field1Name","field1"),nY("field2Name","field2"),iw("onLockedChange"),iv(["lockClass"]),nY("locked",!1),aV("coupledFieldBehaviours",[sS,c1])]),b0=u([vj("field1","field2"),vj("field2","field1"),sl({factory:fV,schema:[nR("dom")],name:"lock",overrides:function(t){return{buttonBehaviours:om([fp.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])}}})]),b1=a8({name:"FormCoupledInputs",configFields:bZ(),partFields:b0(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,behaviours:aH(t.coupledFieldBehaviours,[sS.config({find:tg.some}),c1.config({store:{mode:"manual",getValue:function(e){var n=a2(e,t,["field1","field2"]),o={};return o[t.field1Name]=c1.getValue(n.field1()),o[t.field2Name]=c1.getValue(n.field2()),o},setValue:function(e,n){var o=a2(e,t,["field1","field2"]);to(n,t.field1Name)&&c1.setValue(o.field1(),n[t.field1Name]),to(n,t.field2Name)&&c1.setValue(o.field2(),n[t.field2Name])}}})]),apis:{getField1:function(e){return a$(e,t,"field1")},getField2:function(e){return a$(e,t,"field2")},getLock:function(e){return a$(e,t,"lock")}}}},apis:{getField1:function(t,e){return t.getField1(e)},getField2:function(t,e){return t.getField2(e)},getLock:function(t,e){return t.getLock(e)}}}),b2={undo:u(oI("undo")),redo:u(oI("redo")),zoom:u(oI("zoom")),back:u(oI("back")),apply:u(oI("apply")),swap:u(oI("swap")),transform:u(oI("transform")),tempTransform:u(oI("temp-transform")),transformApply:u(oI("transform-apply"))},b5={formActionEvent:pQ,saveState:u("save-state"),disable:u("disable"),enable:u("enable")},b3=tinymce.util.Tools.resolve("tinymce.geom.Rect"),b9=tinymce.util.Tools.resolve("tinymce.util.Observable"),b4=tinymce.util.Tools.resolve("tinymce.util.VK");function b6(t,e,n,o,r){return vV({name:t,icon:tg.some(e),disabled:n,tooltip:tg.some(t),primary:!1,borderless:!1},o,r)}function b8(t,e){e?sE.enable(t):sE.disable(t)}var b7=0,yt=function(t,e,n,o,r){function i(t,e){return{x:e.x-t.x,y:e.y-t.y,w:e.w,h:e.h}}function u(e,o,r,u){var a=(t=b3.clamp({x:o.x+r*e.deltaX,y:o.y+u*e.deltaY,w:Math.max(20,o.w+r*e.deltaW),h:Math.max(20,o.h+u*e.deltaH)},n,"move"===e.name),i(n,t));y.fire("updateRect",{rect:a}),v(a)}function a(e){c(t=e)}function c(t){function n(t,e){io(m,"#"+d+"-"+t).each(function(t){t6(t,{left:e.x+"px",top:e.y+"px",width:Math.max(0,e.w)+"px",height:Math.max(0,e.h)+"px"})})}ty(g,function(e){io(m,"#"+d+"-"+e.name).each(function(n){t6(n,{left:t.w*e.xMul+t.x+"px",top:t.h*e.yMul+t.y+"px"})})}),n("top",{x:e.x,y:e.y,w:e.w,h:t.y-e.y}),n("right",{x:t.x+t.w,y:t.y,w:e.w-t.x-t.w+e.x,h:t.h}),n("bottom",{x:e.x,y:t.y+t.h,w:e.w,h:e.h-t.y-t.h+e.y}),n("left",{x:e.x,y:t.y,w:t.x-e.x,h:t.h}),n("move",t)}var s,l,f=[],d="tox-crid-"+b7++,m=tE.fromDom(o),g=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],h=["top","right","bottom","left"],v=function(t){var e;a((e=n,{x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}))};function b(t){tQ(t.target,"aria-grabbed","focus"===t.raw.type?"true":"false")}tZ(l=tE.fromTag("div"),{id:d,class:"tox-croprect-container",role:"grid","aria-dropeffect":"execute"}),e8(m,l),ty(h,function(t){io(m,"#"+d).each(function(e){var n=tE.fromTag("div");tZ(n,{id:d+"-"+t,class:"tox-croprect-block","data-mce-bogus":"all"}),t4(n,"display","none"),e8(e,n)})}),ty(g,function(t){io(m,"#"+d).each(function(e){var n=tE.fromTag("div");tZ(n,{id:d+"-"+t.name,"aria-label":t.label,"aria-grabbed":"false","data-mce-bogus":"all",role:"gridcell",tabindex:"-1",title:t.label}),oK(n,["tox-croprect-handle","tox-croprect-handle-"+t.name]),t4(n,"display","none"),e8(e,n)})}),s=F(g,function(e){var n;return function(t,e){function n(t){var n,r,i,u,f,g,p,y,x=t.raw,w=(n=Math.max,r=m.documentElement,i=m.body,u=n(r.scrollWidth,i.scrollWidth),f=n(r.clientWidth,i.clientWidth),g=n(r.offsetWidth,i.offsetWidth),p=n(r.scrollHeight,i.scrollHeight),y=n(r.clientHeight,i.clientHeight),{width:u<g?f:u,height:p<n(r.offsetHeight,i.offsetHeight)?y:p});vq(x),t.prevent(),c=x.button,s=x.screenX,l=x.screenY;var S=t7(v,"cursor");t6(a=tE.fromTag("div",m),{position:"absolute",top:"0",left:"0",width:w.width+"px",height:w.height+"px","z-index":"2147483647",opacity:"0.0001",cursor:S}),e8(e0(h),a),d.push(uC(h,"mousemove",o),uC(h,"touchmove",o),uC(h,"mouseup",b),uC(h,"touchend",b)),e.start(x)}function o(t){var n=t.raw;if(vq(n),n.button!==c)return b(t);n.deltaX=n.screenX-s,n.deltaY=n.screenY-l,t.prevent(),e.drag(n)}var r,i,u,a,c,s,l,f=[],d=[],m=null!==(r=e.document)&&void 0!==r?r:document,g=null!==(i=e.root)&&void 0!==i?i:m,h=tE.fromDom(m),v=tE.fromDom(g.getElementById(null!==(u=e.handle)&&void 0!==u?u:t)),b=function(t){vq(t.raw),ty(d,function(t){return t.unbind()}),d=[],e7(a),e.stop&&e.stop(t.raw)};return f.push(uC(v,"mousedown",n),uC(v,"touchstart",n)),{destroy:function(){ty(d.concat(f),function(t){return t.unbind()}),d=[],f=[],p(a)&&e7(a)}}}(d,{document:o.ownerDocument,root:eK(m).dom,handle:d+"-"+e.name,start:function(){n=t},drag:function(t){u(e,n,t.deltaX,t.deltaY)}})}),c(t),f.push(uC(m,"focusin",b),uC(m,"focusout",b),uC(m,"keydown",function(e){var n;function o(t,e,o,r,i){t.stopPropagation(),t.preventDefault(),u(n,o,r,i)}switch(ty(g,function(t){if(t0(e.target,"id")===d+"-"+t.name)return n=t,!1}),e.raw.keyCode){case b4.LEFT:o(e,0,t,-10,0);break;case b4.RIGHT:o(e,0,t,10,0);break;case b4.UP:o(e,0,t,0,-10);break;case b4.DOWN:o(e,0,t,0,10);break;case b4.ENTER:case b4.SPACEBAR:e.prevent(),r()}}));var y=C(C({},b9),{toggleVisibility:function(t){ty(ac(m,_(_([],F(g,function(t){return"#"+d+"-"+t.name}),!0),F(h,function(t){return"#"+d+"-"+t}),!0).join(",")),t?function(t){return en(t,"display")}:function(t){return t4(t,"display","none")})},setClampRect:function(e){n=e,c(t)},setRect:a,getInnerRect:function(){return i(n,t)},setInnerRect:v,setViewPortRect:function(n){e=n,c(t)},destroy:function(){ty(s,function(t){return t.destroy()}),s=[],ty(f,function(t){return t.unbind()}),f=[]}});return y};function ye(t){return!tC(t,"items")}function yn(t,e){var n=t.label.map(function(t){return pI(t,e)}),o=[sE.config({disabled:function(){return t.disabled||e.isDisabled()}}),gf(),fa.config({mode:"execution",useEnter:!0!==t.multiline,useControlEnter:!0===t.multiline,execute:function(t){return oy(t,pZ),tg.some(!0)}}),lg("textfield-change",[oO(ru(),function(e,n){ox(e,pK,{name:t.name})}),oO(rh(),function(e,n){ox(e,pK,{name:t.name})})]),pG.config({})],r=t.validation.map(function(t){return hm.config({getRoot:function(t){return tj(t.element)},invalidClass:"tox-invalid",validator:{validate:function(e){var n=c1.getValue(e),o=t.validator(n);return hs(!0===o?na.value(n):na.error(o))},validateOnLoad:t.validateOnLoad}})}).toArray(),i=t.placeholder.fold(u({}),function(t){return{placeholder:e.translate(t)}}),a=t.inputMode.fold(u({}),function(t){return{inputmode:t}}),c=C(C({},i),a);return pF(n,pj.parts.field({tag:!0===t.multiline?"textarea":"input",inputAttributes:c,inputClasses:[t.classname],inputBehaviours:om(L([o,r])),selectOnFocus:!1,factory:p9}),(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),[sE.config({disabled:function(){return t.disabled||e.isDisabled()},onDisabled:function(t){pj.getField(t).each(sE.disable)},onEnabled:function(t){pj.getField(t).each(sE.enable)}}),gf()])}function yo(t){var e=nQ(null);return r1({readState:function(){return{timer:null!==e.get()?"set":"unset"}},setTimer:function(t){e.set(t)},cancel:function(){var t=e.get();null!==t&&t.cancel()}})}function yr(t,e,n){var o=c1.getValue(n);c1.setValue(e,o),xH(e)}function yi(t,e){var n=t.element,o=o$(n),r=n.dom;"number"!==t0(n,"type")&&e(r,o)}function yu(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:r}}function ya(t,e){return{type:"menuitem",value:e,text:t,meta:{attach:void 0},onAction:r}}function yc(t,e){return F(R(e,function(e){return e.type===t}),yu)}function ys(t,e){var n=t.toLowerCase();return R(e,function(t){return tc((void 0!==t.meta&&void 0!==t.meta.text?t.meta:t).text.toLowerCase(),n)||tc(t.value.toLowerCase(),n)})}function yl(t){return function(e,n,o){return tn(n,"name").fold(function(){return t(n,o)},function(r){return e.field(r,t(n,o))})}}function yf(t,e,n){var o=n4(n,{shared:{interpreter:function(e){return xK(t,e,o)}}});return xK(t,e,o)}function yd(t){return tg.from(t.getParam("style_formats")).filter(f).map(function(e){var n,o=(n=xQ(e),t.formatter?r(n.customFormats):t.on("init",function(){r(n.customFormats)}),n.formats);function r(e){ty(e,function(e){t.formatter.has(e.name)||t.formatter.register(e.name,e.format)})}return t.getParam("style_formats_merge",!1,"boolean")?x$.concat(o):o}).getOr(x$)}function ym(t,e,n){var o={type:"formatter",isSelected:e(t.format),getStylePreview:n(t.format)};return n4(t,o)}function yg(t,e,n,o){var r=function(e){return F(e,function(e){var i,a,c,l,f=tw(e);if(to(e,"items")){var d=r(e.items);return n4(n4(e,{type:"submenu"}),{getStyleItems:u(d)})}return to(e,"format")?ym(e,n,o):1===f.length&&tb(f,"title")?n4(e,{type:"separator"}):(c={type:"formatter",format:a="custom-"+(i=s(e.name)?e.name:oI(e.title)),isSelected:n(a),getStylePreview:o(a)},l=n4(e,c),t.formatter.register(i,l),l)})};return r(e)}function yp(t){return function(e){return!!p(e)&&1===e.nodeType&&(e.contentEditable===t||e.getAttribute("data-mce-contenteditable")===t)}}function yh(t,e,n,o,r){return{type:t,title:e,url:n,level:o,attach:r}}function yv(t){return t.innerText||t.textContent}function yb(t){return t&&"A"===t.nodeName&&void 0!==(t.id||t.name)&&x_(t)}function yy(t){return t&&/^(H[1-6])$/.test(t.nodeName)}function yx(t){return yy(t)&&x_(t)}function yw(t){var e=t.id||oI("h");return yh("header",yv(t),"#"+e,yy(t)?parseInt(t.nodeName.substr(1),10):0,function(){t.id=e})}function yS(t){var e=t.id||t.name;return yh("anchor",yv(t)||"#"+e,"#"+e,0,r)}function yk(t){return 0<xZ(t.title).length}function yC(t){return s(t)&&/^https?/.test(t)}function yO(t){return l(t)&&te(t,function(t){return!(f(t)&&t.length<=5&&U(t,yC))}).isNone()}function y_(){var t,e=g9.getItem(x5);if(null===e)return{};try{t=JSON.parse(e)}catch(t){if(t instanceof SyntaxError)return console.log("Local storage "+x5+" was not valid JSON",t),{};throw t}return yO(t)?t:(console.log("Local storage "+x5+" was not valid format",t),{})}function yT(t){return tn(y_(),t).getOr([])}function yE(t,e){var n,o;yC(t)&&(o=R(tn(n=y_(),e).getOr([]),function(e){return e!==t}),n[e]=[t].concat(o).slice(0,5),function(t){if(!yO(t))throw Error("Bad format for history:\n"+JSON.stringify(t));g9.setItem(x5,JSON.stringify(t))}(n))}function yD(t){return!!t}function yA(t){return Z(bO.makeMap(t,/[, ]/),yD)}function yB(t){return tg.from(t.getParam("file_picker_callback")).filter(h)}function yM(t){return tg.from(t).filter(s).getOrUndefined()}function yF(t){return(tr(et(t,"position"),"fixed")?tg.none():tW(t)).orThunk(function(){var e=tE.fromTag("span");return tj(t).bind(function(t){e8(t,e);var n=tW(e);return e7(e),n})})}function yI(t){return yF(t).map(ec).getOrThunk(function(){return e3(0,0)})}function yR(t,e,n){return U(t,function(t){switch(t){case"bottom":return e.bottom<=n.bottom;case"top":return e.y>=n.y}})}function yN(t,e){return e.getInitialPos().map(function(e){return nn(e.bounds.x,e.bounds.y,es(t),ei(t))})}function yP(t,e,n){return n.getInitialPos().bind(function(o){switch(n.clearInitialPos(),o.position){case"static":return tg.some(wn.static());case"absolute":var r=yF(t).map(no).getOrThunk(function(){return no(eZ())});return tg.some(wn.absolute(iJ("absolute",tn(o.style,"left").map(function(t){return e.x-r.x}),tn(o.style,"top").map(function(t){return e.y-r.y}),tn(o.style,"right").map(function(t){return r.right-e.right}),tn(o.style,"bottom").map(function(t){return r.bottom-e.bottom}))));default:return tg.none()}})}function yV(t,e,n){n.setDocked(!1),ty(["left","right","top","bottom","position"],function(e){return en(t.element,e)}),e.onUndocked(t)}function yH(t,e,n,o){var r="fixed"===o.position;n.setDocked(r),i$(t.element,o),(r?e.onDocked:e.onUndocked)(t)}function yL(t,e,n,o,r){void 0===r&&(r=!1),e.contextual.each(function(e){e.lazyContext(t).each(function(i){var u=i.y<o.bottom&&i.bottom>o.y;u!==n.isVisible()&&(n.setVisible(u),r&&!u?(oK(t.element,[e.fadeOutClass]),e.onHide(t)):(u?function(t,e){var n=t.element;oX(n,e.transitionClass),oY(n,e.fadeOutClass),oX(n,e.fadeInClass),e.onShow(t)}:function(t,e){var n=t.element;oX(n,e.transitionClass),oY(n,e.fadeInClass),oX(n,e.fadeOutClass),e.onHide(t)})(t,e))})})}function yz(t,e,n){var o,i;n.isDocked()&&(i=t.element,n.setDocked(!1),yN(o=t.element,n).bind(function(t){return yP(o,t,n)}).each(function(o){o.fold(function(){return yV(t,e,n)},function(o){return yH(t,e,n,o)},r)}),n.setVisible(!0),e.contextual.each(function(e){oJ(i,[e.fadeInClass,e.fadeOutClass,e.transitionClass]),e.onShow(t)}),wo(t,e,n))}function yU(t,e){return tb(wu.getModes(t),e)}function yj(t){var e=t.element;tj(e).each(function(n){var o="padding-"+wu.getModes(t)[0];wu.isDocked(t)?(t4(e,"width",es(n)+"px"),t4(n,o,eu(e)+(parseInt(t7(e,"margin-top"),10)||0)+(parseInt(t7(e,"margin-bottom"),10)||0)+"px")):(en(e,"width"),en(n,o))})}function yW(t,e){e?(oY(t,wc.fadeOutClass),oK(t,[wc.transitionClass,wc.fadeInClass])):(oY(t,wc.fadeInClass),oK(t,[wc.fadeOutClass,wc.transitionClass]))}function yG(t,e){var n=tE.fromDom(t.getContainer());e?(oX(n,ws),oY(n,wl)):(oX(n,wl),oY(n,ws))}function yX(t,e){function n(t){u().each(function(e){return t(e.element)})}function o(e){t.inline||yj(e),yG(t,wu.isDocked(e)),e.getSystem().broadcastOn([cX()],{}),u().each(function(t){return t.getSystem().broadcastOn([cX()],{})})}var r,i=uk(),u=e.getSink,a=t.inline?[]:[uh.config({channels:((r={})[wa()]={onReceive:yj},r)})];return _([fd.config({}),wu.config({contextual:C({lazyContext:function(e){var n=eu(e.element),o=t.inline?t.getContentAreaContainer():t.getContainer(),r=no(tE.fromDom(o)),i=r.height-n,u=r.y+(yU(e,"top")?0:n);return tg.some(nn(r.x,u,r.width,i))},onShow:function(){n(function(t){return yW(t,!0)})},onShown:function(t){n(function(t){return oJ(t,[wc.transitionClass,wc.fadeInClass])}),i.get().each(function(e){var n=t.element,o=tH(e);iY(o).filter(function(t){return!tP(e,t)}).filter(function(t){return tP(t,tE.fromDom(o.dom.body))||tV(n,t)}).each(function(){return iG(e)}),i.clear()})},onHide:function(t){iq(t.element).orThunk(function(){return u().toOptional().bind(function(t){return iq(t.element)})}).fold(i.clear,i.set),n(function(t){return yW(t,!1)})},onHidden:function(){n(function(t){return oJ(t,[wc.transitionClass])})}},wc),lazyViewport:function(e){var n=nr(),o=t.getParam("toolbar_sticky_offset",0,"number"),r=n.y+(yU(e,"top")?o:0),i=n.height-(yU(e,"bottom")?o:0);return nn(n.x,r,n.width,i)},modes:[e.header.getDockingMode()],onDocked:o,onUndocked:o})],a,!0)}function yY(t){return nA("menubutton",wg,t)}function yq(t,e){return e.getAnimationRoot.fold(function(){return t.element},function(e){return e(t)})}function yK(t){return t.dimension.property}function yJ(t,e){return t.dimension.getDimension(e)}function y$(t,e){oJ(yq(t,e),[e.shrinkingClass,e.growingClass])}function yQ(t,e){oY(t.element,e.openClass),oX(t.element,e.closedClass),t4(t.element,yK(e),"0px"),eo(t.element)}function yZ(t,e){oY(t.element,e.closedClass),oX(t.element,e.openClass),en(t.element,yK(e))}function y0(t,e,n,o){n.setCollapsed(),t4(t.element,yK(e),yJ(e,t.element)),eo(t.element),y$(t,e),yQ(t,e),e.onStartShrink(t),e.onShrunk(t)}function y1(t,e,n){var o=yJ(e,t.element);("0px"===o?y0:function(t,e,n,o){var r=o.getOrThunk(function(){return yJ(e,t.element)});n.setCollapsed(),t4(t.element,yK(e),r),eo(t.element);var i=yq(t,e);oY(i,e.growingClass),oX(i,e.shrinkingClass),yQ(t,e),e.onStartShrink(t)})(t,e,n,tg.some(o))}function y2(t,e,n){var o=yq(t,e),r=oq(o,e.shrinkingClass),i=yJ(e,t.element);yZ(t,e);var u=yJ(e,t.element);(r?function(){t4(t.element,yK(e),i),eo(t.element)}:function(){yQ(t,e)})(),oY(o,e.shrinkingClass),oX(o,e.growingClass),yZ(t,e),t4(t.element,yK(e),u),n.setExpanded(),e.onStartGrow(t)}function y5(t,e,n){return!0===oq(yq(t,e),e.growingClass)}function y3(t,e,n){return!0===oq(yq(t,e),e.shrinkingClass)}function y9(t){return"<alloy.field."+t+">"}function y4(t){return{element:function(){return t.element.dom}}}function y6(t){return sS.getCurrent(t).bind(function(t){return wy.isGrowing(t)||wy.hasGrown(t)?sS.getCurrent(t).bind(function(t){return V(wk.getSlotNames(t),function(e){return wk.isShowing(t,e)})}):tg.none()})}function y8(t){return sS.getCurrent(t).each(function(t){return iG(t.element)})}function y7(t,e,n){return{within:t,extra:e,withinWidth:n}}function xt(t,e,n){var o,r=(o=function(t,e){var o=n(t);return tg.some({element:t,start:e,finish:e+o,width:o})},P(t,function(t,e){return o(e,t.len).fold(u(t),function(e){return{len:e.finish,list:t.list.concat([e])}})},{len:0,list:[]}).list),i=R(r,function(t){return t.finish<=e}),a=N(i,function(t,e){return t+e.width},0);return{within:i,extra:r.slice(i.length),withinWidth:a}}function xe(t){return F(t,function(t){return t.element})}function xn(t,e){var n=F(e,function(t){return oV(t)});x7.setGroups(t,n)}function xo(t,e,n){var o,r,i,u,a,c,s,l,f,d,m,g,p,h=e.builtGroups.get();0!==h.length&&(o=aQ(t,e,"primary"),r=hp.getCoupled(t,"overflowGroup"),t4(o.element,"visibility","hidden"),u=$(i=h.concat([r]),function(t){return iq(t.element).bind(function(e){return t.getSystem().getByDom(e).toOptional()})}),n([]),xn(o,i),a=es(o.element),0===(m=(d=(0===(f=xt(s=e.builtGroups.get(),a,l=function(t){return es(t.element)})).extra.length?tg.some(f):tg.none()).getOrThunk(function(){return xt(s,a-l(r),l)})).within,g=d.extra,p=d.withinWidth,(c=1===g.length&&g[0].width<=l(r)?y7(xe(m.concat(g)),[],p):1<=g.length?y7(xe(m).concat([r]),xe(g),p):y7(xe(m),[],p)).extra.length)?(fs.remove(o,r),n([])):(xn(o,c.within),n(c.extra)),en(o.element,"visibility"),eo(o.element),u.each(fd.focus))}function xr(t,e){var n=hp.getCoupled(t,"toolbarSandbox");cW.isOpen(n)?cW.close(n):cW.open(n,e.toolbar())}function xi(t,e,n,o){var r=n.getBounds.map(function(t){return t()}),i=n.lazySink(t).getOrDie();cP.positionWithinBounds(i,e,{anchor:{type:"hotspot",hotspot:t,layouts:o,overrides:{maxWidthFunction:wM()}}},r)}function xu(t,e,n,o,r){x7.setGroups(e,r),xi(t,e,n,o),fp.on(t)}function xa(t){return F(t,function(t){return oV(t)})}function xc(t,e,n){xo(t,n,function(o){n.overflowGroups.set(o),e.getOpt(t).each(function(t){wR.setGroups(t,xa(o))})})}function xs(t,e){a$(t,e,"overflow-button").bind(function(){return a$(t,e,"overflow")}).each(function(n){xE(t,e),wy.toggleGrow(n)})}function xl(t){var e=t.title.fold(function(){return{}},function(t){return{attributes:{title:t}}});return{dom:C({tag:"div",classes:["tox-toolbar__group"]},e),components:[wV.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:om([pG.config({}),fd.config({})])}}function xf(t){return wV.sketch(xl(t))}function xd(t,e){var n=rL(function(e){var n=F(t.initGroups,xf);x7.setGroups(e,n)});return om([gG(t.providers.isDisabled),gf(),fa.config({mode:e,onEscape:t.onEscape,selector:".tox-toolbar__group"}),lg("toolbar-events",[n])])}function xm(t){var e=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":xl({title:tg.none(),items:[]}),"overflow-button":vP({name:"more",icon:tg.some("more-drawer"),disabled:!1,tooltip:tg.some("More..."),primary:!1,borderless:!1},tg.none(),t.providers)},splitToolbarBehaviours:xd(t,e)}}function xg(t){var e=t.cyclicKeying?"cyclic":"acyclic";return x7.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===mE.scrolling?["tox-toolbar--scrolling"]:[])},components:[x7.parts.groups({})],toolbarBehaviours:xd(t,e)})}function xp(t){return"string"==typeof t?t.split(" "):t}function xh(t,e){var n=C(C({},w$),e.menus),o=0<tw(e.menus).length,r=R(void 0===e.menubar||!0===e.menubar?xp("file edit view insert format tools table help"):xp(!1===e.menubar?"":e.menubar),function(t){var n=tC(w$,t);return o?n||tn(e.menus,t).exists(function(t){return tC(t,"items")}):n});return R(F(r,function(o){var r=n[o],i={title:r.title,items:xp(r.items)},u=t.getParam("removed_menuitems","").split(/[ ,]/);return{text:i.title,getItems:function(){return z(i.items,function(t){var n=t.toLowerCase();return 0===n.trim().length||A(u,function(t){return t===n})?[]:"separator"===n||"|"===n?[{type:"separator"}]:e.menuItems[n]?[e.menuItems[n]]:[]})}}}),function(t){return 0<t.getItems().length&&A(t.getItems(),function(t){return"separator"!==t.type})})}function xv(t){function e(){t._skinLoaded=!0,t.fire("SkinLoaded")}return function(){t.initialized?e():t.on("init",e)}}function xb(t,e,n){return new dZ(function(o,r){n.load(e,o,r),t.on("remove",function(){return n.unload(e)})})}function xy(t,e){var n,o,r=(n=e.getParam("skin"),o=e.getParam("skin_url"),!1!==n&&(o=o?e.documentBaseURI.toAbsolute(o):m7.baseURL+"/skins/ui/"+(n||"oxide")),o);r&&e.contentCSS.push(r+(t?"/content.inline":"/content")+".min.css"),!1===e.getParam("skin")==0&&s(r)?dZ.all([xb(e,r+"/skin.min.css",e.ui.styleSheetLoader),eJ(tE.fromDom(e.getElement())).isSome()?xb(e,r+"/skin.shadowdom.min.css",m8.DOM.styleSheetLoader):dZ.resolve()]).then(xv(e),function(){return e.fire("SkinLoadError",{message:"Skin could not be loaded"})}):xv(e)()}function xx(t,e){return function(n){function o(){n.setActive(t.formatter.match(e));var o=t.formatter.formatChanged(e,n.setActive);r.set(o)}var r=uS();return t.initialized?o():t.once("init",o),function(){t.off("init",o),r.clear()}}}function xw(t,e,n){return function(o){function r(){return n(o)}function i(){n(o),t.on(e,r)}return t.initialized?i():t.once("init",i),function(){t.off("init",i),t.off(e,r)}}}function xS(t){return function(e){return function(){t.undoManager.transact(function(){t.focus(),t.execCommand("mceToggleFormat",!1,e.format)})}}}function xk(t,e){return function(){return t.execCommand(e)}}function xC(t,e,n){var o,r=n.dataset,i="basic"===r.type?function(){return F(r.data,function(t){return ym(t,n.isSelectedFor,n.getPreviewFor)})}:r.getData;return{items:(o=function(t,e,o){var r="formatter"===t.type&&n.isInvalid(t);return 0===e?r?[]:u(t,e,!1,o).toArray():u(t,e,r,o).toArray()},{validateItems:a,getFetch:function(t,e){return function(n,o){o(vF(a(e()),dK.CLOSE_ON_EXECUTE,t,!1))}}}),getStyleItems:i};function u(t,r,i,u){var a=e.shared.providers.translate(t.title);if("separator"===t.type)return tg.some({type:"separator",text:a});if("submenu"!==t.type)return tg.some(C({type:"togglemenuitem",text:a,icon:t.icon,active:t.isSelected(u),disabled:i,onAction:n.onAction(t)},t.getStylePreview().fold(function(){return{}},function(t){return{meta:{style:t}}})));var c=z(t.getStyleItems(),function(t){return o(t,r,u)});return 0===r&&c.length<=0?tg.none():tg.some({type:"nestedmenuitem",text:a,disabled:c.length<=0,getSubmenuItems:function(){return z(t.getStyleItems(),function(t){return o(t,r,u)})}})}function a(t){var e=n.getCurrentValue(),r=n.shouldHide?0:1;return z(t,function(t){return o(t,r,e)})}}function xO(t,e,n){var o=xC(0,e,n),r=o.items,i=o.getStyleItems,a=xw(t,"NodeChange",function(t){var e=t.getComponent();n.updateText(e)});return vB({text:n.icon.isSome()?tg.none():n.text,icon:n.icon,tooltip:tg.from(n.tooltip),role:tg.none(),fetch:r.getFetch(e,i),onSetup:a,getApi:function(t){return{getComponent:u(t)}},columns:1,presets:"normal",classes:n.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",e.shared)}function x_(t){return function(t){for(;t=t.parentNode;){var e=t.contentEditable;if(e&&"inherit"!==e)return x0(t)}return!1}(t)&&!x1(t)}function xT(t,e){function n(e,n){return function(o,r){return a$(o,t,r).map(function(t){return e(t,r)}).getOr(n)}}function o(t,e){return"true"!==t0(t.element,"aria-hidden")}var r=n(o,!1),i=n(function(t,e){var n;o(t)&&(t4(n=t.element,"display","none"),tQ(n,"aria-hidden","true"),ox(t,rI(),{name:e,visible:!1}))}),u=function(t,e){ty(e,function(e){return i(t,e)})},a=n(function(t,e){var n;o(t)||(en(n=t.element,"display"),t5(n,"aria-hidden"),ox(t,rI(),{name:e,visible:!0}))});return{uid:t.uid,dom:t.dom,components:e,behaviours:t.slotBehaviours.dump,apis:{getSlotNames:function(e){return a1(t)},getSlot:function(e,n){return a$(e,t,n)},isShowing:r,hideSlot:i,hideAllSlots:function(e){return u(e,a1(t))},showSlot:a}}}function xE(t,e){a$(t,e,"overflow").each(function(n){xo(t,e,function(t){var e=F(t,function(t){return oV(t)});x7.setGroups(n,e)}),a$(t,e,"overflow-button").each(function(t){wy.hasGrown(n)&&fp.on(t)}),wy.refresh(n)})}var xD,xA,xB,xM="data-value",xF=function(t,e,n,o){return F(n,function(n){return ye(n)?{type:"togglemenuitem",text:n.text,value:n.value,active:n.value===o,onAction:function(){c1.setValue(t,n.value),ox(t,pK,{name:e}),fd.focus(t)}}:{type:"nestedmenuitem",text:n.text,getSubmenuItems:function(){return xF(t,e,n.items,o)}}})},xI=function(t,e){return $(t,function(t){return ye(t)?tu(t.value===e,t):xI(t.items,e)})},xR=a6({name:"HtmlSelect",configFields:[nR("options"),aV("selectBehaviours",[fd,c1]),nY("selectClasses",[]),nY("selectAttributes",{}),nj("data")],factory:function(t,e){var n=F(t.options,function(t){return{dom:{tag:"option",value:t.value,innerHtml:t.text}}}),o=t.data.map(function(t){return od("initialValue",t)}).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:n,behaviours:aH(t.selectBehaviours,[fd.config({}),c1.config({store:C({mode:"manual",getValue:function(t){return o$(t.element)},setValue:function(e,n){V(t.options,function(t){return t.value===n}).isSome()&&oQ(e.element,n)}},o)})])}}}),xN=Object.freeze({__proto__:null,events:function(t,e){var n=t.stream.streams.setup(t,e);return om([oO(t.event,n),rz(function(){return e.cancel()})].concat(t.cancelEvent.map(function(t){return[oO(t,function(){return e.cancel()})]}).getOr([])))}}),xP=Object.freeze({__proto__:null,throttle:yo,init:function(t){return t.stream.streams.state(t)}}),xV=iU({fields:[nN("stream",nF("mode",{throttle:[nR("delay"),nY("stopEvent",!0),ik("streams",{setup:function(t,e){var n=t.stream,o=dH(t.onStream,n.delay);return e.setTimer(o),function(t,e){o.throttle(t,e),n.stopEvent&&e.stop()}},state:yo})]})),nY("event","input"),nj("cancelEvent"),iw("onStream")],name:"streaming",active:xN,state:xP}),xH=function(t){yi(t,function(t,e){return t.setSelectionRange(e.length,e.length)})},xL=u("alloy.typeahead.itemexecute"),xz=u([nj("lazySink"),nR("fetch"),nY("minChars",5),nY("responseTime",1e3),iy("onOpen"),nY("getHotspot",tg.some),nY("getAnchorOverrides",u({})),nY("layouts",tg.none()),nY("eventOrder",{}),nq("model",{},ot([nY("getDisplayText",function(t){return void 0!==t.meta&&void 0!==t.meta.text?t.meta.text:t.value}),nY("selectsOver",!0),nY("populateFromBrowse",!0)])),iy("onSetValue"),ix("onExecute"),iy("onItemExecute"),nY("inputClasses",[]),nY("inputAttributes",{}),nY("inputStyles",{}),nY("matchWidth",!0),nY("useMinWidth",!1),nY("dismissOnBlur",!0),iv(["openClass"]),nj("initialData"),aV("typeaheadBehaviours",[fd,c1,xV,fa,fp,hp]),of("previewing",function(){return nQ(!0)})].concat(p3()).concat(hC())),xU=u([sf({schema:[ih()],name:"menu",overrides:function(t){return{fakeFocus:!0,onHighlight:function(e,n){t.previewing.get()?e.getSystem().getByUid(t.uid).each(function(o){(function(t,e,n){if(t.selectsOver){var o=c1.getValue(e),r=t.getDisplayText(o),i=c1.getValue(n);return 0===t.getDisplayText(i).indexOf(r)?tg.some(function(){var t;yr(0,e,n),t=r.length,yi(e,function(e,n){return e.setSelectionRange(t,n.length)})}):tg.none()}return tg.none()})(t.model,o,n).fold(function(){return sA.dehighlight(e,n)},function(t){return t()})}):e.getSystem().getByUid(t.uid).each(function(e){t.model.populateFromBrowse&&yr(t.model,e,n)}),t.previewing.set(!1)},onExecute:function(e,n){return e.getSystem().getByUid(t.uid).toOptional().map(function(t){return ox(t,xL(),{item:n}),!0})},onHover:function(e,n){t.previewing.set(!1),e.getSystem().getByUid(t.uid).each(function(e){t.model.populateFromBrowse&&yr(t.model,e,n)})}}}})]),xj=a8({name:"Typeahead",configFields:xz(),partFields:xU(),factory:function(t,e,n,o){function i(e,n,i){t.previewing.set(!1);var a=hp.getCoupled(e,"sandbox");cW.isOpen(a)?sS.getCurrent(a).each(function(t){sA.getHighlighted(t).fold(function(){i(t)},function(){oS(a,t.element,"keydown",n)})}):hy(t,u(e),e,a,o,function(t){sS.getCurrent(t).each(i)},ho.HighlightFirst).get(r)}function u(t){return function(e){return e.map(function(e){var n=z(tt(e.menus,a),function(t){return R(t.items,function(t){return"item"===t.type})});return c1.getState(t).update(F(n,function(t){return t.data})),e})}}var c=pR(t),s=[fd.config({}),c1.config({onSetValue:t.onSetValue,store:C({mode:"dataset",getDataKey:function(t){return o$(t.element)},getFallbackEntry:function(t){return{value:t,meta:{}}},setValue:function(e,n){oQ(e.element,t.model.getDisplayText(n))}},t.initialData.map(function(t){return od("initialValue",t)}).getOr({}))}),xV.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:function(e,n){var i,a=hp.getCoupled(e,"sandbox");fd.isFocused(e)&&o$(e.element).length>=t.minChars&&(i=sS.getCurrent(a).bind(function(t){return sA.getHighlighted(t).map(c1.getValue)}),t.previewing.set(!0),hy(t,u(e),e,a,o,function(e){sS.getCurrent(a).each(function(e){i.fold(function(){t.model.selectsOver&&sA.highlightFirst(e)},function(t){sA.highlightBy(e,function(e){return c1.getValue(e).value===t.value}),sA.getHighlighted(e).orThunk(function(){return sA.highlightFirst(e),tg.none()})})})},ho.HighlightFirst).get(r))},cancelEvent:rk()}),fa.config({mode:"special",onDown:function(t,e){return i(t,e,sA.highlightFirst),tg.some(!0)},onEscape:function(t){var e=hp.getCoupled(t,"sandbox");return cW.isOpen(e)?(cW.close(e),tg.some(!0)):tg.none()},onUp:function(t,e){return i(t,e,sA.highlightLast),tg.some(!0)},onEnter:function(e){var n=hp.getCoupled(e,"sandbox"),o=cW.isOpen(n);if(o&&!t.previewing.get())return sS.getCurrent(n).bind(function(t){return sA.getHighlighted(t)}).map(function(t){return ox(e,xL(),{item:t}),!0});var r=c1.getValue(e);return oy(e,rk()),t.onExecute(n,e,r),o&&cW.close(n),tg.some(!0)}}),fp.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),hp.config({others:{sandbox:function(e){return hS(t,e,{onOpen:function(){return fp.on(e)},onClose:function(){return fp.off(e)}})}}}),lg("typeaheadevents",[rj(function(e){hx(t,u(e),e,o,r,ho.HighlightFirst).get(r)}),oO(xL(),function(e,n){var o=hp.getCoupled(e,"sandbox");yr(t.model,e,n.event.item),oy(e,rk()),t.onItemExecute(e,o,n.event.item,c1.getValue(e)),cW.close(o),xH(e)})].concat(t.dismissOnBlur?[oO(rp(),function(t){var e=hp.getCoupled(t,"sandbox");iq(e.element).isNone()&&cW.close(e)})]:[]))];return{uid:t.uid,dom:pN(n4(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:C(C({},c),aH(t.typeaheadBehaviours,s)),eventOrder:t.eventOrder}}}),xW=function(t){return C(C({},t),{toCached:function(){return xW(t.toCached())},bindFuture:function(e){return xW(t.bind(function(t){return t.fold(function(t){return hs(na.error(t))},function(t){return e(t)})}))},bindResult:function(e){return xW(t.map(function(t){return t.bind(e)}))},mapResult:function(e){return xW(t.map(function(t){return t.map(e)}))},mapError:function(e){return xW(t.map(function(t){return t.mapError(e)}))},foldResult:function(e,n){return t.map(function(t){return t.fold(e,n)})},withTimeout:function(e,n){return xW(hc(function(o){var r=!1,i=setTimeout(function(){r=!0,o(na.error(n()))},e);t.get(function(t){r||(clearTimeout(i),o(t))})}))}})},xG={type:"separator"},xX=oI("aria-invalid"),xY={bar:yl(function(t,e){var n;return n=e.shared,{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:F(t.items,n.interpreter)}}),collection:yl(function(t,e){var n,o,r,i,u,c;return n=e.shared.providers,i=t.label.map(function(t){return pI(t,n)}),u=s(function(e,o,r,i){o.stop(),n.isDisabled()||ox(e,pQ,{name:t.name,value:i})}),c=[oO(re(),s(function(t,e,n){iG(n)})),oO(rc(),u),oO(rx(),u),oO(rn(),s(function(t,e,n){io(t.element,"."+mH).each(function(t){oY(t,mH)}),oX(n,mH)})),oO(ro(),s(function(t){io(t.element,"."+mH).each(function(t){oY(t,mH)})})),rj(s(function(e,n,o,r){ox(e,pQ,{name:t.name,value:r})}))],pF(i,pj.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==t.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:a},behaviours:om([sE.config({disabled:n.isDisabled,onDisabled:function(t){l(t,function(t){oX(t,"tox-collection__item--state-disabled"),tQ(t,"aria-disabled",!0)})},onEnabled:function(t){l(t,function(t){oY(t,"tox-collection__item--state-disabled"),t5(t,"aria-disabled")})}}),gf(),fs.config({}),c1.config({store:{mode:"memory",initialValue:[]},onSetValue:function(e,o){var r=F(o,function(e){var o=dI.translate(e.text),r=1===t.columns?'<div class="tox-collection__item-label">'+o+"</div>":"",i='<div class="tox-collection__item-icon">'+e.icon+"</div>",u={_:" "," - ":" ","-":" "},a=o.replace(/\_| \- |\-/g,function(t){return u[t]});return'<div class="tox-collection__item'+(n.isDisabled()?" tox-collection__item--state-disabled":"")+'" tabindex="-1" data-collection-item-value="'+pX.encodeAllRaw(e.value)+'" title="'+a+'" aria-label="'+a+'">'+i+r+"</div>"}),i=F("auto"!==t.columns&&1<t.columns?M(r,t.columns):[r],function(t){return'<div class="tox-collection__group">'+t.join("")+"</div>"});oM(e.element,i.join("")),"auto"===t.columns&&mv(e,5,"tox-collection__item").each(function(t){var n=t.numRows,o=t.numColumns;fa.setGridSize(e,n,o)}),oy(e,p5)}}),pG.config({}),fa.config(1===(r=t.columns)?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===r?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:".tox-collection__group",cell:"."+mF}}),lg("collection-events",c)]),eventOrder:((o={})[rb()]=["disabling","alloy.base.behaviour","collection-events"],o)}),["tox-form__group--collection"],[]);function s(t){return function(e,n){ir(n.event.target,"[data-collection-item-value]").each(function(o){t(e,n,o,t0(o,"data-collection-item-value"))})}}function l(t,e){return F(ac(t.element,".tox-collection__item"),e)}}),alertbanner:yl(function(t,e){var n;return n=e.shared.providers,pL.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+t.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[fV.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:dD(t.icon,n.icons),attributes:{title:n.translate(t.iconTooltip)}},action:function(e){ox(e,pQ,{name:"alert-banner",value:t.url})},buttonBehaviours:om([dA()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:n.translate(t.text)}}]})}),input:yl(function(t,e){var n;return n=e.shared.providers,yn({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:t.disabled,classname:"tox-textfield",validation:tg.none(),maximized:t.maximized},n)}),textarea:yl(function(t,e){var n;return n=e.shared.providers,yn({name:t.name,multiline:!0,label:t.label,inputMode:tg.none(),placeholder:t.placeholder,flex:!0,disabled:t.disabled,classname:"tox-textarea",validation:tg.none(),maximized:t.maximized},n)}),label:yl(function(t,e){var n;return{dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"label",innerHtml:(n=e.shared).providers.translate(t.label),classes:["tox-label"]}}].concat(F(t.items,n.interpreter)),behaviours:om([vJ(),fs.config({}),vn(tg.none(),function(t){return oB(t.element)},function(t,e){return oM(t.element,e)}),fa.config({mode:"acyclic"})])}}),iframe:(xD=function(t,e){var n,o,r,i,u;return n=e.shared.providers,r=bB&&t.sandboxed,i=C(C({},t.label.map(function(t){return{title:t}}).getOr({})),r?{sandbox:"allow-scripts allow-same-origin"}:{}),o=nQ(""),u={getValue:function(t){return o.get()},setValue:function(t,e){var n;r?tQ(t.element,"srcdoc",e):(tQ(t.element,"src","javascript:''"),(n=t.element.dom.contentWindow.document).open(),n.write(e),n.close()),o.set(e)}},pF(t.label.map(function(t){return pI(t,n)}),pj.parts.field({factory:{sketch:function(t){return vr({uid:t.uid,dom:{tag:"iframe",attributes:i},behaviours:om([pG.config({}),fd.config({}),vn(tg.none(),u.getValue,u.setValue)])})}}}),["tox-form__group--stretched"],[])},function(t,e,n){var o=n4(e,{source:"dynamic"});return yl(xD)(t,o,n)}),button:yl(function(t,e){var n,o;return n=e.shared.providers,o=vz(t.name,"custom"),pF(tg.none(),pj.parts.field(C({factory:fV},vH(t,tg.some(o),n,[bE(""),vJ()]))),[],[])}),checkbox:yl(function(t,e){var n,o,r,i,u;return n=e.shared.providers,o=c1.config({store:{mode:"manual",getValue:function(t){return t.element.dom.checked},setValue:function(t,e){t.element.dom.checked=e}}}),r=pj.parts.field({factory:{sketch:a},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:om([vJ(),sE.config({disabled:function(){return t.disabled||n.isDisabled()}}),pG.config({}),fd.config({}),o,fa.config({mode:"special",onEnter:c,onSpace:c,stopSpaceKeyup:!0}),lg("checkbox-events",[oO(ra(),function(e,n){ox(e,pK,{name:t.name})})])])}),i=pj.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:n.translate(t.label)},behaviours:om([v3.config({})])}),u=lz({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[s("checked"),s("unchecked")]}),pj.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[r,u.asSpec(),i],fieldBehaviours:om([sE.config({disabled:function(){return t.disabled||n.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(t){pj.getField(t).each(sE.disable)},onEnabled:function(t){pj.getField(t).each(sE.enable)}}),gf()])});function c(t){return t.element.dom.click(),tg.some(!0)}function s(t){return dM("checked"===t?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+t]},n.icons)}}),colorinput:yl(function(t,e){var n,o,i,u,a,c;return n=e.shared,o=e.colorinput,u=pj.parts.field({factory:p9,inputClasses:["tox-textfield"],onSetValue:function(t){return hm.run(t).get(r)},inputBehaviours:om([sE.config({disabled:n.providers.isDisabled}),gf(),pG.config({}),hm.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(t){return tj(t.element)},notify:{onValid:function(t){var e=c1.getValue(t);ox(t,v9,{color:e})}},validator:{validateOnLoad:!1,validate:function(t){var e=c1.getValue(t);if(0===e.length)return hs(na.value(!0));var n=tE.fromTag("span");return t4(n,"background-color",e),hs(et(n,"background-color").fold(function(){return na.error("blah")},function(t){return na.value(e)}))}}})]),selectOnFocus:!1}),a=t.label.map(function(t){return pI(t,n.providers)}),c=lz((i={dom:{tag:"span",attributes:{"aria-label":n.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[ui,ur,us]},onLtr:function(){return[ur,ui,us]}},components:[],fetch:po(o.getColors(),o.hasCustomColors()),columns:o.getColorCols(),presets:"color",onItemAction:function(t,e){c.getOpt(t).each(function(t){"custom"===e?o.colorPicker(function(e){e.fold(function(){return oy(t,v6)},function(e){s(t,e),pm.add(e)})},"#ffffff"):s(t,"remove"===e?"":e)})}},v5.sketch({dom:i.dom,components:i.components,toggleClass:"mce-active",dropdownBehaviours:om([gW(n.providers.isDisabled),gf(),v3.config({}),pG.config({})]),layouts:i.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:n.getSink,fetch:function(t){return hc(function(t){return i.fetch(t)}).map(function(e){return tg.from(pO(n4(pa(oI("menu-value"),e,function(e){i.onItemAction(t,e)},i.columns,i.presets,dK.CLOSE_ON_EXECUTE,w,n.providers),{movement:pc(i.columns,i.presets)})))})},parts:{menu:ml(0,0,i.presets)}}))),pj.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:a.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[u,c.asSpec()]}]),fieldBehaviours:om([lg("form-field-events",[oO(v9,function(e,n){c.getOpt(e).each(function(t){t4(t.element,"background-color",n.event.color)}),ox(e,pK,{name:t.name})}),oO(v4,function(t,e){pj.getField(t).each(function(n){c1.setValue(n,e.event.value),sS.getCurrent(t).each(fd.focus)})}),oO(v6,function(t,e){pj.getField(t).each(function(e){sS.getCurrent(t).each(fd.focus)})})])])});function s(t,e){ox(t,v4,{value:e})}}),colorpicker:yl(function(t){var e,n=lz((e=function(t){return"tox-"+t},a6({name:"ColourPicker",configFields:[nR("dom"),nY("onValidHex",r),nY("onInvalidHex",r)],factory:function(t){function n(t,e,n){b.getOpt(t).each(function(t){p.setHue(t,n)})}function o(t,e){y.getOpt(t).each(function(t){g.updateHex(t,e)})}function i(t,e,n,o){var r=gF(e);h.paletteRgba.set(r),h.paletteHue.set(n),ty(o,function(o){o(t,e,n)})}var a,c,s,l,f,d,m,g=function(t,e,n,o){function i(n,o,i,u,a){var c=t(bw+"range");return{dom:{tag:"div",attributes:{role:"presentation"}},components:[pj.parts.label({dom:{tag:"label",innerHtml:i,attributes:{"aria-label":u}}}),pj.parts.field({data:a,factory:p9,inputAttributes:C({type:"text"},"hex"===o?{"aria-live":"polite"}:{}),inputClasses:[e("textfield")],inputBehaviours:om([hm.config({invalidClass:e("invalid"),notify:{onValidate:function(t){ox(t,bx,{type:o})},onValid:function(t){ox(t,bb,{type:o,value:c1.getValue(t)})},onInvalid:function(t){ox(t,by,{type:o,value:c1.getValue(t)})}},validator:{validate:function(e){return hs(n(c1.getValue(e))?na.value(!0):na.error(t("aria.input.invalid")))},validateOnLoad:!1}}),pG.config({})]),onSetValue:function(t){hm.isInvalid(t)&&hm.run(t).get(r)}})].concat("hex"!==o?[pj.parts["aria-descriptor"]({text:c})]:[])}}function u(t,e){var n=e.red,o=e.green,r=e.blue;c1.setValue(t,{red:n,green:o,blue:r})}function a(t,e){c.getOpt(t).each(function(t){t4(t.element,"background-color","#"+e.value)})}var c=lz({dom:{tag:"div",classes:[e("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}});return a6({factory:function(){function r(t){return g[t].get()}function s(t,e){g[t].set(e)}function l(t,e){var n=e.event;"hex"!==n.type?s(n.type,tg.none()):o(t)}function f(t,e){var o,i,c,l,f,d=e.event;"hex"===d.type?(o=d.value,n(t),i={value:o},s("hex",tg.some(o)),u(t,c=gF(i)),m(c),ox(t,bm,{hex:i}),a(t,i)):(l=d.type,f=parseInt(d.value,10),s(l,tg.some(f)),r("red").bind(function(t){return r("green").bind(function(e){return r("blue").map(function(n){return gA(t,e,n,1)})})}).each(function(e){var n,o=(n=gD(e),bv.getField(t,"hex").each(function(e){fd.isFocused(e)||c1.setValue(t,{hex:n.value})}),n);ox(t,bm,{hex:o}),a(t,o)}))}function d(e){return{label:t(bw+e+".label"),description:t(bw+e+".description")}}function m(t){var e=t.red,n=t.green,o=t.blue;s("red",tg.some(e)),s("green",tg.some(n)),s("blue",tg.some(o))}var g={red:nQ(tg.some(255)),green:nQ(tg.some(255)),blue:nQ(tg.some(255)),hex:nQ(tg.some("ffffff"))},p=d("red"),h=d("green"),v=d("blue"),b=d("hex");return n4(bv.sketch(function(n){return{dom:{tag:"form",classes:[e("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[n.field("red",pj.sketch(i(gB,"red",p.label,p.description,255))),n.field("green",pj.sketch(i(gB,"green",h.label,h.description,255))),n.field("blue",pj.sketch(i(gB,"blue",v.label,v.description,255))),n.field("hex",pj.sketch(i(gT,"hex",b.label,b.description,"ffffff"))),c.asSpec()],formBehaviours:om([hm.config({invalidClass:e("form-invalid")}),lg("rgb-form-events",[oO(bb,f),oO(by,l),oO(bx,l)])])}}),{apis:{updateHex:function(t,e){var n;c1.setValue(t,{hex:e.value}),u(t,n=gF(e)),m(n),a(t,e)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(t,e,n){t.updateHex(e,n)}},extraApis:{}})}(ve,e,t.onValidHex,t.onInvalidHex),p=(d=bd.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[e("sv-palette-spectrum")]}}),m=bd.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[e("sv-palette-thumb")],innerHtml:"<div class="+e("sv-palette-inner-thumb")+' role="presentation"></div>'}}),a6({factory:function(t){var n=u({x:0,y:0}),o=om([sS.config({find:tg.some}),fd.config({})]);return bd.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[e("sv-palette")]},model:{mode:"xy",getInitialValue:n},rounded:!1,components:[d,m],onChange:function(t,e,n){ox(t,bp,{value:n})},onInit:function(t,e,n,o){x(n.element.dom,gN(g3))},sliderBehaviours:o})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:function(t,e,n){x(e.components()[0].element.dom,gN(gM(gV(n,100,100))))},setThumb:function(t,e,n){var o=gH(gF(n));bd.setValue(e,{x:o.saturation,y:100-o.value})}},extraApis:{}})),h={paletteRgba:nQ(g3),paletteHue:nQ(0)},v=lz((a=bd.parts.spectrum({dom:{tag:"div",classes:[e("hue-slider-spectrum")],attributes:{role:"presentation"}}}),c=bd.parts.thumb({dom:{tag:"div",classes:[e("hue-slider-thumb")],attributes:{role:"presentation"}}}),bd.sketch({dom:{tag:"div",classes:[e("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:u({y:0})},components:[a,c],sliderBehaviours:om([fd.config({})]),onChange:function(t,e,n){ox(t,bg,{value:n})}}))),b=lz(p.sketch({})),y=lz(g.sketch({}));function x(t,e){var n,o,r=t.width,i=t.height,u=t.getContext("2d");null!==u&&(u.fillStyle=e,u.fillRect(0,0,r,i),(n=u.createLinearGradient(0,0,r,0)).addColorStop(0,"rgba(255,255,255,1)"),n.addColorStop(1,"rgba(255,255,255,0)"),u.fillStyle=n,u.fillRect(0,0,r,i),(o=u.createLinearGradient(0,0,0,i)).addColorStop(0,"rgba(0,0,0,0)"),o.addColorStop(1,"rgba(0,0,0,1)"),u.fillStyle=o,u.fillRect(0,0,r,i))}return{uid:t.uid,dom:t.dom,components:[b.asSpec(),v.asSpec(),y.asSpec()],behaviours:om([lg("colour-picker-events",[oO(bm,(f=[n,function(t,e,n){v.getOpt(t).each(function(t){bd.setValue(t,{y:100-n/360*100})})},function(t,e){b.getOpt(t).each(function(t){p.setThumb(t,e)})}],function(t,e){var n=e.event.hex;i(t,n,gH(gF(n)).hue,f)})),oO(bp,(l=[o],function(t,e){var n=e.event.value,o=h.paletteHue.get();i(t,gD(gM(gV(o,n.x,100-n.y))),o,l)})),oO(bg,(s=[n,o],function(t,e){var n=(100-e.event.value.y)/100*360,o=gH(h.paletteRgba.get());i(t,gD(gM(gV(n,o.saturation,o.value))),n,s)}))]),sS.config({find:function(t){return y.getOpt(t)}}),fa.config({mode:"acyclic"})])}}})).sketch({dom:{tag:"div",classes:["tox-color-picker-container"],attributes:{role:"presentation"}},onValidHex:function(t){ox(t,pQ,{name:"hex-valid",value:!0})},onInvalidHex:function(t){ox(t,pQ,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[n.asSpec()],behaviours:om([c1.config({store:{mode:"manual",getValue:function(t){var e=n.get(t);return sS.getCurrent(e).bind(function(t){return c1.getValue(t).hex}).map(function(t){return"#"+t}).getOr("")},setValue:function(t,e){var o=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(e),r=n.get(t);sS.getCurrent(r).fold(function(){console.log("Can not find form")},function(t){c1.setValue(t,{hex:tg.from(o[1]).getOr("")}),bv.getField(t,"hex").each(function(t){oy(t,ru())})})}}}),vJ()])}}),dropzone:yl(function(t,e){return function(t,e){function n(t,e){e.stop()}function o(t){return function(e,n){ty(t,function(t){t(e,n)})}}function r(t,e){sE.isDisabled(t)||u(t,e.event.raw.dataTransfer.files)}function i(t,e){u(t,e.event.raw.target.files)}function u(n,o){var r;c1.setValue(n,(r=bO.explode(e.getSetting("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string")),R(tx(o),function(t){return A(r,function(e){return t_(t.name.toLowerCase(),"."+e.toLowerCase())})}))),ox(n,pK,{name:t.name})}var a=lz({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:om([lg("input-file-events",[oA(rc()),oA(rx())])])});return pF(t.label.map(function(t){return pI(t,e)}),pj.parts.field({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:om([bE([]),vJ(),sE.config({}),fp.config({toggleClass:"dragenter",toggleOnExecute:!1}),lg("dropzone-events",[oO("dragenter",o([n,fp.toggle])),oO("dragleave",o([n,fp.toggle])),oO("dragover",n),oO("drop",o([n,r])),oO(ra(),i)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:e.translate("Drop an image here")}},fV.sketch({dom:{tag:"button",innerHtml:e.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[a.asSpec()],action:function(t){a.get(t).element.dom.click()},buttonBehaviours:om([pG.config({}),gW(e.isDisabled),gf()])})]}]}}}}),["tox-form__group--stretched"],[])}(t,e.shared.providers)}),grid:yl(function(t,e){var n;return n=e.shared,{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+t.columns+"col"]},components:F(t.items,n.interpreter)}}),listbox:yl(function(t,e){var n,o,i,a;return n=e.shared.providers,o=K(t.items).filter(ye),i=t.label.map(function(t){return pI(t,n)}),a={dom:{tag:"div",classes:["tox-listboxfield"]},components:[pj.parts.field({dom:{},factory:{sketch:function(n){return vB({uid:n.uid,text:o.map(function(t){return t.text}),icon:tg.none(),tooltip:t.label,role:tg.none(),fetch:function(n,o){o(vF(xF(n,t.name,t.items,c1.getValue(n)),dK.CLOSE_ON_EXECUTE,e,!1))},onSetup:u(r),getApi:u({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[pG.config({}),c1.config({store:{mode:"manual",initialValue:o.map(function(t){return t.value}).getOr(""),getValue:function(t){return t0(t.element,xM)},setValue:function(e,n){xI(t.items,n).each(function(t){tQ(e.element,xM,t.value),ox(e,bK,{text:t.text})})}}})]},"tox-listbox",e.shared)}}})]},pj.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:L([i.toArray(),[a]]),fieldBehaviours:om([sE.config({disabled:u(t.disabled),onDisabled:function(t){pj.getField(t).each(sE.disable)},onEnabled:function(t){pj.getField(t).each(sE.enable)}})])})}),selectbox:yl(function(t,e){var n,o,r,i;return n=e.shared.providers,o=F(t.items,function(t){return{text:n.translate(t.text),value:t.value}}),r=t.label.map(function(t){return pI(t,n)}),i={dom:{tag:"div",classes:["tox-selectfield"]},components:L([[pj.parts.field({dom:{},selectAttributes:{size:t.size},options:o,factory:xR,selectBehaviours:om([sE.config({disabled:function(){return t.disabled||n.isDisabled()}}),pG.config({}),lg("selectbox-change",[oO(ra(),function(e,n){ox(e,pK,{name:t.name})})])])})],(1<t.size?tg.none():tg.some(dM("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},n.icons))).toArray()])},pj.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:L([r.toArray(),[i]]),fieldBehaviours:om([sE.config({disabled:function(){return t.disabled||n.isDisabled()},onDisabled:function(t){pj.getField(t).each(sE.disable)},onEnabled:function(t){pj.getField(t).each(sE.enable)}}),gf()])})}),sizeinput:yl(function(t,e){return vY(t,e.shared.providers)}),urlinput:yl(function(t,e){return function(t,e,n){function o(e){var o=c1.getValue(e);n.addToHistory(o.value,t.filetype)}var i,u,a,c,s=e.shared.providers,l=pj.parts.field({factory:xj,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":xX,type:"url"},minChars:0,responseTime:0,fetch:function(o){var r,i,u;return hs(vF((r=t.filetype,u=void 0!==(i=c1.getValue(o)).meta.text?i.meta.text:i.value,n.getLinkInformation().fold(function(){return[]},function(t){var e=ys(u,F(n.getHistory(r),function(t){return ya(t,t)}));return"file"===r?P([e,ys(u,yc("header",t.targets)),ys(u,L([tg.from(t.anchorTop).map(function(t){return ya("<top>",t)}).toArray(),yc("anchor",t.targets),tg.from(t.anchorBottom).map(function(t){return ya("<bottom>",t)}).toArray()]))],function(t,e){return 0===t.length||0===e.length?t.concat(e):t.concat(xG,e)},[]):e})),dK.BUBBLE_TO_SANDBOX,e,!1))},getHotspot:function(t){return h.getOpt(t)},onSetValue:function(t,e){t.hasConfigured(hm)&&hm.run(t).get(r)},typeaheadBehaviours:om(L([n.getValidationHandler().map(function(e){return hm.config({getRoot:function(t){return tj(t.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(t,e){d.getOpt(t).each(function(t){tQ(t.element,"title",s.translate(e))})}},validator:{validate:function(n){var o=c1.getValue(n);return xW(hc(function(n){e({type:t.filetype,url:o.value},function(t){"invalid"===t.status?n(na.error(t.message)):n(na.value(t.message))})}))},validateOnLoad:!1}})}).toArray(),[sE.config({disabled:function(){return t.disabled||s.isDisabled()}}),pG.config({}),lg("urlinput-events",L(["file"===t.filetype?[oO(ru(),function(e){ox(e,pK,{name:t.name})})]:[],[oO(ra(),function(e){ox(e,pK,{name:t.name}),o(e)}),oO(rh(),function(e){ox(e,pK,{name:t.name}),o(e)})]]))]])),eventOrder:((i={})[ru()]=["streaming","urlinput-events","invalidating"],i),model:{getDisplayText:function(t){return t.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:e.shared.getSink,parts:{menu:ml(0,0,"normal")},onExecute:function(t,e,n){ox(e,pZ,{})},onItemExecute:function(e,n,r,i){o(e),ox(e,pK,{name:t.name})}}),f=t.label.map(function(t){return pI(t,s)}),d=lz((u="invalid",a=tg.some(xX),dM("warning",{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+u],attributes:C({title:s.translate(c=void 0===c?u:c),"aria-live":"polite"},a.fold(function(){return{}},function(t){return{id:t}}))},s.icons))),m=lz({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[d.asSpec()]}),g=n.getUrlPicker(t.filetype),p=oI("browser.url.event"),h=lz({dom:{tag:"div",classes:["tox-control-wrap"]},components:[l,m.asSpec()],behaviours:om([sE.config({disabled:function(){return t.disabled||s.isDisabled()}})])}),v=lz(vL({name:t.name,icon:tg.some("browse"),text:t.label.getOr(""),disabled:t.disabled,primary:!1,borderless:!0},function(t){return oy(t,p)},s,[],["tox-browse-url"]));return pj.sketch({dom:pq([]),components:f.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:L([[h.asSpec()],g.map(function(){return v.asSpec()}).toArray()])}]),fieldBehaviours:om([sE.config({disabled:function(){return t.disabled||s.isDisabled()},onDisabled:function(t){pj.getField(t).each(sE.disable),v.getOpt(t).each(sE.disable)},onEnabled:function(t){pj.getField(t).each(sE.enable),v.getOpt(t).each(sE.enable)}}),gf(),lg("url-input-events",[oO(p,function(e){sS.getCurrent(e).each(function(n){var o=c1.getValue(n),r=C({fieldname:t.name},o);g.each(function(o){o(r).get(function(o){c1.setValue(n,o),ox(e,pK,{name:t.name})})})})})])])})}(t,e,e.urlinput)}),customeditor:yl(function(t){var e=uk(),n=lz({dom:{tag:t.tag}}),o=uk();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:om([lg("custom-editor-events",[rL(function(r){n.getOpt(r).each(function(n){(tC(t,"init")?t.init(n.element.dom):bC.load(t.scriptId,t.scriptUrl).then(function(e){return e(n.element.dom,t.settings)})).then(function(t){o.on(function(e){t.setValue(e)}),o.clear(),e.set(t)})})})]),c1.config({store:{mode:"manual",getValue:function(){return e.get().fold(function(){return o.get().getOr("")},function(t){return t.getValue()})},setValue:function(t,n){e.get().fold(function(){o.set(n)},function(t){return t.setValue(n)})}}}),vJ()]),components:[n.asSpec()]}}),htmlpanel:yl(function(t){return"presentation"===t.presets?pL.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):pL.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:om([pG.config({}),fd.config({})])})}),imagetools:yl(function(t,e){return function(t,e){function n(t){var e=x.getHistoryStates();O.updateButtonUndoStates(t,e.undoEnabled,e.redoEnabled),ox(t,b5.formActionEvent,{name:b5.saveState(),value:e.undoEnabled})}function o(t){return t.toBlob()}function i(t){ox(t,b5.formActionEvent,{name:b5.disable(),value:{}})}function a(t,e,r,u,a){i(t),new hi(function(t){var n=new FileReader;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)}).then(function(t){return vm(new hi(function(t,n){function o(){i.removeEventListener("load",u),i.removeEventListener("error",a)}var r=URL.createObjectURL(e),i=new Image,u=function(){o(),t(i)},a=function(){o(),n("Unable to load data of type "+e.type+": "+r)};i.addEventListener("load",u),i.addEventListener("error",a),i.src=r,i.complete&&setTimeout(u,0)}).then(function(t){bI(t);var e=vc(vl(t),vf(t));return bM(e).drawImage(t,0,0),e}),e,t)}).then(r).then(o).then(u).then(function(e){return S(t,e)}).then(function(){n(t),a(),w(t)}).catch(function(e){console.log(e),t.getSystem().isConnected()&&w(t)})}function c(t,e,n){a(t,x.getBlobState().blob,e,function(t){return x.updateTempState(t)},n)}function s(t){var e=x.getBlobState().url;return x.destroyTempState(),n(t),e}var l,f,d,m,g,p,h,v,b,y,x=function(t){var e,n,o,i,u=nQ(t),a=uk(),c=(n=-1,{data:e=[],add:function(t){var o=e.splice(++n);return e.push(t),{state:t,removed:o}},undo:function(){if(o())return e[--n]},redo:function(){if(i())return e[++n]},canUndo:o=function(){return 0<n},canRedo:i=function(){return -1!==n&&n<e.length-1}});function s(t){u.set(t)}function l(t){URL.revokeObjectURL(t.url)}function f(t){var e=d(t);s(e);var n=c.add(e).removed;return bO.each(n,l),e.url}function d(t){return{blob:t,url:URL.createObjectURL(t)}}function m(){a.on(l),a.clear()}return c.add(t),{getBlobState:function(){return u.get()},setBlobState:s,addBlobState:f,getTempState:function(){return a.get().getOrThunk(u.get)},updateTempState:function(t){var e=d(t);return m(),a.set(e),e.url},addTempState:function(t){var e=d(t);return a.set(e),e.url},applyTempState:function(t){return a.get().fold(r,function(e){f(e.blob),t()})},destroyTempState:m,undo:function(){var t=c.undo();return s(t),t.url},redo:function(){var t=c.redo();return s(t),t.url},getHistoryStates:function(){return{undoEnabled:c.canUndo(),redoEnabled:c.canRedo()}}}}(t.currentState),w=function(t){_.getApplyButton(t).each(function(t){sE.enable(t)}),ox(t,b5.formActionEvent,{name:b5.enable(),value:{}})},S=function(t,e){return i(t),k.updateSrc(t,e)},k=(d=t.currentState.url,g=lz({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),p=nQ(1),m=uw(),h=C(C({},m),{run:function(t){return m.get().each(t)}}),v=nQ({x:0,y:0,w:1,h:1}),b=nQ({x:0,y:0,w:1,h:1}),{memContainer:y=lz(pL.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[g.asSpec(),{dom:{tag:"img",attributes:{src:d}}},{dom:{tag:"div"},behaviours:om([lg("image-panel-crop-events",[rL(function(t){y.getOpt(t).each(function(t){var e=yt({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},t.element.dom,r);e.toggleVisibility(!1),e.on("updateRect",function(t){var e=t.rect,n=p.get(),o={x:Math.round(e.x/n),y:Math.round(e.y/n),w:Math.round(e.w/n),h:Math.round(e.h/n)};v.set(o)}),h.set(e)})}),rz(function(){h.clear()})])])}],containerBehaviours:om([fs.config({}),lg("image-panel-events",[rL(function(t){E(t,d)})])])})),updateSrc:E,zoom:function(t,e){var n=p.get();p.set(0<e?Math.min(2,n+.1):Math.max(.1,n-.1)),y.getOpt(t).each(function(t){var e=t.components()[1].element;T(t,e)})},showCrop:function(){h.run(function(t){t.toggleVisibility(!0)})},hideCrop:function(){h.run(function(t){t.toggleVisibility(!1)})},getRect:function(){return v.get()},getMeasurements:function(){var t=b.get();return{width:t.w,height:t.h}}}),O=(l=lz(b6("Undo","undo",!0,function(t){ox(t,b2.undo(),{direction:1})},e)),f=lz(b6("Redo","redo",!0,function(t){ox(t,b2.redo(),{direction:1})},e)),{container:pL.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[l.asSpec(),f.asSpec(),b6("Zoom in","zoom-in",!1,function(t){ox(t,b2.zoom(),{direction:1})},e),b6("Zoom out","zoom-out",!1,function(t){ox(t,b2.zoom(),{direction:-1})},e)]}),updateButtonUndoStates:function(t,e,n){l.getOpt(t).each(function(t){b8(t,e)}),f.getOpt(t).each(function(t){b8(t,n)})}}),_=function(t,e){function n(t,n,o,r){return lz(vL({name:t,text:t,disabled:o,primary:r,icon:tg.none(),borderless:!1},n,e))}function o(t,n,o,r){return lz(vV({name:t,icon:tg.some(t),tooltip:tg.some(n),disabled:r,primary:!1,borderless:!1},o,e))}function i(t,e){t.map(function(t){var n=t.get(e);n.hasConfigured(sE)&&sE.disable(n)})}function a(t,e){t.map(function(t){var n=t.get(e);n.hasConfigured(sE)&&sE.enable(n)})}function c(t){return oy(t,b5.disable()),0}function s(t){return oy(t,b5.enable()),0}function l(t,e){c(t),ox(t,b2.transform(),{transform:e}),s(t)}function f(t){return function(){q.getOpt(t).each(function(t){fs.set(t,[Y])})}}function d(t,e){c(t),ox(t,b2.transformApply(),{transform:e,swap:f(t)}),s(t)}function m(){return n("Back",function(t){ox(t,b2.back(),{swap:f(t)})},!1,!1)}function g(){return lz({dom:{tag:"div",classes:["tox-spacer"]},behaviours:om([sE.config({})])})}function p(){return n("Apply",function(t){ox(t,b2.apply(),{swap:f(t)})},!0,!0)}function h(t,e){return function(n){return t(n,e)}}function v(t,e){c(t),ox(t,b2.tempTransform(),{transform:e}),s(t)}function b(t,n,o,r,i){var a=bd.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}}),c=bd.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),s=bd.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return lz(bd.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:o,maxX:i,getInitialValue:u({x:r})},components:[a,c,s],sliderBehaviours:om([fd.config({})]),onChoose:n}))}function y(t,e,n,o,r){var u=[m(),b(t,function(t,n,o){l(t,h(e,o.x/100))},n,o,r),p()];return pL.sketch({dom:S,components:u.map(function(t){return t.asSpec()}),containerBehaviours:om([lg("image-tools-filter-panel-buttons-events",[oO(b5.disable(),function(t,e){i(u,t)}),oO(b5.enable(),function(t,e){a(u,t)})])])})}function x(t){return b(t,function(t,e,n){var o=H.getOpt(t),r=z.getOpt(t),i=L.getOpt(t);o.each(function(e){r.each(function(n){i.each(function(o){var r=c1.getValue(e).x/100,i=c1.getValue(o).x/100,u=c1.getValue(n).x/100;l(t,function(t){return vb(t,vv(vh(),[vp(r,0,2),0,0,0,0,0,vp(i,0,2),0,0,0,0,0,vp(u,0,2),0,0,0,0,0,1,0,0,0,0,0,1]))})})})})},0,100,200)}function w(t,e,n){return function(o){ox(o,b2.swap(),{transform:e,swap:function(){q.getOpt(o).each(function(e){fs.set(e,[t]),n(e)})}})}}var S={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},k=[m(),g(),n("Apply",function(e){d(e,function(e){var n,o,r,i,u=t.getRect();return n=u.x,o=u.y,r=u.w,i=u.h,e.toCanvas().then(function(t){return bX(t,e.getType(),n,o,r,i)})}),t.hideCrop()},!1,!0)],C=pL.sketch({dom:S,components:k.map(function(t){return t.asSpec()}),containerBehaviours:om([lg("image-tools-crop-buttons-events",[oO(b5.disable(),function(t,e){i(k,t)}),oO(b5.enable(),function(t,e){a(k,t)})])])}),O=lz(vY({name:"size",label:tg.none(),constrain:!0,disabled:!1},e)),_=[m(),g(),O,g(),n("Apply",function(t){O.getOpt(t).each(function(e){var n=c1.getValue(e),o=parseInt(n.width,10),r=parseInt(n.height,10);d(t,function(t){return t.toCanvas().then(function(e){return bU(e,o,r).then(function(e){return vg(e,t.getType())})})})})},!1,!0)],T=pL.sketch({dom:S,components:_.map(function(t){return t.asSpec()}),containerBehaviours:om([lg("image-tools-resize-buttons-events",[oO(b5.disable(),function(t,e){i(_,t)}),oO(b5.enable(),function(t,e){a(_,t)})])])}),E=h(v_,"h"),D=h(v_,"v"),A=h(vT,-90),B=h(vT,90),M=[m(),g(),o("flip-horizontally","Flip horizontally",function(t){v(t,E)},!1),o("flip-vertically","Flip vertically",function(t){v(t,D)},!1),o("rotate-left","Rotate counterclockwise",function(t){v(t,A)},!1),o("rotate-right","Rotate clockwise",function(t){v(t,B)},!1),g(),p()],F=pL.sketch({dom:S,components:M.map(function(t){return t.asSpec()}),containerBehaviours:om([lg("image-tools-fliprotate-buttons-events",[oO(b5.disable(),function(t,e){i(M,t)}),oO(b5.enable(),function(t,e){a(M,t)})])])}),I=[m(),g(),p()],R=pL.sketch({dom:S,components:I.map(function(t){return t.asSpec()})}),N=y("Brightness",vC,-100,0,100),P=y("Contrast",vO,-100,0,100),V=y("Gamma",vk,-100,0,100),H=x("R"),L=x("G"),z=x("B"),U=[m(),H,L,z,p()],j=pL.sketch({dom:S,components:U.map(function(t){return t.asSpec()})}),W=tg.some(vS),G=tg.some(vw),X=[o("crop","Crop",w(C,tg.none(),function(e){t.showCrop()}),!1),o("resize","Resize",w(T,tg.none(),function(e){O.getOpt(e).each(function(e){var n=t.getMeasurements(),o=n.width,r=n.height;c1.setValue(e,{width:o,height:r})})}),!1),o("orientation","Orientation",w(F,tg.none(),r),!1),o("brightness","Brightness",w(N,tg.none(),r),!1),o("sharpen","Sharpen",w(R,W,r),!1),o("contrast","Contrast",w(P,tg.none(),r),!1),o("color-levels","Color levels",w(j,tg.none(),r),!1),o("gamma","Gamma",w(V,tg.none(),r),!1),o("invert","Invert",w(R,G,r),!1)],Y=pL.sketch({dom:S,components:X.map(function(t){return t.asSpec()})}),q=lz(pL.sketch({dom:{tag:"div"},components:[Y],containerBehaviours:om([fs.config({})])}));return{memContainer:q,getApplyButton:function(t){return q.getOpt(t).map(function(t){var e=t.components()[0];return e.components()[e.components().length-1]})}}}(k,e);function T(t,e){y.getOpt(t).each(function(t){var n=p.get(),o=es(t.element),r=ei(t.element),i=e.dom.naturalWidth*n,u=e.dom.naturalHeight*n,a=Math.max(0,o/2-i/2),c=Math.max(0,r/2-u/2),s={left:a.toString()+"px",top:c.toString()+"px",width:i.toString()+"px",height:u.toString()+"px",position:"absolute"};t6(e,s),g.getOpt(t).each(function(t){t6(t.element,s)}),h.run(function(t){var e=v.get();t.setRect({x:e.x*n+a,y:e.y*n+c,w:e.w*n,h:e.h*n}),t.setClampRect({x:a,y:c,w:i,h:u}),t.setViewPortRect({x:0,y:0,w:o,h:r})})})}function E(t,e){var n,o=tE.fromTag("img");return tQ(o,"src",e),n=o.dom,new dZ(function(t){var e=function(){n.removeEventListener("load",e),t(n)};n.complete?t(n):n.addEventListener("load",e)}).then(function(){t.getSystem().isConnected()&&y.getOpt(t).map(function(t){var e=r9({element:o});fs.replaceAt(t,1,tg.some(e));var n=b.get(),r={x:0,y:0,w:o.dom.naturalWidth,h:o.dom.naturalHeight};b.set(r);var i=b3.inflate(r,-20,-20);v.set(i),n.w===r.w&&n.h===r.h||y.getOpt(t).each(function(t){var e=es(t.element),n=ei(t.element),r=Math.min(e/o.dom.naturalWidth,n/o.dom.naturalHeight);1<=r?p.set(1):p.set(r)}),T(t,o)})})}return{dom:{tag:"div",attributes:{role:"presentation"}},components:[_.memContainer.asSpec(),k.memContainer.asSpec(),O.container],behaviours:om([c1.config({store:{mode:"manual",getValue:function(){return x.getBlobState()}}}),lg("image-tools-events",[oO(b2.undo(),function(t,e){S(t,x.undo()).then(function(e){w(t),n(t)})}),oO(b2.redo(),function(t,e){S(t,x.redo()).then(function(e){w(t),n(t)})}),oO(b2.zoom(),function(t,e){var n=e.event.direction;k.zoom(t,n)}),oO(b2.back(),function(t,e){var n=s(t);S(t,n).then(function(e){w(t)}),(0,e.event.swap)(),k.hideCrop()}),oO(b2.apply(),function(t,e){x.applyTempState(function(){s(t),(0,e.event.swap)()})}),oO(b2.transform(),function(t,e){return c(t,e.event.transform,r)}),oO(b2.tempTransform(),function(t,e){var n=e.event.transform;a(t,x.getTempState().blob,n,function(t){return x.addTempState(t)},r)}),oO(b2.transformApply(),function(t,e){var n=e.event.transform,o=e.event.swap;a(t,x.getBlobState().blob,n,function(e){var n=x.addBlobState(e);return s(t),n},o)}),oO(b2.swap(),function(t,e){O.updateButtonUndoStates(t,!1,!1);var n=e.event.transform,o=e.event.swap;n.fold(function(){o()},function(e){c(t,e,o)})})]),vJ()])}}(t,e.shared.providers)}),table:yl(function(t,e){return function(t,e){function n(t){return{dom:{tag:"td",innerHtml:e.translate(t)}}}return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:F(t.header,function(t){return{dom:{tag:"th",innerHtml:e.translate(t)}}})}]},{dom:{tag:"tbody"},components:F(t.cells,function(t){return{dom:{tag:"tr"},components:F(t,n)}})}],behaviours:om([pG.config({}),fd.config({})])}}(t,e.shared.providers)}),panel:yl(function(t,e){return{dom:{tag:"div",classes:t.classes},components:F(t.items,e.shared.interpreter)}})},xq={field:function(t,e){return e}},xK=function(t,e,n){return tn(xY,e.type).fold(function(){return console.error('Unknown factory type "'+e.type+'", defaulting to container: ',e),e},function(o){return o(t,e,n)})},xJ={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},x$=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],xQ=function(t){return P(t,function(t,e){if(tC(e,"items")){var n=xQ(e.items);return{customFormats:t.customFormats.concat(n.customFormats),formats:t.formats.concat([{title:e.title,items:n.formats}])}}if(tC(e,"inline")||tC(e,"block")||tC(e,"selector")){var o="custom-"+(s(e.name)?e.name:e.title.toLowerCase());return{customFormats:t.customFormats.concat([{name:o,format:e}]),formats:t.formats.concat([{title:e.title,format:o,icon:e.icon}])}}return C(C({},t),{formats:t.formats.concat(e)})},{customFormats:[],formats:[]})},xZ=bO.trim,x0=yp("true"),x1=yp("false"),x2=function(t){var e=F(ac(tE.fromDom(t),"h1,h2,h3,h4,h5,h6,a:not([href])"),function(t){return t.dom});return R(F(R(e,yx),yw).concat(F(R(e,yb),yS)),yk)},x5="tinymce-url-history",x3=u([nY("shell",!1),nR("makeItem"),nY("setupItem",r),aV("listBehaviours",[fs])]),x9=u([sd({name:"items",overrides:function(){return{behaviours:om([fs.config({})])}}})]),x4=a8({name:u("CustomList")(),configFields:x3(),partFields:x9(),factory:function(t,e,n,o){var r=t.shell?{behaviours:[fs.config({})],components:[]}:{behaviours:[],components:e};return{uid:t.uid,dom:t.dom,components:r.components,behaviours:aH(t.listBehaviours,r.behaviours),apis:{setItems:function(e,n){(t.shell?tg.some(e):a$(e,t,"items")).fold(function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),Error("Custom List was defined to not be a shell, but no item container was specified in components")},function(o){var r=fs.contents(o),i=n.length,u=i-r.length,a=0<u?B(u,function(){return t.makeItem()}):[];ty(r.slice(i),function(t){return fs.remove(o,t)}),ty(a,function(t){return fs.append(o,t)}),ty(fs.contents(o),function(o,r){t.setupItem(e,o,n[r],r)})})}}}},apis:{setItems:function(t,e,n){t.setItems(e,n)}}}),x6=u([nR("dom"),nY("shell",!0),aV("toolbarBehaviours",[fs])]),x8=u([sd({name:"groups",overrides:function(){return{behaviours:om([fs.config({})])}}})]),x7=a8({name:"Toolbar",configFields:x6(),partFields:x8(),factory:function(t,e,n,o){var r=t.shell?{behaviours:[fs.config({})],components:[]}:{behaviours:[],components:e};return{uid:t.uid,dom:t.dom,components:r.components,behaviours:aH(t.toolbarBehaviours,r.behaviours),apis:{setGroups:function(e,n){(t.shell?tg.some(e):a$(e,t,"groups")).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(t){fs.set(t,n)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)}}}),wt=u([]),we=Object.freeze({__proto__:null,setup:r,isDocked:w,getBehaviours:wt}),wn=nZ([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),wo=function(t,e,n){var o,r;t.getSystem().isConnected()&&(o=e.lazyViewport(t),n.isDocked()&&yL(t,e,n,o),(tr(et(r=t.element,"position"),"fixed")?yN(r,n).filter(function(t){return yR(n.getModes(),t,o)}).bind(function(t){return yP(r,t,n)}):function(t,e,n){var o=no(t);if(yR(n.getModes(),o,e))return tg.none();n.setInitialPos({style:function(){var e={},n=t.dom;if(tl(n))for(var o=0;o<n.style.length;o++){var r=n.style.item(o);e[r]=n.style[r]}return e}(),position:t7(t,"position")||"static",bounds:o});var r=nr(),i=o.x-r.x,u=e.y-r.y,a=r.bottom-e.bottom,c=o.y<=e.y;return tg.some(wn.fixed(iJ("fixed",tg.some(i),c?tg.some(u):tg.none(),tg.none(),c?tg.none():tg.some(a))))}(r,o,n)).each(function(r){r.fold(function(){return yV(t,e,n)},function(o){return yH(t,e,n,o)},function(r){yL(t,e,n,o,!0),yH(t,e,n,r)})}))},wr=Object.freeze({__proto__:null,refresh:wo,reset:yz,isDocked:function(t,e,n){return n.isDocked()},getModes:function(t,e,n){return n.getModes()},setModes:function(t,e,n,o){return n.setModes(o)}}),wi=Object.freeze({__proto__:null,events:function(t,e){return om([oT(rl())(function(n,o){t.contextual.each(function(t){oq(n.element,t.transitionClass)&&(oJ(n.element,[t.transitionClass,t.fadeInClass]),(e.isVisible()?t.onShown:t.onHidden)(n)),o.stop()})}),oO(rT(),function(n,o){wo(n,t,e)}),oO(rE(),function(n,o){yz(n,t,e)})])}}),wu=iU({fields:[nX("contextual",[nP("fadeInClass"),nP("fadeOutClass"),nP("transitionClass"),nH("lazyContext"),iy("onShow"),iy("onShown"),iy("onHide"),iy("onHidden")]),n$("lazyViewport",nr),nq("modes",["top","bottom"],nC(or)),iy("onDocked"),iy("onUndocked")],name:"docking",active:wi,apis:wr,state:Object.freeze({__proto__:null,init:function(t){var e=nQ(!1),n=nQ(!0),o=uk(),r=nQ(t.modes);return r1({isDocked:e.get,setDocked:e.set,getInitialPos:o.get,setInitialPos:o.set,clearInitialPos:o.clear,isVisible:n.get,setVisible:n.set,getModes:r.get,setModes:r.set,readState:function(){return"docked:  "+e.get()+", visible: "+n.get()+", modes: "+r.get().join(",")}})}})}),wa=u(oI("toolbar-height-change")),wc={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},ws="tox-tinymce--toolbar-sticky-on",wl="tox-tinymce--toolbar-sticky-off",wf=Object.freeze({__proto__:null,setup:function(t,e,n){t.inline||(e.header.isPositionedAtTop()||t.on("ResizeEditor",function(){n().each(wu.reset)}),t.on("ResizeWindow ResizeEditor",function(){n().each(yj)}),t.on("SkinLoaded",function(){n().each(function(t){wu.isDocked(t)?wu.reset(t):wu.refresh(t)})}),t.on("FullscreenStateChanged",function(){n().each(wu.reset)})),t.on("AfterScrollIntoView",function(t){n().each(function(e){wu.refresh(e);var n,o,r,i,u,a,c,s,l,f,d,m,g,p,h=e.element;sq(h)&&(o=(n=tH(h)).dom.defaultView.innerHeight,r=ey(n),u=eC(i=tE.fromDom(t.elm)),a=ei(i),s=(c=u.y)+a,l=ec(h),f=ei(h),m=(d=l.top)+f,g=2>Math.abs(d-r.top),p=2>Math.abs(m-(r.top+o)),g&&c<m?ex(r.left,c-f,n):p&&d<s&&ex(r.left,c-o+a+f,n))})}),t.on("PostRender",function(){yG(t,!1)})},isDocked:function(t){return t().map(wu.isDocked).getOr(!1)},getBehaviours:yX}),wd=ot([nP("type"),nN("items",nO([oe([nP("name"),nU("items",or)]),or]))].concat(d9)),wm=[nG("text"),nG("tooltip"),nG("icon"),nH("fetch"),n$("onSetup",function(){return r})],wg=ot(_([nP("type")],wm,!0)),wp=ot([nP("type"),nG("tooltip"),nG("icon"),nG("text"),nW("select",ou),nH("fetch"),n$("onSetup",function(){return r}),nK("presets","normal",["normal","color","listpreview"]),nY("columns",1),nH("onAction"),nH("onItemAction")]),wh=a6({factory:function(t,e){var n={focus:fa.focusIn,setMenus:function(t,n){var o=F(n,function(t){return vR(yY({type:"menubutton",text:t.text,fetch:function(e){e(t.getItems())}}).mapError(function(t){return os(t)}).getOrDie(),"tox-mbtn",e.backstage,tg.some("menuitem"))});fs.set(t,o)}};return{uid:t.uid,dom:t.dom,components:[],behaviours:om([fs.config({}),lg("menubar-events",[rL(function(e){t.onSetup(e)}),oO(re(),function(t,e){io(t.element,".tox-mbtn--active").each(function(n){ir(e.event.target,".tox-mbtn").each(function(e){tP(n,e)||t.getSystem().getByDom(n).each(function(n){t.getSystem().getByDom(e).each(function(t){v5.expand(t),v5.close(n),fd.focus(t)})})})})}),oO(rF(),function(t,e){e.event.prevFocus.bind(function(e){return t.getSystem().getByDom(e).toOptional()}).each(function(n){e.event.newFocus.bind(function(e){return t.getSystem().getByDom(e).toOptional()}).each(function(t){v5.isOpen(n)&&(v5.expand(t),v5.close(n))})})})]),fa.config({mode:"flow",selector:".tox-mbtn",onEscape:function(e){return t.onEscape(e),tg.some(!0)}}),pG.config({})]),apis:n,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[nR("dom"),nR("uid"),nR("onEscape"),nR("backstage"),nY("onSetup",r)],apis:{focus:function(t,e){t.focus(e)},setMenus:function(t,e,n){t.setMenus(e,n)}}}),wv=Object.freeze({__proto__:null,refresh:function(t,e,n){var o;n.isExpanded()&&(en(t.element,yK(e)),o=yJ(e,t.element),t4(t.element,yK(e),o))},grow:function(t,e,n){n.isExpanded()||y2(t,e,n)},shrink:function(t,e,n){n.isExpanded()&&y1(t,e,n)},immediateShrink:function(t,e,n){n.isExpanded()&&y0(t,e,n)},hasGrown:function(t,e,n){return n.isExpanded()},hasShrunk:function(t,e,n){return n.isCollapsed()},isGrowing:y5,isShrinking:y3,isTransitioning:function(t,e,n){return y5(t,e)||y3(t,e)},toggleGrow:function(t,e,n){(n.isExpanded()?y1:y2)(t,e,n)},disableTransitions:y$}),wb=Object.freeze({__proto__:null,exhibit:function(t,e,n){return oz(e.expanded?{classes:[e.openClass],styles:{}}:{classes:[e.closedClass],styles:od(e.dimension.property,"0px")})},events:function(t,e){return om([oT(rl())(function(n,o){o.event.raw.propertyName===t.dimension.property&&(y$(n,t),e.isExpanded()&&en(n.element,t.dimension.property),(e.isExpanded()?t.onGrown:t.onShrunk)(n))})])}}),wy=iU({fields:[nR("closedClass"),nR("openClass"),nR("shrinkingClass"),nR("growingClass"),nj("getAnimationRoot"),iy("onShrunk"),iy("onStartShrink"),iy("onGrown"),iy("onStartGrow"),nY("expanded",!1),nN("dimension",nF("property",{width:[ik("property","width"),ik("getDimension",function(t){return es(t)+"px"})],height:[ik("property","height"),ik("getDimension",function(t){return ei(t)+"px"})]}))],name:"sliding",active:wb,apis:wv,state:Object.freeze({__proto__:null,init:function(t){var e=nQ(t.expanded);return r1({isExpanded:function(){return!0===e.get()},isCollapsed:function(){return!1===e.get()},setCollapsed:b(e.set,!1),setExpanded:b(e.set,!0),readState:function(){return"expanded: "+e.get()}})}})}),wx="container",ww=[aV("slotBehaviours",[])],wS=Z({getSlotNames:function(t,e){return t.getSlotNames(e)},getSlot:function(t,e,n){return t.getSlot(e,n)},isShowing:function(t,e,n){return t.isShowing(e,n)},hideSlot:function(t,e,n){return t.hideSlot(e,n)},hideAllSlots:function(t,e){return t.hideAllSlots(e)},showSlot:function(t,e,n){return t.showSlot(e,n)}},oH),wk=C(C({},wS),{sketch:function(t){var e,n={slot:function(t,n){return e.push(t),aX(wx,y9(t),n)},record:u(e=[])},o=t(n);return a4(wx,ww,F(n.record(),function(t){return sl({name:t,pname:y9(t)})}),xT,o)}}),wC=ot([nG("icon"),nG("tooltip"),n$("onShow",r),n$("onHide",r),n$("onSetup",function(){return r})]),wO=oI("FixSizeEvent"),w_=oI("AutoSizeEvent"),wT=Object.freeze({__proto__:null,block:function(t,e,n,o){tQ(t.element,"aria-busy",!0);var r=e.getRoot(t).getOr(t),i=o(r,om([fa.config({mode:"special",onTab:function(){return tg.some(!0)},onShiftTab:function(){return tg.some(!0)}}),fd.config({})])),u=r.getSystem().build(i);fs.append(r,oV(u)),u.hasConfigured(fa)&&e.focus&&fa.focusIn(u),n.isBlocked()||e.onBlock(t),n.blockWith(function(){return fs.remove(r,u)})},unblock:function(t,e,n){t5(t.element,"aria-busy"),n.isBlocked()&&e.onUnblock(t),n.clear()}}),wE=iU({fields:[n$("getRoot",tg.none),nJ("focus",!0),iy("onBlock"),iy("onUnblock")],name:"blocking",apis:wT,state:Object.freeze({__proto__:null,init:function(){var t=uw();return r1({readState:t.isSet,blockWith:function(e){t.set({destroy:e})},clear:t.clear,isBlocked:t.isSet})}})}),wD=u([aV("splitToolbarBehaviours",[hp]),of("builtGroups",function(){return nQ([])})]),wA=u([iv(["overflowToggledClass"]),nW("getOverflowBounds",ou),nR("lazySink"),of("overflowGroups",function(){return nQ([])})].concat(wD())),wB=u([sl({factory:x7,schema:x6(),name:"primary"}),sf({schema:x6(),name:"overflow"}),sf({name:"overflow-button"}),sf({name:"overflow-group"})]),wM=u(function(t,e){t4(t,"max-width",e4.max(t,Math.floor(e),["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"])+"px")}),wF=u([iv(["toggledClass"]),nR("lazySink"),nH("fetch"),nW("getBounds",ou),nX("fireDismissalEventInstead",[nY("event",rB())]),uG()]),wI=u([sf({name:"button",overrides:function(t){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:om([fp.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),sf({factory:x7,schema:x6(),name:"toolbar",overrides:function(t){return{toolbarBehaviours:om([fa.config({mode:"cyclic",onEscape:function(e){return a$(e,t,"button").each(fd.focus),tg.none()}})])}}})]),wR=a8({name:"FloatingToolbarButton",factory:function(t,e,n,o){return C(C({},fV.sketch(C(C({},o.button()),{action:function(t){xr(t,o)},buttonBehaviours:aH({dump:o.button().buttonBehaviours},[hp.config({others:{toolbarSandbox:function(e){var o;return{dom:{tag:"div",attributes:{id:(o=ii()).id}},behaviours:om([fa.config({mode:"special",onEscape:function(t){return cW.close(t),tg.some(!0)}}),cW.config({onOpen:function(r,i){t.fetch().get(function(r){xu(e,i,t,n.layouts,r),o.link(e.element),fa.focusIn(i)})},onClose:function(){fp.off(e),fd.focus(e),o.unlink(e.element)},isPartOf:function(t,n,o){return ic(n,o)||ic(e,o)},getAttachPoint:function(){return t.lazySink(e).getOrDie()}}),uh.config({channels:C(C({},aB(C({isExtraPart:w},t.fireDismissalEventInstead.map(function(t){return{fireEventInstead:{event:t.event}}}).getOr({})))),aM({doReposition:function(){cW.getState(hp.getCoupled(e,"toolbarSandbox")).each(function(o){xi(e,o,t,n.layouts)})}}))})])}}}})])}))),{apis:{setGroups:function(e,o){cW.getState(hp.getCoupled(e,"toolbarSandbox")).each(function(r){xu(e,r,t,n.layouts,o)})},reposition:function(e){cW.getState(hp.getCoupled(e,"toolbarSandbox")).each(function(o){xi(e,o,t,n.layouts)})},toggle:function(t){xr(t,o)},getToolbar:function(t){return cW.getState(hp.getCoupled(t,"toolbarSandbox"))},isOpen:function(t){return cW.isOpen(hp.getCoupled(t,"toolbarSandbox"))}}})},configFields:wF(),partFields:wI(),apis:{setGroups:function(t,e,n){t.setGroups(e,n)},reposition:function(t,e){t.reposition(e)},toggle:function(t,e){t.toggle(e)},getToolbar:function(t,e){return t.getToolbar(e)},isOpen:function(t,e){return t.isOpen(e)}}}),wN=u([nR("items"),iv(["itemSelector"]),aV("tgroupBehaviours",[fa])]),wP=u([sm({name:"items",unit:"item"})]),wV=a8({name:"ToolbarGroup",configFields:wN(),partFields:wP(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,behaviours:aH(t.tgroupBehaviours,[fa.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),wH=a8({name:"SplitFloatingToolbar",configFields:wA(),partFields:wB(),factory:function(t,e,n,o){var r=lz(wR.sketch({fetch:function(){return hc(function(e){e(xa(t.overflowGroups.get()))})},layouts:{onLtr:function(){return[ui,ur]},onRtl:function(){return[ur,ui]},onBottomLtr:function(){return[ua,uu]},onBottomRtl:function(){return[uu,ua]}},getBounds:n.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:o["overflow-button"](),toolbar:o.overflow()}}));return{uid:t.uid,dom:t.dom,components:e,behaviours:aH(t.splitToolbarBehaviours,[hp.config({others:{overflowGroup:function(){return wV.sketch(C(C({},o["overflow-group"]()),{items:[r.asSpec()]}))}}})]),apis:{setGroups:function(e,n){t.builtGroups.set(F(n,e.getSystem().build)),xc(e,r,t)},refresh:function(e){return xc(e,r,t)},toggle:function(t){r.getOpt(t).each(function(t){wR.toggle(t)})},isOpen:function(t){return r.getOpt(t).map(wR.isOpen).getOr(!1)},reposition:function(t){r.getOpt(t).each(function(t){wR.reposition(t)})},getOverflow:function(t){return r.getOpt(t).bind(wR.getToolbar)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)},refresh:function(t,e){t.refresh(e)},reposition:function(t,e){t.reposition(e)},toggle:function(t,e){t.toggle(e)},isOpen:function(t,e){return t.isOpen(e)},getOverflow:function(t,e){return t.getOverflow(e)}}}),wL=u([iv(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),iy("onOpened"),iy("onClosed")].concat(wD())),wz=u([sl({factory:x7,schema:x6(),name:"primary"}),sl({factory:x7,schema:x6(),name:"overflow",overrides:function(t){return{toolbarBehaviours:om([wy.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:function(e){a$(e,t,"overflow-button").each(function(t){fp.off(t),fd.focus(t)}),t.onClosed(e)},onGrown:function(e){fa.focusIn(e),t.onOpened(e)},onStartGrow:function(e){a$(e,t,"overflow-button").each(fp.on)}}),fa.config({mode:"acyclic",onEscape:function(e){return a$(e,t,"overflow-button").each(fd.focus),tg.some(!0)}})])}}}),sf({name:"overflow-button",overrides:function(t){return{buttonBehaviours:om([fp.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),sf({name:"overflow-group"})]),wU=a8({name:"SplitSlidingToolbar",configFields:wL(),partFields:wz(),factory:function(t,e,n,o){var r="alloy.toolbar.toggle";return{uid:t.uid,dom:t.dom,components:e,behaviours:aH(t.splitToolbarBehaviours,[hp.config({others:{overflowGroup:function(t){return wV.sketch(C(C({},o["overflow-group"]()),{items:[fV.sketch(C(C({},o["overflow-button"]()),{action:function(e){oy(t,r)}}))]}))}}}),lg("toolbar-toggle-events",[oO(r,function(e){xs(e,t)})])]),apis:{setGroups:function(e,n){var o=F(n,e.getSystem().build);t.builtGroups.set(o),xE(e,t)},refresh:function(e){return xE(e,t)},toggle:function(e){return xs(e,t)},isOpen:function(e){return a$(e,t,"overflow").map(wy.hasGrown).getOr(!1)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)},refresh:function(t,e){t.refresh(e)},toggle:function(t,e){t.toggle(e)},isOpen:function(t,e){return t.isOpen(e)}}}),wj=sp.optional({factory:wh,name:"menubar",schema:[nR("backstage")]}),wW=sp.optional({factory:{sketch:function(t){return x4.sketch({uid:t.uid,dom:t.dom,listBehaviours:om([fa.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return xg({type:t.type,uid:oI("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:function(){return t.onEscape(),tg.some(!0)}})},setupItem:function(t,e,n,o){x7.setGroups(e,n)},shell:!0})}},name:"multiple-toolbar",schema:[nR("dom"),nR("onEscape")]}),wG=sp.optional({factory:{sketch:function(t){return(t.type===mE.sliding?function(t){var e=wU.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=wU.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),o=xm(t);return wU.sketch(C(C({},o),{components:[e,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(t){t.getSystem().broadcastOn([wa()],{type:"opened"})},onClosed:function(t){t.getSystem().broadcastOn([wa()],{type:"closed"})}}))}:t.type===mE.floating?function(t){var e=xm(t),n=wH.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return wH.sketch(C(C({},e),{lazySink:t.getSink,getOverflowBounds:function(){var e=t.moreDrawerData.lazyHeader().element,n=eC(e),o=tz(e),r=eC(o),i=Math.max(o.dom.scrollHeight,r.height);return nn(n.x+4,r.y,n.width-8,i)},parts:C(C({},e.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}}),components:[n],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))}:xg)({type:t.type,uid:t.uid,onEscape:function(){return t.onEscape(),tg.some(!0)},cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes})}},name:"toolbar",schema:[nR("dom"),nR("onEscape"),nR("getSink")]}),wX=sp.optional({factory:{sketch:function(t){var e=t.editor,n=t.sticky?yX:wt;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:om(n(e,t.sharedBackstage))}}},name:"header",schema:[nR("dom")]}),wY=sp.optional({name:"socket",schema:[nR("dom")]}),wq=sp.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:om([pG.config({}),fd.config({}),wy.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(t){sS.getCurrent(t).each(wk.hideAllSlots),oy(t,w_)},onGrown:function(t){oy(t,w_)},onStartGrow:function(t){ox(t,wO,{width:et(t.element,"width").getOr("")})},onStartShrink:function(t){ox(t,wO,{width:es(t.element)+"px"})}}),fs.config({}),sS.config({find:function(t){return K(fs.contents(t))}})])}],behaviours:om([bS(0),lg("sidebar-sliding-events",[oO(wO,function(t,e){t4(t.element,"width",e.event.width)}),oO(w_,function(t,e){en(t.element,"width")})])])}}},name:"sidebar",schema:[nR("dom")]}),wK=sp.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:om([fs.config({}),wE.config({focus:!1}),sS.config({find:function(t){return K(t.components())}})]),components:[]}}},name:"throbber",schema:[nR("dom")]}),wJ=a8({name:"OuterContainer",factory:function(t,e,n){return{uid:t.uid,dom:t.dom,components:e,apis:{getSocket:function(e){return sv.getPart(e,t,"socket")},setSidebar:function(e,n){sv.getPart(e,t,"sidebar").each(function(t){return function(t,e){sS.getCurrent(t).each(function(t){return fs.set(t,[wk.sketch(function(t){var n;return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:(n=F(tw(e),function(t){var n=nB(nA("sidebar",wC,e[t]));return{name:t,getApi:y4,onSetup:n.onSetup,onShow:n.onShow,onHide:n.onHide}}),F(n,function(e){var o=nQ(r);return t.slot(e.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:m1([gm(e,o),gg(e,o),oO(rI(),function(t,e){var o=e.event;V(n,function(t){return t.name===o.name}).each(function(e){(o.visible?e.onShow:e.onHide)(e.getApi(t))})})])})})),slotBehaviours:m1([rL(function(t){return wk.hideAllSlots(t)})])}})])})}(t,n)})},toggleSidebar:function(e,n){sv.getPart(e,t,"sidebar").each(function(t){sS.getCurrent(t).each(function(t){sS.getCurrent(t).each(function(e){wy.hasGrown(t)?wk.isShowing(e,n)?wy.shrink(t):(wk.hideAllSlots(e),wk.showSlot(e,n)):(wk.hideAllSlots(e),wk.showSlot(e,n),wy.grow(t))})})})},whichSidebar:function(e){return sv.getPart(e,t,"sidebar").bind(y6).getOrNull()},getHeader:function(e){return sv.getPart(e,t,"header")},getToolbar:function(e){return sv.getPart(e,t,"toolbar")},setToolbar:function(e,n){sv.getPart(e,t,"toolbar").each(function(t){t.getApis().setGroups(t,n)})},setToolbars:function(e,n){sv.getPart(e,t,"multiple-toolbar").each(function(t){x4.setItems(t,n)})},refreshToolbar:function(e){sv.getPart(e,t,"toolbar").each(function(t){return t.getApis().refresh(t)})},toggleToolbarDrawer:function(e){sv.getPart(e,t,"toolbar").each(function(t){var e=t.getApis().toggle;null!=e?tg.some(e(t)):tg.none()})},isToolbarDrawerToggled:function(e){return sv.getPart(e,t,"toolbar").bind(function(t){return tg.from(t.getApis().isOpen).map(function(e){return e(t)})}).getOr(!1)},getThrobber:function(e){return sv.getPart(e,t,"throbber")},focusToolbar:function(e){sv.getPart(e,t,"toolbar").orThunk(function(){return sv.getPart(e,t,"multiple-toolbar")}).each(function(t){fa.focusIn(t)})},setMenubar:function(e,n){sv.getPart(e,t,"menubar").each(function(t){wh.setMenus(t,n)})},focusMenubar:function(e){sv.getPart(e,t,"menubar").each(function(t){wh.focus(t)})}},behaviours:t.behaviours}},configFields:[nR("dom"),nR("behaviours")],partFields:[wX,wj,wG,wW,wY,wq,wK],apis:{getSocket:function(t,e){return t.getSocket(e)},setSidebar:function(t,e,n){t.setSidebar(e,n)},toggleSidebar:function(t,e,n){t.toggleSidebar(e,n)},whichSidebar:function(t,e){return t.whichSidebar(e)},getHeader:function(t,e){return t.getHeader(e)},getToolbar:function(t,e){return t.getToolbar(e)},setToolbar:function(t,e,n){var o=F(n,xf);t.setToolbar(e,o)},setToolbars:function(t,e,n){var o=F(n,function(t){return F(t,xf)});t.setToolbars(e,o)},refreshToolbar:function(t,e){return t.refreshToolbar(e)},toggleToolbarDrawer:function(t,e){t.toggleToolbarDrawer(e)},isToolbarDrawerToggled:function(t,e){return t.isToolbarDrawerToggled(e)},getThrobber:function(t,e){return t.getThrobber(e)},setMenubar:function(t,e,n){t.setMenubar(e,n)},focusMenubar:function(t,e){t.focusMenubar(e)},focusToolbar:function(t,e){t.focusToolbar(e)}}}),w$={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},wQ=b(xy,!1),wZ=b(xy,!0);function w0(t,e,n,o){var r;return{type:"basic",data:(r=t.getParam(e,n,"string"),F(o===xA.SemiColon?r.replace(/;$/,"").split(";"):r.split(" "),function(t){var e=t,n=t,o=t.split("=");return 1<o.length&&(e=o[0],n=o[1]),{title:e,format:n}}))}}function w1(t){return{tooltip:"Align",text:tg.none(),icon:tg.some("align-left"),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:tg.none,getPreviewFor:function(t){return tg.none},onAction:function(e){return function(){return V(Sv,function(t){return t.format===e.format}).each(function(e){return t.execCommand(e.command)})}},updateText:function(e){ox(e,bJ,{icon:"align-"+V(Sv,function(e){return t.formatter.match(e.format)}).fold(u("left"),function(t){return t.title.toLowerCase()})})},dataset:{type:"basic",data:Sv},shouldHide:!1,isInvalid:function(e){return!t.formatter.canApply(e.format)}}}function w2(t){return F(t.split(/\s*,\s*/),function(t){return t.replace(/^['"]+|['"]+$/g,"")})}function w5(t){function e(){function e(t){return t?w2(t)[0]:""}var r=t.queryCommandValue("FontName"),i=o.data,u=r?r.toLowerCase():"";return{matchOpt:V(i,function(t){var n=t.format;return n.toLowerCase()===u||e(n).toLowerCase()===e(u).toLowerCase()}).orThunk(function(){var t;return tu(0===u.indexOf("-apple-system")&&(t=w2(u.toLowerCase()),U(Sb,function(e){return -1<t.indexOf(e.toLowerCase())})),{title:n,format:u})}),font:r}}var n="System Font",o=w0(t,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",xA.SemiColon);return{tooltip:"Fonts",text:tg.some(n),icon:tg.none(),isSelectedFor:function(t){return function(e){return e.exists(function(e){return e.format===t})}},getCurrentValue:function(){return e().matchOpt},getPreviewFor:function(t){return function(){return tg.some({tag:"div",styles:-1===t.indexOf("dings")?{"font-family":t}:{}})}},onAction:function(e){return function(){t.undoManager.transact(function(){t.focus(),t.execCommand("FontName",!1,e.format)})}},updateText:function(t){var n=e(),o=n.matchOpt,r=n.font;ox(t,bK,{text:o.fold(u(r),function(t){return t.title})})},dataset:o,shouldHide:!1,isInvalid:w}}function w3(t){function e(){var e=tg.none(),n=o.data,r=t.queryCommandValue("FontSize");if(r)for(var i=3;e.isNone()&&0<=i;i--)!function(t){var o,i=/[0-9.]+px$/.test(r)?Math.round(72*parseInt(r,10)/96*(o=Math.pow(10,t||0)))/o+"pt":tn(Sx,r).getOr(r),u=tn(Sy,i).getOr("");e=V(n,function(t){return t.format===r||t.format===i||t.format===u})}(i);return{matchOpt:e,size:r}}var n=u(tg.none),o=w0(t,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",xA.Space);return{tooltip:"Font sizes",text:tg.some("12pt"),icon:tg.none(),isSelectedFor:function(t){return function(e){return e.exists(function(e){return e.format===t})}},getPreviewFor:n,getCurrentValue:function(){return e().matchOpt},onAction:function(e){return function(){t.undoManager.transact(function(){t.focus(),t.execCommand("FontSize",!1,e.format)})}},updateText:function(t){var n=e(),o=n.matchOpt,r=n.size;ox(t,bK,{text:o.fold(u(r),function(t){return t.title})})},dataset:o,shouldHide:!1,isInvalid:w}}function w9(t,e){var n=e(),o=F(n,function(t){return t.format});return tg.from(t.formatter.closest(o)).bind(function(t){return V(n,function(e){return e.format===t})}).orThunk(function(){return tu(t.formatter.match("p"),{title:"Paragraph",format:"p"})})}function w4(t){var e=w0(t,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",xA.SemiColon);return{tooltip:"Blocks",text:tg.some("Paragraph"),icon:tg.none(),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:tg.none,getPreviewFor:function(e){return function(){var n=t.formatter.get(e);return tg.some({tag:0<n.length&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))})}},onAction:xS(t),updateText:function(n){ox(n,bK,{text:w9(t,function(){return e.data}).fold(u("Paragraph"),function(t){return t.title})})},dataset:e,shouldHide:!1,isInvalid:function(e){return!t.formatter.canApply(e.format)}}}function w6(t,e){return{tooltip:"Formats",text:tg.some("Paragraph"),icon:tg.none(),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:tg.none,getPreviewFor:function(e){return function(){var n=t.formatter.get(e);return void 0!==n?tg.some({tag:0<n.length&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))}):tg.none()}},onAction:xS(t),updateText:function(e){var n=function(t){var e=t.items;return void 0!==e&&0<e.length?z(e,n):[{title:t.title,format:t.format}]},o=z(yd(t),n);ox(e,bK,{text:w9(t,u(o)).fold(u("Paragraph"),function(t){return t.title})})},shouldHide:t.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(e){return!t.formatter.canApply(e.format)},dataset:e}}function w8(t){return{isDisabled:function(){return sE.isDisabled(t)},setDisabled:function(e){return sE.set(t,e)}}}function w7(t){return{setActive:function(e){fp.set(t,e)},isActive:function(){return fp.isOn(t)},isDisabled:function(){return sE.isDisabled(t)},setDisabled:function(e){return sE.set(t,e)}}}function St(t,e){return t.map(function(t){return{"aria-label":e.translate(t),title:e.translate(t)}}).getOr({})}function Se(t,e,n,o,r,i){var u;return{dom:{tag:"button",classes:["tox-tbtn"].concat(e.isSome()?["tox-tbtn--select"]:[]),attributes:St(n,i)},components:gY([t.map(function(t){return vE(t,i.icons,[])}),e.map(function(t){return vA(t,"tox-tbtn",i)})]),eventOrder:((u={})[o6()]=["focusing","alloy.base.behaviour","common-button-display-events"],u),buttonBehaviours:om([gG(i.isDisabled),gf(),lg("common-button-display-events",[oO(o6(),function(t,e){e.event.prevent(),oy(t,ST)})])].concat(o.map(function(n){return Sk.config({channel:n,initialData:{icon:t,text:e},renderComponents:function(t,e){return gY([t.icon.map(function(t){return vE(t,i.icons,[])}),t.text.map(function(t){return vA(t,"tox-tbtn",i)})])}})}).toArray()).concat(r.getOr([])))}}function Sn(t,e,n){var o,i=nQ(r),u=Se(t.icon,t.text,t.tooltip,tg.none(),tg.none(),n);return fV.sketch({dom:u.dom,components:u.components,eventOrder:bq,buttonBehaviours:om([lg("toolbar-button-events",[(o={onAction:t.onAction,getApi:e.getApi},rj(function(t,e){gd(o,t)(function(e){ox(t,bY,{buttonApi:e}),o.onAction(e)})})),gm(e,i),gg(e,i)]),gG(function(){return t.disabled||n.isDisabled()}),gf()].concat(e.toolbarButtonBehaviours))})}function So(t,e){return function(n,o,r){return e(t(n).mapError(function(t){return os(t)}).getOrDie(),o,r)}}function Sr(t,e,n,r){var i,u=e.outerContainer,a=n.toolbar,c=n.buttons;o(a,s)?(i=a.map(function(e){return SF(t,{toolbar:e,buttons:c,allowToolbarGroups:n.allowToolbarGroups},{backstage:r},tg.none())}),wJ.setToolbars(u,i)):wJ.setToolbar(u,SF(t,n,{backstage:r},tg.none()))}function Si(t){return/^[0-9\.]+(|px)$/i.test(""+t)?tg.some(parseInt(""+t,10)):tg.none()}function Su(t){return v(t)?t+"px":t}function Sa(t,e,n){var o=e.filter(function(e){return t<e}),r=n.filter(function(e){return e<t});return o.or(r).getOr(t)}function Sc(t){var e=mx(t),n=mw(t),o=mk(t);return Si(e).map(function(t){return Sa(t,n,o)})}function Ss(t,e){var n=no(t);return{pos:e?n.y:n.bottom,bounds:n}}function Sl(t,e){return oO(bY,function(n,o){var r=t.get(n);e.onAction({hide:function(){return oy(r,rS())},getValue:function(){return c1.getValue(r)}},o.event.buttonApi)})}function Sf(t,e,n){return e.bottom-t.y>=(n=void 0===n?.01:n)&&t.bottom-e.y>=n}function Sd(t){var e=function(t){var e=t.getBoundingClientRect();if(e.height<=0&&e.width<=0){var n=tq(tE.fromDom(t.startContainer),t.startOffset).element;return(eB(n)?tj(n):tg.some(n)).filter(eA).map(function(t){return t.dom.getBoundingClientRect()}).getOr(e)}return e}(t.selection.getRng());if(t.inline){var n=ey();return nn(n.left+e.left,n.top+e.top,e.width,e.height)}var o=eC(tE.fromDom(t.getBody()));return nn(o.x+e.left,o.y+e.top,e.width,e.height)}function Sm(t,e,n,o){void 0===o&&(o=0);var r,i,u=eS(window),a=no(tE.fromDom(t.getContentAreaContainer())),c=mO(t)||m_(t)||gt(t),s=(r=o,{x:i=Math.max(a.x+r,u.x),width:Math.min(a.right-r,u.right)-i}),l=s.x,f=s.width;if(t.inline&&!c)return nn(l,u.y,f,u.height);var d=function(t,e,n,o,r,i){var u=tE.fromDom(t.getContainer()),a=no(io(u,".tox-editor-header").getOr(u)),c=a.y>=e.bottom,s=o&&!c;if(t.inline&&s)return{y:Math.max(a.bottom+i,n.y),bottom:n.bottom};if(t.inline&&!s)return{y:n.y,bottom:Math.min(a.y-i,n.bottom)};var l="line"===r?no(u):e;return s?{y:Math.max(a.bottom+i,n.y),bottom:Math.min(l.bottom-i,n.bottom)}:{y:Math.max(l.y+i,n.y),bottom:Math.min(a.y-i,n.bottom)}}(t,a,u,e.header.isPositionedAtTop(),n,o),m=d.y;return nn(l,m,f,d.bottom-m)}function Sg(t,e){var n=I(R(e,function(e){return e.predicate(t.dom)}),function(t){return"contexttoolbar"===t.type});return{contextToolbars:n.pass,contextForms:n.fail}}(xB=xA=xA||{})[xB.SemiColon=0]="SemiColon",xB[xB.Space=1]="Space";var Sp,Sh,Sv=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],Sb=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],Sy={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},Sx={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},Sw=Object.freeze({__proto__:null,events:function(t,e){function n(n,o){t.updateState.each(function(t){var r=t(n,o);e.set(r)}),t.renderComponents.each(function(t){var r=F(t(o,e.get()),n.getSystem().build);aS(n,r)})}return om([oO(rv(),function(e,o){var r;o.universal||(r=t.channel,tb(o.channels,r)&&n(e,o.data))}),rL(function(e,o){t.initialData.each(function(t){n(e,t)})})])}}),SS=Object.freeze({__proto__:null,getState:function(t,e,n){return n}}),Sk=iU({fields:[nR("channel"),nj("renderComponents"),nj("updateState"),nj("initialData")],name:"reflecting",active:Sw,apis:SS,state:Object.freeze({__proto__:null,init:function(){var t=nQ(tg.none());return{readState:function(){return t.get().getOr("none")},get:t.get,set:t.set,clear:function(){return t.set(tg.none())}}}})}),SC=u([nR("toggleClass"),nR("fetch"),iw("onExecute"),nY("getHotspot",tg.some),nY("getAnchorOverrides",u({})),uG(),iw("onItemExecute"),nj("lazySink"),nR("dom"),iy("onOpen"),aV("splitDropdownBehaviours",[hp,fa,fd]),nY("matchWidth",!1),nY("useMinWidth",!1),nY("eventOrder",{}),nj("role")].concat(hC())),SO=u([sl({factory:fV,schema:[nR("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:om([fd.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(t.uid).each(ow)},buttonBehaviours:om([fp.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])}}}),sl({factory:fV,schema:[nR("dom")],name:"button",defaults:function(){return{buttonBehaviours:om([fd.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(t.uid).each(function(n){t.onExecute(n,e)})}}}}),sd({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[nR("text")],name:"aria-descriptor"}),sf({schema:[ih()],name:"menu",defaults:function(t){return{onExecute:function(e,n){e.getSystem().getByUid(t.uid).each(function(o){t.onItemExecute(o,e,n)})}}}}),hv()]),S_=a8({name:"SplitDropdown",configFields:SC(),partFields:SO(),factory:function(t,e,n,o){function i(t){sS.getCurrent(t).each(function(t){sA.highlightFirst(t),fa.focusIn(t)})}function u(e){hx(t,a,e,o,i,ho.HighlightFirst).get(r)}function c(e){return ow(aQ(e,t,"button")),tg.some(!0)}var s,l=C(C({},om([rL(function(e,n){a$(e,t,"aria-descriptor").each(function(t){var n=oI("aria");tQ(t.element,"id",n),tQ(e.element,"aria-describedby",n)})})])),lk(tg.some(u)));return{uid:t.uid,dom:t.dom,components:e,apis:{repositionMenus:function(t){fp.isOn(t)&&hk(t)}},eventOrder:C(C({},t.eventOrder),((s={})[rb()]=["disabling","toggling","alloy.base.behaviour"],s)),events:l,behaviours:aH(t.splitDropdownBehaviours,[hp.config({others:{sandbox:function(e){var n=aQ(e,t,"arrow");return hS(t,e,{onOpen:function(){fp.on(n),fp.on(e)},onClose:function(){fp.off(n),fp.off(e)}})}}}),fa.config({mode:"special",onSpace:c,onEnter:c,onDown:function(t){return u(t),tg.some(!0)}}),fd.config({}),fp.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(t,e){return t.repositionMenus(e)}}}),ST=oI("focus-button"),SE=function(t,e,n){return Sn(t,{toolbarButtonBehaviours:[].concat(0<n.length?[lg("toolbarButtonWith",n)]:[]),getApi:w8,onSetup:t.onSetup},e)},SD=function(t,e,n){return n4(Sn(t,{toolbarButtonBehaviours:[fs.config({}),fp.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<n.length?[lg("toolbarToggleButtonWith",n)]:[]),getApi:w7,onSetup:t.onSetup},e))},SA=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],SB={button:So(dX,function(t,e){return SE(t,e.backstage.shared.providers,[])}),togglebutton:So(dY,function(t,e){return SD(t,e.backstage.shared.providers,[])}),menubutton:So(yY,function(t,e){return vR(t,"tox-tbtn",e.backstage,tg.none())}),splitbutton:So(function(t){return nA("SplitButton",wp,t)},function(t,e){var n,o,i,u,a,c;return n=e.backstage.shared,u=oI("channel-update-split-dropdown-display"),a=nQ(r),c={getApi:s,onSetup:t.onSetup},S_.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:C({"aria-pressed":!1},St(t.tooltip,n.providers))},onExecute:function(e){t.onAction(s(e))},onItemExecute:function(t,e,n){},splitDropdownBehaviours:om([gL(n.providers.isDisabled),gf(),lg("split-dropdown-events",[oO(ST,fd.focus),gm(c,a),gg(c,a)]),v3.config({})]),eventOrder:((o={})[rD()]=["alloy.base.behaviour","split-dropdown-events"],o),toggleClass:"tox-tbtn--enabled",lazySink:n.getSink,fetch:(i=n.providers,function(e){return hc(function(e){return t.fetch(e)}).map(function(n){return tg.from(pO(n4(pa(oI("menu-value"),n,function(n){t.onItemAction(s(e),n)},t.columns,t.presets,dK.CLOSE_ON_EXECUTE,t.select.getOr(w),i),{movement:pc(t.columns,t.presets),menuBehaviours:m1("auto"!==t.columns?[]:[rL(function(e,n){mv(e,4,ma(t.presets)).each(function(t){var n=t.numRows,o=t.numColumns;fa.setGridSize(e,n,o)})})])})))})}),parts:{menu:ml(0,t.columns,t.presets)},components:[S_.parts.button(Se(t.icon,t.text,tg.none(),tg.some(u),tg.some([fp.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),n.providers)),S_.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:dD("chevron-down",n.providers.icons)},buttonBehaviours:om([gL(n.providers.isDisabled),gf(),dA()])}),S_.parts["aria-descriptor"]({text:n.providers.translate("To open the popup, press Shift+Enter")})]});function s(t){return{isDisabled:function(){return sE.isDisabled(t)},setDisabled:function(e){return sE.set(t,e)},setIconFill:function(e,n){io(t.element,'svg path[id="'+e+'"], rect[id="'+e+'"]').each(function(t){tQ(t,"fill",n)})},setIconStroke:function(e,n){io(t.element,'svg path[id="'+e+'"], rect[id="'+e+'"]').each(function(t){tQ(t,"stroke",n)})},setActive:function(e){tQ(t.element,"aria-pressed",e),io(t.element,"span").each(function(n){t.getSystem().getByDom(n).each(function(t){return fp.set(t,e)})})},isActive:function(){return io(t.element,"span").exists(function(e){return t.getSystem().getByDom(e).exists(fp.isOn)})}}}}),grouptoolbarbutton:So(function(t){return nA("GroupToolbarButton",wd,t)},function(t,e,n){var o,r,i,u=n.ui.registry.getAll().buttons,a=((o={})[u3]=e.backstage.shared.header.isPositionedAtTop()?uB.TopToBottom:uB.BottomToTop,o);if(ge(n)!==mE.floating)throw Error("Toolbar groups are only supported when using floating toolbar mode");return i=e.backstage.shared,wR.sketch({lazySink:i.getSink,fetch:function(){return hc(function(t){t(F(SF(n,{buttons:u,toolbar:r.items,allowToolbarGroups:!1},e,tg.none()),xf))})},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:Se((r=t).icon,r.text,r.tooltip,tg.none(),tg.none(),i.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:a}}}})}),styleSelectButton:function(t,e){var n;return xO(t,n=e.backstage,w6(t,C({type:"advanced"},n.styleselect)))},fontsizeSelectButton:function(t,e){return xO(t,e.backstage,w3(t))},fontSelectButton:function(t,e){return xO(t,e.backstage,w5(t))},formatButton:function(t,e){return xO(t,e.backstage,w4(t))},alignMenuButton:function(t,e){return xO(t,e.backstage,w1(t))}},SM={styleselect:SB.styleSelectButton,fontsizeselect:SB.fontsizeSelectButton,fontselect:SB.fontSelectButton,formatselect:SB.formatButton,align:SB.alignMenuButton},SF=function(t,e,n,r){var i,u,a,c=(u=e.toolbar,a=e.buttons,!1===u?[]:void 0===u||!0===u?(i=F(SA,function(t){var e=R(t.items,function(t){return tC(a,t)||tC(SM,t)});return{name:t.name,items:e}}),R(i,function(t){return 0<t.items.length})):s(u)?F(u.split("|"),function(t){return{items:t.trim().split(" ")}}):o(u,function(t){return tC(t,"name")&&tC(t,"items")})?u:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[]));return R(F(c,function(o){var i=z(o.items,function(o){var i,u;return 0===o.trim().length?[]:(i=e.buttons,u=e.allowToolbarGroups,tn(i,o.toLowerCase()).orThunk(function(){return r.bind(function(t){return $(t,function(t){return tn(i,t+o.toLowerCase())})})}).fold(function(){return tn(SM,o.toLowerCase()).map(function(e){return e(t,n)}).orThunk(function(){return tg.none()})},function(e){return"grouptoolbarbutton"!==e.type||u?tn(SB,e.type).fold(function(){return console.error("skipping button defined by",e),tg.none()},function(o){return tg.some(o(e,n,t))}):(console.warn("Ignoring the '"+o+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),tg.none())}).toArray())});return{title:tg.from(t.translate(o.name)),items:i}}),function(t){return 0<t.items.length})},SI=eX(),SR=SI.os.isiOS()&&SI.os.version.major<=12,SN=Object.freeze({__proto__:null,render:function(t,e,n,o,r){var i=nQ(0),u=e.outerContainer;wQ(t);var a=tE.fromDom(r.targetNode),c=tJ(eK(a));cz(a,e.mothership,eg),cz(c,e.uiMothership,e8),t.on("PostRender",function(){Sr(t,e,n,o),i.set(t.getWin().innerWidth),wJ.setMenubar(u,xh(t,n)),wJ.setSidebar(u,n.sidebar),function(t,e){function n(){var e=c.get();e.left===u.innerWidth&&e.top===u.innerHeight||(c.set(e3(u.innerWidth,u.innerHeight)),gP(t))}function o(){var e=t.getDoc().documentElement,n=s.get();n.left===e.offsetWidth&&n.top===e.offsetHeight||(s.set(e3(e.offsetWidth,e.offsetHeight)),gP(t))}function r(e){return t.fire("ScrollContent",e)}var i=t.dom,u=t.getWin(),a=t.getDoc().documentElement,c=nQ(e3(u.innerWidth,u.innerHeight)),s=nQ(e3(a.offsetWidth,a.offsetHeight));i.bind(u,"resize",n),i.bind(u,"scroll",r);var l=uO(tE.fromDom(t.getBody()),"load",o),f=e.uiMothership.element;t.on("hide",function(){t4(f,"display","none")}),t.on("show",function(){en(f,"display")}),t.on("NodeChange",o),t.on("remove",function(){l.unbind(),i.unbind(u,"resize",n),i.unbind(u,"scroll",r),u=null})}(t,e)});var s,l,f,m=wJ.getSocket(u).getOrDie("Could not find expected socket element");SR&&(t6(m.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"}),l=function(){t.fire("ScrollContent")},f=null,s=uC(m.element,"scroll",function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];d(f)&&(f=setTimeout(function(){f=null,l.apply(null,t)},20))}),t.on("remove",s.unbind)),gl(t,e),t.addCommand("ToggleSidebar",function(e,n){wJ.toggleSidebar(u,n),t.fire("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",function(){return wJ.whichSidebar(u)});var g=ge(t);return g!==mE.sliding&&g!==mE.floating||t.on("ResizeWindow ResizeEditor ResizeContent",function(){var n=t.getWin().innerWidth;n!==i.get()&&(wJ.refreshToolbar(e.outerContainer),i.set(n))}),{iframeContainer:m.element.dom,editorContainer:u.element.dom,api:{enable:function(){gs(e,!1)},disable:function(){gs(e,!0)},isDisabled:function(){return sE.isDisabled(u)}}}}}),SP=Object.freeze({__proto__:null,render:function(t,e,n,o,r){var i=e.mothership,a=e.uiMothership,c=e.outerContainer,s=nQ(null),l=tE.fromDom(r.targetNode),f=function(t,e,n,o,r){function i(){return w.get()&&!t.removed}function a(t){return x?t.fold(u(0),function(t){return 1<t.components().length?ei(t.components()[1].element):0}):0}function c(){f.broadcastOn([cX()],{})}function s(t){var n,o,u,s,l;void 0===t&&(t=!1),i()&&(g||(n=h.getOrThunk(function(){var t=Si(t7(eZ(),"margin-left")).getOr(0);return es(eZ())-ec(e).left+t}),t4(r.get().element,"max-width",n+"px")),x&&wJ.refreshToolbar(d),g||(o=a(wJ.getToolbar(d)),u=no(e),s=b()?Math.max(u.y-ei(r.get().element)+o,0):u.bottom,t6(d.element,{position:"absolute",top:Math.round(s)+"px",left:Math.round(u.x)+"px"})),p&&(l=r.get(),t?wu.reset(l):wu.refresh(l)),c())}function l(n){var o,u,c,l;void 0===n&&(n=!0),!g&&p&&i()&&(o=v.getDockingMode(),(u=function(n){switch(gn(t)){case mA.auto:var o=a(wJ.getToolbar(d)),r=ei(n.element)-o,i=no(e);if(i.y>r)return"top";var u=tz(e),c=Math.max(u.dom.scrollHeight,ei(u));return i.bottom<c-r||nr().bottom<i.bottom-r?"bottom":"top";case mA.bottom:return"bottom";default:return mA.top,"top"}}(r.get()))!==o&&(c=r.get(),wu.setModes(c,[u]),v.setDockingMode(u),l=b()?uB.TopToBottom:uB.BottomToTop,tQ(c.element,u3,l),n&&s(!0)))}var f=n.uiMothership,d=n.outerContainer,m=m8.DOM,g=gi(t),p=gc(t),h=mk(t).or(Sc(t)),v=o.shared.header,b=v.isPositionedAtTop,y=ge(t),x=y===mE.sliding||y===mE.floating,w=nQ(!1);return{isVisible:i,isPositionedAtTop:b,show:function(){w.set(!0),t4(d.element,"display","flex"),m.addClass(t.getBody(),"mce-edit-focus"),en(f.element,"display"),l(!1),s()},hide:function(){w.set(!1),n.outerContainer&&(t4(d.element,"display","none"),m.removeClass(t.getBody(),"mce-edit-focus")),t4(f.element,"display","none")},update:s,updateMode:l,repositionPopups:c}}(t,l,e,o,s),d=t.getParam("toolbar_persist",!1,"boolean");function m(){var r;s.get()?f.show():(s.set(wJ.getHeader(c).getOrDie()),cz(r=gu(t),i,e8),cz(r,a,e8),Sr(t,e,n,o),wJ.setMenubar(c,xh(t,n)),f.show(),function(t,e,n,o){function r(o){var r=Ss(e,n.isPositionedAtTop()),u=r.pos,a=r.bounds,c=i.get(),s=c.pos,l=c.bounds,f=a.height!==l.height||a.width!==l.width;i.set({pos:u,bounds:a}),f&&gP(t,o),n.isVisible()&&(s!==u?n.update(!0):f&&(n.updateMode(),n.repositionPopups()))}var i=nQ(Ss(e,n.isPositionedAtTop()));o||(t.on("activate",n.show),t.on("deactivate",n.hide)),t.on("SkinLoaded ResizeWindow",function(){return n.update(!0)}),t.on("NodeChange keydown",function(t){fP.requestAnimationFrame(function(){return r(t)})}),t.on("ScrollWindow",function(){return n.updateMode()});var u=uS();u.set(uO(tE.fromDom(t.getBody()),"load",r)),t.on("remove",function(){u.clear()})}(t,l,f,d),t.nodeChanged())}return wZ(t),t.on("show",m),t.on("hide",f.hide),d||(t.on("focus",m),t.on("blur",f.hide)),t.on("init",function(){(t.hasFocus()||d)&&m()}),gl(t,e),{editorContainer:c.element.dom,api:{show:function(){f.show()},hide:function(){f.hide()},enable:function(){gs(e,!1)},disable:function(){gs(e,!0)},isDisabled:function(){return sE.isDisabled(c)}}}}}),SV="contexttoolbar-hide",SH=function(t,e){var n,o,i=t.label.fold(function(){return{}},function(t){return{"aria-label":t}}),u=lz(p9.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:i,selectOnFocus:!0,inputBehaviours:om([fa.config({mode:"special",onEnter:function(t){return a.findPrimary(t).map(function(t){return ow(t),!0})},onLeft:function(t,e){return e.cut(),tg.none()},onRight:function(t,e){return e.cut(),tg.none()}})])})),a=(o=F(n=t.commands,function(t){return lz(("contextformtogglebutton"===t.type?function(t,e,n){var o=e.original;o.primary;var i=O(o,["primary"]);return SD(nB(dY(C(C({},i),{type:"togglebutton",onAction:r}))),n.backstage.shared.providers,[Sl(t,e)])}:function(t,e,n){var o=e.original;o.primary;var i=O(o,["primary"]);return SE(nB(dX(C(C({},i),{type:"button",onAction:r}))),n.backstage.shared.providers,[Sl(t,e)])})(u,t,{backstage:{shared:{providers:e}}}))}),{asSpecs:function(){return F(o,function(t){return t.asSpec()})},findPrimary:function(t){return $(n,function(e,n){return e.primary?tg.from(o[n]).bind(function(e){return e.getOpt(t)}).filter(y(sE.isDisabled)):tg.none()})}});return[{title:tg.none(),items:[u.asSpec()]},{title:tg.none(),items:a.asSpecs()}]},SL={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},Sz={maxHeightFunction:uL(),maxWidthFunction:wM()},SU=oI("forward-slide"),Sj=oI("backward-slide"),SW=oI("change-slide-event"),SG="tox-pop--resizing",SX="tox-pop--transition",SY={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Sq=RegExp("^([+-]?(?:"+["Infinity",(Sp="[0-9]+")+"\\."+SK(Sp)+SK(Sh="[eE][+-]?[0-9]+"),"\\."+Sp+SK(Sh),Sp+SK(Sh)].join("|")+"))(.*)$");function SK(t){return"(?:"+t+")?"}function SJ(t,e){function n(){var n=e.getOptions(t),o=e.getCurrent(t).map(e.hash),r=uk();return F(n,function(n){return{type:"togglemenuitem",text:e.display(n),onSetup:function(i){function u(t){t&&(r.on(function(t){return t.setActive(!1)}),r.set(i)),i.setActive(t)}u(tr(o,e.hash(n)));var a=e.watcher(t,n,u);return function(){r.clear(),a()}},onAction:function(){return e.setCurrent(t,n)}}})}t.ui.registry.addMenuButton(e.name,{tooltip:e.text,icon:e.icon,fetch:function(t){return t(n())},onSetup:e.onToolbarSetup}),t.ui.registry.addNestedMenuItem(e.name,{type:"nestedmenuitem",text:e.text,getSubmenuItems:n,onSetup:e.onMenuSetup})}function S$(t,e){return function(){t.execCommand("mceToggleFormat",!1,e)}}function SQ(t,e){return xw(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(n){n.setDisabled(t.mode.isReadOnly()||!t.undoManager[e]())})}function SZ(t,e){return{type:"makeshift",x:t,y:e}}function S0(t){return"longpress"===t.type||0===t.type.indexOf("touch")}function S1(t,e,n){switch(n){case"node":return{type:"node",node:tg.some(tE.fromDom(t.selection.getNode())),root:tE.fromDom(t.getBody())};case"point":var o,r,i,u,a;return"contextmenu"===e.type||"longpress"===e.type?t.inline?function(t){if(S0(t)){var e=t.touches[0];return SZ(e.pageX,e.pageY)}return SZ(t.pageX,t.pageY)}(e):(o=t.getContentAreaContainer(),r=function(t){if(S0(t)){var e=t.touches[0];return SZ(e.clientX,e.clientY)}return SZ(t.clientX,t.clientY)}(e),u=(i=m8.DOM.getPos(o)).x,a=i.y,SZ(r.x+u,r.y+a)):kk(t);case"selection":return kk(t)}}function S2(t){return"string"==typeof t?t.split(/[ ,]/):t}function S5(t){return t.getParam("contextmenu_never_use_native",!1,"boolean")}function S3(t){return s(t)?"|"===t:"separator"===t.type}function S9(t,e){if(0===e.length)return t;var n=J(t).filter(function(t){return!S3(t)}).fold(function(){return[]},function(t){return[k_]});return t.concat(n).concat(e).concat([k_])}function S4(t,e){return"longpress"!==e.type&&(2!==e.button||e.target===t.getBody()&&""===e.pointerType)}function S6(t,e){return S4(t,e)?t.selection.getStart(!0):e.target}function S8(t){return function(e){return e.translate(-t.left,-t.top)}}function S7(t){return function(e){return e.translate(t.left,t.top)}}function kt(t){return function(e,n){return P(t,function(t,e){return e(t)},e3(e,n))}}function ke(t,e,n){return t.fold(kt([S7(n),S8(e)]),kt([S8(e)]),kt([]))}function kn(t,e,n){return t.fold(kt([S7(n)]),kt([]),kt([S7(e)]))}function ko(t,e,n){return t.fold(kt([]),kt([S8(n)]),kt([S7(e),S8(n)]))}function kr(t,e,n){var o=t.fold(function(t,e){return{position:tg.some("absolute"),left:tg.some(t+"px"),top:tg.some(e+"px")}},function(t,e){return{position:tg.some("absolute"),left:tg.some(t-n.left+"px"),top:tg.some(e-n.top+"px")}},function(t,e){return{position:tg.some("fixed"),left:tg.some(t+"px"),top:tg.some(e+"px")}});return C({right:tg.none(),bottom:tg.none()},o)}function ki(t,e,n,o){function r(t,r){return function(i,u){var a=t(e,n,o);return r(i.getOr(a.left),u.getOr(a.top))}}return t.fold(r(ko,kD),r(kn,kA),r(ke,kB))}function ku(t,e){var n=t0(t,e);return g(n)?NaN:parseInt(n,10)}function ka(t,e,n,o){return $(t,function(t){var r=t.sensor,i=t.range.left,u=t.range.top,a=kn(e,n,o),c=kn(r,n,o);return Math.abs(a.left-c.left)<=i&&Math.abs(a.top-c.top)<=u?tg.some({output:ki(t.output,e,n,o),extra:t.extra}):tg.none()})}function kc(t,e){t.getSystem().addToGui(e),tj(e.element).filter(eA).each(function(t){et(t,"z-index").each(function(e){tQ(t,kR,e)}),t4(t,"z-index",t7(e.element,"z-index"))})}function ks(t){tj(t.element).filter(eA).each(function(t){t1(t,kR).fold(function(){return en(t,"z-index")},function(e){return t4(t,"z-index",e)}),t5(t,kR)}),t.getSystem().removeFromGui(t)}function kl(t,e,n){return t.getSystem().build(pL.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[e]},events:n}))}function kf(t,e){return{bounds:t.getBounds(),height:eu(e.element),width:el(e.element)}}function kd(t,e,n,o,r){var i=n.update(o,r),a=n.getStartData().getOrThunk(function(){return kf(e,t)});i.each(function(n){var o,r,i,c,s,l,f,d,m,g,p,h,v=e.getTarget(t.element);e.repositionTarget&&(i=ey(tH(t.element)),c=yI(v),g=et(v,"left"),p=et(v,"top"),h=et(v,"position"),s=(g.isSome()&&p.isSome()&&h.isSome()?tg.some((o=g.getOrDie(),r=p.getOrDie(),("fixed"===h.getOrDie()?kB:kD)(parseInt(o,10),parseInt(r,10)))):tg.none()).getOrThunk(function(){var t=ec(v);return kA(t.left,t.top)}),l=e.snaps.fold(function(){var t,e,o=ke((t=n.left,e=n.top,s.fold(function(n,o){return kD(n+t,o+e)},function(n,o){return kA(n+t,o+e)},function(n,o){return kB(n+t,o+e)})),i,c);return kB(o.left,o.top)},function(e){var o,r,u,a,l,f,d,m=(r=ku(o=t.element,e.leftAttr),u=ku(o,e.topAttr),a=(isNaN(r)||isNaN(u)?tg.none():tg.some(e3(r,u))).fold(function(){return s},function(t){return kB(t.left+n.left,t.top+n.top)}),l=(e.mustSnap?kM:kF)(t,e,a,i,c),f=ke(a,i,c),tQ(d=t.element,e.leftAttr,f.left+"px"),tQ(d,e.topAttr,f.top+"px"),l.fold(function(){return{coord:kB(f.left,f.top),extra:tg.none()}},function(t){return{coord:t.output,extra:t.extra}}));return m.extra.each(function(n){e.onSensor(t,n)}),m.coord}),f=a.bounds,m=kA(un((d=kn(l,i,c)).left,f.x,f.x+f.width-a.width),un(d.top,f.y,f.y+f.height-a.height)),t8(v,kr(l.fold(function(){var t=ko(m,i,c);return kD(t.left,t.top)},u(m),function(){var t=ke(m,i,c);return kB(t.left,t.top)}),0,c))),e.onDrag(t,v,n)})}function km(t,e,n,o){e.each(ks),n.snaps.each(function(e){var n;t5(n=t.element,e.leftAttr),t5(n,e.topAttr)});var r=n.getTarget(t.element);o.reset(),n.onDrop(t,r)}function kg(t){return function(e,n){function o(t){n.setStartData(kf(e,t))}return om(_([oO(rT(),function(t){n.getStartData().each(function(){return o(t)})})],t(e,n,o),!0))}}function kp(t,e,n){return[oO(o6(),function(o,r){var i,u,a,c;0===r.event.raw.button&&(r.stop(),a={drop:i=function(){return km(o,tg.some(c),t,e)},delayDrop:(u=pT(i,200)).schedule,forceDrop:i,move:function(n){u.cancel(),kd(o,t,e,kV,n)}},c=kl(o,t.blockerClass,om([oO(o6(),a.forceDrop),oO(rt(),a.drop),oO(o8(),function(t,e){a.move(e.event)}),oO(o7(),a.delayDrop)])),n(o),kc(o,c))})]}function kh(t,e,n){function o(n){km(n,r.get(),t,e),r.clear()}var r=uk();return[oO(o5(),function(i,u){u.stop();var a,c,s,l=kl(i,t.blockerClass,(c=a=function(){return o(i)},s=function(n){kd(i,t,e,kL,n)},om([oO(o5(),c),oO(o9(),a),oO(o4(),a),oO(o3(),function(t,e){s(e.event)})])));r.set(l),n(i),kc(i,l)}),oO(o3(),function(n,o){o.stop(),kd(n,t,e,kL,o.event)}),oO(o9(),function(t,e){e.stop(),o(t)}),oO(o4(),o)]}function kv(t,e,n,o,r,i){return t.fold(function(){return kz.snap({sensor:kA(n-20,o-20),range:e3(r,i),output:kA(tg.some(n),tg.some(o)),extra:{td:e}})},function(t){var r=t.element.dom.getBoundingClientRect();return kz.snap({sensor:kA(n-20,o-20),range:e3(40,40),output:kA(tg.some(n-r.width/2),tg.some(o-r.height/2)),extra:{td:e}})})}function kb(t,e,n){return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(t,o){var r=o.td;e.get().exists(function(t){return tP(t,r)})||(e.set(r),n(r))},mustSnap:!0}}function ky(t){return lz(fV.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:om([kz.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),v3.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))}var kx,kw,kS={name:"lineheight",text:"Line height",icon:"line-height",getOptions:function(t){return t.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" ")},hash:function(t){var e;return e=["fixed","relative","empty"],tg.from(Sq.exec(t)).bind(function(t){var n=Number(t[1]),o=t[2];return A(e,function(t){return A(SY[t],function(t){return o===t})})?tg.some({value:n,unit:o}):tg.none()}).map(function(t){return t.value+t.unit}).getOr(t)},display:a,watcher:function(t,e,n){return t.formatter.formatChanged("lineheight",n,!1,{value:e}).unbind},getCurrent:function(t){return tg.from(t.queryCommandValue("LineHeight"))},setCurrent:function(t,e){return t.execCommand("LineHeight",!1,e)}},kk=function(t){return{type:"selection",root:tE.fromDom(t.selection.getNode())}},kC={onLtr:function(){return[us,ur,ui,uu,ua,uc,fR,fN,lF,lB,lM,lA]},onRtl:function(){return[us,ui,ur,ua,uu,uc,fR,fN,lM,lA,lF,lB]}},kO={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},k_={type:"separator"},kT=function(t){var e;function n(t){return{text:t.text,icon:t.icon,disabled:t.disabled,shortcut:t.shortcut}}if(s(t))return t;switch(t.type){case"separator":return k_;case"submenu":return C(C({type:"nestedmenuitem"},n(t)),{getSubmenuItems:function(){var e=t.getSubmenuItems();return s(e)?e:F(e,kT)}});default:return C(C({type:"menuitem"},n(t)),{onAction:(e=t.onAction,function(){return e()})})}},kE=nZ([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),kD=kE.offset,kA=kE.absolute,kB=kE.fixed,kM=function(t,e,n,o,r){var i=e.getSnapPoints(t);return ka(i,n,o,r).orThunk(function(){return P(i,function(t,e){var i,u,a,c=(i=e.sensor,e.range.left,e.range.top,u=kn(n,o,r),a=kn(i,o,r),e3(Math.abs(u.left-a.left),Math.abs(u.top-a.top)));return t.deltas.fold(function(){return{deltas:tg.some(c),snap:tg.some(e)}},function(n){return(c.left+c.top)/2<=(n.left+n.top)/2?{deltas:tg.some(c),snap:tg.some(e)}:t})},{deltas:tg.none(),snap:tg.none()}).snap.map(function(t){return{output:ki(t.output,n,o,r),extra:t.extra}})})},kF=function(t,e,n,o,r){return ka(e.getSnapPoints(t),n,o,r)},kI=Object.freeze({__proto__:null,snapTo:function(t,e,n,o){var r,i,u=e.getTarget(t.element);e.repositionTarget&&(r=ey(tH(t.element)),i=yI(u),t8(u,kr({coord:ki(o.output,o.output,r,i),extra:o.extra}.coord,0,i)))}}),kR="data-initial-z-index",kN=nX("snaps",[nR("getSnapPoints"),iy("onSensor"),nR("leftAttr"),nR("topAttr"),nY("lazyViewport",nr),nY("mustSnap",!1)]),kP=[nY("useFixed",w),nR("blockerClass"),nY("getTarget",a),nY("onDrag",r),nY("repositionTarget",!0),nY("onDrop",r),n$("getBounds",nr),kN],kV=Object.freeze({__proto__:null,getData:function(t){return tg.from(e3(t.x,t.y))},getDelta:function(t,e){return e3(e.left-t.left,e.top-t.top)}}),kH=_(_([],kP,!0),[ik("dragger",{handlers:kg(kp)})],!1),kL=Object.freeze({__proto__:null,getData:function(t){var e,n=t.raw.touches;return 1===n.length?(e=n[0],tg.some(e3(e.clientX,e.clientY))):tg.none()},getDelta:function(t,e){return e3(e.left-t.left,e.top-t.top)}}),kz=ij({branchKey:"mode",branches:Object.freeze({__proto__:null,mouse:kH,touch:_(_([],kP,!0),[ik("dragger",{handlers:kg(kh)})],!1),mouseOrTouch:_(_([],kP,!0),[ik("dragger",{handlers:kg(function(t,e,n){return _(_([],kp(t,e,n),!0),kh(t,e,n),!0)})})],!1)}),name:"dragging",active:{events:function(t,e){return t.dragger.handlers(t,e)}},extra:{snap:function(t){return{sensor:t.sensor,range:t.range,output:t.output,extra:tg.from(t.extra)}}},state:Object.freeze({__proto__:null,init:function(){var t=tg.none(),e=tg.none();return r1({readState:u({}),reset:function(){t=tg.none(),e=tg.none()},update:function(e,n){return e.getData(n).bind(function(n){var o;return o=t.map(function(t){return e.getDelta(t,n)}),t=tg.some(n),o})},getStartData:function(){return e},setStartData:function(t){e=tg.some(t)}})}}),apis:kI});function kU(t,e,n){var o,r,i,u=tE.fromDom(t.getContainer());Q((o=ei(u),r=es(u),(i={}).height=Sa(o+e.top,mS(t),mC(t)),n===kx.Both&&(i.width=Sa(r+e.left,mw(t),mk(t))),i),function(t,e){return t4(u,e,Su(t)),0}),t.fire("ResizeEditor")}function kj(t,e,n,o){return kU(t,e3(20*n,20*o),e),tg.some(!0)}function kW(t){return ol("items","items",ng(),nC(nE(function(e){return nA("Checking item of "+t,C$,e).fold(function(t){return na.error(os(t))},function(t){return na.value(t)})})))}function kG(t){return s(t.type)&&s(t.name)}function kX(t){return{internalDialog:nB(nA("dialog",C1,t)),dataValidator:ot(z(R(C3(t),kG),function(t){return tg.from(C9[t.type]).fold(function(){return[]},function(e){return[nN(t.name,e)]})})),initialData:t.initialData}}function kY(t){var e=[],n={};return Q(t,function(t,o){t.fold(function(){e.push(o)},function(t){n[o]=t})}),0<e.length?na.error(e):na.value(n)}function kq(t,e){t4(t,"height",e+"px"),eX().browser.isIE()?en(t,"flex-basis"):t4(t,"flex-basis",e+"px")}function kK(t,e,n){ie(t,'[role="dialog"]').each(function(t){io(t,'[role="tablist"]').each(function(o){n.get().map(function(n){var r,i,u;return t4(e,"height","0"),t4(e,"flex-basis","0"),Math.min(n,(r=tz(t).dom,i="fixed"===t7(ie(t,".tox-dialog-wrap").getOr(t),"position")?Math.max(r.clientHeight,window.innerHeight):Math.max(r.offsetHeight,r.scrollHeight),u=ei(e),i-(ei(t)+(parseInt(t7(t,"margin-top"),10)||0)+(parseInt(t7(t,"margin-bottom"),10)||0)-(e.dom.offsetLeft>=o.dom.offsetLeft+es(o)?Math.max(ei(o),u):u))))}).each(function(t){kq(e,t)})})})}function kJ(t){return io(t,'[role="tabpanel"]')}function k$(t,e,n,o){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:C(C({},e.map(function(t){return{id:t}}).getOr({})),o?{"aria-live":"polite"}:{})},components:[],behaviours:om([bS(0),Sk.config({channel:Os,updateState:function(t,e){return tg.some({isTabPanel:function(){return"tabpanel"===e.body.type}})},renderComponents:function(t){var e,o;return"tabpanel"!==t.body.type?[(e=t.body,{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[(o=lz(bv.sketch(function(t){return{dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:F(e.items,function(e){return yf(t,e,n)})}}))).asSpec()]}],behaviours:om([fa.config({mode:"acyclic",useTabstopAt:y(va)}),sS.config({find:o.getOpt}),bT(o,{postprocess:function(t){return kY(t).fold(function(t){return console.error(t),{}},a)}})])})]:[function(t,e){function n(t){var e=kY(c1.getValue(t)).getOr({}),n=n4(i.get(),e);i.set(n)}function o(t){var e=i.get();c1.setValue(t,e)}var r,i=nQ({}),u=nQ(null),a=F(t.tabs,function(t){return{value:t.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:e.shared.providers.translate(t.title)},view:function(){return[bv.sketch(function(r){return{dom:{tag:"div",classes:["tox-form"]},components:F(t.items,function(t){return yf(r,t,e)}),formBehaviours:om([fa.config({mode:"acyclic",useTabstopAt:y(va)}),lg("TabView.form.events",[rL(o),rz(n)]),uh.config({channels:om([{key:Oi,value:{onReceive:n}},{key:Ou,value:{onReceive:o}}])})])}})]}}}),c=(r=uk(),{extraEvents:[rL(function(t){var e=t.element;kJ(e).each(function(n){t4(n,"visibility","hidden"),t.getSystem().getByDom(n).toOptional().each(function(t){K(Y(F(a,function(e,o){fs.set(t,a[o].view());var r=n.dom.getBoundingClientRect();return fs.set(t,[]),r.height}),function(t,e){return e<t?-1:t<e?1:0})).fold(r.clear,r.set)}),kK(e,n,r),en(n,"visibility"),K(a).each(function(e){return Or.showTab(t,e.value)}),fP.requestAnimationFrame(function(){kK(e,n,r)})})}),oO(rE(),function(t){var e=t.element;kJ(e).each(function(t){kK(e,t,r)})}),oO(p5,function(t,e){var n=t.element;kJ(n).each(function(t){var e=iY(eK(t));t4(t,"visibility","hidden");var o=et(t,"height").map(function(t){return parseInt(t,10)});en(t,"height"),en(t,"flex-basis");var i=t.dom.getBoundingClientRect().height;o.forall(function(t){return t<i})?(r.set(i),kK(n,t,r)):o.each(function(e){kq(t,e)}),en(t,"visibility"),e.each(iG)})})],selectFirst:!1});return Or.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(t,e,n){var o=c1.getValue(e);ox(t,p2,{name:o,oldName:u.get()}),u.set(o)},tabs:a,components:[Or.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Ot.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:om([pG.config({})])}),Or.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:c.selectFirst,tabSectionBehaviours:om([lg("tabpanel",c.extraEvents),fa.config({mode:"acyclic"}),sS.config({find:function(t){return K(Or.getViewItems(t))}}),c1.config({store:{mode:"manual",getValue:function(t){return t.getSystem().broadcastOn([Oi],{}),i.get()},setValue:function(t,e){i.set(e),t.getSystem().broadcastOn([Ou],{})}}})])})}(t.body,n)]},initialData:t})])}}function kQ(t,e){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,e]}}function kZ(t,e){return Cp.parts.close(fV.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close")}},action:t,buttonBehaviours:om([pG.config({})])}))}function k0(){return Cp.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})}function k1(t,e){return Cp.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:lL("<p>"+d_(e.translate(t))+"</p>")}]}]})}function k2(t){return Cp.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})}function k5(t,e){return[pL.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),pL.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:e})]}function k3(t){var e,n="tox-dialog",o=n+"-wrap",r=o+"__backdrop",i=n+"__disable-scroll";return Cp.sketch({lazySink:t.lazySink,onEscape:function(e){return t.onEscape(e),tg.some(!0)},useTabstopAt:function(t){return!va(t)},dom:{tag:"div",classes:[n].concat(t.extraClasses),styles:C({position:"relative"},t.extraStyles)},components:_([t.header,t.body],t.footer.toArray(),!0),parts:{blocker:{dom:lL('<div class="'+o+'"></div>'),components:[{dom:{tag:"div",classes:Od?[r,r+"--opaque"]:[r]}}]}},dragBlockClass:o,modalBehaviours:om(_([fd.config({}),lg("dialog-events",t.dialogEvents.concat([oT(rn())(function(t,e){fa.focusIn(t)})])),lg("scroll-lock",[rL(function(){oX(eZ(),i)}),rz(function(){oY(eZ(),i)})])],t.extraBehaviours,!0)),eventOrder:C(((e={})[rb()]=["dialog-events"],e[rD()]=["scroll-lock","dialog-events","alloy.base.behaviour"],e[rA()]=["alloy.base.behaviour","dialog-events","scroll-lock"],e),t.eventOrder)})}function k9(t){return fV.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[dM("close",{tag:"div",classes:["tox-icon"]},t.icons)],action:function(t){oy(t,p$)}})}function k4(t,e,n){function o(t){return[oZ(n.translate(t.title))]}return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:C({},e.map(function(t){return{id:t}}).getOr({}))},components:o(t),behaviours:om([Sk.config({channel:Oc,renderComponents:o})])}}function k6(){return{dom:lL('<div class="tox-dialog__draghandle"></div>')}}function k8(t,e){var n,o,r,i,u,a;return n={title:e.shared.providers.translate(t),draggable:e.dialog.isDraggableModal()},o=e.shared.providers,r=Cp.parts.title(k4(n,tg.none(),o)),i=Cp.parts.draghandle(k6()),u=Cp.parts.close(k9(o)),a=[r].concat(n.draggable?[i]:[]).concat([u]),pL.sketch({dom:lL('<div class="tox-dialog__header"></div>'),components:a})}function k7(t,e,n){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:e,components:[{dom:lL('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}}function Ct(t,e,n){return{onClose:function(){return n.closeWindow()},onBlock:function(n){Cp.setBusy(t(),function(t,o){return k7(n.message,o,e)})},onUnblock:function(){Cp.setIdle(t())}}}function Ce(t,e,n,o){var r;return r4(k3(C(C({},t),{lazySink:o.shared.getSink,extraBehaviours:_([Sk.config({channel:Oa,updateState:function(t,e){return tg.some(e)},initialData:e}),bE({})],t.extraBehaviours,!0),onEscape:function(t){oy(t,p$)},dialogEvents:n,eventOrder:((r={})[rv()]=[Sk.name(),uh.name()],r[rD()]=["scroll-lock",Sk.name(),"messages","dialog-events","alloy.base.behaviour"],r[rA()]=["alloy.base.behaviour","dialog-events","messages",Sk.name(),"scroll-lock"],r)})))}function Cn(t){return F(t,function(t){var e;return"menu"===t.type?(e=F(t.items,function(t){var e=nQ(!1);return C(C({},t),{storage:e})}),C(C({},t),{items:e})):t})}function Co(t){return P(t,function(t,e){return"menu"!==e.type?t:P(e.items,function(t,e){return t[e.name]=e.storage,t},t)},{})}function Cr(t,e){return[oD(rn(),vu),t(pJ,function(t,n){e.onClose(),n.onClose()}),t(p$,function(t,e,n,o){e.onCancel(t),oy(o,pJ)}),oO(p1,function(t,n){return e.onUnblock()}),oO(p0,function(t,n){return e.onBlock(n.event)})]}function Ci(t,e){function n(t,e){return pL.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+t]},components:F(e,function(t){return t.memento.asSpec()})})}var o=I(e.map(function(t){return t.footerButtons}).getOr([]),function(t){return"start"===t.align});return[n("start",o.pass),n("end",o.fail)]}function Cu(t,e){return{dom:lL('<div class="tox-dialog__footer"></div>'),components:[],behaviours:om([Sk.config({channel:Ol,initialData:t,updateState:function(t,n){var o=F(n.buttons,function(t){var n=lz(vU(t,t.type,e));return{name:t.name,align:t.align,memento:n}});return tg.some({lookupByName:function(t,e){return V(o,function(t){return t.name===e}).bind(function(e){return e.memento.getOpt(t)})},footerButtons:o})},renderComponents:Ci})])}}function Ca(t,e){return Cp.parts.footer(Cu(t,e))}function Cc(t,e){if(t.getRoot().getSystem().isConnected()){var n=sS.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return bv.getField(n,e).fold(function(){var o=t.getFooter();return Sk.getState(o).get().bind(function(t){return t.lookupByName(n,e)})},function(t){return tg.some(t)})}return tg.none()}function Cs(t,e,n){function o(e){var n=t.getRoot();n.getSystem().isConnected()&&e(n)}var r={getData:function(){var e=t.getRoot(),o=e.getSystem().isConnected()?t.getFormWrapper():e,r=c1.getValue(o),i=Z(n,function(t){return t.get()});return C(C({},r),i)},setData:function(e){o(function(o){var i,u=r.getData(),a=C(C({},u),e),c=(i=t.getRoot(),Sk.getState(i).get().map(function(t){return nB(nA("data",t.dataValidator,a))}).getOr(a)),s=t.getFormWrapper();c1.setValue(s,c),Q(n,function(t,e){tC(a,e)&&t.set(a[e])})})},disable:function(e){Cc(t,e).each(sE.disable)},enable:function(e){Cc(t,e).each(sE.enable)},focus:function(e){Cc(t,e).each(fd.focus)},block:function(t){if(!s(t))throw Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");o(function(e){ox(e,p0,{message:t})})},unblock:function(){o(function(t){oy(t,p1)})},showTab:function(e){o(function(n){var o=t.getBody();Sk.getState(o).get().exists(function(t){return t.isTabPanel()})&&sS.getCurrent(o).each(function(t){Or.showTab(t,e)})})},redial:function(t){o(function(n){var o=e(t);n.getSystem().broadcastOn([Oa],o),n.getSystem().broadcastOn([Oc],o.internalDialog),n.getSystem().broadcastOn([Os],o.internalDialog),n.getSystem().broadcastOn([Ol],o.internalDialog),r.setData(o.initialData)})},close:function(){o(function(t){oy(t,pJ)})}};return r}function Cl(t){return l(t)&&-1!==Oh.indexOf(t.mceAction)}(kw=kx=kx||{})[kw.None=0]="None",kw[kw.Both=1]="Both",kw[kw.Vertical=2]="Vertical";var Cf,Cd=u([nR("lazySink"),nj("dragBlockClass"),n$("getBounds",nr),nY("useTabstopAt",S),nY("eventOrder",{}),aV("modalBehaviours",[fa]),ix("onExecute"),iS("onEscape")]),Cm={sketch:a},Cg=u([sd({name:"draghandle",overrides:function(t,e){return{behaviours:om([kz.config({mode:"mouse",getTarget:function(t){return ie(t,'[role="dialog"]').getOr(t)},blockerClass:t.dragBlockClass.getOrDie(Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(e,null,2)).message),getBounds:t.getDragBounds})])}}}),sl({schema:[nR("dom")],name:"title"}),sl({factory:Cm,schema:[nR("dom")],name:"close"}),sl({factory:Cm,schema:[nR("dom")],name:"body"}),sd({factory:Cm,schema:[nR("dom")],name:"footer"}),sf({factory:{sketch:function(t,e){return C(C({},t),{dom:e.dom,components:e.components})}},schema:[nY("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),nY("components",[])],name:"blocker"})]),Cp=a8({name:"ModalDialog",configFields:Cd(),partFields:Cg(),factory:function(t,e,n,o){var r,i=uk(),u=oI("modal-events"),c=C(C({},t.eventOrder),((r={})[rD()]=[u].concat(t.eventOrder["alloy.system.attached"]||[]),r));return{uid:t.uid,dom:t.dom,components:e,apis:{show:function(e){i.set(e);var n=t.lazySink(e).getOrDie(),r=o.blocker(),u=n.getSystem().build(C(C({},r),{components:r.components.concat([oV(e)]),behaviours:om([fd.config({}),lg("dialog-blocker-events",[oT(rn())(function(){fa.focusIn(e)})])])}));cL(n,u,e8),fa.focusIn(e)},hide:function(t){i.clear(),tj(t.element).each(function(e){t.getSystem().getByDom(e).each(function(t){aC(t)})})},getBody:function(e){return aQ(e,t,"body")},getFooter:function(e){return aQ(e,t,"footer")},setIdle:function(t){wE.unblock(t)},setBusy:function(t,e){wE.block(t,e)}},eventOrder:c,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:aH(t.modalBehaviours,[fs.config({}),fa.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt}),wE.config({getRoot:i.get}),lg(u,[rL(function(e){var n,o,r,i=e.element,u=aQ(e,t,"title").element,c=t1(i,"id").fold(function(){var t=oI("dialog-label");return tQ(u,"id",t),t},a);tQ(i,"aria-labelledby",c),n=e.element,o=aQ(e,t,"body").element,r=tg.from(t0(n,"id")).fold(function(){var t=oI("dialog-describe");return tQ(o,"id",t),t},a),tQ(n,"aria-describedby",r)})])])}},apis:{show:function(t,e){t.show(e)},hide:function(t,e){t.hide(e)},getBody:function(t,e){return t.getBody(e)},getFooter:function(t,e){return t.getFooter(e)},setBusy:function(t,e,n){t.setBusy(e,n)},setIdle:function(t,e){t.setIdle(e)}}}),Ch=ot([nP("type"),nP("name")].concat(mY)),Cv=[ol("name","name",np(function(){return oI("button-name")}),or),nG("icon"),nK("align","end",["start","end"]),nJ("primary",!1),nJ("disabled",!1)],Cb=_(_([],Cv,!0),[nP("text")],!1),Cy=_([nV("type",["submit","cancel","custom"])],Cb,!0),Cx=nF("type",{submit:Cy,cancel:Cy,custom:Cy,menu:_([nV("type",["menu"]),nG("text"),nG("tooltip"),nG("icon"),nU("items",Ch)],Cv,!0)}),Cw=ot([nP("type"),nP("text"),nV("level",["info","warn","error","success"]),nP("icon"),nY("url","")]),CS=ot([nP("type"),nP("text"),nJ("disabled",!1),nJ("primary",!1),ol("name","name",np(function(){return oI("button-name")}),or),nG("icon"),nJ("borderless",!1)]),Ck=ot([nP("type"),nP("name"),nP("label"),nJ("disabled",!1)]),CC=[nP("type"),nP("name")],CO=CC.concat([nG("label")]),C_=ot(CO.concat([nY("columns","auto")])),CT=oe([nP("value"),nP("text"),nP("icon")]),CE=ot(CO),CD=ot(CO),CA=CC.concat([nq("tag","textarea",or),nP("scriptId"),nP("scriptUrl"),nq("settings",void 0,oc)]),CB=CC.concat([nq("tag","textarea",or),nH("init")]),CM=nE(function(t){return nA("customeditor.old",nk(CB),t).orThunk(function(){return nA("customeditor.new",nk(CA),t)})}),CF=ot(CO),CI=nC(n7),CR=ot([nP("type"),nP("html"),nK("presets","presentation",["presentation","document"])]),CN=ot(CO.concat([nJ("sandboxed",!0)])),CP=CO.concat([nN("currentState",ot([nR("blob"),nP("url")]))]),CV=ot(CP),CH=ot(CO.concat([nG("inputMode"),nG("placeholder"),nJ("maximized",!1),nJ("disabled",!1)])),CL=[nP("text"),nP("value")],Cz=[nP("text"),nU("items",(Cf=tB(function(){return CU}),{extract:function(t,e){return Cf().extract(t,e)},toString:function(){return Cf().toString()}}))],CU=nO([ot(CL),ot(Cz)]),Cj=ot(CO.concat([nU("items",CU),nJ("disabled",!1)])),CW=ot(CO.concat([nz("items",[nP("text"),nP("value")]),nq("size",1,oo),nJ("disabled",!1)])),CG=ot(CO.concat([nJ("constrain",!0),nJ("disabled",!1)])),CX=ot([nP("width"),nP("height")]),CY=ot([nP("type"),nU("header",or),nU("cells",nC(or))]),Cq=ot(CO.concat([nG("placeholder"),nJ("maximized",!1),nJ("disabled",!1)])),CK=ot(CO.concat([nK("filetype","file",["image","media","file"]),nY("disabled",!1)])),CJ=ot([nP("value"),nY("meta",{})]),C$=nS(function(){var t,e,n;return nT("type",{alertbanner:Cw,bar:ot((n=kW("bar"),[nP("type"),n])),button:CS,checkbox:Ck,colorinput:CE,colorpicker:CD,dropzone:CF,grid:ot((t=kW("grid"),[nP("type"),nN("columns",oo),t])),iframe:CN,input:CH,listbox:Cj,selectbox:CW,sizeinput:CG,textarea:Cq,urlinput:CK,customeditor:CM,htmlpanel:CR,imagetools:CV,collection:C_,label:ot((e=kW("label"),[nP("type"),nP("label"),e])),table:CY,panel:CQ})}),CQ=ot([nP("type"),nY("classes",[]),nU("items",C$)]),CZ=[ol("name","name",np(function(){return oI("tab-name")}),or),nP("title"),nU("items",C$)],C0=ot([nP("type"),nz("tabs",CZ)]),C1=ot([nP("title"),nN("body",nT("type",{panel:CQ,tabpanel:C0})),nq("size","normal",or),nU("buttons",Cx),nY("initialData",{}),n$("onAction",r),n$("onChange",r),n$("onSubmit",r),n$("onClose",r),n$("onCancel",r),nY("onTabChange",r)]),C2=ot(_([nV("type",["cancel","custom"])],Cb,!0)),C5=ot([nP("title"),nP("url"),nW("height",oo),nW("width",oo),nW("buttons",nC(C2)),n$("onAction",r),n$("onCancel",r),n$("onClose",r),n$("onMessage",r)]),C3=function(t){return l(t)?[t].concat(z(tt(t,a),C3)):f(t)?z(t,C3):[]},C9={checkbox:oi,colorinput:or,colorpicker:or,dropzone:CI,input:or,iframe:or,sizeinput:CX,selectbox:or,listbox:or,size:CX,textarea:or,urlinput:CJ,customeditor:or,collection:CT,togglemenuitem:oi},C4={open:function(t,e){var n=kX(e);return t(n.internalDialog,n.initialData,n.dataValidator)},openUrl:function(t,e){return t(nB(nA("dialog",C5,e)))},redial:kX},C6=a6({name:"TabButton",configFields:[nY("uid",void 0),nR("value"),ol("dom","dom",nv(function(){return{attributes:{role:"tab",id:oI("aria"),"aria-selected":"false"}}}),on()),nj("action"),nY("domModification",{}),aV("tabButtonBehaviours",[fd,fa,c1]),nR("view")],factory:function(t,e){return{uid:t.uid,dom:t.dom,components:t.components,events:lk(t.action),behaviours:aH(t.tabButtonBehaviours,[fd.config({}),fa.config({mode:"execution",useSpace:!0,useEnter:!0}),c1.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}}}),C8=u([nR("tabs"),nR("dom"),nY("clickToDismiss",!1),aV("tabbarBehaviours",[sA,fa]),iv(["tabClass","selectedClass"])]),C7=u([sm({factory:C6,name:"tabs",unit:"tab",overrides:function(t){return{action:function(e){var n=e.getSystem().getByUid(t.uid).getOrDie(),o=sA.isHighlighted(n,e);(o&&t.clickToDismiss?function(t,e){sA.dehighlight(t,e),ox(t,rN(),{tabbar:t,button:e})}:o?r:function(t,e){sA.highlight(t,e),ox(t,rR(),{tabbar:t,button:e})})(n,e)},domModification:{classes:[t.markers.tabClass]}}}})]),Ot=a8({name:"Tabbar",configFields:C8(),partFields:C7(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:aH(t.tabbarBehaviours,[sA.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:function(t,e){tQ(e.element,"aria-selected","true")},onDehighlight:function(t,e){tQ(e.element,"aria-selected","false")}}),fa.config({mode:"flow",getInitial:function(t){return sA.getHighlighted(t).map(function(t){return t.element})},selector:"."+t.markers.tabClass,executeOnMove:!0})])}}}),Oe=a6({name:"Tabview",configFields:[aV("tabviewBehaviours",[fs])],factory:function(t,e){return{uid:t.uid,dom:t.dom,behaviours:aH(t.tabviewBehaviours,[fs.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),On=u([nY("selectFirst",!0),iy("onChangeTab"),iy("onDismissTab"),nY("tabs",[]),aV("tabSectionBehaviours",[])]),Oo=u([sl({factory:Ot,schema:[nR("dom"),nL("markers",[nR("tabClass"),nR("selectedClass")])],name:"tabbar",defaults:function(t){return{tabs:t.tabs}}}),sl({factory:Oe,name:"tabview"})]),Or=a8({name:"TabSection",configFields:On(),partFields:Oo(),factory:function(t,e,n,o){function r(e,n){a$(e,t,"tabbar").each(function(t){n(t).each(ow)})}return{uid:t.uid,dom:t.dom,components:e,behaviours:t.tabSectionBehaviours.dump,events:om(L([t.selectFirst?[rL(function(t,e){r(t,sA.getFirst)})]:[],[oO(rR(),function(e,n){var o=n.event.button,r=c1.getValue(o);a$(o,t,"tabview").each(function(e){V(t.tabs,function(t){return t.value===r}).each(function(n){var r=n.view();t1(o.element,"id").each(function(t){tQ(e.element,"aria-labelledby",t)}),fs.set(e,r),t.onChangeTab(e,o,r)})})}),oO(rN(),function(e,n){var o=n.event.button;t.onDismissTab(e,o)})]])),apis:{getViewItems:function(e){return a$(e,t,"tabview").map(function(t){return fs.contents(t)}).getOr([])},showTab:function(t,e){r(t,function(t){return V(sA.getCandidates(t),function(t){return c1.getValue(t)===e}).filter(function(e){return!sA.isHighlighted(t,e)})})}}}},apis:{getViewItems:function(t,e){return t.getViewItems(e)},showTab:function(t,e,n){t.showTab(e,n)}}}),Oi="send-data-to-section",Ou="send-data-to-view",Oa=oI("update-dialog"),Oc=oI("update-title"),Os=oI("update-body"),Ol=oI("update-footer"),Of=oI("body-send-message"),Od=gq.deviceType.isTouch(),Om=function(t,e){function n(e,n){return oO(e,function(e,o){var r;r=function(r,i){n(t(),r,o.event,e)},Sk.getState(e).get().each(function(t){r(t,e)})})}return _(_([],Cr(n,e),!0),[n(pQ,function(t,e,n){e.onAction(t,{name:n.name})})],!1)},Og=function(t,e,n){function o(e,n){return oO(e,function(e,o){var r;r=function(r,i){n(t(),r,o.event,e)},Sk.getState(e).get().each(function(t){r(t.internalDialog,e)})})}return _(_([],Cr(o,e),!0),[o(pZ,function(t,e){return e.onSubmit(t)}),o(pK,function(t,e,n){e.onChange(t,{name:n.name})}),o(pQ,function(t,e,o,r){function i(){return fa.focusIn(r)}function u(t){return t2(t,"disabled")||t1(t,"aria-disabled").exists(function(t){return"true"===t})}var a=eK(r.element),c=iY(a);e.onAction(t,{name:o.name,value:o.value}),iY(a).fold(i,function(t){u(t)||c.exists(function(e){return tV(t,e)&&u(e)})?i():n().toOptional().filter(function(e){return!tV(e.element,t)}).each(i)})}),o(p2,function(t,e,n){e.onTabChange(t,{newTabName:n.name,oldTabName:n.oldName})}),rz(function(e){var n=t();c1.setValue(e,n.getData())})],!1)},Op=tinymce.util.Tools.resolve("tinymce.util.URI"),Oh=["insertContent","setContent","execCommand","close","block","unblock"];k.add("silver",function(t){var e=function(t){function e(){return b.bind(wJ.getHeader)}function n(){return na.value(D)}function o(){return b.bind(function(t){return wJ.getThrobber(t)}).getOrDie("Could not find throbber element")}var i,a,c,f,d=t.inline,p=d?SP:SN,h=gc(t)?wf:we,b=tg.none(),y=eX(),x=y.browser.isIE()?["tox-platform-ie"]:[],k=y.deviceType.isTouch()?["tox-platform-touch"]:[],O=go(t),_=gu(t),T=dI.isRtl()?{attributes:{dir:"rtl"}}:{},E={attributes:((i={})[u3]=O?uB.BottomToTop:uB.TopToBottom,i)},D=r4((a=tP(eZ(),_)&&"grid"===t7(_,"display"),c={dom:C({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(x).concat(k)},T),behaviours:om([cP.config({useFixed:function(){return h.isDocked(e)}})])},f={dom:{styles:{width:document.body.clientWidth+"px"}},events:om([oO(rE(),function(){t4(tv.element,"width",document.body.clientWidth+"px")})])},n4(c,a?f:{}))),B=lz({dom:{tag:"div",classes:["tox-anchorbar"]}}),M=function(t,e,n){var o,r,i,u,a,c,f,d,g,p,h,v=nQ(!1),b={isPositionedAtTop:function(){return"top"===o.get()},getDockingMode:(o=nQ(go(e)?"bottom":"top")).get,setDockingMode:o.set},y={shared:{providers:{icons:function(){return e.ui.registry.getAll().icons},menuItems:function(){return e.ui.registry.getAll().menuItems},translate:dI.translate,isDisabled:function(){return e.mode.isReadOnly()||e.ui.isDisabled()},getSetting:e.getParam.bind(e)},interpreter:function(t){return xK(xq,t,y)},anchors:function(t,e,n){function o(){return tE.fromDom(t.getContentAreaContainer())}var r,i,u,a=gi(t);return{inlineDialog:(u={maxHeightFunction:uL()},function(){return a||!n()?{type:"node",root:tJ(o()),node:tg.from(o()),bubble:uE(12,12,xJ),layouts:{onRtl:function(){return[lF]},onLtr:function(){return[lM]}},overrides:u}:{type:"hotspot",hotspot:e(),bubble:uE(-12,12,xJ),layouts:{onRtl:function(){return[ur]},onLtr:function(){return[ui]}},overrides:u}}),banner:function(){return a||!n()?{type:"node",root:tJ(o()),node:tg.from(o()),layouts:{onRtl:function(){return[fR]},onLtr:function(){return[fR]}}}:{type:"hotspot",hotspot:e(),layouts:{onRtl:function(){return[us]},onLtr:function(){return[us]}}}},cursor:function(){return{type:"selection",root:i(),getSelection:function(){var e=t.selection.getRng();return tg.some(ai.range(tE.fromDom(e.startContainer),e.startOffset,tE.fromDom(e.endContainer),e.endOffset))}}},node:(r=i=function(){return tE.fromDom(t.getBody())},function(t){return{type:"node",root:r(),node:t}})}}(e,n,b.isPositionedAtTop),header:b,getSink:function(){return na.value(t)}},urlinput:{getHistory:yT,addToHistory:yE,getLinkInformation:function(){return!1===e.getParam("typeahead_urls")?tg.none():tg.some({targets:x2(e.getBody()),anchorTop:yM(e.getParam("anchor_top","#top")),anchorBottom:yM(e.getParam("anchor_bottom","#bottom"))})},getValidationHandler:function(){var t;return tg.from(void 0===(t=e.getParam("file_picker_validator_handler",void 0,"function"))?e.getParam("filepicker_validator_handler",void 0,"function"):t)},getUrlPicker:function(t){var n,o,r,i;return n=tg.some(e.getParam("file_picker_types")).filter(yD),o=tg.some(e.getParam("file_browser_callback_types")).filter(yD),r=n.or(o).map(yA),(m(i=yB(e).fold(w,function(t){return r.fold(S,function(t){return 0<tw(t).length&&t})}))?i?yB(e):tg.none():i[t]?yB(e):tg.none()).map(function(n){return function(o){return hc(function(r){var i=C({filetype:t,fieldname:o.fieldname},tg.from(o.meta).getOr({}));n.call(e,function(t,e){if(!s(t))throw Error("Expected value to be string");if(void 0!==e&&!l(e))throw Error("Expected meta to be a object");r({value:t,meta:e})},o.value,i)})}})}},styleselect:(f=nQ([]),d=nQ([]),g=nQ([]),p=nQ([]),h=nQ((c=function(t){var e=t.items;return void 0!==e&&0<e.length?z(e,c):[t.format]},!1)),e.on("PreInit",function(t){var n=yd(e),o=yg(e,n,x,k);f.set(o),d.set(z(o,c))}),e.on("addStyleModifications",function(t){var n=yg(e,t.items,x,k);g.set(n),h.set(t.replace),p.set(z(n,c))}),{getData:function(){var t=h.get()?[]:f.get(),e=g.get();return t.concat(e)},getFlattenedKeys:function(){var t=h.get()?[]:d.get(),e=p.get();return t.concat(e)}}),colorinput:{colorPicker:function(t,e){pp(a)(t,e)},hasCustomColors:function(){return g6(u)},getColors:function(){return g8(i)},getColorCols:(r=i=u=a=e,function(){return g7(r)})},dialog:{isDraggableModal:function(){return e.getParam("draggable_modal",!1,"boolean")}},isContextMenuOpen:function(){return v.get()},setContextMenuState:function(t){return v.set(t)}};function x(t){return function(){return e.formatter.match(t)}}function k(t){return function(){var n=e.formatter.get(t);return void 0!==n?tg.some({tag:0<n.length&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):tg.none()}}return y}(D,t,function(){return b.bind(function(t){return B.getOpt(t)}).getOrDie("Could not find a anchor bar element")}),I=wJ.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:M,onEscape:function(){t.focus()}}),N=ge(t),H=wJ.parts.toolbar(C({dom:{tag:"div",classes:["tox-toolbar"]},getSink:n,providers:M.shared.providers,onEscape:function(){t.focus()},type:N,lazyToolbar:function(){return b.bind(function(t){return wJ.getToolbar(t)}).getOrDie("Could not find more toolbar element")},lazyHeader:function(){return e().getOrDie("Could not find header element")}},E)),U=wJ.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:M.shared.providers,onEscape:function(){t.focus()},type:N}),j=wJ.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),W=wJ.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),G=wJ.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:M}),X=t.getParam("statusbar",!0,"boolean")&&!d?tg.some(function(t,e){var n,o,r,i,u,a,c,s,l;return{dom:{tag:"div",classes:["tox-statusbar"]},components:(l=[],t.getParam("elementpath",!0,"boolean")&&l.push(((s={}).delimiter||(s.delimiter="\xbb"),{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:om([fa.config({mode:"flow",selector:"div[role=button]"}),sE.config({disabled:e.isDisabled}),gf(),pG.config({}),fs.config({}),lg("elementPathEvents",[rL(function(n,o){t.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return fa.focusIn(n)}),t.on("NodeChange",function(o){var r,i,u=function(e){for(var n=[],o=e.length;0<o--;){var r=e[o];if(1===r.nodeType&&!function(t){if(1===t.nodeType&&("BR"===t.nodeName||t.getAttribute("data-mce-bogus")||"bookmark"===t.getAttribute("data-mce-type")))return 1}(r)){var i=t.fire("ResolveName",{name:r.nodeName.toLowerCase(),target:r});if(i.isDefaultPrevented()||n.push({name:i.name,element:r}),i.isPropagationStopped())break}}return n}(o.parents);0<u.length?fs.set(n,(r=F(u||[],function(n,o){return fV.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":o,"tab-index":-1,"aria-level":o+1},innerHtml:n.name},action:function(e){t.focus(),t.selection.select(n.element),t.nodeChanged()},buttonBehaviours:om([gW(e.isDisabled),gf()])})}),i={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+s.delimiter+" "}},P(r.slice(1),function(t,e){return t.push(i),t.push(e),t},[r[0]]))):fs.set(n,[])})})])]),components:[]})),t.hasPlugin("wordcount")&&l.push((a=e,fV.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:om([gW(a.isDisabled),gf(),pG.config({}),fs.config({}),c1.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),lg("wordcount-events",[rj(function(t){var e=c1.getValue(t),n="words"===e.mode?"characters":"words";c1.setValue(t,{mode:n,count:e.count}),f(t,e.count,n)}),rL(function(e){t.on("wordCountUpdate",function(t){var n=c1.getValue(e).mode;c1.setValue(e,{mode:n,count:t.wordCount}),f(e,t.wordCount,n)})})])]),eventOrder:((c={})[rb()]=["disabling","alloy.base.behaviour","wordcount-events"],c)}))),t.getParam("branding",!0,"boolean")&&l.push({dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+(u=dI.translate(["Powered by {0}","Tiny"]))+'">'+u+"</a>"}}),n=0<l.length?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:l}]:[],o=(i=!1===(r=t.getParam("resize",!t.hasPlugin("autoresize")))?kx.None:"both"===r?kx.Both:kx.Vertical)===kx.None?tg.none():tg.some(dM("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:e.translate("Resize")},behaviours:[kz.config({mode:"mouse",repositionTarget:!1,onDrag:function(e,n,o){return kU(t,o,i)},blockerClass:"tox-blocker"}),fa.config({mode:"special",onLeft:function(){return kj(t,i,-1,0)},onRight:function(){return kj(t,i,1,0)},onUp:function(){return kj(t,i,0,-1)},onDown:function(){return kj(t,i,0,1)}}),pG.config({}),fd.config({})]},e.icons)),n.concat(o.toArray()))};function f(t,e,n){return fs.set(t,[oZ(a.translate(["{0} "+n,e[n]]))])}}(t,M.shared.providers)):tg.none(),Y=gt(t),q=m_(t),$=mO(t),Q=wJ.parts.header({dom:C({tag:"div",classes:["tox-editor-header"]},E),components:L([$?[I]:[],Y?[U]:q?[H]:[],gi(t)?[]:[B.asSpec()]]),sticky:gc(t),editor:t,sharedBackstage:M.shared}),tt=L([O?[]:[Q],d?[]:[{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[j,W]}],O?[Q]:[]]),te=L([[{dom:{tag:"div",classes:["tox-editor-container"]},components:tt}],d?[]:X.toArray(),[G]]),to=ga(t),ti=C(C({role:"application"},dI.isRtl()?{dir:"rtl"}:{}),to?{"aria-hidden":"true"}:{}),ta=r4(wJ.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(d?["tox-tinymce-inline"]:[]).concat(O?["tox-tinymce--toolbar-bottom"]:[]).concat(k).concat(x),styles:C({visibility:"hidden"},to?{opacity:"0",border:"0"}:{}),attributes:ti},components:te,behaviours:om([gf(),sE.config({disableClass:"tox-tinymce--disabled"}),fa.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),b=tg.some(ta);t.shortcuts.add("alt+F9","focus menubar",function(){wJ.focusMenubar(ta)}),t.shortcuts.add("alt+F10","focus toolbar",function(){wJ.focusToolbar(ta)}),t.addCommand("ToggleToolbarDrawer",function(){wJ.toggleToolbarDrawer(ta)}),t.addQueryStateHandler("ToggleToolbarDrawer",function(){return wJ.isToolbarDrawerToggled(ta)});var tc,tl,tf,td,tm,tp,th=pM(ta),tv=pM(D);return tl=uC(tc=iW(),"touchstart",tS),tf=uC(tc,"touchmove",function(t){return tb(rO(),t)}),td=uC(tc,"touchend",function(t){return tb(r_(),t)}),tm=uC(tc,"mousedown",tS),tp=uC(tc,"mouseup",function(t){0===t.raw.button&&tx(cY(),{target:t.target})}),t.on("PostRender",function(){t.on("click",tk),t.on("tap",tk),t.on("mouseup",t_),t.on("mousedown",tT),t.on("ScrollWindow",tD),t.on("ResizeWindow",tA),t.on("ResizeEditor",tM),t.on("AfterProgressState",tF),t.on("DismissPopups",tI)}),t.on("remove",function(){t.off("click",tk),t.off("tap",tk),t.off("mouseup",t_),t.off("mousedown",tT),t.off("ScrollWindow",tD),t.off("ResizeWindow",tA),t.off("ResizeEditor",tM),t.off("AfterProgressState",tF),t.off("DismissPopups",tI),tm.unbind(),tl.unbind(),tf.unbind(),td.unbind(),tp.unbind()}),t.on("detach",function(){a_(th),a_(tv),th.destroy(),tv.destroy()}),{mothership:th,uiMothership:tv,backstage:M,renderUI:function(){h.setup(t,M.shared,e),ty([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],function(e){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onAction:xk(t,e.cmd),onSetup:xx(t,e.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:xk(t,"JustifyNone")}),function(t){bO.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(e,n){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onSetup:xx(t,e.name),onAction:S$(t,e.name)})});for(var e=1;e<=6;e++){var n="h"+e;t.ui.registry.addToggleButton(n,{text:n.toUpperCase(),tooltip:"Heading "+e,onSetup:xx(t,n),onAction:S$(t,n)})}}(t),bO.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(e){t.ui.registry.addButton(e.name,{tooltip:e.text,icon:e.icon,onAction:xk(t,e.action)})}),bO.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(e){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onAction:xk(t,e.action),onSetup:xx(t,e.name)})}),bO.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(e){t.ui.registry.addMenuItem(e.name,{text:e.text,icon:e.icon,shortcut:e.shortcut,onAction:xk(t,e.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:S$(t,"code")}),k=xC(0,M,w1(t)),t.ui.registry.addNestedMenuItem("align",{text:M.shared.providers.translate("Align"),getSubmenuItems:function(){return k.items.validateItems(k.getStyleItems())}}),b=xC(0,M,w5(t)),t.ui.registry.addNestedMenuItem("fontformats",{text:M.shared.providers.translate("Fonts"),getSubmenuItems:function(){return b.items.validateItems(b.getStyleItems())}}),y=C({type:"advanced"},M.styleselect),x=xC(0,M,w6(t,y)),t.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return x.items.validateItems(x.getStyleItems())}}),w=xC(0,M,w4(t)),t.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return w.items.validateItems(w.getStyleItems())}}),S=xC(0,M,w3(t)),t.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return S.items.validateItems(S.getStyleItems())}}),t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:SQ(t,"hasUndo"),onAction:xk(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:SQ(t,"hasRedo"),onAction:xk(t,"redo")}),t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",disabled:!0,onSetup:SQ(t,"hasUndo"),onAction:xk(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",disabled:!0,onSetup:SQ(t,"hasRedo"),onAction:xk(t,"redo")}),t.addCommand("mceApplyTextcolor",function(e,n){t.undoManager.transact(function(){t.focus(),t.formatter.apply(e,{value:n}),t.nodeChanged()})}),t.addCommand("mceRemoveTextcolor",function(e){t.undoManager.transact(function(){t.focus(),t.formatter.remove(e,{value:null},null,!0),t.nodeChanged()})}),i=nQ(pg),a=nQ(pg),pi(t,"forecolor","forecolor","Text color",i),pi(t,"backcolor","hilitecolor","Background color",a),pu(t,"forecolor","forecolor","Text color"),pu(t,"backcolor","hilitecolor","Background color"),t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:xk(t,"mceToggleVisualAid")}),t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:xw(t,"VisualAid",function(e){e.setActive(t.hasVisual)}),onAction:xk(t,"mceToggleVisualAid")}),t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:xw(t,"NodeChange",function(e){e.setDisabled(!t.queryCommandState("outdent"))}),onAction:xk(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:xk(t,"indent")}),SJ(t,kS),tg.from(t.getParam("content_langs",void 0,"array")).map(function(e){return{name:"language",text:"Language",icon:"language",getOptions:u(e),hash:function(t){return g(t.customCode)?t.code:t.code+"/"+t.customCode},display:function(t){return t.title},watcher:function(t,e,n){return t.formatter.formatChanged("lang",n,!1,{value:e.code,customValue:e.customCode}).unbind},getCurrent:function(t){return op(tE.fromDom(t.selection.getNode()),function(t){return tg.some(t).filter(eA).bind(function(t){return t1(t,"lang").map(function(e){return{code:e,customCode:t1(t,"data-mce-lang").getOrUndefined(),title:""}})})})},setCurrent:function(t,e){return t.execCommand("Lang",!1,e)},onToolbarSetup:function(e){var n=uS();return e.setActive(t.formatter.match("lang",{},void 0,!0)),n.set(t.formatter.formatChanged("lang",e.setActive,!0)),n.clear}}}).each(function(e){return SJ(t,e)}),function(t,e,n){function o(t){return fF.hide(u)}function r(e){var o;S5(t)&&e.preventDefault(),e.ctrlKey&&!S5(t)||!1===t.getParam("contextmenu")||(o=function(t,e){var n=t.getParam("contextmenu_avoid_overlap","","string"),o=S4(t,e)?"selection":"point";if(ts(n)){var r=S6(t,e);return p_(tE.fromDom(r),n)?"node":o}return o}(t,e),(i()?function(t,e,n,o,r,i){function u(){var u,a,c,m=n();u=!(f||s||l&&d),a=S1(t,e,i),c=C({bubble:uE(0,"point"===i?12:0,kO),layouts:kC,overrides:{maxWidthFunction:wM(),maxHeightFunction:uL()}},a),vF(m,dK.CLOSE_ON_EXECUTE,o,!0).map(function(n){e.preventDefault(),fF.showMenuWithinBounds(r,{anchor:c},{menu:{markers:ms("normal"),highlightImmediately:u},data:n,type:"horizontal"},function(){return tg.some(Sm(t,o.shared,"node"===i?"node":"selection"))}),t.fire(SV)})}var a,c=eX(),s=c.os.isiOS(),l=c.os.isOSX(),f=c.os.isAndroid(),d=c.deviceType.isTouch();(l||s)&&"node"!==i?(a=function(){(function(t){function e(){fP.setEditorTimeout(t,function(){t.selection.setRng(n)},10),i()}var n=t.selection.getRng();function o(t){t.preventDefault(),t.stopImmediatePropagation()}function r(){return i()}t.once("touchend",e),t.on("mousedown",o,!0),t.once("longpresscancel",r);var i=function(){t.off("touchend",e),t.off("longpresscancel",r),t.off("mousedown",o)}})(t),u()},function(t,e){var n=t.selection;if(!(n.isCollapsed()||e.touches.length<1)){var o=e.touches[0],r=n.getRng();return af(t.getWin(),ai.domRange(r)).exists(function(t){return t.left<=o.clientX&&t.right>=o.clientX&&t.top<=o.clientY&&t.bottom>=o.clientY})}}(t,e)?a():(t.once("selectionchange",a),t.once("touchend",function(){return t.off("selectionchange",a)}))):u()}:function(t,e,n,o,r,i){var u=n(),a=S1(t,e,i);vF(u,dK.CLOSE_ON_EXECUTE,o,!1).map(function(t){e.preventDefault(),fF.showMenuAt(r,{anchor:a},{menu:{markers:ms("normal")},data:t})})})(t,e,function(){var n,o,r=S6(t,e),i=t.ui.registry.getAll(),u=(o=t.ui.registry.getAll().contextMenus,tg.from(t.getParam("contextmenu")).map(S2).getOrThunk(function(){return R(S2("link linkchecker image imagetools table spellchecker configurepermanentpen"),function(t){return tC(o,t)})})),a=i.contextMenus;return 0<(n=P(u,function(t,e){return tn(a,e.toLowerCase()).map(function(e){var n=e.update(r);return s(n)?S9(t,n.split(" ")):0<n.length?S9(t,F(n,kT)):t}).getOrThunk(function(){return t.concat([e])})},[])).length&&S3(n[n.length-1])&&n.pop(),n},n,u,o))}var i=eX().deviceType.isTouch,u=r4(fF.sketch({dom:{tag:"div"},lazySink:e,onEscape:function(){return t.focus()},onShow:function(){return n.setContextMenuState(!0)},onHide:function(){return n.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:om([lg("dismissContextMenu",[oO(rB(),function(e,n){cW.close(e),t.focus()})])])}));t.on("init",function(){var e="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(i()?"":" ResizeWindow");t.on(e,o),t.on("longpress contextmenu",r)})}(t,n,M),ty(tw(O=t.ui.registry.getAll().sidebars),function(e){function n(){return tr(tg.from(t.queryCommandValue("ToggleSidebar")),e)}var o=O[e];t.ui.registry.addToggleButton(e,{icon:o.icon,tooltip:o.tooltip,onAction:function(o){t.execCommand("ToggleSidebar",!1,e),o.setActive(n())},onSetup:function(e){function o(){return e.setActive(n())}return t.on("ToggleSidebar",o),function(){t.off("ToggleSidebar",o)}}})}),function(t,e,n){function o(n){!r.get()||"focusin"===n.type&&(n.composed?K(n.composedPath()):tg.from(n.target)).map(tE.fromDom).filter(eA).exists(function(t){return oq(t,"mce-pastebin")})||(n.preventDefault(),y8(e()),t.editorManager.setActive(t))}var r=nQ(!1),i=uk();function u(o){var i,u,a,c,s,l;o!==r.get()&&(r.set(o),i=e(),u=n.providers,s=i.element,l="data-mce-"+(a="tabindex"),tg.from(t.iframeElement).map(tE.fromDom).each(function(t){o?(t1(t,a).each(function(e){return tQ(t,l,e)}),tQ(t,a,-1)):(t5(t,a),t1(t,l).each(function(e){tQ(t,a,e),t5(t,l)}))}),o?(wE.block(i,function(t,e){return{dom:{tag:"div",attributes:{"aria-label":u.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:lL('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}}),en(s,"display"),t5(s,"aria-hidden"),t.hasFocus()&&y8(i)):(c=sS.getCurrent(i).exists(function(t){return iX(t.element)}),wE.unblock(i),t4(s,"display","none"),tQ(s,"aria-hidden","true"),c&&t.focus()),t.fire("AfterProgressState",{state:o}))}t.inline||t.on("PreInit",function(){t.dom.bind(t.getWin(),"focusin",o),t.on("BeforeExecCommand",function(t){"mcefocus"===t.command.toLowerCase()&&!0!==t.value&&o(t)})}),t.on("ProgressState",function(e){var n;i.on(fP.clearTimeout),v(e.time)?(n=fP.setEditorTimeout(t,function(){return u(e.state)},e.time),i.set(n)):(u(e.state),i.clear())})}(t,o,M.shared),Z(t.getParam("toolbar_groups",{},"object"),function(e,n){t.ui.registry.addGroupToolbarButton(n,e)});var i,a,c,l,f,d,m,b,y,x,w,S,k,O,_,T=t.ui.registry.getAll(),E=T.buttons,B=T.menuItems,I=T.contextToolbars,H=T.sidebars,z=mT(t),U={menuItems:B,menus:(_=t.getParam("menu"))?Z(_,function(t){return C(C({},t),{items:t.items})}):{},menubar:t.getParam("menubar"),toolbar:z.getOrThunk(function(){return t.getParam("toolbar",!0)}),allowToolbarGroups:N===mE.floating,buttons:E,sidebar:H};(function(t,e,n,o){function i(){var e=y.get().getOr("node");return Sm(t,p,e,"node"===e?1:0)}function u(){return!(t.removed||h()&&g.isContextMenuOpen())}function a(){if(u()){var e=i(),n=tr(y.get(),"node")?v.get().filter(eQ).map(eC).getOrThunk(function(){return Sd(t)}):Sd(t);return e.height<=0||!Sf(n,e)}return 1}function c(){v.clear(),b.clear(),y.clear(),fF.hide(x)}function s(){var t;fF.isOpen(x)&&(en(t=x.element,"display"),a()?t4(t,"display","none"):(b.set(0),fF.reposition(x)))}function l(e){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[e],behaviours:om([fa.config({mode:"acyclic"}),lg("pop-dialog-wrap-events",[rL(function(e){t.shortcuts.add("ctrl+F9","focus statusbar",function(){return fa.focusIn(e)})}),rz(function(e){t.shortcuts.remove("ctrl+F9")})])])}}function f(e,o){var r,c,s,f;k.cancel(),u()&&(r=S(e),s=function(e,o){var r,i,u,a,c;function s(t){return"node"===c?[function(e,n,o,r,i){var c,s,l,f,d,m,g,p,h,v=(c=u,s=a,l=Sd(c),f=s.lastElement().exists(function(e){return tP(t,e)}),d=c.selection.getRng(),m=tq(tE.fromDom(d.startContainer),d.startOffset),d.startContainer===d.endContainer&&d.startOffset===d.endOffset-1&&tP(m.element,t)?f?lP:fR:f?(g=s.getMode(),p=et(r,"position"),t4(r,"position",g),h=Sf(l,no(r))&&!s.isReposition()?lH:lP,p.each(function(t){return t4(r,"position",t)}),h):("fixed"===s.getMode()?i.y+ey().top:i.y)+(ei(r)+12)<=l.y?fR:fN),b=C(C({},e),{y:i.y,height:i.height});return C(C({},v(b,n,o,r,i)),{alwaysFit:!0})}]:[]}return n4("node"===e?p.anchors.node(o):p.anchors.cursor(),(r=h(),i={lastElement:v.get,isReposition:function(){return tr(b.get(),0)},getMode:function(){return cP.getMode(n)}},"line"===e?{bubble:uE(12,0,SL),layouts:{onLtr:function(){return[iM]},onRtl:function(){return[iF]}},overrides:Sz}:{bubble:uE(0,12,SL,1/12),layouts:(u=t,a=i,c=e,r?{onLtr:function(t){return[us,ur,ui,uu,ua,uc].concat(s(t))},onRtl:function(t){return[us,ui,ur,ua,uu,uc].concat(s(t))}}:{onLtr:function(t){return[uc,us,uu,ur,ua,ui].concat(s(t))},onRtl:function(t){return[uc,us,ua,ui,uu,ur].concat(s(t))}}),overrides:Sz}))}(c=e[0].position,o),y.set(c),b.set(1),en(f=x.element,"display"),tr(tO(o,v.get(),tP),!0)||(oY(f,SX),cP.reset(n,x)),fF.showWithinBounds(x,l(r),{anchor:s,transition:{classes:[SX],mode:"placement"}},function(){return tg.some(i())}),o.fold(v.clear,v.set),a()&&t4(f,"display","none"))}var d,m,g=o.backstage,p=g.shared,h=eX().deviceType.isTouch,v=uk(),b=uk(),y=uk(),x=r4((d={sink:n,onEscape:function(){return t.focus(),tg.some(!0)}},m=nQ([]),fF.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(t){m.set([]),fF.getContent(t).each(function(t){en(t.element,"visibility")}),oY(t.element,SG),en(t.element,"width")},inlineBehaviours:om([lg("context-toolbar-events",[oT(rl())(function(t,e){"width"===e.event.raw.propertyName&&(oY(t.element,SG),en(t.element,"width"))}),oO(SW,function(t,e){var n=t.element;en(n,"width");var o=es(n);fF.setContent(t,e.event.contents),oX(n,SG);var r=es(n);t4(n,"width",o+"px"),fF.getContent(t).each(function(t){e.event.focus.bind(function(t){return iG(t),iq(n)}).orThunk(function(){return fa.focusIn(t),iY(eK(n))})}),fP.setTimeout(function(){t4(t.element,"width",r+"px")},0)}),oO(SU,function(t,e){fF.getContent(t).each(function(e){m.set(m.get().concat([{bar:e,focus:iY(eK(t.element))}]))}),ox(t,SW,{contents:e.event.forwardContents,focus:tg.none()})}),oO(Sj,function(t,e){J(m.get()).each(function(e){m.set(m.get().slice(0,m.get().length-1)),ox(t,SW,{contents:oV(e.bar),focus:e.focus})})})]),fa.config({mode:"special",onEscape:function(t){return J(m.get()).fold(function(){return d.onEscape()},function(e){return oy(t,Sj),tg.some(!0)})}})]),lazySink:function(){return na.value(d.sink)}}))),w=tB(function(){var t,n,o,r,i,u;return t=function(t){ox(x,SU,{forwardContents:l(S([t]))})},n={},o=[],r=[],i={},u={},ty(tw(e),function(a){var c,s=e[a];"contextform"===s.type?((n[a]=c=nB(nA("ContextForm",mi,s))).launch.map(function(e){i["form:"+a]=C(C({},s.launch),{type:"contextformtogglebutton"===e.type?"togglebutton":"button",onAction:function(){t(c)}})}),("editor"===c.scope?r:o).push(c),u[a]=c):"contexttoolbar"===s.type&&nA("ContextToolbar",mu,s).each(function(t){("editor"===s.scope?r:o).push(t),u[a]=t})}),{forms:n,inNodeScope:o,inEditorScope:r,lookupTable:u,formNavigators:i}}),S=function(e){var n=t.ui.registry.getAll().buttons,r=w(),i=C(C({},n),r.formNavigators),u=ge(t)===mE.scrolling?mE.scrolling:mE.default,a=L(F(e,function(e){return"contexttoolbar"===e.type?SF(t,{buttons:i,toolbar:e.items,allowToolbarGroups:!1},o,tg.some(["form:"])):SH(e,p.providers)}));return xg({type:u,uid:oI("context-toolbar"),initGroups:a,onEscape:tg.none,cyclicKeying:!0,providers:p.providers})},k=dH(function(){t.hasFocus()&&!t.removed&&(oq(x.element,SX)?k.throttle():(function(t,e){function n(t){return tP(t,o)}var o=tE.fromDom(e.getBody()),r=tE.fromDom(e.selection.getNode());return n(r)||tV(o,r)?(function(t,e,n){var o=Sg(t,e);if(0<o.contextForms.length)return tg.some({elem:t,toolbars:[o.contextForms[0]]});var r=Sg(t,n);if(0<r.contextForms.length)return tg.some({elem:t,toolbars:[r.contextForms[0]]});if(0<o.contextToolbars.length||0<r.contextToolbars.length){var i=function(t){if(t.length<=1)return t;function e(e){return A(t,function(t){return t.position===e})}function n(e){return R(t,function(t){return t.position===e})}var o=e("selection"),r=e("node");if(o||r){if(r&&o){var i=n("node"),u=F(n("selection"),function(t){return C(C({},t),{position:"node"})});return i.concat(u)}return n(o?"selection":"node")}return n("line")}(o.contextToolbars.concat(r.contextToolbars));return tg.some({elem:t,toolbars:i})}return tg.none()})(r,t.inNodeScope,t.inEditorScope).orThunk(function(){return n(r)?tg.none():og(r,function(e){if(eA(e)){var n,o=Sg(e,t.inNodeScope),r=o.contextToolbars,i=o.contextForms,u=0<i.length?i:(n=r).length<=1?n:a("selection").orThunk(function(){return a("node")}).orThunk(function(){return a("line")}).map(function(t){return t.position}).fold(function(){return[]},function(t){return R(n,function(e){return e.position===t})});return 0<u.length?tg.some({elem:e,toolbars:u}):tg.none()}function a(t){return V(n,function(e){return e.position===t})}return tg.none()},n)}):tg.none()})(w(),t).fold(c,function(t){f(t.toolbars,tg.some(t.elem))}))},17);t.on("init",function(){t.on("remove",c),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",s),t.on("click keyup focus SetContent",k.throttle),t.on(SV,c),t.on("contexttoolbar-show",function(e){tn(w().lookupTable,e.toolbarKey).each(function(n){f([n],tu(e.target!==t,e.target)),fF.getContent(x).each(fa.focusIn)})}),t.on("focusout",function(e){fP.setEditorTimeout(t,function(){iq(n.element).isNone()&&iq(x.element).isNone()&&c()},0)}),t.on("SwitchMode",function(){t.mode.isReadOnly()&&c()}),t.on("AfterProgressState",function(e){e.state?c():t.hasFocus()&&k.throttle()}),t.on("NodeChange",function(t){iq(x.element).fold(k.throttle,r)})})})(t,I,D,{backstage:M}),function(t,e){function n(t){var n=eC(t);return kv(g.getOpt(e),t,n.x,n.y,n.width,n.height)}function o(t){var n=eC(t);return kv(p.getOpt(e),t,n.right,n.bottom,n.width,n.height)}function r(e,n,o,r){var i,u=o(n);kz.snapTo(e,u),i=n.dom.getBoundingClientRect(),en(e.element,"display"),(i[r]<0||i[r]>tU(tE.fromDom(t.getBody())).dom.innerHeight)&&t4(e.element,"display","none")}function i(t){return r(h,t,n,"top")}function u(t){return r(v,t,o,"bottom")}var a=nQ([]),c=nQ([]),s=nQ(!1),l=uk(),f=uk(),d=kb(function(){return F(a.get(),n)},l,function(e){f.get().each(function(n){t.fire("TableSelectorChange",{start:e,finish:n})})}),m=kb(function(){return F(c.get(),o)},f,function(e){l.get().each(function(n){t.fire("TableSelectorChange",{start:n,finish:e})})}),g=ky(d),p=ky(m),h=r4(g.asSpec()),v=r4(p.asSpec());eX().deviceType.isTouch()&&(t.on("TableSelectionChange",function(t){s.get()||(cL(e,h,e8),cL(e,v,e8),s.set(!0)),l.set(t.start),f.set(t.finish),t.otherCells.each(function(e){a.set(e.upOrLeftCells),c.set(e.downOrRightCells),i(t.start),u(t.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",function(){l.get().each(i),f.get().each(u)}),t.on("TableSelectionClear",function(){s.get()&&(aC(h),aC(v),s.set(!1)),l.clear(),f.clear()}))}(t,D);var j=t.getElement(),W=(d=Su((c=my(t),l=mS(t),f=mC(t),Si(c).map(function(t){return Sa(t,l,f)}).getOr(my(t)))),m=Su(Sc(t).getOr(mx(t))),t.inline||(ee("div","width",m)&&t4(ta.element,"width",m),ee("div","height",d)?t4(ta.element,"height",d):t4(ta.element,"height","200px")),d);return p.render(t,{mothership:th,uiMothership:tv,outerContainer:ta},U,M,{targetNode:j,height:W})},getUi:function(){return{channels:{broadcastAll:tv.broadcast,broadcastOn:tv.broadcastOn,register:r}}}};function tb(t,e){ty([th,tv],function(n){n.broadcastEvent(t,e)})}function tx(t,e){ty([th,tv],function(n){n.broadcastOn([t],e)})}function tS(t){return tx(cG(),{target:t.target})}function tk(t){return tx(cG(),{target:tE.fromDom(t.target)})}function t_(t){0===t.button&&tx(cY(),{target:tE.fromDom(t.target)})}function tT(){ty(t.editorManager.get(),function(e){t!==e&&e.fire("DismissPopups",{relatedTarget:t})})}function tD(t){return tb(rT(),ef(t))}function tA(t){tx(cX(),{}),tb(rE(),ef(t))}function tM(){return tx(cX(),{})}function tF(e){e.state&&tx(cG(),{target:tE.fromDom(t.getContainer())})}function tI(t){tx(cG(),{target:tE.fromDom(t.relatedTarget.getContainer())})}}(t),n=e.uiMothership,o=e.backstage,i=e.renderUI,c=e.getUi;return function(t,e){function n(){return i.get().isSome()}function o(){n()&&fF.hide(s)}var i=uk(),c=nQ(!1),s=r4(fF.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:om([lg("dismissAutocompleter",[oO(rB(),function(){return l()})])]),lazySink:e.getSink})),l=function(){n()&&(dQ(i.get().map(function(t){return t.element}).getOr(tE.fromDom(t.selection.getNode()))).each(eb),o(),i.clear(),c.set(!1))},f=tB(function(){var e,n,o,r,i;return e=tt(o=Z(t.ui.registry.getAll().popups,function(t){return nA("Autocompleter",d3,t).fold(function(t){throw Error(os(t))},a)}),function(t){return t.ch}),n={},ty(e,function(t){n[t]={}}),r=tw(n),i=tt(o,a),{dataset:o,triggerChars:r,lookupByChar:function(t){return R(i,function(e){return e.ch===t})}}}),d=function(a){i.get().map(function(e){return dW(t.dom,t.selection.getRng(),e.triggerChar).bind(function(e){return dq(t,f,e,a)})}).getOrThunk(function(){var e,n,o;return e=f(),n=t.selection.getRng(),o=t.dom,$(e.triggerChars,function(t){return dW(o,n,t)}).bind(function(e){return dq(t,f,e)})}).fold(l,function(a){var f,m,g=a.context;n()||(f=g.range,m=dQ(tE.fromDom(t.selection.getNode())).getOrThunk(function(){var e,n=tE.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());return e8(n,tE.fromDom(f.extractContents())),f.insertNode(n.dom),tj(n).each(function(t){return t.dom.normalize()}),(e=function(t){for(var n=tG(t),o=n.length-1;0<=o;o--){var r=n[o];if(aa(r).filter(function(t){return 0!==t.trim().length||-1<t.indexOf("\xa0")}).isSome()||tb(cD,tD(r)))return tg.some(r);var i=e(r);if(i.isSome())return i}return tg.none()})(n).map(function(e){t.selection.setCursorLocation(e.dom,"img"===tD(e)?1:aa(e).fold(function(){return tG(e).length},function(t){return t.length}))}),n}),i.set({triggerChar:g.triggerChar,element:m,matchLength:g.text.length}),c.set(!1)),a.lookupData.then(function(n){i.get().map(function(i){var f,m,g,p,h,v,b,y=a.context;i.triggerChar===y.triggerChar&&(0<(b=z(n,function(i){var a,s,f,m,g,p,h,v;return a=i.items,s=i.matchText,f=function(e,n){var r=t.selection.getRng();dW(t.dom,r,y.triggerChar).fold(function(){return console.error("Lost context. Cursor probably moved")},function(t){var r=t.range;c.set(!0),i.onAction({hide:function(){l()},reload:function(t){o(),d(t)}},r,e,n),c.set(!1)})},m=$(n,function(t){return tg.from(t.columns)}).getOr(1),g=dK.BUBBLE_TO_SANDBOX,p=i.highlightOn,v=!(h=1===m)||mg(a),ti(F(a,function(t){switch(t.type){case"separator":return nA("Autocompleter.Separator",d2,t).fold(mp,function(t){return tg.some(px(t))});case"cardmenuitem":return nA("cardmenuitem",mq,t).fold(mp,function(t){var n,o,r;return tg.some((n=C(C({},t),{onAction:function(e){t.onAction(e),f(t.value,t.meta)}}),o={itemBehaviours:gO(t.meta,e),cardText:{matchText:s,highlightOn:p}},r={dom:gk(n.label),optComponents:[tg.some({dom:{tag:"div",classes:[mL,mz]},components:gK(n.items,o)})]},gp({data:gh(C({text:tg.none()},n)),disabled:n.disabled,getApi:function(t){return{isDisabled:function(){return sE.isDisabled(t)},setDisabled:function(e){sE.set(t,e),ty(ac(t.element,"*"),function(n){t.getSystem().getByDom(n).each(function(t){t.hasConfigured(sE)&&sE.set(t,e)})})}}},onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:tg.from(o.itemBehaviours).getOr([])},r,g,e.providers)))});default:return nA("Autocompleter.Item",d5,t).fold(mp,function(t){var n,o;return tg.some((void 0===(n=v)&&(n=!0),o=gC({presets:"normal",textContent:tg.none(),htmlContent:h?t.text.map(function(t){return g_(t,s)}):tg.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:tg.none(),checkMark:tg.none(),caret:tg.none(),value:t.value},e.providers,n,t.icon),gp({data:gh(t),disabled:t.disabled,getApi:u({}),onAction:function(e){return f(t.value,t.meta)},onSetup:u(r),triggersSubmenu:!1,itemBehaviours:gO(t.meta,e)},o,g,e.providers)))})}}))})).length?(i.matchLength=y.text.length,v=$(n,function(t){return tg.from(t.columns)}).getOr(1),fF.showAt(s,fE.sketch((f=mh("autocompleter-value",!0,b,v,"normal"),g=((m=ps.ContentFocus)===ps.ContentFocus?cv:ch)(),p=pc(v,"normal"),h=ms("normal"),{dom:f.dom,components:f.components,items:f.items,value:f.value,markers:{selectedItem:h.selectedItem,item:h.item},movement:p,fakeFocus:m===ps.ContentFocus,focusManager:g,menuBehaviours:m1("auto"!==v?[]:[rL(function(t,e){mv(t,4,h.item).each(function(e){var n=e.numColumns,o=e.numRows;fa.setGridSize(t,o,n)})})])})),{anchor:{type:"node",root:tE.fromDom(t.getBody()),node:tg.from(i.element)}}),fF.getContent(s).each(sA.highlightFirst)):(10<=y.text.length-i.matchLength?l:o)())})})})},m={onKeypress:dH(function(t){27!==t.which&&d()},50),cancelIfNecessary:l,isMenuOpen:function(){return fF.isOpen(s)},isActive:n,isProcessingAction:c.get,getView:function(){return fF.getContent(s)}};function g(t,e){ox(t,rr(),{raw:e})}!1===t.hasPlugin("rtc")&&(t.on("keypress compositionend",m.onKeypress.throttle),t.on("remove",m.onKeypress.cancel),t.on("keydown",function(t){function e(){return m.getView().bind(sA.getHighlighted)}8===t.which&&m.onKeypress.throttle(t),m.isActive()&&(27===t.which&&m.cancelIfNecessary(),m.isMenuOpen()?13===t.which?(e().each(ow),t.preventDefault()):40===t.which?(e().fold(function(){m.getView().each(sA.highlightFirst)},function(e){g(e,t)}),t.preventDefault(),t.stopImmediatePropagation()):37!==t.which&&38!==t.which&&39!==t.which||e().each(function(e){g(e,t),t.preventDefault(),t.stopImmediatePropagation()}):13!==t.which&&38!==t.which&&40!==t.which||m.cancelIfNecessary())}),t.on("NodeChange",function(t){m.isActive()&&!m.isProcessingAction()&&dQ(tE.fromDom(t.element)).isNone()&&m.cancelIfNecessary()}))}(t,o.shared),{renderUI:i,getWindowManagerImpl:u(function(t){function e(t,e,n,o){return C4.open(function(t,c,s){function l(){return A.on(function(t){fF.reposition(t),wu.refresh(t)})}var f,d,m,g,p,h,v,b,y,x,w,S,k,O,T,E,D=nB(nA("data",s,c)),A=uk(),B=r.shared.header.isPositionedAtTop(),M=(f={dataValidator:s,initialData:D,internalDialog:t},d={redial:C4.redial,closeWindow:function(){A.on(fF.hide),i.off("ResizeEditor",l),A.clear(),n(M.instanceApi)}},v=oI("dialog-label"),b=oI("dialog-content"),y=lz((p={title:f.internalDialog.title,draggable:!0},h=r.shared.providers,pL.sketch({dom:lL('<div class="tox-dialog__header"></div>'),components:[k4(p,tg.some(v),h),k6(),k9(h)],containerBehaviours:om([kz.config({mode:"mouse",blockerClass:"blocker",getTarget:function(t){return ir(t,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),x=lz(k$({body:f.internalDialog.body},tg.some(b),r,o)),S=Co(w=Cn(f.internalDialog.buttons)),k=lz(Cu({buttons:w},r)),O=Og(function(){return E},{onBlock:function(t){wE.block(T,function(e,n){return k7(t.message,n,r.shared.providers)})},onUnblock:function(){wE.unblock(T)},onClose:function(){return d.closeWindow()}},r.shared.getSink),E=Cs({getRoot:u(T=r4({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:((m={role:"dialog"})["aria-labelledby"]=v,m["aria-describedby"]=b,m)},eventOrder:((g={})[rv()]=[Sk.name(),uh.name()],g[rb()]=["execute-on-form"],g[rD()]=["reflecting","execute-on-form"],g),behaviours:om([fa.config({mode:"cyclic",onEscape:function(t){return oy(t,pJ),tg.some(!0)},useTabstopAt:function(t){return!va(t)&&("button"!==tD(t)||"disabled"!==t0(t,"disabled"))}}),Sk.config({channel:Oa,updateState:function(t,e){return tg.some(e)},initialData:f}),fd.config({}),lg("execute-on-form",O.concat([oT(rn())(function(t,e){fa.focusIn(t)})])),wE.config({getRoot:function(){return tg.some(T)}}),fs.config({}),bE({})]),components:[y.asSpec(),x.asSpec(),k.asSpec()]})),getFooter:function(){return k.get(T)},getBody:function(){return x.get(T)},getFormWrapper:function(){var t=x.get(T);return sS.getCurrent(t).getOr(t)}},d.redial,S),{dialog:T,instanceApi:E}),F=r4(fF.sketch(C(C({lazySink:r.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},B?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:om(_([lg("window-manager-inline-events",[oO(rB(),function(t,e){oy(M.dialog,p$)})])],a&&B?[]:[wu.config({contextual:{lazyContext:function(){return tg.some(no(tE.fromDom(i.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})],!0)),isExtraPart:function(t,e){return p_(e,".tox-alert-dialog")||p_(e,".tox-confirm-dialog")}})));return A.set(F),fF.showWithin(F,oV(M.dialog),{anchor:e},tg.some(eZ())),a&&B||(wu.refresh(F),i.on("ResizeEditor",l)),M.instanceApi.setData(D),fa.focusIn(M.dialog),M.instanceApi},t)}var n,o,r=t.backstage,i=t.editor,a=gc(i),c=(n=t.backstage.shared,{open:function(e,o){function r(){Cp.hide(u),o()}var i=lz(vU({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:tg.none()},"cancel",t.backstage)),u=r4(k3({lazySink:function(){return n.getSink()},header:kQ(k0(),kZ(r,n.providers)),body:k1(e,n.providers),footer:tg.some(k2(k5([],[i.asSpec()]))),onEscape:r,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[oO(p$,r)],eventOrder:{}}));Cp.show(u);var a=i.get(u);fd.focus(a)}}),f=(o=t.backstage.shared,{open:function(e,n){function r(t){Cp.hide(a),n(t)}var i=lz(vU({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:tg.none()},"submit",t.backstage)),u=vU({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:tg.none()},"cancel",t.backstage),a=r4(k3({lazySink:function(){return o.getSink()},header:kQ(k0(),kZ(function(){return r(!1)},o.providers)),body:k1(e,o.providers),footer:tg.some(k2(k5([],[u,i.asSpec()]))),onEscape:function(){return r(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[oO(p$,function(){return r(!1)}),oO(pZ,function(){return r(!0)})],eventOrder:{}}));Cp.show(a);var c=i.get(a);fd.focus(c)}});return{open:function(t,n,o){return void 0!==n&&"toolbar"===n.inline?e(t,r.shared.anchors.inlineDialog(),o,n.ariaAttrs):void 0!==n&&"cursor"===n.inline?e(t,r.shared.anchors.cursor(),o,n.ariaAttrs):C4.open(function(t,e,n){var i,a,c,s,l,f,d,m,g,p,h,v,b=(a={redial:C4.redial,closeWindow:function(){Cp.hide(b.dialog),o(b.instanceApi)}},s=k8((i={dataValidator:n,initialData:e,internalDialog:t}).internalDialog.title,r),c=k$({body:i.internalDialog.body},tg.none(),r,!1),l=Cp.parts.body(c),d=Co(f=Cn(i.internalDialog.buttons)),m=Ca({buttons:f},r),g=Og(function(){return v},Ct(function(){return h},r.shared.providers,a),r.shared.getSink),p=function(){switch(i.internalDialog.size){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}}(),v=Cs({getRoot:u(h=Ce({header:s,body:l,footer:tg.some(m),extraClasses:p,extraBehaviours:[],extraStyles:{}},i,g,r)),getBody:function(){return Cp.getBody(h)},getFooter:function(){return Cp.getFooter(h)},getFormWrapper:function(){var t=Cp.getBody(h);return sS.getCurrent(t).getOr(t)}},a.redial,d),{dialog:h,instanceApi:v});return Cp.show(b.dialog),b.instanceApi.setData(e),b.instanceApi},t)},openUrl:function(t,e){return C4.openUrl(function(t){var n=function(t,e,n,o){var r,i,u,a=k8(t.title,o),c=(i={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[vr({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:om([pG.config({}),fd.config({})])})]}],behaviours:om([fa.config({mode:"acyclic",useTabstopAt:y(va)})])},Cp.parts.body(i)),f=t.buttons.bind(function(t){return 0===t.length?tg.none():tg.some(Ca({buttons:t},o))}),d=Om(function(){return w},Ct(function(){return x},o.shared.providers,e)),g=C(C({},t.height.fold(function(){return{}},function(t){return{height:t+"px","max-height":t+"px"}})),t.width.fold(function(){return{}},function(t){return{width:t+"px","max-width":t+"px"}})),p=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],h=new Op(t.url,{base_uri:new Op(window.location.href)}),v=h.protocol+"://"+h.host+(h.port?":"+h.port:""),b=uS(),x=Ce({header:a,body:c,footer:f,extraClasses:p,extraBehaviours:[lg("messages",[rL(function(){var e=uC(tE.fromDom(window),"message",function(e){var o;h.isSameOrigin(new Op(e.raw.origin))&&(Cl(o=e.raw.data)?function(t,e,n){switch(n.mceAction){case"insertContent":t.insertContent(n.content);break;case"setContent":t.setContent(n.content);break;case"execCommand":var o=!!m(n.ui)&&n.ui;t.execCommand(n.cmd,o,n.value);break;case"close":e.close();break;case"block":e.block(n.message);break;case"unblock":e.unblock()}}(n,w,o):!Cl(o)&&l(o)&&tC(o,"mceAction")&&t.onMessage(w,o))});b.set(e)}),rz(b.clear)]),uh.config({channels:((r={})[Of]={onReceive:function(t,e){io(t.element,"iframe").each(function(t){t.dom.contentWindow.postMessage(e,v)})}},r)})],extraStyles:g},t,d,o),w={block:function(t){if(!s(t))throw Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");S(function(e){ox(e,p0,{message:t})})},unblock:function(){S(function(t){oy(t,p1)})},close:function(){S(function(t){oy(t,pJ)})},sendMessage:function(t){S(function(e){e.getSystem().broadcastOn([Of],t)})}};function S(t){u.getSystem().isConnected()&&t(u)}return{dialog:u=x,instanceApi:w}}(t,{closeWindow:function(){Cp.hide(n.dialog),e(n.instanceApi)}},i,r);return Cp.show(n.dialog),n.instanceApi},t)},alert:function(t,e){c.open(t,function(){e()})},close:function(t){t.close()},confirm:function(t,e){f.open(t,function(t){e(t)})}}}({editor:t,backstage:o})),getNotificationManagerImpl:function(){var e;return e=o.shared,{open:function(o,r){function i(){r(),fF.hide(c)}var u=!o.closeButton&&o.timeout&&(0<o.timeout||o.timeout<0),a=r4(dV.sketch({text:o.text,level:tb(["success","error","warning","warn","info"],o.type)?o.type:void 0,progress:!0===o.progressBar,icon:tg.from(o.icon),closeButton:!u,onAction:i,iconProvider:e.providers.icons,translationProvider:e.providers.translate})),c=r4(fF.sketch(C({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:e.getSink,fireDismissalEventInstead:{}},e.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));function s(){var e=no(tE.fromDom(t.getContentAreaContainer())),n=nr(),o=un(n.x,e.x,e.right),r=un(n.y,e.y,e.bottom),i=Math.max(e.right,n.right),u=Math.max(e.bottom,n.bottom);return tg.some(nn(o,r,i-o,u-r))}return n.add(c),0<o.timeout&&fP.setTimeout(function(){i()},o.timeout),{close:i,moveTo:function(t,e){fF.showAt(c,oV(a),{anchor:{type:"makeshift",x:t,y:e}})},moveRel:function(t,n){var o,r,i,u=oV(a),l={maxHeightFunction:uL()};"banner"!==n&&p(t)?(o=function(){switch(n){case"bc-bc":return fN;case"tc-tc":return fR;case"tc-bc":return uc;default:return us}}(),r={type:"node",root:eZ(),node:tg.some(tE.fromDom(t)),overrides:l,layouts:{onRtl:function(){return[o]},onLtr:function(){return[o]}}},fF.showWithinBounds(c,u,{anchor:r},s)):(i=C(C({},e.anchors.banner()),{overrides:l}),fF.showWithinBounds(c,u,{anchor:i},s))},text:function(t){dV.updateText(a,t)},settings:o,getEl:function(){return a.element.dom},progressBar:{value:function(t){dV.updateProgress(a,t)}}}},close:function(t){t.close()},reposition:function(t){0<t.length&&ty(t,function(e,n){0===n?e.moveRel(null,"banner"):e.moveRel(t[n-1].getEl(),"bc-tc")})},getArgs:function(t){return t.settings}}},ui:c()}})}();