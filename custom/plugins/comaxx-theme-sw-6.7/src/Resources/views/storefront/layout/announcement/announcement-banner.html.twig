{% set comaxxAnnouncementBannerText = theme_config('comaxx-announcement-text') %}
{% set comaxxAnnouncementBannerStartDate = theme_config('comaxx-announcement-start-date') %}
{% set comaxxAnnouncementBannerEndDate = theme_config('comaxx-announcement-end-date') %}

{% set currentDate = "now"|date("Y-m-d") %}

{% if comaxxAnnouncementBannerStartDate is not empty %}
    {% set startDate = comaxxAnnouncementBannerStartDate|date("Y-m-d") %}
{% else %}
    {% set startDate = "1970-01-01" %} {# Default to a very old date if no start date is set #}
{% endif %}

{% if comaxxAnnouncementBannerEndDate is not empty %}
    {% set endDate = comaxxAnnouncementBannerEndDate|date("Y-m-d") %}
{% else %}
    {% set endDate = "9999-12-31" %} {# Default to a far future date if no end date is set #}
{% endif %}

{% if currentDate|date('U') >= startDate|date('U') and currentDate|date('U') <= endDate|date('U') %}
    {% block header_announcement_banner_inner %}
        <div class="announcement-banner-content" data-announcement-banner>
            <span class="announcement-banner-content-text">{{ 'comaxx.header.announcementbanner.text'|trans|sw_sanitize }}</span>
            <span class="icon icon-x icon-sm">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24"><defs><path d="m10.5858 12-7.293-7.2929c-.3904-.3905-.3904-1.0237 0-1.4142.3906-.3905 1.0238-.3905 1.4143 0L12 10.5858l7.2929-7.293c.3905-.3904 1.0237-.3904 1.4142 0 .3905.3906.3905 1.0238 0 1.4143L13.4142 12l7.293 7.2929c.3904.3905.3904 1.0237 0 1.4142-.3906.3905-1.0238.3905-1.4143 0L12 13.4142l-7.2929 7.293c-.3905.3904-1.0237.3904-1.4142 0-.3905-.3906-.3905-1.0238 0-1.4143L10.5858 12z" id="icons-default-x"></path></defs><use xlink:href="#icons-default-x" fill="#758CA3" fill-rule="evenodd"></use></svg>
            </span>
        </div>
    {% endblock %}
{% endif %}
