{% sw_extends '@ComaxxTheme/storefront/layout/navbar/navbar.html.twig' %}

{% set comaxxHeaderType = theme_config('comaxx-header-variant') %}
{% set comaxxShowSearch = theme_config('comaxx-header-search-show') %}
{% set comaxxShowHome = theme_config('comaxx-show-home-in-menu') %}
{% set comaxxMainMenuWidth = theme_config('comaxx-main-menu-width') %}
{% set comaxxLanguageShow = theme_config('comaxx-header-top-bar-show-language-menu') %}
{% set comaxxCurrenciesShow = theme_config('comaxx-header-top-bar-show-currencies-menu') %}
{% set comaxxLangCurLocation = theme_config('comaxx-header-language-currency-location') %}
{% set comaxxIconStyleClass = theme_config('comaxx-icon-style')|lower %}

{# Set class for header width #}
{% if comaxxMainMenuWidth == '1' %}
    {% set mainMenuClasses = 'container' %}
{% elseif comaxxMainMenuWidth == '2' %}
    {% set mainMenuClasses = 'container-fluid' %}
{% else %}
    {% set mainMenuClasses = '' %}
{% endif %}

{% block layout_navbar_main_nav %}
    {{ parent() }}

    {% block layout_header_actions_extended %}
        <div class="header-type-2-action-holder">
            {% block layout_header_search_extended %}
                <div class="col-12 order-2 col-sm order-sm-1 header-search-col">
                    <div class="row">
                        <div class="col-sm-auto d-none d-sm-flex d-lg-none">
                            {% block layout_header_navigation_toggle_tablet_extended %}
                                <div class="nav-main-toggle">
                                    {% block layout_header_navigation_toggle_tablet_button_extended %}
                                        <button class="btn nav-main-toggle-btn header-actions-btn" type="button" data-off-canvas-menu="true" aria-label="{{ 'general.menuLink'|trans|striptags }}">
                                            {% block layout_header_navigation_toggle_tablet_button_icon_extended %}
                                                <span class="icon material-symbols-{{ comaxxIconStyleClass }}">menu</span>
                                            {% endblock %}
                                        </button>
                                    {% endblock %}
                                </div>
                            {% endblock %}
                        </div>
                        {% if comaxxShowSearch %}
                            <div class="col">
                                {% sw_include '@Storefront/storefront/layout/header/search.html.twig' %}
                            </div>
                        {% endif %}
                    </div>
                </div>
            {% endblock %}

            <div class="col-8 order-1 col-sm-auto order-sm-2 header-actions-col">
                <div class="row g-0">
                    {% block layout_header_navigation_toggle_extended %}
                        <div class="col d-sm-none col-menu">
                            <div class="menu-button">
                                {% block layout_header_navigation_toggle_button_extended %}
                                    <button class="btn nav-main-toggle-btn header-actions-btn" type="button" data-off-canvas-menu="true" aria-label="{{ 'general.menuLink'|trans|striptags }}">
                                        {% block layout_header_navigation_toggle_button_icon_extended %}
                                            <span class="icon material-symbols-{{ comaxxIconStyleClass }}">menu</span>
                                        {% endblock %}
                                    </button>
                                {% endblock %}
                            </div>
                        </div>
                    {% endblock %}

                    {% block layout_header_search_toggle_extended %}
                        {% if comaxxShowSearch %}
                            <div class="col-auto d-sm-none">
                                <div class="search-toggle">
                                    <button class="btn header-actions-btn search-toggle-btn js-search-toggle-btn collapsed"
                                        type="button"
                                        data-bs-toggle="collapse"
                                        data-bs-target="#searchCollapse"
                                        aria-expanded="false"
                                        aria-controls="searchCollapse"
                                        aria-label="{{ 'header.searchButton'|trans|striptags }}">
                                        <span class="icon material-symbols-{{ comaxxIconStyleClass }}">search</span>
                                    </button>
                                </div>
                            </div>
                        {% endif %}
                    {% endblock %}

                    {% block layout_header_type_2_top_bar_items %}
                        {% if comaxxLangCurLocation == 'header-actions' %}
                            <div class="col-auto col-language d-none d-lg-flex">
                                {% if comaxxLanguageShow %}
                                    {% sw_include '@Storefront/storefront/layout/header/actions/language-widget.html.twig' %}
                                {% endif %}
                            </div>

                            <div class="col-auto col-currency d-none d-lg-flex">
                                {% if comaxxCurrenciesShow %}
                                    {% sw_include '@Storefront/storefront/layout/header/actions/currency-widget.html.twig' %}
                                {% endif %}
                            </div>
                        {% endif %}
                    {% endblock %}

                    {% if config('core.cart.wishlistEnabled') %}
                        {% block layout_header_actions_wishlist_extended %}
                            <div class="col-auto d-sm-none col-wishlist">
                                <div class="header-wishlist">
                                    <a class="btn header-wishlist-btn header-actions-btn"
                                        href="{{ path('frontend.wishlist.page') }}"
                                        title="{{ 'header.wishlist'|trans|striptags }}"
                                        aria-label="{{ 'header.wishlist'|trans|striptags }}">
                                        {% sw_include '@Storefront/storefront/layout/header/actions/wishlist-widget.html.twig' %}
                                    </a>
                                </div>
                            </div>
                        {% endblock %}
                    {% endif %}

                    {% block layout_header_actions_account_extended %}
                        <div class="col-auto col-account">
                            <div class="account-menu">
                                {% sw_include '@Storefront/storefront/layout/header/actions/account-widget.html.twig' %}
                            </div>
                        </div>
                    {% endblock %}

                    {% block layout_header_actions_cart_extended %}
                        <div class="col-auto col-cart">
                            <div class="header-cart" data-off-canvas-cart="true">
                                <a class="btn header-cart-btn header-actions-btn"
                                    href="{{ path('frontend.checkout.cart.page') }}"
                                    data-cart-widget="true"
                                    title="{{ 'checkout.cartTitle'|trans|striptags }}"
                                    aria-label="{{ 'checkout.cartTitle'|trans|striptags }}">
                                    {% sw_include '@Storefront/storefront/layout/header/actions/cart-widget.html.twig' %}
                                </a>
                            </div>
                        </div>
                    {% endblock %}
                </div>
            </div>
        </div>
    {% endblock %}
{% endblock %}
